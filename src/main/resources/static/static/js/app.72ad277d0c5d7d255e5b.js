webpackJsonp([6],{"+Ip0":function(e,t){},"/V9a":function(e,t){},"0Wrx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{address:[{required:!0,message:"必填:保养地址",trigger:"blur"}],carNo:[{required:!0,message:"必选:车牌号",trigger:"blur"}]},carRepairs:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],car:{},carRepair:{carNo:"",address:"",maintainDate:"",nowMileage:"",mks:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData();var e=this;this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var a=t.data;console.log(a),e.cars=a.root.cars}})},methods:{searchEmp:function(){this.loadEmps()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.carRepair.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.dialogFormVisible=!0,this.emptyData()},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.carRepair=t,this.carRepair.maintainDate=this.formatDate(t.maintainDate),this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,delete this.carRepair.noteMaker,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.carRepair.id?(t.tableLoading=!0,console.log(t.carRepair),t.postRequest("/vehicleRepair/addvmt",t.carRepair).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.carRepair),t.postRequest("/vehicleRepair/addvmt",t.carRepair).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除该次记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehicleRepair/delevmt?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehicleRepair/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.carRepairs=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.carRepair={carNo:"",address:"",maintainDate:"",nowMileage:"",mks:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n  \n        ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.carRepair,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"车牌号:",prop:"carNo"}},[a("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRepair.carNo)+"\n            ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"保养地址:",prop:"address"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"保养地址"},model:{value:e.carRepair.address,callback:function(t){e.$set(e.carRepair,"address",t)},expression:"carRepair.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"当前里程:",prop:"nowMileage"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",step:"100",min:"0",placeholder:"当前表盘里程"},model:{value:e.carRepair.nowMileage,callback:function(t){e.$set(e.carRepair,"nowMileage",t)},expression:"carRepair.nowMileage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"mks"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRepair.mks,callback:function(t){e.$set(e.carRepair,"mks",t)},expression:"carRepair.mks"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"维护里程:",prop:"maintenanceMile"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"下次维护里程"},model:{value:e.carRepair.maintenanceMile,callback:function(t){e.$set(e.carRepair,"maintenanceMile",t)},expression:"carRepair.maintenanceMile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"保养时间:",prop:"maintainDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"保养时间"},model:{value:e.carRepair.maintainDate,callback:function(t){e.$set(e.carRepair,"maintainDate",t)},expression:"carRepair.maintainDate"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carRepairs}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"carNo",align:"left",fixed:"",label:"车牌号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",align:"left",label:"保养地址",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"maintainDate",width:"120",align:"left",label:"保养时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.maintainDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nowMileage",width:"220",align:"left",label:"当次保养里程"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mks",width:"120",align:"left",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(e){a("7vo2")},null,null);t.default=s.exports},"0wq/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),n=a.n(i),l={data:function(){var e;return e={tempPlan:[],oddMaterial:{name:"",standard:"",quantity:"",unitName:"",notes:""},newMaterial:{name:"",standard:"",quantity:"",unitName:"",notes:""},confirmFormVisible:!1,positions:[{id:1,name:"一楼仓库"},{id:2,name:"二楼仓库"},{id:3,name:"注塑車間"},{id:4,name:"激光車間"},{id:5,name:"裝配車間"},{id:6,name:"加工車間"}],dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{productId:[{required:!0,message:"必选:产品名称",trigger:"change"}],unitId:[{required:!0,message:"必选:单位",trigger:"change"}],productNo:[{required:!0,message:"必填:数量",trigger:"blur"},{validator:function(e,t,a){/^\d+$/.test(t)?a():a("数字格式错误!")},message:"数字格式错误",trigger:"blur"}]},middleProducts:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[],confirmDialogTitle:"采购确认单",nowMaterial:{quantity:"",notes:"",complete:""}},n()(e,"newMaterial",{name:"",specifications:"",quantity:"",unitName:"",notes:""}),n()(e,"outRecive",{quantity:"",note:"",materialId:""}),n()(e,"dialogInTitle","采购添加"),n()(e,"dialogFormInVisible",!1),e},mounted:function(){this.initData()},methods:{tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.buyStatus?"warning-row":"success-row"},cancelOptIn:function(){this.dialogFormInVisible=!1,this.loadData()},addInData:function(e){var t=this,a=this;if(""==this.outRecive.quantity)return Message.error({message:"请输入数量"}),!1;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(a.outRecive),t.getRequest("/midProductInRecieving/add?id="+t.outRecive.materialId+"&quaity="+t.outRecive.quantity+"&notes="+t.outRecive.note).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormInVisible=!1,a.loadData(),a.emptyInData()}})})},emptyInData:function(){this.outRecive={quaity:"",materailId:"",note:""}},selfbuy:function(e){this.outRecive.materialId=e.id,this.dialogFormInVisible=!0},popConfirm:function(e){var t=this;this.$prompt("请输入出库数量","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number",inputValidator:function(a){if(console.log(a),parseInt(a)>parseInt(e.quantity))return t.$message({type:"info",message:"数量过大"}),!1},inputErrorMessage:"非法输入！"}).then(function(a){var i=a.value;t.getRequest("/midProductOutRecieving/add?id="+e.id+"&quantity="+i).then(function(e){if(e&&200==e.status){e.data;t.loadData(),t.$message({type:"success",message:"出库成功!"})}})}).catch(function(){t.$message({type:"info",message:"取消输入"})})},handleCurrentChange:function(e){console.log(e),this.newMaterial=e},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.middleProduct.utilname=a.name)})},clearNewMaterial:function(){console.log("clear"),this.newMaterial={name:"",specifications:"",quantity:"",unitName:"",notes:"",id:0},this.nowMaterial={quantity:"",notes:"",complete:""},this.confirmDialogTitle="采购确认单"},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var a="",i=e.plant;return this.positions.forEach(function(e,t,n){i.forEach(function(t,i,n){e.id==t&&(a+=e.name+" , ")})}),a},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){var e=this;e.loadData(),this.getRequest("/middleProduct/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients,e.products=a.root.products}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushData:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},handleNodeClick:function(e){this.middleProduct.clientName=e.name,this.middleProduct.clientId=e.id,this.pName=e.name,this.pId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.middleProduct.clientName="",this.middleProduct.clientId=""},cancelChoos:function(){console.log(this.pName),this.middleProduct.clientName=this.pName,this.middleProduct.clientId=this.pId},searchData:function(){this.loadData()},showEditView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.middleProduct=t,this.middleProduct.productId=t.productId,delete this.middleProduct.units,this.dialogFormVisible=!0},showBuyConfirm:function(e,t){var a=this;a.tableLoading=!0,this.confirmDialogTitle=t.name+this.confirmDialogTitle,this.getRequest("/midBuyPlanDetail/buyPlanDetail?materailId="+t.id).then(function(e){if(a.tableLoading=!1,e&&200==e.status){var t=[];e.data.root.midproductlist.forEach(function(e,a,i){t.push({name:e[0],specifications:e[1],quantity:e[2],confirmStatus:e[3],unitName:e[4],createDate:e[5],planSerialNumber:e[6],note:e[7],id:e[8]})}),a.matriallist=t}}),this.confirmFormVisible=!0},planConfirm:function(e){var t=this,a=this;return console.log(a.newMaterial.id),console.log(a.nowMaterial.complete),0==a.newMaterial.id?(a.$message({type:"info",message:"请选择采购计划！"}),!1):""==a.nowMaterial.complete?(a.$message({type:"info",message:"请选择是否完成！"}),!1):""==this.nowMaterial.quantity||0==this.nowMaterial.quantity?(a.$message({type:"info",message:"请填入实收数量！"}),!1):void this.$confirm("当前选择的是,"+this.newMaterial.name+"入库数量为："+this.nowMaterial.quantity+" 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$refs[e].validate(function(e){e&&a.getRequest("/midPruchaseVerify/add?purchasePlanDetailId="+a.newMaterial.id+"&confirmStatus="+a.nowMaterial.complete+"&quantity="+a.nowMaterial.quantity+"&notes="+a.nowMaterial.notes).then(function(e){if(e&&200==e.status){e.data;a.loadData(),a.confirmFormVisible=!1}})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var a=this,i=_.cloneDeep(this.middleProduct);i.plant=i.plant.join(","),this.$refs[e].validate(function(e){if(!e)return!1;t.middleProduct.id?(t.tableLoading=!0,console.log(t.middleProduct),t.postRequest("/middleProduct/update",i).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.middleProduct),t.postRequest("/middleProduct/add",i).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/middleProduct/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/middleProduct/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;i.forEach(function(e,t,a){e.plant=e.plant.split(",")}),t.middleProducts=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addDataForm",attrs:{model:e.middleProduct,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入半成品名称。。。"},model:{value:e.middleProduct.name,callback:function(t){e.$set(e.middleProduct,"name",t)},expression:"middleProduct.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规格:",prop:"standard"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"半成品规格、大小"},model:{value:e.middleProduct.standard,callback:function(t){e.$set(e.middleProduct,"standard",t)},expression:"middleProduct.standard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型:"}},[a("el-radio-group",{on:{change:e.selectType},model:{value:e.middleProduct.productStyle,callback:function(t){e.$set(e.middleProduct,"productStyle",t)},expression:"middleProduct.productStyle"}},[a("el-radio",{attrs:{label:"1"}},[e._v("常备")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"2"}},[e._v("普通")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"单位:",prop:"unitId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择单位"},on:{change:e.selectChange},model:{value:e.middleProduct.unitId,callback:function(t){e.$set(e.middleProduct,"unitId",t)},expression:"middleProduct.unitId"}},e._l(e.units,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"存放位置:",prop:"plant"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"",size:"mini",placeholder:"请选择位置"},model:{value:e.middleProduct.plant,callback:function(t){e.$set(e.middleProduct,"plant",t)},expression:"middleProduct.plant"}},e._l(e.positions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.middleProduct.note,callback:function(t){e.$set(e.middleProduct,"note",t)},expression:"middleProduct.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addDataForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogInTitle,"close-on-click-modal":!1,visible:e.dialogFormInVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormInVisible=t},close:e.cancelOptIn}},[e.dialogFormInVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addInData",attrs:{model:e.outRecive,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"采购数量..."},model:{value:e.outRecive.quantity,callback:function(t){e.$set(e.outRecive,"quantity",t)},expression:"outRecive.quantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"规格..."},model:{value:e.outRecive.note,callback:function(t){e.$set(e.outRecive,"note",t)},expression:"outRecive.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormInVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addInData("addInData")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.confirmDialogTitle,"close-on-click-modal":!1,visible:e.confirmFormVisible,width:"650px"},on:{"update:visible":function(t){e.confirmFormVisible=t},close:e.clearNewMaterial}},[e.confirmFormVisible?a("div",{staticStyle:{width:"100%"},attrs:{height:"200"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.matriallist,border:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"planSerialNumber",align:"left",fixed:"",label:"采购编号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"下单时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n           "+e._s(e._f("formatDate")(t.row.createDate))+"\n         ")]}}],null,!1,450011427)}),e._v(" "),a("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n         "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n       ")]}}],null,!1,3015498410)}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注",width:"240"}})],1),e._v(" "),e.newMaterial.name?a("div",{staticStyle:{padding:"16px","text-align":"left",border:"1px solid gainsboro"}},[e._v("\n       当前选择：\n    \n     "),a("div",{staticStyle:{display:"flex","justify-content":"space-around",padding:"5px"}},[a("div",[e._v("\n       名称:"+e._s(e.newMaterial.name)+" \n         ")]),e._v(" "),a("div",[e._v("\n       规格:"+e._s(e.newMaterial.specifications)+"\n         ")]),e._v(" "),a("div",[e._v("\n       数量:"+e._s(e.newMaterial.quantity)+" "+e._s(e.newMaterial.unitName)+" \n         ")]),e._v(" "),a("div",[e._v("\n       备注:"+e._s(e.newMaterial.note)+" \n         ")])])]):e._e(),e._v(" "),a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-form",{ref:"newconfirmForm",attrs:{model:e.nowMaterial,rules:e.rules,size:"sam","label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"收货数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"当次实际收货数量"},model:{value:e.nowMaterial.quantity,callback:function(t){e.$set(e.nowMaterial,"quantity",t)},expression:"nowMaterial.quantity"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注"},model:{value:e.nowMaterial.notes,callback:function(t){e.$set(e.nowMaterial,"notes",t)},expression:"nowMaterial.notes"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"完成:"}},[a("el-radio-group",{model:{value:e.nowMaterial.complete,callback:function(t){e.$set(e.nowMaterial,"complete",t)},expression:"nowMaterial.complete"}},[a("el-radio",{attrs:{label:2}},[e._v("完成")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:1}},[e._v("未完成")])],1)],1)],1)])],1)],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.confirmFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.planConfirm("newconfirmForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.middleProducts,border:"","row-class-name":e.tableRowClassName}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"standard",align:"left",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"半成品数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.productNo)+e._s(t.row.unit.name)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"productStyle",align:"left",formatter:e.formatStyle,label:"类型",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plantName",align:"left",formatter:e.formatPlant,label:"存放地点",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditView(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n          ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.selfbuy(t.row)}}},[e._v("厂部自购\n          ")]),e._v(" "),t.row.buyStatus?a("el-badge",{attrs:{value:"new"}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showBuyConfirm(t.$index,t.row)}}},[e._v("采购确认\n            ")])],1):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(e){a("Ya/P")},null,null);t.default=s.exports},"2MWp":function(e,t){},"2QJa":function(e,t){},"2tLV":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("VeYG"),n=a("lGFz"),l=a("0Wrx"),o=a("hR2O"),s=a("Ave/"),r={data:function(){return{activeName:"cars"}},methods:{handleClick:function(e,t){console.log(e,t)}},components:{cars:i.default,carsrecord:n.default,repair:l.default,carred:o.default,carsres:s.default}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"车辆基本信息",name:"cars",lazy:""}},[a("cars",{ref:"child"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"车辆驾驶记录",name:"carsRecord",lazy:""}},[a("carsrecord",{ref:"child"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"车辆维护",name:"carsRepair",lazy:""}},[a("repair",{ref:"child"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"车辆申请",name:"carsRequest",lazy:""}},[a("carsres",{ref:"child"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"车辆分配",name:"carsAlot",lazy:""}},[a("carred",{ref:"child"})],1)],1)],1)},staticRenderFns:[]},d=a("VU/8")(r,c,!1,null,null,null);t.default=d.exports},"32wl":function(e,t){},"37t0":function(e,t){},"3CVU":function(e,t){},"3L9A":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("zL8q"),n={data:function(){return{defaultProps:{value:"id",label:"name",children:"child"},rules:{planNumber:[{required:!0,message:"必填:数量",trigger:"blur"}]},options:[{value:"自提",label:"自提"},{value:"送货上门",label:"送货上门"},{value:"其他(备注)",label:"其他(备注)"}],selectedStep:{},pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,types:2,midProduct:[],plans:[],clients:[],units:[],dialogTitle:"",currentPage:1,totalCount:-1,currentRePage:1,totalReCount:-1,currentSePage:1,totalSeCount:-1,currentVePage:1,totalVeCount:-1,detail:{id:0,planNumber:"",destination:"",receiveWay:"",receiver:"",relation:"",note:""},dialogFormVisible:!1,dialogMaterialVisible:!1,dialogMaterialTitle:"请选择产品",activePanel:"1",manageStatus:"4",showPlan:!0,detailPage:1,CurrentSalesId:"",getUrl:"",showDetaillist:!1,detailsList:[],dialogSendTitle:"",dialogSendVisible:!1,confirmData:{id:0,responseDetailsId:0,clientId:"",dispatchBillNo:"",boxs:"",consignee:"",consigneePhone:"",address:"",consigner:"",consignerPhone:"",remarks:"",cargoName:"",freights:"",shortHaulMoney:"",freightDetails:"",collFreight:"",collFreightBig:"",serviceCode:"",receipt:"",totalMoney:"",stype:""},currentSale:0,payCode:[{value:"微信",label:"微信"},{value:"支付宝",label:"支付宝"},{value:"银行卡",label:"银行卡"},{value:"现金",label:"现金"},{value:"其他（备注）",label:"其他（备注）"}],serviceCodes:[{value:"送货回单",label:"送货回单"},{value:"自提",label:"自提"}],rulesSend:{clientId:[{required:!0,message:"必须选:物流公司",trigger:"blur"}]},dialogVisitTitle:"回访记录",dialogVisitVisible:!1,visit:{note:"",id:0,billId:"",billstatus:""},visitRules:{}}},mounted:function(){this.initData()},methods:{visitChange:function(e,t){},billstatus:function(e){return"1"===e.billstatus?"未到":"2"===e.billstatus?"到达":"签收"},returnVisit:function(e){this.visit.billId=e.id,this.dialogVisitVisible=!0},addViist:function(e){var t=this,a=this,n=_.cloneDeep(this.visit);this.$refs[e].validate(function(e){if(!e)return!1;n.id?(t.tableLoading=!0,console.log(a.plan),t.postRequest("/returnvisit/add",n).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success&&(a.dialogVisitVisible=!1,a.loadData(),a.cancelvisit())})):(t.tableLoading=!0,t.postRequest("/returnvisit/add",n).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success?(a.dialogVisitVisible=!1,a.loadData(),a.cancelvisit()):Object(i.Message)("添加失败")}))})},cancelvisit:function(){this.visit={note:"",id:0,billId:"",billstatus:""}},cancelSend:function(){this.confirmData={id:0,responseDetailsId:0,clientId:"",dispatchBillNo:"",boxs:"",consignee:"",consigneePhone:"",address:"",consigner:"",consignerPhone:"",remarks:"",cargoName:"",freights:"",shortHaulMoney:"",freightDetails:"",collFreight:"",collFreightBig:"",serviceCode:"",receipt:"",totalMoney:"",stype:""}},confirmDelivery:function(e,t){console.log("16a16541a65s4df65a"),this.dialogSendTitle="发货确认",this.confirmData.responseDetailsId=t.id,this.dialogSendVisible=!0},confirmAdd:function(e){var t=this,a=this,n=_.cloneDeep(this.confirmData);n.clientId=n.clientId.pop(),this.$refs[e].validate(function(e){if(!e)return!1;n.id?(t.tableLoading=!0,console.log(a.plan),t.postRequest("/shippingBill/add",n).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogSendVisible=!1,a.loadData(),a.showDetaillist(),a.cancelSend())})):(t.tableLoading=!0,t.postRequest("/shippingBill/add",n).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success?(a.dialogSendVisible=!1,a.loadData(),a.cancelSend()):Object(i.Message)("添加失败")}))})},deliveryRequest:function(e){this.dialogTitle="发货请求";this.CurrentSalesId=e.id,this.dialogFormVisible=!0},showDetails:function(e){this.currentSale=e,this.detailsList=e.details,this.showDetaillist=!0},handleClick:function(){switch(console.log(this.activePanel),this.activePanel){case"1":this.manageStatus="4";break;case"2":this.manageStatus="1";break;case"4":this.manageStatus="2"}this.loadData()},formatStatus:function(e,t){return 1===e.materialType?"已确认":"未确认"},initData:function(){var e=this;e.loadData(),this.getRequest("/productionplan/basedata").then(function(t){t&&200===t.status&&t.data.success?e.clients=e.toTree(t.data.root.clients):Object(i.Message)("初始化公司错误！@")})},keywordsChange:function(e){""===e&&this.loadData()},keywordsMaterialChange:function(e){""===e&&this.loadMaterial()},showCurrentNo:function(){this.isprarent?this.isprarent=!1:this.isprarent=!0},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentReChange:function(e){this.currentRePage=e,console.log(this.currentRePage),this.loadData()},currentSeChange:function(e){this.currentSePage=e,console.log(this.currentSePage),this.loadData()},currentVeChange:function(e){this.currentVePage=e,console.log(this.currentVePage),this.loadData()},addAndFlushData:function(){this.dialogTitle="发货请求";this.dialogFormVisible=!0},searchData:function(){this.loadData()},add:function(e){var t=this,a=this,n=_.cloneDeep(this.detail),l={shippingRequestDetails:n};this.$refs[e].validate(function(e){if(!e)return!1;a.detail.id?(t.tableLoading=!0,console.log(a.plan),t.postRequest("/shippingrequestdetails/update",l).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,t.postRequest("/shippingrequestdetails/add?salesPlanId="+t.CurrentSalesId,n).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success?(a.dialogFormVisible=!1,a.loadData(),a.emptyData()):Object(i.Message)("添加失败")}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),this.emptyData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/sales/delete?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success?t.loadData():t.$message({type:"info",message:"删除失败！"})})},loadData:function(){var e=this,t=this;switch(this.tableLoading=!0,this.activePanel){case"1":this.getUrl="/sales/findnotshipping?page="+this.currentPage+"&size=10&status="+this.manageStatus;break;case"2":this.getUrl="/shippingrequest/findbypage?page="+this.currentRePage+"&size=10";break;case"4":this.getUrl="/shippingBill/findbypage?page="+this.currentSePage+"&size=10";case"5":this.getUrl="/returnvisit/findbypage?page="+this.currentVePage+"&size=10"}this.getRequest(this.getUrl).then(function(a){if(e.tableLoading=!1,a&&200===a.status&&a.data.success){switch(t.plans=a.data.data,console.log(t.plans),e.activePanel){case"1":t.totalCount=a.data.total;break;case"2":t.totalReCount=a.data.total;break;case"4":t.totalSeCount=a.data.total;break;case"5":t.totalVeCount=a.data.total}t.currentSale&&t.showDetaillist&&t.showDetails(t.currentSale),t.emptyData()}})},emptyData:function(){this.CurrentSalesId="",this.detail={id:0,planNumber:"",destination:"",receiveWay:"",receiver:"",relation:"",note:""}},back:function(){this.showDetaillist=!this.showDetaillist},preDataSale:function(e){if(e.length)for(var t=e.length-1;t>=0;t--){var a=e[t];switch(a.status+""){case"1":a.bgcolor="#eeeeee";break;case"2":a.bgcolor="yellowgreen";break;case"3":a.bgcolor="green";break;case"4":a.bgcolor="#e4e4e4";break;case"5":a.bgcolor="#2974df";break;case"6":a.bgcolor="#85ce61"}}return e},toTree:function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.child});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.parentClientId];i?(i.child||(i.child=[])).push(e):t.push(e)}),console.log(t),t}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[e.showDetaillist?a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-arrow-left"},on:{click:e.back}},[e._v("\n        返回\n      ")]):e._e()],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogSendTitle,"close-on-click-modal":!1,visible:e.dialogSendVisible,width:"1150px"},on:{"update:visible":function(t){e.dialogSendVisible=t},close:e.cancelSend}},[e.dialogSendVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"sendForm",attrs:{model:e.confirmData,rules:e.rulesSend,size:"mini","label-width":"80px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"物流名:",prop:"clientId"}},[a("el-cascader",{staticClass:"send-input",attrs:{placeholder:"--选择物流公司--",options:e.clients,props:e.defaultProps,filterable:"","show-all-levels":!1,"change-on-select":""},model:{value:e.confirmData.clientId,callback:function(t){e.$set(e.confirmData,"clientId",t)},expression:"confirmData.clientId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"货名:",prop:"cargoName"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"货名"},model:{value:e.confirmData.cargoName,callback:function(t){e.$set(e.confirmData,"cargoName",t)},expression:"confirmData.cargoName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"运费:",prop:"freights"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",placeholder:"运费"},model:{value:e.confirmData.freights,callback:function(t){e.$set(e.confirmData,"freights",t)},expression:"confirmData.freights"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"件数:",prop:"boxs"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",placeholder:"件数"},model:{value:e.confirmData.boxs,callback:function(t){e.$set(e.confirmData,"boxs",t)},expression:"confirmData.boxs"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收货地:",prop:"address"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"收货地址"},model:{value:e.confirmData.address,callback:function(t){e.$set(e.confirmData,"address",t)},expression:"confirmData.address"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收货人:",prop:"consignee"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"收货人"},model:{value:e.confirmData.consignee,callback:function(t){e.$set(e.confirmData,"consignee",t)},expression:"confirmData.consignee"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"电话:",prop:"consigneePhone"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",placeholder:"收货人电话"},model:{value:e.confirmData.consigneePhone,callback:function(t){e.$set(e.confirmData,"consigneePhone",t)},expression:"confirmData.consigneePhone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"方式:",prop:"stype"}},[a("el-select",{staticClass:"send-input",attrs:{filterable:"",placeholder:"----支付方式----"},model:{value:e.confirmData.stype,callback:function(t){e.$set(e.confirmData,"stype",t)},expression:"confirmData.stype"}},e._l(e.payCode,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"服务:",prop:"serviceCode"}},[a("el-select",{staticClass:"send-input",attrs:{filterable:"",placeholder:"----请选择服务方式----"},model:{value:e.confirmData.serviceCode,callback:function(t){e.$set(e.confirmData,"serviceCode",t)},expression:"confirmData.serviceCode"}},e._l(e.serviceCodes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"回单:",prop:"receipt"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"回单信息"},model:{value:e.confirmData.receipt,callback:function(t){e.$set(e.confirmData,"receipt",t)},expression:"confirmData.receipt"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"上门费:",prop:"shortHaulMoney"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",placeholder:"上门费"},model:{value:e.confirmData.shortHaulMoney,callback:function(t){e.$set(e.confirmData,"shortHaulMoney",t)},expression:"confirmData.shortHaulMoney"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"详情:",prop:"freightDetails"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"运费详情"},model:{value:e.confirmData.freightDetails,callback:function(t){e.$set(e.confirmData,"freightDetails",t)},expression:"confirmData.freightDetails"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发货人:",prop:"consigner"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"发货人"},model:{value:e.confirmData.consigner,callback:function(t){e.$set(e.confirmData,"consigner",t)},expression:"confirmData.consigner"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"电话:",prop:"consignerPhone"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"发货人电话"},model:{value:e.confirmData.consignerPhone,callback:function(t){e.$set(e.confirmData,"consignerPhone",t)},expression:"confirmData.consignerPhone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收货款:",prop:"collFreight"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",placeholder:"代收货款"},model:{value:e.confirmData.collFreight,callback:function(t){e.$set(e.confirmData,"collFreight",t)},expression:"confirmData.collFreight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"大写:",prop:"collFreightBig"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",disabled:!0,placeholder:"代收货款大写"},model:{value:e.confirmData.collFreightBig,callback:function(t){e.$set(e.confirmData,"collFreightBig",t)},expression:"confirmData.collFreightBig"}})],1)],1)],1),e._v(" "),a("el-row"),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单号:",prop:"dispatchBillNo"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"单号"},model:{value:e.confirmData.remarks,callback:function(t){e.$set(e.confirmData,"remarks",t)},expression:"confirmData.remarks"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"备注:",prop:"remarks"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"textarea",placeholder:"备注"},model:{value:e.confirmData.remarks,callback:function(t){e.$set(e.confirmData,"remarks",t)},expression:"confirmData.remarks"}})],1)],1)],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSendVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmAdd("sendForm")}}},[e._v("确 定")])],1)]),e._v(" "),e.dialogFormVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"550px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addForm",attrs:{model:e.detail,rules:e.rules,size:"mini","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-form-item",{attrs:{label:"发货数量",prop:"planNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",placeholder:"发货数量"},model:{value:e.detail.planNumber,callback:function(t){e.$set(e.detail,"planNumber",t)},expression:"detail.planNumber"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"收货人",prop:"receiver"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"收货人"},model:{value:e.detail.receiver,callback:function(t){e.$set(e.detail,"receiver",t)},expression:"detail.receiver"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"联系方式",prop:"relation"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"联系人电话"},model:{value:e.detail.relation,callback:function(t){e.$set(e.detail,"relation",t)},expression:"detail.relation"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"收货方式:",prop:"receiveWay"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"----请选择----"},model:{value:e.detail.receiveWay,callback:function(t){e.$set(e.detail,"receiveWay",t)},expression:"detail.receiveWay"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"收货地址",prop:"destination"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"收货地址"},model:{value:e.detail.destination,callback:function(t){e.$set(e.detail,"destination",t)},expression:"detail.destination"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"textarea",placeholder:"备注"},model:{value:e.detail.note,callback:function(t){e.$set(e.detail,"note",t)},expression:"detail.note"}})],1)],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addForm")}}},[e._v("确 定")])],1)]):e._e(),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogVisitTitle,"close-on-click-modal":!1,visible:e.dialogVisitVisible,width:"550px"},on:{"update:visible":function(t){e.dialogVisitVisible=t},close:e.cancelvisit}},[e.dialogVisitVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addVisitForm",attrs:{model:e.visit,rules:e.visitRules,size:"mini","label-width":"80px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-form-item",{attrs:{label:"到达:",prop:"billstatus"}},[a("el-radio-group",{model:{value:e.visit.billstatus,callback:function(t){e.$set(e.visit,"billstatus",t)},expression:"visit.billstatus"}},[a("el-radio",{attrs:{label:1}},[e._v("未到达")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:2}},[e._v("已到达")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:3}},[e._v("已签收")])],1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"textarea",placeholder:"备注"},model:{value:e.visit.note,callback:function(t){e.$set(e.visit,"note",t)},expression:"visit.note"}})],1)],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisitVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addViist("addVisitForm")}}},[e._v("确 定")])],1)]),e._v(" "),e.showDetaillist?e._e():a("div",[a("el-tabs",{attrs:{type:"card","tab-position":"top"},on:{"tab-click":e.handleClick},model:{value:e.activePanel,callback:function(t){e.activePanel=t},expression:"activePanel"}},[a("el-tab-pane",{attrs:{label:"销售计划",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"发货请求",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"发货记录",name:"4"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"回访记录",name:"5"}})],1),e._v(" "),"1"===e.activePanel?a("div",[a("div",{staticClass:"main-plan-progress-plan flex-send"},e._l(e.plans,function(t,i){return a("div",{key:t.id,staticClass:"item-send",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-send-show",style:{backgroundColor:t.bgcolor}},[a("div",[a("div",{staticClass:"text-alight"},[e._v("客户:"+e._s(t.client.name))]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                产品:"+e._s(t.product.producteName)+"\n                /"+e._s(t.specification.name)+"\n                /"+e._s(t.color.name)+"\n              ")]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                型号："+e._s(t.productNo)+"\n              ")]),e._v(" "),a("div",[a("u",[e._v("总数\n                  :"+e._s(t.quantity)+"|")]),e._v(" "),a("u",[e._v(" 下发:"+e._s(t.nextQuantity)+"|")]),e._v(" "),a("u",[e._v(" 完成:"+e._s(t.endQuantity)+"枚| ")]),e._v(" "),a("u",[e._v("未下发："+e._s(t.quantity-t.nextQuantity))])]),e._v(" "),a("div",[e._v(e._s(t.planString))]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                备注："+e._s(t.notes)+"\n              ")])]),e._v(" "),a("div",[a("el-button",{staticStyle:{padding:"4px",margin:"4px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.deliveryRequest(t)}}},[e._v("发货请求\n              ")]),e._v(" "),a("el-button",{staticStyle:{padding:"4px",margin:"4px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.completeSend(t)}}},[e._v("结束请求\n              ")])],1)])])}),0),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1),e._v(" "),0===e.plans.length?a("div",[e._v("\n        暂无数据\n      ")]):e._e()]):e._e(),e._v(" "),"2"===e.activePanel?a("div",[a("div",{staticClass:"main-plan-progress-plan flex-send"},e._l(e.plans,function(t,i){return a("div",{key:t.id,staticClass:"item-send",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-send-show",staticStyle:{backgroundColor:"orange"}},[a("div",[a("div",{staticClass:"text-alight"},[e._v("客户:"+e._s(t.salesPlan.client.name))]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                产品:"+e._s(t.salesPlan.product.producteName)+"\n              ")]),e._v(" "),a("div",[e._v(" 日期:"+e._s(e._f("formatDateTime")(t.createDate)))]),e._v(" "),t.remarks?a("div",[e._v("备注:"+e._s(t.remarks))]):e._e()]),e._v(" "),a("div",[a("el-button",{staticStyle:{padding:"4px",margin:"4px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.showDetails(t)}}},[e._v("查看详情\n              ")])],1)])])}),0),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentRePage,layout:"prev, pager, next",total:e.totalReCount},on:{"current-change":e.currentReChange}})],1),e._v(" "),0===e.plans.length?a("div",[e._v("\n        暂无数据\n      ")]):e._e()]):e._e(),e._v(" "),"4"==e.activePanel?a("div",[a("div",{staticClass:"main-plan-progress-plan flex-send"},e._l(e.plans,function(t,i){return a("div",{key:t.id,staticClass:"item-send",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-send-show",staticStyle:{backgroundColor:"orange"}},[a("div",[a("div",{staticClass:"text-alight"},[e._v("客户:"+e._s(t.shippingBill.client.name))]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("货名："+e._s(t.cargoName)+"*"+e._s(t.boxs)+"件")]),e._v(" "),t.dispatchBillNo?a("div",{staticClass:"text-alight"},[e._v("单号："+e._s(t.dispatchBillNo))]):e._e(),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("收货人："+e._s(t.consignee)+"--"+e._s(t.consigneePhone))]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("收货地："+e._s(t.address)+"--"+e._s(t.consigneePhone))]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("状态："+e._s(e.billstatus(t)))]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("备注："+e._s(t.remarks))])]),e._v(" "),a("div",[a("el-button",{staticStyle:{padding:"4px",margin:"4px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.returnVisit(t)}}},[e._v("新回访\n              ")])],1)])])}),0),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentSePage,layout:"prev, pager, next",total:e.totalSeCount},on:{"current-change":e.currentSeChange}})],1),e._v(" "),0==e.plans.length?a("div",[e._v("\n        暂无数据\n      ")]):e._e()]):e._e(),e._v(" "),"5"===e.activePanel?a("div",[a("div",{staticClass:"main-plan-progress-plan flex-send"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.plans,fit:"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"left",fixed:"",label:"回访人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.recorder.name)+"\n            ")]}}],null,!1,618886958)}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"收货人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.shippingBill.consignee)+"\n            ")]}}],null,!1,1230037723)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"发货时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("formatDateTime")(t.row.shippingBill.createDate))+"\n            ")]}}],null,!1,3112256929)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"产品详情"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("formatDateTime")(t.row.shippingBill.createDate))+"\n            ")]}}],null,!1,3112256929)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.visitChange(t.$index,t.row)}}},[e._v("修改\n                ")])],1)]}}],null,!1,1853698261)})],1)],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentVePage,layout:"prev, pager, next",total:e.totalVeCount},on:{"current-change":e.currentVeChange}})],1),e._v(" "),0==e.plans.length?a("div",[e._v("\n        暂无数据\n      ")]):e._e()]):e._e()],1),e._v(" "),e.showDetaillist?a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.detailsList,fit:"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"planNumber",align:"left",fixed:"",label:"发货数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receiveWay",align:"left",label:"收货方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receiver",align:"left",label:"收货人",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"relation",align:"left",label:"联系方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"destination",align:"left",label:"发货地址"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"发货时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n        ")]}}],null,!1,1258927574)}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.confirmDelivery(t.$index,t.row)}}},[e._v("确认发货\n            ")])],1)]}}],null,!1,533668293)})],1)],1):e._e()],1)},staticRenderFns:[]};var o=a("VU/8")(n,l,!1,function(e){a("PffU")},null,null);t.default=o.exports},"4K/P":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),n=a.n(i),l=a("zL8q"),o={data:function(){var e;return e={keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,colors:[],units:[],rules:{producteName:[{required:!0,message:"必填:名称",trigger:"blur"}]},selectSteps:[],steps:[],products:[],dialogTitle:"",currentPage:1,totalCount:-1,process:{name:""},currentRowData:[],product:{producteName:"",specification:"",proType:"",color:"",clientName:"",clientId:"",sysUnitId:0},processModel:{currentSteps:"",productId:0,processName:""},productId:"",currentProgress:[],addProgress:[],updateProgress:[],deleteProgress:[],olderProgress:[],midProduct:[],dialogTableVisible:!1,dialogFormVisible:!1,processVisible:!1},n()(e,"currentRowData",{}),n()(e,"currentIndex",""),n()(e,"renderFunc",function(e,t){return console.log(t),console.log(e),t.workstepName}),n()(e,"detail",{id:0,sid:0,midProductId:0,name:"",quantity:"",mtype:""}),n()(e,"details",[]),n()(e,"currentDeleteData",[]),n()(e,"maxSid",0),n()(e,"clients",[]),n()(e,"specs",[]),n()(e,"depTextColor",""),n()(e,"showOrHidePop",!1),n()(e,"showHidePop",!1),n()(e,"defaultProps",{label:"name",isLeaf:"leaf",children:"child"}),n()(e,"dialogMaterialTitle",""),n()(e,"dialogMaterialVisible",!1),n()(e,"keyMaterialwords",""),n()(e,"selectedM",{}),n()(e,"totalMaterialCount",-1),n()(e,"currentMaterialPage",1),n()(e,"selectMaterial",{}),n()(e,"currentSelectStepIds",[]),e},mounted:function(){this.initData()},methods:{selcetSteps:function(){this.loadMaterial()},cancelchoose:function(){this.selectMaterial={},this.selectedM={}},deleteSelected:function(e,t){this.selectSteps.splice(e,1)},searchMaterialData:function(){this.loadMaterial()},keywordsMaterialChange:function(e){""==e&&this.loadMaterial()},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},currentMaterialChange:function(){this.currentMaterialPage=currentChange,this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectMaterial.id>0){var a=this.selectMaterial.name+";";this.$confirm("您当前选择了"+a+"确认选择该工序吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(){var e=this.selectMaterial;console.log(e);var t=!1;this.selectSteps.length&&this.selectSteps.forEach(function(a,i,n){a.id==e.id&&(t=!0)}),t||this.selectSteps.push(e),this.dialogMaterialVisible=!1},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productpreprocess/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.materialList=i,t.totalMaterialCount=a.data.total,t.dialogMaterialVisible=!0}})},handleNodeClick:function(e){this.product.clientId=e.id,this.product.clientName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.product.clientId=0,this.product.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(a,i,n){a.id==e&&(t.detail.name=a.name,t.detail.midProductId=a.id)})},addBox:function(){var e=this;if(console.log("添加"),""===this.detail.quantity||void 0===this.detail.quantity)return Object(l.Message)("请输入数量"),!1;if(""===this.detail.name||void 0===this.detail.name)return Object(l.Message)("请选择物料"),!1;if(this.details.length>0){var t=!1;e.details.forEach(function(a,i,n){a.midProductId===e.detail.midProductId&&(t=!0,a.quantity=parseFloat(e.detail.quantity),"odd"===a.mtype&&(a.mtype="update"))}),t||(this.maxSid++,this.detail.sid=this.maxSid,this.detail.mtype="new",this.details.push(this.detail))}else this.detail.sid=1,this.detail.mtype="new",this.maxSid++,this.details.push(this.detail);this.emptyDetail()},editeDetail:function(e,t){this.detail=t},deleteDetail:function(e,t){console.log("delete");var a=this.details.splice(e,1);"odd"===a[0].mtype&&(a[0].mtype="delete",this.currentDeleteData.push(a[0])),this.maxSid--},emptyDetail:function(){this.detail={id:0,sid:0,midProductId:0,name:"",quantity:"",mtype:""},this.currentDeleteData=[]},cancelOpt:function(){this.dialogFormVisible=!1,this.emptyDetail(),this.details=[],this.loadData()},cancelpre:function(){this.emptypressData(),this.processVisible=!1},initData:function(){var e=this;e.loadData(),this.getRequest("/product/basicdata").then(function(t){if(t&&200===t.status){var a=t.data;console.log("hehehe"),e.steps=a.root.steps,e.colors=a.root.colors,e.units=a.root.units,e.specs=a.root.specs;var i=[];a.root.midProducts.forEach(function(e){i.push({name:e[0],id:e[1]})}),e.midProduct=i,console.log(e.steps)}})},keywordsChange:function(e){""===e&&this.loadData()},handleChange:function(){},currentChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()}),addAndFlushEmp:function(){this.dialogTitle="添加",this.dialogFormVisible=!0,this.emptyData()},addProcess:function(e){var t=this,a=this,i="";this.selectSteps.length&&(this.selectSteps.forEach(function(e,t,i){a.currentSelectStepIds.push(e.id)}),i=this.currentSelectStepIds.join(","));var n=this.product.id;this.getRequest("/product/addProcess?productId="+n+"&stepIds="+i).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data.data;a.processVisible=!1,a.loadData(),a.emptyData()}})},emptypressData:function(){this.processModel={currentSteps:"",productId:0,processName:""},this.currentProgress=[],this.addProgress=[],this.updateProgress=[],this.deleteProgress=[],this.olderProgress=[],this.selectSteps=[]},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.product=t,this.currentRowData=_.cloneDeep(t),this.currentIndex=e,delete this.product.clienteleid;var a=this.currentRowData.midMaterials;void 0!=a&&a.length>0&&(a.forEach(function(e,t,a){e.mtype="odd",e.sid=t+1}),this.details=a,this.maxSid=a.length);var i=[],n=[];this.product.specs.length&&this.product.specs.forEach(function(e){i.push(e.id)}),this.product.colors.length&&this.product.colors.forEach(function(e){n.push(e.id)}),this.product.specification=i,this.product.color=n,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this,i=_.cloneDeep(this.product),n=a.details.concat(a.currentDeleteData),o="";n.length?(n.forEach(function(e){void 0===e.createDate&&(e.createDate=a.formatDate(new Date))}),o=this.jsonToString(n)):o="",i.midMaterials=o,i.clientId=0,null==i.preprosessId&&(i.preprosessId=0),console.log("productModel++"+i),i.specification=i.specification.join(","),i.colors=i.color.join(","),this.$refs[e].validate(function(e){if(!e)return Object(l.Message)("输入有误!"),!1;t.product.id?(a.tableLoading=!0,console.log(t.product),a.postRequest("/product/posAdd",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.product),t.postRequest("/product/addNew",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())}))})},processCancel:function(){this.processVisible=!1},showProcessView:function(e){this.productId=e.id,this.product=e,console.log(e),this.selectSteps=[],this.olderProgress=[];var t=e.preprosess;if(t.length)for(var a=0;a<t.length;a++){var i=t[a];this.selectSteps.push(i)}this.processVisible=!0},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.producteName+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/product/deletPro?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;console.log("insts"),this.tableLoading=!0,this.getRequest("/product/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.products=i,t.totalCount=a.data.total,t.emptyData()}})},searchEmp:function(){this.loadData()},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.product={producteName:"",specification:"",proType:"",color:""},this.currentSelectStepIds=[]}},computed:{routes:function(){return this.$store.state.routes}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-form",{ref:"addEmpForm",attrs:{model:e.product,rules:e.rules,size:"small","label-width":"90px"}},[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"650px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"名称:",prop:"producteName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"名称"},model:{value:e.product.producteName,callback:function(t){e.$set(e.product,"producteName",t)},expression:"product.producteName"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"型号:",prop:"proType"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品型号"},model:{value:e.product.proType,callback:function(t){e.$set(e.product,"proType",t)},expression:"product.proType"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"颜色:",prop:"color"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"",size:"mini",placeholder:"请选择产品颜色"},model:{value:e.product.color,callback:function(t){e.$set(e.product,"color",t)},expression:"product.color"}},e._l(e.colors,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"规格:",prop:"specification"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"",size:"mini",placeholder:"请选择规格"},model:{value:e.product.specification,callback:function(t){e.$set(e.product,"specification",t)},expression:"product.specification"}},e._l(e.specs,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"单位:",prop:"sysUnitId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择产品颜色"},model:{value:e.product.sysUnitId,callback:function(t){e.$set(e.product,"sysUnitId",t)},expression:"product.sysUnitId"}},e._l(e.units,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"left",padding:"0 0 12px 0"}},[e._v("\n          消耗原料清单:\n        ")]),e._v(" "),a("div",{staticStyle:{width:"100%",border:"1px solid #eeeeee","box-shadow":"darkgrey 3px 3px 2px 2px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"mini",placeholder:"请选择"},on:{change:e.matterSelect,clear:e.emptyDetail},model:{value:e.detail.name,callback:function(t){e.$set(e.detail,"name",t)},expression:"detail.name"}},e._l(e.midProduct,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})}),1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit",min:"0",type:"number"},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}})],1)],1)])],1),e._v(" "),a("div",{staticStyle:{"text-align":"end"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addBox}},[e._v("添加")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.details,border:"",height:"150"}},[a("el-table-column",{attrs:{prop:"sid",align:"left",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"原料名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"比例数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+"个")]}}],null,!1,1904140327)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.editeDetail(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteDetail(t.$index,t.row)}}},[e._v("删除\n                ")])]}}],null,!1,987709478)})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add("addEmpForm")}}},[e._v("确 定")])],1)])],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.name)+"\n          ")]}}],null,!1,1969434650)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"流程"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-steps",{attrs:{space:"20%","align-center":""}},e._l(t.row.process,function(e,t){return a("el-step",{key:t,staticClass:"detail",attrs:{title:e.name}})}),1)]}}],null,!1,2149232586)})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(".\n    "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-form",{ref:"processForm",attrs:{model:e.process,rules:e.rules,size:"small","label-width":"90px"}},[a("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.processVisible,width:"600px"},on:{"update:visible":function(t){e.processVisible=t},close:e.cancelpre}},[e.processVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{"text-align":"end"}},[a("el-button",{staticStyle:{padding:"6px 8px 6px 8px",margin:"2px"},attrs:{type:"success",size:"mini"},on:{click:e.selcetSteps}},[e._v("\n            +工序步骤\n          ")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.selectSteps,fit:"",border:""}},[a("el-table-column",{attrs:{align:"left",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteSelected(t.$index,t.row)}}},[e._v("删除\n              ")])]}}],null,!1,1407862517)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"工序名",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.name)+"\n            ")]}}],null,!1,1106356250)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"流程"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-steps",{attrs:{space:"20%","align-center":""}},e._l(t.row.process,function(e,t){return a("el-step",{key:t,staticClass:"detail",attrs:{title:e.name}})}),1)]}}],null,!1,2149232586)})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.processVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addProcess("processForm")}}},[e._v("确 定")])],1)])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.products,fit:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"producteName",align:"left",fixed:"",label:"产品名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specName",width:"220",align:"left",label:"产品规格"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proType",width:"120",align:"left",label:"产品型号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"colorName",width:"120",align:"left",label:"产品颜色"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showProcessView(t.row)}}},[e._v("查看工序\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,s,!1,function(e){a("EwLT")},null,null);t.default=r.exports},"4d3/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{productId:[{required:!0,message:"必选:产品名称",trigger:"change"}],proNumber:[{required:!0,message:"必选:数量",trigger:"blur"}]},products:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,product:{proName:"",productId:"",proNumber:"",clientName:"",note:"",clientId:""},deps:[],posts:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pId:"",pName:""}},mounted:function(){this.initData()},methods:{formatSex:function(e,t){return"1"==e.gender?"男":"2"==e.gender?"女":"未知"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.product.clientName=e.name,this.product.clientId=e.id,this.pId=e.id,this.pName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.product.clientName="",this.product.clientId=""},cancelChoos:function(){console.log(this.pName),this.product.clientName=this.pName,this.product.clientId=this.pId},initData:function(){var e=this;e.loadData(),this.getRequest("/finishedProduct/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.products=a.root.pruducts}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushData:function(){this.dialogTitle="添加",this.emptyEmpData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadData()},showEditView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.product=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.product.name=t.name,this.product.positionId=t.positionId,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.product.id?(t.tableLoading=!0,console.log(t.product),t.postRequest("/finishedProduct/add",t.product).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyEmpData())})):(t.tableLoading=!0,console.log(a.product),t.postRequest("/finishedProduct/add",t.product).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyEmpData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/finishedProduct/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/finishedProduct/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.products=i,t.totalCount=a.data.total,t.emptyEmpData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyEmpData:function(){console.log("+++++_+++++_"),this.product={proName:"",productId:"",proNumber:"",clientName:"",note:"",clientId:""}}},computed:{routes:function(){return this.$store.state.routes}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n      ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.product,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"产品名称:",prop:"productId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择职位"},model:{value:e.product.productId,callback:function(t){e.$set(e.product,"productId",t)},expression:"product.productId"}},e._l(e.productes,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"客户:",prop:"clientId"}},[a("el-popover",{attrs:{placement:"right",title:"请选择公司",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.shops,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",size:"mini",clearable:""},on:{clear:e.clearChoose,blur:e.cancelChoos},model:{value:e.product.clientName,callback:function(t){e.$set(e.product,"clientName",t)},expression:"product.clientName"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"产品数量:",prop:"proNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品数量..."},model:{value:e.product.proNumber,callback:function(t){e.$set(e.product,"proNumber",t)},expression:"product.proNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注..."},model:{value:e.product.note,callback:function(t){e.$set(e.product,"note",t)},expression:"product.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.products,fit:"","highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{align:"left",label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.product.producteName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"proNumber",align:"left",label:"产品数量"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(null==t.row.note?"无":t.row.note)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(e){a("mtbN")},null,null);t.default=s.exports},"5tuq":function(e,t){},"5xx1":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{tempPlan:[],confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midConfirms:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){this.initData()},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.middleProduct.utilname=a.name)})},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var a="",i=e.plant;return this.positions.forEach(function(e,t,n){i.forEach(function(t,i,n){e.id===t&&(a+=e.name+" , ")})}),a},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){this.loadData()},keywordsChange:function(e){""===e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midProgressRecieve/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200===e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midProgressRecieve/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){e.tableLoading=!1,a&&200===a.status&&(t.midConfirms=a.data.data,t.totalCount=a.data.total)})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midConfirms,fit:"",border:"",onsort:""}},[a("el-table-column",{attrs:{align:"left",prop:"name",fixed:"",label:"名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"记录人",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.operator.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"记录时间",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"备注",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n         "+e._s(null===t.row.notes?"无":""===t.row.notes?"无":t.row.notes)+"\n      ")]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("nyr8")},null,null);t.default=l.exports},"6+aJ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement;return(this._self._c||e)("section",[this._v("\n  欢迎登录\n")])},staticRenderFns:[]};var n=a("VU/8")({data:function(){return{}}},i,!1,function(e){a("QWIT")},"data-v-01b00afd",null);t.default=n.exports},"6HRJ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("c/Tr"),l=a.n(i),o=a("bOdI"),s=a.n(o),r=a("zL8q"),c={data:function(){var e;return e={options:[{value:1,label:"紧急"},{value:2,label:"加急"},{value:3,label:"备货"},{value:4,label:"正常"},{value:5,label:"特殊"}],selectedStep:{},lastPlanDetail:{startNo:"J00000001",endNo:"J00000100"},lastPlanmarketPlanDetails:[{startNo:"J00000001",endNo:"J00000100"},{startNo:"K00000001",endNo:"K00000100"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,types:2,midProduct:[],plans:[],clients:[],units:[],dialogTitle:"",currentPage:1,currentDetailPage:1,totalDatailPage:-1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,detail:{id:0,clientId:0,clientName:"",quantity:"",note:"",expectLevel:"",productName:"",proId:"",specification:"",mark:"",productNo:"",specsId:"",colorId:"",progressId:0},dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{value:"id",label:"name",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择产品",selectMaterial:{},selectedM:{},filterText:"",crrentSelectShop:{},isCurrentShop:!0,isprarent:!1,sugestParentstartNo:"",sugestParentEndNo:"",sugestSelfEndNumbers:"",sugestSelfNumbers:"",currentParentShop:{},currentShop:{}},s()(e,"lastPlanDetail",{startNo:"",endNo:""}),s()(e,"serialNuberDeleted",[]),s()(e,"serialNuberUpdate",[]),s()(e,"serialNuberList",[]),s()(e,"specslist",[]),s()(e,"colorlist",[]),s()(e,"selectPreStep",{}),s()(e,"selectSteps",[]),s()(e,"activePanel","1"),s()(e,"manageStatus","1"),s()(e,"plandetaillist",[]),s()(e,"showDetaillist",!1),s()(e,"showPlan",!0),s()(e,"detailPage",1),s()(e,"currentPlanId",""),e},mounted:function(){this.initData()},methods:{currentSelectShop:function(e){console.log(e)},handleClick:function(){switch(console.log(this.activePanel),this.activePanel){case"1":this.manageStatus="1";break;case"2":this.manageStatus="2";break;case"4":this.manageStatus="3";break;case"7":this.manageStatus="4"}this.loadData()},cancelPlan:function(e){var t=this;this.$confirm("此操作将撤销该销售计划, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doCancel(e.id)}).catch(function(){})},showplanDetail:function(e){this.currentPlanId=e.id,this.showPlanDe()},showPlanDe:function(){var e=this;this.getRequest("/productionplandetails/findPlan?salesPlanId="+this.currentPlanId+"&page="+this.currentDetailPage+"&size=10").then(function(t){if(e.tableLoading=!1,t&&200===t.status&&t.data.success){if(e.plandetaillist=t.data.data||[],e.totalDatailPage=t.data.total,!e.plandetaillist.length)return e.$message({type:"info ",message:"没有进度！"}),!1;e.showDetaillist=!0,e.showPlan=!1}})},doCancel:function(e){var t=this;this.tableLoading=!0,this.getRequest("/sales/annul?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&t.loadData()})},statusFormat:function(e){var t="";switch(e.status){case 1:t="新建";break;case 2:t="开始生产";break;case 3:t="生产完成";break;case 4:t="生产撤销"}return t},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectMaterial.id>0){var a=this.selectMaterial.producteName+""+this.selectMaterial.specName+";";this.$confirm("您当前选择了"+a+"确认选择该产品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(){var e=this.selectMaterial;console.log(e),this.detail.productName=e.producteName,this.detail.proId=e.id;var t=[],a=e.specs;a.length&&a.forEach(function(e){t.push(e.id)}),this.detail.specification="",this.specslist=e.specs||[],this.colorlist=e.colors||[],this.detail.productNo=e.proType,this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectMaterial={},this.selectedM={}},formatStatus:function(e,t){return 1==e.materialType?"已确认":"未确认"},selectType:function(e,t,a){console.log("changne"),this.types=e,2==e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(a,i,n){a.id==e&&(t.detail.unitId=a.unitId,t.detail.unitName=a.unitName,t.detail.name=a.name,t.detail.materialId=a.id,t.detail.specifications=a.specs)})},addBox:function(){var e=this;if(console.log("asdfadsfasdfasd"),""===this.detail.quantity||void 0===this.detail.quantity)return Object(r.Message)("请输入数量"),!1;if(""===this.detail.name||void 0===this.detail.name)return Object(r.Message)("请选择产品！"),!1;if(""===this.detail.sid)if(this.marketPlanDetails.length>0){var t=!1;this.marketPlanDetails.forEach(function(a,i,n){a.materialId===e.detail.materialId&&a.mtype===e.types&&(t=!0,a.quantity=parseFloat(e.detail.quantity)+parseFloat(a.quantity))}),t||(this.maxSid+=1,this.detail.sid=this.maxSid,this.detail.type="new",this.marketPlanDetails.push(this.detail))}else this.detail.sid=1,this.detail.type="new",this.detail.mtype=this.types,this.maxSid+=1,this.marketPlanDetails.push(this.detail);else if(this.marketPlanDetails.length)for(var a=0,i=this.marketPlanDetails.length;a<i;a++){var n=this.marketPlanDetails[a];"odd"===n.type?(this.detail.type="update",n.sid===this.detail.sid&&(this.marketPlanDetails.splice(a,1),this.marketPlanDetails.push(this.detail))):n.sid===this.detail.sid&&(this.marketPlanDetails.splice(a,1),this.marketPlanDetails.push(this.detail))}this.detail.marketPlanSerialNumber=e.marketPlanSerialNumber,this.clearSerialNumbers(),this.emptyDetail()},clearSerialNumbers:function(){this.marketPlanSerialNumber=[],this.marketPlanSerialNumber.push({sid:1,id:0,startNo:"",endNo:"",type:"new",note:""})},editeDetail:function(e,t){this.detail=t},deleteDetail:function(e,t){console.log("delete");var a=this.marketPlanDetails.splice(e,1);"odd"===a[0].type&&(a[0].type="delete",this.currentDeleteData.push(a[0])),this.maxSid-=1},emptyDetail:function(){this.detail={sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",specifications:"",type:""}},initData:function(){var e=this;e.loadData(),this.getRequest("/productionplan/basedata").then(function(t){if(t&&200===t.status){var a=t.data;e.clients=e.toTree(a.root.clients),e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var i=[];a.root.products.forEach(function(e,t,a){i.push({id:e[0],producteName:e[1],specification:e[2],proType:e[3],mark:e[4],color:e[5]})}),e.products=i}})},keywordsChange:function(e){""===e&&this.loadData()},keywordsMaterialChange:function(e){""===e&&this.loadMaterial()},handleNodeClick:function(e){this.tableLoading=!0,this.crrentSelectShop=e,this.detail.clientId=e.id,this.detail.clientName=e.name,this.detail.abbrName=e.abbreviation,this.showOrHidePop=!1,this.depTextColor="#606266"},showCurrentNo:function(){this.isprarent?this.isprarent=!1:this.isprarent=!0},changeNO:function(){this.isCurrentShop?(this.lastPlanDetail=this.currentShop,this.isCurrentShop=!1):(this.lastPlanDetail=this.currentParentShop,this.isCurrentShop=!0)},getCurrentPlans:function(){var e=this;void 0===this.crrentSelectShop.id?this.$message({type:"info",message:"请选择公司"}):void 0===this.detail.proId||""===this.detail.proId?this.$message({type:"info",message:"请选择产品"}):this.getRequest("/sales/getPlanDetails?clientId="+this.crrentSelectShop.id+"&productId="+this.detail.proId).then(function(t){if(e.tableLoading=!1,t&&200===t.status){var a=t.data;if(e.currentParentShop=a.root.parent,e.currentParentShop.length){var i=e.currentParentShop.length-1;e.currentParentShop=e.currentParentShop[i];var l=e.currentParentShop[i].endNo;e.sugestParentstartNo=e.sugestStartNo(l,1)}else e.sugestParentstartNo="00000001",e.currentParentShop={};if(""!==e.detail.quantity&&(e.sugestParentEndNo=e.sugestStartNo(e.currentParentShop[n].endNo,parseInt(e.detail.quantity)+1)),e.setStartSerialNo(e.sugestParentstartNo,e.sugestParentEndNo.endNo,"parent"),e.lastPlanDetail=e.currentParentShop,e.currentShop=a.root.self,e.currentShop.length){var o=e.currentShop.length-1;e.currentShop=e.currentShop[o];var s=e.currentShop[o].endNo;e.sugestSelfNumbers=e.sugestStartNo(s,1)}else e.sugestSelfNumbers="00000001",e.currentShop={}}})},setEndNumber:function(e){console.log(e);if(this.isCurrentShop)if(this.lastPlanDetail=this.currentShop,this.currentShop.length){var t=this.currentShop.length-1;this.sugestSelfEndNumbers=this.sugestStartNo(this.currentShop[t].endNo,parseInt(e)+1),this.marketPlanSerialNumber[0].startNo=this.sugestSelfNumbers,this.marketPlanSerialNumber[0].endNo=this.sugestSelfEndNumbers,this.marketPlanSerialNumber[0].note="",this.marketPlanSerialNumber[0].clientId=this.crrentSelectShop.id,this.marketPlanSerialNumber[0].productId=this.detail.proId}else{var a=this.sugestSelfNumbers;this.setCurrentEndData(a,e)}else if(this.lastPlanDetail=this.currentParentShop,this.currentParentShop.length){var i=this.currentParentShop.length-1;this.sugestParentEndNo=this.sugestStartNo(this.currentParentShop[i].endNo,parseInt(e)+1),this.marketPlanSerialNumber[0].startNo=this.sugestParentstartNo,this.marketPlanSerialNumber[0].endNo=this.sugestParentEndNo,this.marketPlanSerialNumber[0].note="",this.marketPlanSerialNumber[0].clientId=this.crrentSelectShop.id,this.marketPlanSerialNumber[0].productId=this.detail.proId}else{var n=this.currentParentShop;this.setCurrentEndData(n,e)}},setCurrentEndData:function(e,t){var a=e.length,i=parseInt(e)+parseInt(t),n=a-i.toString().length;if(n)for(var l=0;l<n;l++)i="0"+i;this.marketPlanSerialNumber[0].endNo=i},sugestStartNo:function(e,t){var a=function(e,t){if(t=t||!1,"string"==typeof e){var a=e.match(t?/[0-9]\d{1,}/g:/\d{1,}/g);return console.log(a),a.map(function(e){return e})}return[]},i=e.indexOf(a(e)[0]),n=e.substr(0,i),l=e.substr(i+a(e)[0].length,e.length-1),o=(a(e)[0].length,parseInt(a(e)[0])+t),s=o-o.toString().length;if(s)for(var r=0;r<s;r++)o+="0";return n+o+l},setStartSerialNo:function(e,t,a){this.marketPlanSerialNumber.length&&(this.marketPlanSerialNumber[0].startNo=e,this.marketPlanSerialNumber[0].endNo=t,this.marketPlanSerialNumber[0].note="")},clearChoose:function(){this.detail.clientId=0,this.detail.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(a,i){a.id==e&&(console.log(a.id),t.detail.unitName=a.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentDetailChange:function(e){this.currentDetailPage=e,console.log(this.currentPage),this.showPlanDe()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){this.dialogTitle="郑铁公司销售单";this.marketPlanSerialNumber=[],this.marketPlanSerialNumber.push(this.serialNumber),this.dialogFormVisible=!0},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(e,t){console.log(t);if(this.dialogTitle="编辑信息",this.detail=t,t.pcCode){var a=l()(t.pcCode.split(","),function(e){return parseInt(e)});this.detail.clientId=a}this.plan.createDate=t.createDate,this.specslist=t.product.specs,this.colorlist=t.product.colors,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this,i=_.cloneDeep(this.detail);i.pcCode=i.clientId.join(","),i.clientId=i.clientId.pop(),delete i.product,delete i.client,delete i.color,delete i.editer,delete i.specification,this.$refs[e].validate(function(e){if(!e)return!1;a.detail.id?(t.tableLoading=!0,console.log(a.plan),t.postRequest("/sales/update",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers())})):(t.tableLoading=!0,0!==t.plan.clientId&&""!=t.plan.clientId||(t.plan.clientId=0),console.log(i),t.postRequest("/sales/add",i).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers()}}))})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/product/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.materialList=i,t.totalMaterialCount=a.data.total,t.dialogMaterialVisible=!0}})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),this.emptyData()},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/sales/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200===e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/sales/findbystatus?page="+this.currentPage+"&size=10&status="+this.manageStatus).then(function(a){e.tableLoading=!1,a&&200===a.status&&a.data.success&&(t.plans=t.preDataSale(a.data.data),console.log(t.plans),t.totalCount=a.data.total,t.emptyData())})},emptyData:function(){this.marketPlanDetails=[],this.plan={materialType:"",notes:"",serialNumber:"",clientId:0,clientName:""},this.detail={id:0,clientId:0,clientName:"",quantity:"",note:"",productName:"",proId:"",specification:"",mark:"",productNo:"",specsId:"",colorId:"",progressId:0}},back:function(){this.showDetaillist?(this.showDetaillist=!1,this.showPlan=!0):(this.showDetaillist=!0,this.showPlan=!1)},preDataSale:function(e){if(e.length)for(var t=e.length-1;t>=0;t--){var a=e[t];switch(a.status+""){case"1":a.bgcolor="#eeeeee";break;case"2":a.bgcolor="yellowgreen";break;case"3":a.bgcolor="green";break;case"4":a.bgcolor="#e4e4e4";break;case"5":a.bgcolor="#2974df";break;case"6":a.bgcolor="#85ce61"}}return e},toTree:function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.child});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.parentClientId];i?(i.child||(i.child=[])).push(e):t.push(e)}),console.log(t),t}},computed:{routes:function(){return this.$store.state.routes}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n        ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("\n          添加\n        ")]),e._v(" "),e.showDetaillist?a("el-button",{attrs:{type:"success",icon:"el-icon-back",circle:""},on:{click:e.back}},[e._v("返回")]):e._e()],1)]),e._v(" "),e.dialogFormVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.detail,size:"mini","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("div",{staticStyle:{"background-color":"bisque"}},[a("div",{staticStyle:{"text-align":"left"}},[e._v("\n                客户信息\n              ")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"客户:",prop:"clientId"}},[a("el-cascader",{attrs:{placeholder:"--选择客户--",options:e.clients,props:e.defaultProps,filterable:"","show-all-levels":!1,"change-on-select":""},on:{change:e.currentSelectShop},model:{value:e.detail.clientId,callback:function(t){e.$set(e.detail,"clientId",t)},expression:"detail.clientId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"订单等级:",prop:"expectLevel"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.detail.expectLevel,callback:function(t){e.$set(e.detail,"expectLevel",t)},expression:"detail.expectLevel"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"background-color":"rgb(175, 218, 136)"}},[a("div",{staticStyle:{"text-align":"left"}},[e._v("\n                产品信息\n              ")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"名称:",prop:"productName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品名称。。。"},on:{focus:e.showMaterial},model:{value:e.detail.productName,callback:function(t){e.$set(e.detail,"productName",t)},expression:"detail.productName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"型号:",prop:"productNo"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"型号"},model:{value:e.detail.productNo,callback:function(t){e.$set(e.detail,"productNo",t)},expression:"detail.productNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"标记:",prop:"mark"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"标记"},model:{value:e.detail.mark,callback:function(t){e.$set(e.detail,"mark",t)},expression:"detail.mark"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"规格:",prop:"specsId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择规格"},model:{value:e.detail.specsId,callback:function(t){e.$set(e.detail,"specsId",t)},expression:"detail.specsId"}},e._l(e.specslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"颜色:",prop:"colorId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"--请选择色彩--"},model:{value:e.detail.colorId,callback:function(t){e.$set(e.detail,"colorId",t)},expression:"detail.colorId"}},e._l(e.colorlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注。。。"},model:{value:e.detail.notes,callback:function(t){e.$set(e.detail,"notes",t)},expression:"detail.notes"}})],1)],1)],1),e._v(" "),a("div")],1)])])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]):e._e(),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n            ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{prop:"producteName",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specName",align:"left",fixed:"",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proType",align:"left",fixed:"",label:"型号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"colorName",align:"left",fixed:"",label:"颜色",width:"120"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showPlan,expression:"showPlan"}]},[a("el-tabs",{attrs:{type:"card","tab-position":"top"},on:{"tab-click":e.handleClick},model:{value:e.activePanel,callback:function(t){e.activePanel=t},expression:"activePanel"}},[a("el-tab-pane",{attrs:{label:"新订单",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"进行中",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"撤销",name:"4"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"汇总",name:"7"}})],1),e._v(" "),a("div",{staticClass:"main-plan-progress-plan flex-plan"},e._l(e.plans,function(t,i){return a("div",{key:t.id,staticClass:"item-plan",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-plans-show",style:{backgroundColor:t.bgcolor}},[a("div",[a("div",{staticClass:"text-alight"},[e._v("客户:"+e._s(t.client.name)+" ")]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                产品:"+e._s(t.product.producteName)+"\n                /"+e._s(t.specification.name)+"\n                /"+e._s(t.color.name)+"\n              ")]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                型号："+e._s(t.productNo)+"\n              ")]),e._v(" "),a("div",[a("u",[e._v("总数\n                 :"+e._s(t.quantity)+"|")]),e._v(" "),a("u",[e._v(" 下发:"+e._s(t.nextQuantity)+"|")]),e._v(" "),a("u",[e._v(" 完成:"+e._s(t.endQuantity)+"/枚| ")]),e._v(" "),a("u",[e._v("未下发："+e._s(t.quantity-t.nextQuantity))])]),e._v(" "),a("div",[e._v(e._s(t.planString))]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                备注："+e._s(t.notes)+"\n              ")])]),e._v(" "),a("div",{staticStyle:{padding:"12px 0"}},[a("el-button",{staticStyle:{padding:"2px",margin:"2px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.showEditEmpView(i,t)}}},[e._v("编辑订单\n              ")]),e._v(" "),a("el-button",{staticStyle:{padding:"2px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelPlan(t)}}},[e._v("撤销订单\n              ")]),e._v(" "),a("el-button",{staticStyle:{padding:"2px",margin:"2px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.showplanDetail(t)}}},[e._v("查看计划\n              ")])],1)])])}),0),e._v(" "),0==e.plans.length?a("div",[e._v("\n        暂无数据\n      ")]):e._e(),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showDetaillist,expression:"showDetaillist"}]},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.plandetaillist,"highlight-current-row":"",fit:"",border:""}},[a("el-table-column",{attrs:{align:"left",label:"客户名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.salesPlan.client.name)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.salesPlan.product.producteName)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"计划量/完成量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.actualQuantity)+"/"+e._s(t.row.accomplishNO)+"枚\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:e.statusFormat,align:"left",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentDetailPage,layout:"prev, pager, next",total:e.totalDatailPage},on:{"current-change":e.currentDetailChange}})],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(e){a("RGDL")},null,null);t.default=u.exports},"7vo2":function(e,t){},"8mpM":function(e,t){},"Ave/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l={data:function(){return{showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},defaultData:{label:"plateNumber",isLeaf:"leaf",children:"children"},depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{business:[{required:!0,message:"必填:事由",trigger:"blur"}],carNo:[{required:!0,message:"必选:车辆",trigger:"blur"}]},carRequests:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],carRequest:{carNo:"",business:"",preStartDate:"",duration:"",preEndDate:"",notes:""},assigned:{carNo:"",note:"",requestId:""},dialogFormVisible:!1,dialogAlotVisible:!1,currentRowData:{},currentIndex:"",pickerOptions1:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},mounted:function(){this.initData();var e=this;this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var a=t.data;console.log(a),e.cars=a.root.cars}})},methods:{cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},searchEmp:function(){this.loadData()},formatStatus:function(e,t){return"UN_MANAGED"==e.requestStatus?"未分配":"MANAGED"==e.requestStatus?"已分配":"REFUSE"==e.requestStatus?"已拒绝":"已完成"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},showAllotTree:function(){this.showHidePop=!this.showHidePop},handleAskClick:function(e){this.assigned.carNo=e.plateNumber,this.showHidePop=!1,this.depTextColor="#606266"},handleNodeClick:function(e){this.carRequest.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.carRequest=t,this.carRequest.preStartDate=this.formatDate(t.preStartDate),this.carRequest.preEndDate=this.formatDate(t.preEndDate),this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,delete this.carRequest.emp,delete this.carRequest.vcif,this.dialogFormVisible=!0},showAllotionView:function(e){console.log(e),this.dialogTitle="分配车辆",this.carRequest=e,this.dialogAlotVisible=!0},allocate:function(e){var t=this;this.dialogAlotVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(a.assigned),t.assigned.requestId=t.carRequest.id,t.postRequest("/vehicleAllot/add",t.assigned).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogAlotVisible=!1,a.loadData(),a.emptyAltData()}})})},denied:function(e){var t=this;this.dialogAlotVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(a.assigned),t.assigned.requestId=t.carRequest.id,t.postRequest("/vehicleAllot/refuse",t.assigned).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogAlotVisible=!1,a.loadData(),a.emptyAltData()}})})},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.carRequest.id?(t.tableLoading=!0,console.log(t.carRequest),t.postRequest("/askedvehicle/addask",t.carRequest).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.carRequest),t.postRequest("/askedvehicle/addask",t.carRequest).then(function(e){(a.tableLoading=!1,e&&200==e.status)&&(e.data.success&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData()))}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.plateNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/askedvehicle/deletask?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/askedvehicle/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.carRequests=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.carRequest={carNo:"",business:"",preStartDate:"",preEndDate:"",duration:"",notes:""}},emptyAltData:function(){this.assigned={carNo:"",note:"",requestId:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n  \n        ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.carRequest,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"可选车辆:",prop:"carNo"}},[a("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"manual"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRequest.carNo)+"\n            ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用车时长:",prop:"duration"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"预计用车多少天..."},model:{value:e.carRequest.duration,callback:function(t){e.$set(e.carRequest,"duration",t)},expression:"carRequest.duration"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"申请事由:",prop:"business"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"出差事项..."},model:{value:e.carRequest.business,callback:function(t){e.$set(e.carRequest,"business",t)},expression:"carRequest.business"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出行时间:",prop:"preStartDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date","picker-options":e.pickerOptions1,placeholder:"出行时间"},model:{value:e.carRequest.preStartDate,callback:function(t){e.$set(e.carRequest,"preStartDate",t)},expression:"carRequest.preStartDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"返回时间:",prop:"preEndDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date","picker-options":e.pickerOptions1,placeholder:"返回时间"},model:{value:e.carRequest.preEndDate,callback:function(t){e.$set(e.carRequest,"preEndDate",t)},expression:"carRequest.preEndDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRequest.notes,callback:function(t){e.$set(e.carRequest,"notes",t)},expression:"carRequest.notes"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogAlotVisible,width:"500px"},on:{"update:visible":function(t){e.dialogAlotVisible=t},close:e.emptyAltData}},[a("div",{staticStyle:{width:"100%"}},[e.dialogAlotVisible?a("el-form",{ref:"addNewRecord",attrs:{model:e.assigned,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",rows:"5",cols:"33",placeholder:"备注..."},model:{value:e.assigned.note,callback:function(t){e.$set(e.assigned,"note",t)},expression:"assigned.note"}})],1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAlotVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.denied("addNewRecord")}}},[e._v("拒绝申请")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.allocate("addNewRecord")}}},[e._v("同意申请")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carRequests,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"车牌号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.vcif.plateNumber))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"preStartDate",width:"120",align:"left",label:"预计出行时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.preStartDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"preEndDate",width:"120",align:"left",label:"预计返回时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.preEndDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"duration",align:"left",label:"持续时间",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"business",align:"left",label:"事由",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",width:"220",align:"left",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",width:"220",align:"left",label:"执行人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"empName",width:"220",align:"left",label:"申请人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"requestStatus",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return["UN_MANAGED"==t.row.requestStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showAllotionView(t.row)}}},[e._v("分配车辆\n        ")]):e._e(),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(e){a("ev96")},null,null);t.default=s.exports},BiC4:function(e,t,a){"use strict";(function(e,t){var i,n=a("OvRC"),l=a.n(n),o=a("mvHQ"),s=a.n(o),r=a("C4MV"),c=a.n(r),d=a("pFYg"),u=a.n(d);!function(i){if("object"===("undefined"==typeof exports?"undefined":u()(exports))&&void 0!==t)t.exports=i();else if("function"==typeof define&&a("nErl"))define([],i);else{("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).SockJS=i()}}(function(){return function e(t,a,n){function l(s,r){if(!a[s]){if(!t[s]){if(!r&&("function"==typeof i&&i))return i(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=a[s]={exports:{}};t[s][0].call(d.exports,function(e){var a=t[s][1][e];return l(a||e)},d,d.exports,e,t,a,n)}return a[s].exports}for(var o="function"==typeof i&&i,s=0;s<n.length;s++)l(n[s]);return l}({1:[function(t,a,i){(function(e){var i=t("./transport-list");a.exports=t("./main")(i),"_sockjs_onload"in e&&setTimeout(e._sockjs_onload,1)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":14,"./transport-list":16}],2:[function(e,t,a){var i=e("inherits"),n=e("./event");function l(){n.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}i(l,n),t.exports=l},{"./event":4,inherits:56}],3:[function(e,t,a){var i=e("inherits"),n=e("./eventtarget");function l(){n.call(this)}i(l,n),l.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},l.prototype.once=function(e,t){var a=this,i=!1;this.on(e,function n(){a.removeListener(e,n),i||(i=!0,t.apply(this,arguments))})},l.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var a=arguments.length,i=new Array(a-1),n=1;n<a;n++)i[n-1]=arguments[n];for(var l=0;l<t.length;l++)t[l].apply(this,i)}},l.prototype.on=l.prototype.addListener=n.prototype.addEventListener,l.prototype.removeListener=n.prototype.removeEventListener,t.exports.EventEmitter=l},{"./eventtarget":5,inherits:56}],4:[function(e,t,a){function i(e){this.type=e}i.prototype.initEvent=function(e,t,a){return this.type=e,this.bubbles=t,this.cancelable=a,this.timeStamp=+new Date,this},i.prototype.stopPropagation=function(){},i.prototype.preventDefault=function(){},i.CAPTURING_PHASE=1,i.AT_TARGET=2,i.BUBBLING_PHASE=3,t.exports=i},{}],5:[function(e,t,a){function i(){this._listeners={}}i.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var a=this._listeners[e];-1===a.indexOf(t)&&(a=a.concat([t])),this._listeners[e]=a},i.prototype.removeEventListener=function(e,t){var a=this._listeners[e];if(a){var i=a.indexOf(t);-1===i||(a.length>1?this._listeners[e]=a.slice(0,i).concat(a.slice(i+1)):delete this._listeners[e])}},i.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,a=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,a),t in this._listeners)for(var i=this._listeners[t],n=0;n<i.length;n++)i[n].apply(this,a)},t.exports=i},{}],6:[function(e,t,a){var i=e("inherits"),n=e("./event");function l(e){n.call(this),this.initEvent("message",!1,!1),this.data=e}i(l,n),t.exports=l},{"./event":4,inherits:56}],7:[function(e,t,a){var i=e("json3"),n=e("./utils/iframe");function l(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}l.prototype._transportClose=function(e,t){n.postMessage("c",i.stringify([e,t]))},l.prototype._transportMessage=function(e){n.postMessage("t",e)},l.prototype._send=function(e){this._transport.send(e)},l.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},t.exports=l},{"./utils/iframe":47,json3:57}],8:[function(e,t,a){(function(a){var i=e("./utils/url"),n=e("./utils/event"),l=e("json3"),o=e("./facade"),s=e("./info-iframe-receiver"),r=e("./utils/iframe"),c=e("./location"),d=function(){};"production"!==a.env.NODE_ENV&&(d=e("debug")("sockjs-client:iframe-bootstrap")),t.exports=function(e,t){var a,u={};t.forEach(function(e){e.facadeTransport&&(u[e.facadeTransport.transportName]=e.facadeTransport)}),u[s.transportName]=s,e.bootstrap_iframe=function(){var t;r.currentWindowId=c.hash.slice(1);n.attachEvent("message",function(n){if(n.source===parent&&(void 0===a&&(a=n.origin),n.origin===a)){var s;try{s=l.parse(n.data)}catch(e){return void d("bad json",n.data)}if(s.windowId===r.currentWindowId)switch(s.type){case"s":var p;try{p=l.parse(s.data)}catch(e){d("bad json",s.data);break}var h=p[0],f=p[1],m=p[2],g=p[3];if(d(h,f,m,g),h!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+h+'", the iframe: "'+e.version+'".');if(!i.isOriginEqual(m,c.href)||!i.isOriginEqual(g,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+m+", "+g+")");t=new o(new u[f](m,g));break;case"m":t._send(s.data);break;case"c":t&&t._close(),t=null}}}),r.postMessage("s")}}}).call(this,{env:{}})},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:54,json3:57}],9:[function(e,t,a){(function(a){var i=e("events").EventEmitter,n=e("inherits"),l=e("json3"),o=e("./utils/object"),s=function(){};function r(e,t){i.call(this);var a=this,n=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var i,r;if(200===e){if(r=+new Date-n,t)try{i=l.parse(t)}catch(e){s("bad json",t)}o.isObject(i)||(i={})}a.emit("finish",i,r),a.removeAllListeners()})}"production"!==a.env.NODE_ENV&&(s=e("debug")("sockjs-client:info-ajax")),n(r,i),r.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=r}).call(this,{env:{}})},{"./utils/object":49,debug:54,events:3,inherits:56,json3:57}],10:[function(e,t,a){var i=e("inherits"),n=e("events").EventEmitter,l=e("json3"),o=e("./transport/sender/xhr-local"),s=e("./info-ajax");function r(e){var t=this;n.call(this),this.ir=new s(e,o),this.ir.once("finish",function(e,a){t.ir=null,t.emit("message",l.stringify([e,a]))})}i(r,n),r.transportName="iframe-info-receiver",r.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},t.exports=r},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:56,json3:57}],11:[function(t,a,i){(function(e,i){var n=t("events").EventEmitter,l=t("inherits"),o=t("json3"),s=t("./utils/event"),r=t("./transport/iframe"),c=t("./info-iframe-receiver"),d=function(){};function u(e,t){var a=this;n.call(this);var l=function(){var i=a.ifr=new r(c.transportName,t,e);i.once("message",function(e){if(e){var t;try{t=o.parse(e)}catch(t){return d("bad json",e),a.emit("finish"),void a.close()}var i=t[0],n=t[1];a.emit("finish",i,n)}a.close()}),i.once("close",function(){a.emit("finish"),a.close()})};i.document.body?l():s.attachEvent("load",l)}"production"!==e.env.NODE_ENV&&(d=t("debug")("sockjs-client:info-iframe")),l(u,n),u.enabled=function(){return r.enabled()},u.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},a.exports=u}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:54,events:3,inherits:56,json3:57}],12:[function(e,t,a){(function(a){var i=e("events").EventEmitter,n=e("inherits"),l=e("./utils/url"),o=e("./transport/sender/xdr"),s=e("./transport/sender/xhr-cors"),r=e("./transport/sender/xhr-local"),c=e("./transport/sender/xhr-fake"),d=e("./info-iframe"),u=e("./info-ajax"),p=function(){};function h(e,t){p(e);var a=this;i.call(this),setTimeout(function(){a.doXhr(e,t)},0)}"production"!==a.env.NODE_ENV&&(p=e("debug")("sockjs-client:info-receiver")),n(h,i),h._getReceiver=function(e,t,a){return a.sameOrigin?new u(t,r):s.enabled?new u(t,s):o.enabled&&a.sameScheme?new u(t,o):d.enabled()?new d(e,t):new u(t,c)},h.prototype.doXhr=function(e,t){var a=this,i=l.addPath(e,"/info");p("doXhr",i),this.xo=h._getReceiver(e,i,t),this.timeoutRef=setTimeout(function(){p("timeout"),a._cleanup(!1),a.emit("finish")},h.timeout),this.xo.once("finish",function(e,t){p("finish",e,t),a._cleanup(!0),a.emit("finish",e,t)})},h.prototype._cleanup=function(e){p("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},h.prototype.close=function(){p("close"),this.removeAllListeners(),this._cleanup(!1)},h.timeout=8e3,t.exports=h}).call(this,{env:{}})},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:54,events:3,inherits:56}],13:[function(t,a,i){(function(e){a.exports=e.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(t,a,i){(function(e,i){t("./shims");var n,l=t("url-parse"),o=t("inherits"),s=t("json3"),r=t("./utils/random"),c=t("./utils/escape"),d=t("./utils/url"),u=t("./utils/event"),p=t("./utils/transport"),h=t("./utils/object"),f=t("./utils/browser"),m=t("./utils/log"),g=t("./event/event"),v=t("./event/eventtarget"),b=t("./location"),y=t("./event/close"),x=t("./event/trans-message"),_=t("./info-receiver"),w=function(){};function k(e,t,a){if(!(this instanceof k))return new k(e,t,a);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");v.call(this),this.readyState=k.CONNECTING,this.extensions="",this.protocol="",(a=a||{}).protocols_whitelist&&m.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=a.transports,this._transportOptions=a.transportOptions||{};var i=a.sessionId||8;if("function"==typeof i)this._generateSessionId=i;else{if("number"!=typeof i)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return r.string(i)}}this._server=a.server||r.numberString(1e3);var n=new l(e);if(!n.host||!n.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(n.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==n.protocol&&"https:"!==n.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+n.protocol+"' is not allowed.");var o="https:"===n.protocol;if("https"===b.protocol&&!o)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var s=t.sort();s.forEach(function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<s.length-1&&e===s[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")});var c=d.getOrigin(b.href);this._origin=c?c.toLowerCase():null,n.set("pathname",n.pathname.replace(/\/+$/,"")),this.url=n.href,w("using url",this.url),this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:d.isOriginEqual(this.url,b.href),sameScheme:d.isSchemeEqual(this.url,b.href)},this._ir=new _(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function S(e){return 1e3===e||e>=3e3&&e<=4999}"production"!==e.env.NODE_ENV&&(w=t("debug")("sockjs-client:main")),o(k,v),k.prototype.close=function(e,t){if(e&&!S(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==k.CLOSING&&this.readyState!==k.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},k.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===k.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===k.OPEN&&this._transport.send(c.quote(e))},k.version=t("./version"),k.CONNECTING=0,k.OPEN=1,k.CLOSING=2,k.CLOSED=3,k.prototype._receiveInfo=function(e,t){if(w("_receiveInfo",t),this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=h.extend(e,this._urlInfo),w("info",e);var a=n.filterToEnabled(this._transportsWhitelist,e);this._transports=a.main,w(this._transports.length+" enabled transports"),this._connect()}else this._close(1002,"Cannot connect to server")},k.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(w("attempt",e.transportName),e.needBody&&(!i.document.body||void 0!==i.document.readyState&&"complete"!==i.document.readyState&&"interactive"!==i.document.readyState))return w("waiting for body"),this._transports.unshift(e),void u.attachEvent("load",this._connect.bind(this));var t=this._rto*e.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t),w("using timeout",t);var a=d.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),n=this._transportOptions[e.transportName];w("transport url",a);var l=new e(a,this._transUrl,n);return l.on("message",this._transportMessage.bind(this)),l.once("close",this._transportClose.bind(this)),l.transportName=e.transportName,void(this._transport=l)}this._close(2e3,"All transports failed",!1)},k.prototype._transportTimeout=function(){w("_transportTimeout"),this.readyState===k.CONNECTING&&this._transportClose(2007,"Transport timed out")},k.prototype._transportMessage=function(e){w("_transportMessage",e);var t,a=this,i=e.slice(0,1),n=e.slice(1);switch(i){case"o":return void this._open();case"h":return this.dispatchEvent(new g("heartbeat")),void w("heartbeat",this.transport)}if(n)try{t=s.parse(n)}catch(e){w("bad json",n)}if(void 0!==t)switch(i){case"a":Array.isArray(t)&&t.forEach(function(e){w("message",a.transport,e),a.dispatchEvent(new x(e))});break;case"m":w("message",this.transport,t),this.dispatchEvent(new x(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}else w("empty payload",n)},k.prototype._transportClose=function(e,t){w("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),S(e)||2e3===e||this.readyState!==k.CONNECTING?this._close(e,t):this._connect()},k.prototype._open=function(){w("_open",this._transport.transportName,this.readyState),this.readyState===k.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=k.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new g("open")),w("connected",this.transport)):this._close(1006,"Server lost session")},k.prototype._close=function(e,t,a){w("_close",this.transport,e,t,a,this.readyState);var i=!1;if(this._ir&&(i=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===k.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=k.CLOSING,setTimeout(function(){this.readyState=k.CLOSED,i&&this.dispatchEvent(new g("error"));var n=new y("close");n.wasClean=a||!1,n.code=e||1e3,n.reason=t,this.dispatchEvent(n),this.onmessage=this.onclose=this.onerror=null,w("disconnected")}.bind(this),0)},k.prototype.countRTO=function(e){return e>100?4*e:300+e},a.exports=function(e){return n=p(e),t("./iframe-bootstrap")(k,e),k}}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:54,inherits:56,json3:57,"url-parse":61}],15:[function(e,t,a){var i,n=Array.prototype,l=Object.prototype,o=Function.prototype,s=String.prototype,r=n.slice,d=l.toString,p=function(e){return"[object Function]"===l.toString.call(e)},h=function(e){return"[object String]"===d.call(e)},f=c.a&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();i=f?function(e,t,a,i){!i&&t in e||c()(e,t,{configurable:!0,enumerable:!1,writable:!0,value:a})}:function(e,t,a,i){!i&&t in e||(e[t]=a)};var m=function(e,t,a){for(var n in t)l.hasOwnProperty.call(t,n)&&i(e,n,t[n],a)},g=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function v(){}m(o,{bind:function(e){var t=this;if(!p(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var a=r.call(arguments,1),i=Math.max(0,t.length-a.length),n=[],l=0;l<i;l++)n.push("$"+l);var o=Function("binder","return function ("+n.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof o){var i=t.apply(this,a.concat(r.call(arguments)));return Object(i)===i?i:this}return t.apply(e,a.concat(r.call(arguments)))});return t.prototype&&(v.prototype=t.prototype,o.prototype=new v,v.prototype=null),o}}),m(Array,{isArray:function(e){return"[object Array]"===d.call(e)}});var b,y,x,_=Object("a"),w="a"!==_[0]||!(0 in _);m(n,{forEach:function(e){var t=g(this),a=w&&h(this)?this.split(""):t,i=arguments[1],n=-1,l=a.length>>>0;if(!p(e))throw new TypeError;for(;++n<l;)n in a&&e.call(i,a[n],n,t)}},(b=n.forEach,y=!0,x=!0,b&&(b.call("foo",function(e,t,a){"object"!==(void 0===a?"undefined":u()(a))&&(y=!1)}),b.call([1],function(){x="string"==typeof this},"x")),!(b&&y&&x)));var k=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);m(n,{indexOf:function(e){var t=w&&h(this)?this.split(""):g(this),a=t.length>>>0;if(!a)return-1;var i,n,l=0;for(arguments.length>1&&(i=arguments[1],(n=+i)!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))),l=n),l=l>=0?l:Math.max(0,a+l);l<a;l++)if(l in t&&t[l]===e)return l;return-1}},k);var S,D=s.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(S=void 0===/()??/.exec("")[1],s.split=function(e,t){var a=this;if(void 0===e&&0===t)return[];if("[object RegExp]"!==d.call(e))return D.call(this,e,t);var i,l,o,s,r=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),u=0;for(e=new RegExp(e.source,c+"g"),a+="",S||(i=new RegExp("^"+e.source+"$(?!\\s)",c)),t=void 0===t?-1>>>0:t>>>0;(l=e.exec(a))&&!((o=l.index+l[0].length)>u&&(r.push(a.slice(u,l.index)),!S&&l.length>1&&l[0].replace(i,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(l[e]=void 0)}),l.length>1&&l.index<a.length&&n.push.apply(r,l.slice(1)),s=l[0].length,u=o,r.length>=t));)e.lastIndex===l.index&&e.lastIndex++;return u===a.length?!s&&e.test("")||r.push(""):r.push(a.slice(u)),r.length>t?r.slice(0,t):r}):"0".split(void 0,0).length&&(s.split=function(e,t){return void 0===e&&0===t?[]:D.call(this,e,t)});var N=s.substr,P="".substr&&"b"!=="0b".substr(-1);m(s,{substr:function(e,t){return N.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},P)},{}],16:[function(e,t,a){t.exports=[e("./transport/websocket"),e("./transport/xhr-streaming"),e("./transport/xdr-streaming"),e("./transport/eventsource"),e("./transport/lib/iframe-wrap")(e("./transport/eventsource")),e("./transport/htmlfile"),e("./transport/lib/iframe-wrap")(e("./transport/htmlfile")),e("./transport/xhr-polling"),e("./transport/xdr-polling"),e("./transport/lib/iframe-wrap")(e("./transport/xhr-polling")),e("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(t,a,i){(function(e,i){var n=t("events").EventEmitter,l=t("inherits"),o=t("../../utils/event"),s=t("../../utils/url"),r=i.XMLHttpRequest,c=function(){};function d(e,t,a,i){c(e,t);var l=this;n.call(this),setTimeout(function(){l._start(e,t,a,i)},0)}"production"!==e.env.NODE_ENV&&(c=t("debug")("sockjs-client:browser:xhr")),l(d,n),d.prototype._start=function(e,t,a,i){var n=this;try{this.xhr=new r}catch(e){}if(!this.xhr)return c("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();t=s.addQuery(t,"t="+ +new Date),this.unloadRef=o.unloadAdd(function(){c("unload cleanup"),n._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){c("xhr timeout"),n.emit("finish",0,""),n._cleanup(!1)})}catch(e){return c("exception",e),this.emit("finish",0,""),void this._cleanup(!1)}if(i&&i.noCredentials||!d.supportsCORS||(c("withCredentials"),this.xhr.withCredentials="true"),i&&i.headers)for(var l in i.headers)this.xhr.setRequestHeader(l,i.headers[l]);this.xhr.onreadystatechange=function(){if(n.xhr){var e,t,a=n.xhr;switch(c("readyState",a.readyState),a.readyState){case 3:try{t=a.status,e=a.responseText}catch(e){}c("status",t),1223===t&&(t=204),200===t&&e&&e.length>0&&(c("chunk"),n.emit("chunk",t,e));break;case 4:t=a.status,c("status",t),1223===t&&(t=204),12005!==t&&12029!==t||(t=0),c("finish",t,a.responseText),n.emit("finish",t,a.responseText),n._cleanup(!1)}}};try{n.xhr.send(a)}catch(e){n.emit("finish",0,""),n._cleanup(!1)}},d.prototype._cleanup=function(e){if(c("cleanup"),this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},d.prototype.close=function(){c("close"),this._cleanup(!0)},d.enabled=!!r;var u=["Active"].concat("Object").join("X");!d.enabled&&u in i&&(c("overriding xmlhttprequest"),r=function(){try{return new i[u]("Microsoft.XMLHTTP")}catch(e){return null}},d.enabled=!!new r);var p=!1;try{p="withCredentials"in new r}catch(e){}d.supportsCORS=p,a.exports=d}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:54,events:3,inherits:56}],18:[function(t,a,i){(function(e){a.exports=e.EventSource}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(t,a,i){(function(e){var t=e.WebSocket||e.MozWebSocket;a.exports=t?function(e){return new t(e)}:void 0}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,a){var i=e("inherits"),n=e("./lib/ajax-based"),l=e("./receiver/eventsource"),o=e("./sender/xhr-cors"),s=e("eventsource");function r(e){if(!r.enabled())throw new Error("Transport created when disabled");n.call(this,e,"/eventsource",l,o)}i(r,n),r.enabled=function(){return!!s},r.transportName="eventsource",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:56}],21:[function(e,t,a){var i=e("inherits"),n=e("./receiver/htmlfile"),l=e("./sender/xhr-local"),o=e("./lib/ajax-based");function s(e){if(!n.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/htmlfile",n,l)}i(s,o),s.enabled=function(e){return n.enabled&&e.sameOrigin},s.transportName="htmlfile",s.roundTrips=2,t.exports=s},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:56}],22:[function(e,t,a){(function(a){var i=e("inherits"),n=e("json3"),l=e("events").EventEmitter,o=e("../version"),s=e("../utils/url"),r=e("../utils/iframe"),c=e("../utils/event"),d=e("../utils/random"),u=function(){};function p(e,t,a){if(!p.enabled())throw new Error("Transport created when disabled");l.call(this);var i=this;this.origin=s.getOrigin(a),this.baseUrl=a,this.transUrl=t,this.transport=e,this.windowId=d.string(8);var n=s.addPath(a,"/iframe.html")+"#"+this.windowId;u(e,t,n),this.iframeObj=r.createIframe(n,function(e){u("err callback"),i.emit("close",1006,"Unable to load an iframe ("+e+")"),i.close()}),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}"production"!==a.env.NODE_ENV&&(u=e("debug")("sockjs-client:transport:iframe")),i(p,l),p.prototype.close=function(){if(u("close"),this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},p.prototype._message=function(e){if(u("message",e.data),s.isOriginEqual(e.origin,this.origin)){var t;try{t=n.parse(e.data)}catch(t){return void u("bad json",e.data)}if(t.windowId===this.windowId)switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",n.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var a;try{a=n.parse(t.data)}catch(e){return void u("bad json",t.data)}this.emit("close",a[0],a[1]),this.close()}else u("mismatched window id",t.windowId,this.windowId)}else u("not same origin",e.origin,this.origin)},p.prototype.postMessage=function(e,t){u("postMessage",e,t),this.iframeObj.post(n.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},p.prototype.send=function(e){u("send",e),this.postMessage("m",e)},p.enabled=function(){return r.iframeEnabled},p.transportName="iframe",p.roundTrips=2,t.exports=p}).call(this,{env:{}})},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:54,events:3,inherits:56,json3:57}],23:[function(t,a,i){(function(e){var i=t("inherits"),n=t("./lib/sender-receiver"),l=t("./receiver/jsonp"),o=t("./sender/jsonp");function s(e){if(!s.enabled())throw new Error("Transport created when disabled");n.call(this,e,"/jsonp",o,l)}i(s,n),s.enabled=function(){return!!e.document},s.transportName="jsonp-polling",s.roundTrips=1,s.needBody=!0,a.exports=s}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:56}],24:[function(e,t,a){(function(a){var i=e("inherits"),n=e("../../utils/url"),l=e("./sender-receiver"),o=function(){};function s(e,t,a,i){l.call(this,e,t,function(e){return function(t,a,i){o("create ajax sender",t,a);var l={};"string"==typeof a&&(l.headers={"Content-type":"text/plain"});var s=n.addPath(t,"/xhr_send"),r=new e("POST",s,a,l);return r.once("finish",function(e){if(o("finish",e),r=null,200!==e&&204!==e)return i(new Error("http status "+e));i()}),function(){o("abort"),r.close(),r=null;var e=new Error("Aborted");e.code=1e3,i(e)}}}(i),a,i)}"production"!==a.env.NODE_ENV&&(o=e("debug")("sockjs-client:ajax-based")),i(s,l),t.exports=s}).call(this,{env:{}})},{"../../utils/url":52,"./sender-receiver":28,debug:54,inherits:56}],25:[function(e,t,a){(function(a){var i=e("inherits"),n=e("events").EventEmitter,l=function(){};function o(e,t){l(e),n.call(this),this.sendBuffer=[],this.sender=t,this.url=e}"production"!==a.env.NODE_ENV&&(l=e("debug")("sockjs-client:buffered-sender")),i(o,n),o.prototype.send=function(e){l("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},o.prototype.sendScheduleWait=function(){l("sendScheduleWait");var e,t=this;this.sendStop=function(){l("sendStop"),t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){l("timeout"),t.sendStop=null,t.sendSchedule()},25)},o.prototype.sendSchedule=function(){l("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(l("error",t),e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}},o.prototype._cleanup=function(){l("_cleanup"),this.removeAllListeners()},o.prototype.close=function(){l("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},t.exports=o}).call(this,{env:{}})},{debug:54,events:3,inherits:56}],26:[function(t,a,i){(function(e){var i=t("inherits"),n=t("../iframe"),l=t("../../utils/object");a.exports=function(t){function a(e,a){n.call(this,t.transportName,e,a)}return i(a,n),a.enabled=function(a,i){if(!e.document)return!1;var o=l.extend({},i);return o.sameOrigin=!0,t.enabled(o)&&n.enabled()},a.transportName="iframe-"+t.transportName,a.needBody=!0,a.roundTrips=n.roundTrips+t.roundTrips-1,a.facadeTransport=t,a}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/object":49,"../iframe":22,inherits:56}],27:[function(e,t,a){(function(a){var i=e("inherits"),n=e("events").EventEmitter,l=function(){};function o(e,t,a){l(t),n.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=a,this._scheduleReceiver()}"production"!==a.env.NODE_ENV&&(l=e("debug")("sockjs-client:polling")),i(o,n),o.prototype._scheduleReceiver=function(){l("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(t){l("message",t),e.emit("message",t)}),t.once("close",function(a,i){l("close",a,i,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||("network"===i?e._scheduleReceiver():(e.emit("close",a||1006,i),e.removeAllListeners()))})},o.prototype.abort=function(){l("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},t.exports=o}).call(this,{env:{}})},{debug:54,events:3,inherits:56}],28:[function(e,t,a){(function(a){var i=e("inherits"),n=e("../../utils/url"),l=e("./buffered-sender"),o=e("./polling"),s=function(){};function r(e,t,a,i,r){var c=n.addPath(e,t);s(c);var d=this;l.call(this,e,a),this.poll=new o(i,c,r),this.poll.on("message",function(e){s("poll message",e),d.emit("message",e)}),this.poll.once("close",function(e,t){s("poll close",e,t),d.poll=null,d.emit("close",e,t),d.close()})}"production"!==a.env.NODE_ENV&&(s=e("debug")("sockjs-client:sender-receiver")),i(r,l),r.prototype.close=function(){l.prototype.close.call(this),s("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},t.exports=r}).call(this,{env:{}})},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:54,inherits:56}],29:[function(e,t,a){(function(a){var i=e("inherits"),n=e("events").EventEmitter,l=e("eventsource"),o=function(){};function s(e){o(e),n.call(this);var t=this,a=this.es=new l(e);a.onmessage=function(e){o("message",e.data),t.emit("message",decodeURI(e.data))},a.onerror=function(e){o("error",a.readyState,e);var i=2!==a.readyState?"network":"permanent";t._cleanup(),t._close(i)}}"production"!==a.env.NODE_ENV&&(o=e("debug")("sockjs-client:receiver:eventsource")),i(s,n),s.prototype.abort=function(){o("abort"),this._cleanup(),this._close("user")},s.prototype._cleanup=function(){o("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},s.prototype._close=function(e){o("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},t.exports=s}).call(this,{env:{}})},{debug:54,events:3,eventsource:18,inherits:56}],30:[function(t,a,i){(function(e,i){var n=t("inherits"),l=t("../../utils/iframe"),o=t("../../utils/url"),s=t("events").EventEmitter,r=t("../../utils/random"),c=function(){};function d(e){c(e),s.call(this);var t=this;l.polluteGlobalNamespace(),this.id="a"+r.string(6),e=o.addQuery(e,"c="+decodeURIComponent(l.WPrefix+"."+this.id)),c("using htmlfile",d.htmlfileEnabled);var a=d.htmlfileEnabled?l.createHtmlfile:l.createIframe;i[l.WPrefix][this.id]={start:function(){c("start"),t.iframeObj.loaded()},message:function(e){c("message",e),t.emit("message",e)},stop:function(){c("stop"),t._cleanup(),t._close("network")}},this.iframeObj=a(e,function(){c("callback"),t._cleanup(),t._close("permanent")})}"production"!==e.env.NODE_ENV&&(c=t("debug")("sockjs-client:receiver:htmlfile")),n(d,s),d.prototype.abort=function(){c("abort"),this._cleanup(),this._close("user")},d.prototype._cleanup=function(){c("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete i[l.WPrefix][this.id]},d.prototype._close=function(e){c("_close",e),this.emit("close",null,e),this.removeAllListeners()},d.htmlfileEnabled=!1;var u=["Active"].concat("Object").join("X");if(u in i)try{d.htmlfileEnabled=!!new i[u]("htmlfile")}catch(e){}d.enabled=d.htmlfileEnabled||l.iframeEnabled,a.exports=d}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:54,events:3,inherits:56}],31:[function(t,a,i){(function(e,i){var n=t("../../utils/iframe"),l=t("../../utils/random"),o=t("../../utils/browser"),s=t("../../utils/url"),r=t("inherits"),c=t("events").EventEmitter,d=function(){};function u(e){d(e);var t=this;c.call(this),n.polluteGlobalNamespace(),this.id="a"+l.string(6);var a=s.addQuery(e,"c="+encodeURIComponent(n.WPrefix+"."+this.id));i[n.WPrefix][this.id]=this._callback.bind(this),this._createScript(a),this.timeoutId=setTimeout(function(){d("timeout"),t._abort(new Error("JSONP script loaded abnormally (timeout)"))},u.timeout)}"production"!==e.env.NODE_ENV&&(d=t("debug")("sockjs-client:receiver:jsonp")),r(u,c),u.prototype.abort=function(){if(d("abort"),i[n.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},u.timeout=35e3,u.scriptErrorTimeout=1e3,u.prototype._callback=function(e){d("_callback",e),this._cleanup(),this.aborting||(e&&(d("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},u.prototype._abort=function(e){d("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},u.prototype._cleanup=function(){if(d("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete i[n.WPrefix][this.id]},u.prototype._scriptError=function(){d("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},u.scriptErrorTimeout))},u.prototype._createScript=function(e){d("_createScript",e);var t,a=this,n=this.script=i.document.createElement("script");if(n.id="a"+l.string(8),n.src=e,n.type="text/javascript",n.charset="UTF-8",n.onerror=this._scriptError.bind(this),n.onload=function(){d("onload"),a._abort(new Error("JSONP script loaded abnormally (onload)"))},n.onreadystatechange=function(){if(d("onreadystatechange",n.readyState),/loaded|closed/.test(n.readyState)){if(n&&n.htmlFor&&n.onclick){a.loadedOkay=!0;try{n.onclick()}catch(e){}}n&&a._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===n.async&&i.document.attachEvent)if(o.isOpera())(t=this.script2=i.document.createElement("script")).text="try{var a = document.getElementById('"+n.id+"'); if(a)a.onerror();}catch(x){};",n.async=t.async=!1;else{try{n.htmlFor=n.id,n.event="onclick"}catch(e){}n.async=!0}void 0!==n.async&&(n.async=!0);var s=i.document.getElementsByTagName("head")[0];s.insertBefore(n,s.firstChild),t&&s.insertBefore(t,s.firstChild)},a.exports=u}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:54,events:3,inherits:56}],32:[function(e,t,a){(function(a){var i=e("inherits"),n=e("events").EventEmitter,l=function(){};function o(e,t){l(e),n.call(this);var a=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,t){l("finish",e,t),a._chunkHandler(e,t),a.xo=null;var i=200===e?"network":"permanent";l("close",i),a.emit("close",null,i),a._cleanup()})}"production"!==a.env.NODE_ENV&&(l=e("debug")("sockjs-client:receiver:xhr")),i(o,n),o.prototype._chunkHandler=function(e,t){if(l("_chunkHandler",e),200===e&&t)for(var a=-1;;this.bufferPosition+=a+1){var i=t.slice(this.bufferPosition);if(-1===(a=i.indexOf("\n")))break;var n=i.slice(0,a);n&&(l("message",n),this.emit("message",n))}},o.prototype._cleanup=function(){l("_cleanup"),this.removeAllListeners()},o.prototype.abort=function(){l("abort"),this.xo&&(this.xo.close(),l("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},t.exports=o}).call(this,{env:{}})},{debug:54,events:3,inherits:56}],33:[function(t,a,i){(function(e,i){var n,l,o=t("../../utils/random"),s=t("../../utils/url"),r=function(){};"production"!==e.env.NODE_ENV&&(r=t("debug")("sockjs-client:sender:jsonp")),a.exports=function(e,t,a){r(e,t),n||(r("createForm"),(n=i.document.createElement("form")).style.display="none",n.style.position="absolute",n.method="POST",n.enctype="application/x-www-form-urlencoded",n.acceptCharset="UTF-8",(l=i.document.createElement("textarea")).name="d",n.appendChild(l),i.document.body.appendChild(n));var c="a"+o.string(8);n.target=c,n.action=s.addQuery(s.addPath(e,"/jsonp_send"),"i="+c);var d=function(e){r("createIframe",e);try{return i.document.createElement('<iframe name="'+e+'">')}catch(a){var t=i.document.createElement("iframe");return t.name=e,t}}(c);d.id=c,d.style.display="none",n.appendChild(d);try{l.value=t}catch(e){}n.submit();var u=function(e){r("completed",c,e),d.onerror&&(d.onreadystatechange=d.onerror=d.onload=null,setTimeout(function(){r("cleaning up",c),d.parentNode.removeChild(d),d=null},500),l.value="",a(e))};return d.onerror=function(){r("onerror",c),u()},d.onload=function(){r("onload",c),u()},d.onreadystatechange=function(e){r("onreadystatechange",c,d.readyState,e),"complete"===d.readyState&&u()},function(){r("aborted",c),u(new Error("Aborted"))}}}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:54}],34:[function(t,a,i){(function(e,i){var n=t("events").EventEmitter,l=t("inherits"),o=t("../../utils/event"),s=t("../../utils/browser"),r=t("../../utils/url"),c=function(){};function d(e,t,a){c(e,t);var i=this;n.call(this),setTimeout(function(){i._start(e,t,a)},0)}"production"!==e.env.NODE_ENV&&(c=t("debug")("sockjs-client:sender:xdr")),l(d,n),d.prototype._start=function(e,t,a){c("_start");var n=this,l=new i.XDomainRequest;t=r.addQuery(t,"t="+ +new Date),l.onerror=function(){c("onerror"),n._error()},l.ontimeout=function(){c("ontimeout"),n._error()},l.onprogress=function(){c("progress",l.responseText),n.emit("chunk",200,l.responseText)},l.onload=function(){c("load"),n.emit("finish",200,l.responseText),n._cleanup(!1)},this.xdr=l,this.unloadRef=o.unloadAdd(function(){n._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(a)}catch(e){this._error()}},d.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},d.prototype._cleanup=function(e){if(c("cleanup",e),this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},d.prototype.close=function(){c("close"),this._cleanup(!0)},d.enabled=!(!i.XDomainRequest||!s.hasDomain()),a.exports=d}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:54,events:3,inherits:56}],35:[function(e,t,a){var i=e("inherits"),n=e("../driver/xhr");function l(e,t,a,i){n.call(this,e,t,a,i)}i(l,n),l.enabled=n.enabled&&n.supportsCORS,t.exports=l},{"../driver/xhr":17,inherits:56}],36:[function(e,t,a){var i=e("events").EventEmitter;function n(){var e=this;i.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},n.timeout)}e("inherits")(n,i),n.prototype.close=function(){clearTimeout(this.to)},n.timeout=2e3,t.exports=n},{events:3,inherits:56}],37:[function(e,t,a){var i=e("inherits"),n=e("../driver/xhr");function l(e,t,a){n.call(this,e,t,a,{noCredentials:!0})}i(l,n),l.enabled=n.enabled,t.exports=l},{"../driver/xhr":17,inherits:56}],38:[function(e,t,a){(function(a){var i=e("../utils/event"),n=e("../utils/url"),l=e("inherits"),o=e("events").EventEmitter,s=e("./driver/websocket"),r=function(){};function c(e,t,a){if(!c.enabled())throw new Error("Transport created when disabled");o.call(this),r("constructor",e);var l=this,d=n.addPath(e,"/websocket");d="https"===d.slice(0,5)?"wss"+d.slice(5):"ws"+d.slice(4),this.url=d,this.ws=new s(this.url,[],a),this.ws.onmessage=function(e){r("message event",e.data),l.emit("message",e.data)},this.unloadRef=i.unloadAdd(function(){r("unload"),l.ws.close()}),this.ws.onclose=function(e){r("close event",e.code,e.reason),l.emit("close",e.code,e.reason),l._cleanup()},this.ws.onerror=function(e){r("error event",e),l.emit("close",1006,"WebSocket connection broken"),l._cleanup()}}"production"!==a.env.NODE_ENV&&(r=e("debug")("sockjs-client:websocket")),l(c,o),c.prototype.send=function(e){var t="["+e+"]";r("send",t),this.ws.send(t)},c.prototype.close=function(){r("close");var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){r("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),i.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return r("enabled"),!!s},c.transportName="websocket",c.roundTrips=2,t.exports=c}).call(this,{env:{}})},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:54,events:3,inherits:56}],39:[function(e,t,a){var i=e("inherits"),n=e("./lib/ajax-based"),l=e("./xdr-streaming"),o=e("./receiver/xhr"),s=e("./sender/xdr");function r(e){if(!s.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr",o,s)}i(r,n),r.enabled=l.enabled,r.transportName="xdr-polling",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:56}],40:[function(e,t,a){var i=e("inherits"),n=e("./lib/ajax-based"),l=e("./receiver/xhr"),o=e("./sender/xdr");function s(e){if(!o.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr_streaming",l,o)}i(s,n),s.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(o.enabled&&e.sameScheme)},s.transportName="xdr-streaming",s.roundTrips=2,t.exports=s},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:56}],41:[function(e,t,a){var i=e("inherits"),n=e("./lib/ajax-based"),l=e("./receiver/xhr"),o=e("./sender/xhr-cors"),s=e("./sender/xhr-local");function r(e){if(!s.enabled&&!o.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr",l,o)}i(r,n),r.enabled=function(e){return!e.nullOrigin&&(!(!s.enabled||!e.sameOrigin)||o.enabled)},r.transportName="xhr-polling",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:56}],42:[function(t,a,i){(function(e){var i=t("inherits"),n=t("./lib/ajax-based"),l=t("./receiver/xhr"),o=t("./sender/xhr-cors"),s=t("./sender/xhr-local"),r=t("../utils/browser");function c(e){if(!s.enabled&&!o.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr_streaming",l,o)}i(c,n),c.enabled=function(e){return!e.nullOrigin&&(!r.isOpera()&&o.enabled)},c.transportName="xhr-streaming",c.roundTrips=2,c.needBody=!!e.document,a.exports=c}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:56}],43:[function(t,a,i){(function(e){e.crypto&&e.crypto.getRandomValues?a.exports.randomBytes=function(t){var a=new Uint8Array(t);return e.crypto.getRandomValues(a),a}:a.exports.randomBytes=function(e){for(var t=new Array(e),a=0;a<e;a++)t[a]=Math.floor(256*Math.random());return t}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(t,a,i){(function(e){a.exports={isOpera:function(){return e.navigator&&/opera/i.test(e.navigator.userAgent)},isKonqueror:function(){return e.navigator&&/konqueror/i.test(e.navigator.userAgent)},hasDomain:function(){if(!e.document)return!0;try{return!!e.document.domain}catch(e){return!1}}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,a){var i,n=e("json3"),l=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;t.exports={quote:function(e){var t=n.stringify(e);return l.lastIndex=0,l.test(t)?(i||(i=function(e){var t,a={},i=[];for(t=0;t<65536;t++)i.push(String.fromCharCode(t));return e.lastIndex=0,i.join("").replace(e,function(e){return a[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,a}(l)),t.replace(l,function(e){return i[e]})):t}}},{json3:57}],46:[function(t,a,i){(function(e){var i=t("./random"),n={},l=!1,o=e.chrome&&e.chrome.app&&e.chrome.app.runtime;a.exports={attachEvent:function(t,a){void 0!==e.addEventListener?e.addEventListener(t,a,!1):e.document&&e.attachEvent&&(e.document.attachEvent("on"+t,a),e.attachEvent("on"+t,a))},detachEvent:function(t,a){void 0!==e.addEventListener?e.removeEventListener(t,a,!1):e.document&&e.detachEvent&&(e.document.detachEvent("on"+t,a),e.detachEvent("on"+t,a))},unloadAdd:function(e){if(o)return null;var t=i.string(8);return n[t]=e,l&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in n&&delete n[e]},triggerUnloadCallbacks:function(){for(var e in n)n[e](),delete n[e]}};o||a.exports.attachEvent("unload",function(){l||(l=!0,a.exports.triggerUnloadCallbacks())})}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./random":50}],47:[function(t,a,i){(function(e,i){var n=t("./event"),l=t("json3"),o=t("./browser"),s=function(){};"production"!==e.env.NODE_ENV&&(s=t("debug")("sockjs-client:utils:iframe")),a.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){a.exports.WPrefix in i||(i[a.exports.WPrefix]={})},postMessage:function(e,t){i.parent!==i?i.parent.postMessage(l.stringify({windowId:a.exports.currentWindowId,type:e,data:t||""}),"*"):s("Cannot postMessage, no parent window.",e,t)},createIframe:function(e,t){var a,l,o=i.document.createElement("iframe"),r=function(){s("unattach"),clearTimeout(a);try{o.onload=null}catch(e){}o.onerror=null},c=function(){s("cleanup"),o&&(r(),setTimeout(function(){o&&o.parentNode.removeChild(o),o=null},0),n.unloadDel(l))},d=function(e){s("onerror",e),o&&(c(),t(e))};return o.src=e,o.style.display="none",o.style.position="absolute",o.onerror=function(){d("onerror")},o.onload=function(){s("onload"),clearTimeout(a),a=setTimeout(function(){d("onload timeout")},2e3)},i.document.body.appendChild(o),a=setTimeout(function(){d("timeout")},15e3),l=n.unloadAdd(c),{post:function(e,t){s("post",e,t);try{setTimeout(function(){o&&o.contentWindow&&o.contentWindow.postMessage(e,t)},0)}catch(e){}},cleanup:c,loaded:r}},createHtmlfile:function(e,t){var l,o,r,c=["Active"].concat("Object").join("X"),d=new i[c]("htmlfile"),u=function(){clearTimeout(l),r.onerror=null},p=function(){d&&(u(),n.unloadDel(o),r.parentNode.removeChild(r),r=d=null,CollectGarbage())},h=function(e){s("onerror",e),d&&(p(),t(e))};d.open(),d.write('<html><script>document.domain="'+i.document.domain+'";<\/script></html>'),d.close(),d.parentWindow[a.exports.WPrefix]=i[a.exports.WPrefix];var f=d.createElement("div");return d.body.appendChild(f),r=d.createElement("iframe"),f.appendChild(r),r.src=e,r.onerror=function(){h("onerror")},l=setTimeout(function(){h("timeout")},15e3),o=n.unloadAdd(p),{post:function(e,t){try{setTimeout(function(){r&&r.contentWindow&&r.contentWindow.postMessage(e,t)},0)}catch(e){}},cleanup:p,loaded:u}}},a.exports.iframeEnabled=!1,i.document&&(a.exports.iframeEnabled=("function"==typeof i.postMessage||"object"===u()(i.postMessage))&&!o.isKonqueror())}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browser":44,"./event":46,debug:54,json3:57}],48:[function(t,a,i){(function(e){var t={};["log","debug","warn"].forEach(function(a){var i;try{i=e.console&&e.console[a]&&e.console[a].apply}catch(e){}t[a]=i?function(){return e.console[a].apply(e.console,arguments)}:"log"===a?function(){}:t.log}),a.exports=t}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,a){t.exports={isObject:function(e){var t=void 0===e?"undefined":u()(e);return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,a,i=1,n=arguments.length;i<n;i++)for(a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}}},{}],50:[function(e,t,a){var i=e("crypto");t.exports={string:function(e){for(var t="abcdefghijklmnopqrstuvwxyz012345".length,a=i.randomBytes(e),n=[],l=0;l<e;l++)n.push("abcdefghijklmnopqrstuvwxyz012345".substr(a[l]%t,1));return n.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},{crypto:43}],51:[function(e,t,a){(function(a){var i=function(){};"production"!==a.env.NODE_ENV&&(i=e("debug")("sockjs-client:utils:transport")),t.exports=function(e){return{filterToEnabled:function(t,a){var n={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach(function(e){e&&("websocket"!==e.transportName||!1!==a.websocket?t.length&&-1===t.indexOf(e.transportName)?i("not in whitelist",e.transportName):e.enabled(a)?(i("enabled",e.transportName),n.main.push(e),e.facadeTransport&&n.facade.push(e.facadeTransport)):i("disabled",e.transportName):i("disabled from server","websocket"))}),n}}}}).call(this,{env:{}})},{debug:54}],52:[function(e,t,a){(function(a){var i=e("url-parse"),n=function(){};"production"!==a.env.NODE_ENV&&(n=e("debug")("sockjs-client:utils:url")),t.exports={getOrigin:function(e){if(!e)return null;var t=new i(e);if("file:"===t.protocol)return null;var a=t.port;return a||(a="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+a},isOriginEqual:function(e,t){var a=this.getOrigin(e)===this.getOrigin(t);return n("same",e,t,a),a},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var a=e.split("?");return a[0]+t+(a[1]?"?"+a[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}}).call(this,{env:{}})},{debug:54,"url-parse":61}],53:[function(e,t,a){t.exports="1.1.2"},{}],54:[function(e,t,a){(function(i){function n(){try{return a.storage.debug}catch(e){}if(void 0!==i&&"env"in i)return i.env.DEBUG}(a=t.exports=e("./debug")).log=function(){return"object"===("undefined"==typeof console?"undefined":u()(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},a.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+a.humanize(this.diff),!t)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var n=0,l=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(l=++n)}),e.splice(l,0,i)},a.save=function(e){try{null==e?a.storage.removeItem("debug"):a.storage.debug=e}catch(e){}},a.load=n,a.useColors=function(){if("undefined"!=typeof window&&window&&void 0!==window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},a.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],a.formatters.j=function(e){try{return s()(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},a.enable(n())}).call(this,{env:{}})},{"./debug":55}],55:[function(e,t,a){var i;function n(e){function t(){if(t.enabled){var e=t,n=+new Date,l=n-(i||n);e.diff=l,e.prev=i,e.curr=n,i=n;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=a.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var r=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(t,i){if("%%"===t)return t;r++;var n=a.formatters[i];if("function"==typeof n){var l=o[r];t=n.call(e,l),o.splice(r,1),r--}return t}),a.formatArgs.call(e,o),(t.log||a.log||console.log.bind(console)).apply(e,o)}}return t.namespace=e,t.enabled=a.enabled(e),t.useColors=a.useColors(),t.color=function(e){var t,i=0;for(t in e)i=(i<<5)-i+e.charCodeAt(t),i|=0;return a.colors[Math.abs(i)%a.colors.length]}(e),"function"==typeof a.init&&a.init(t),t}(a=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},a.disable=function(){a.enable("")},a.enable=function(e){a.save(e);for(var t=(e||"").split(/[\s,]+/),i=t.length,n=0;n<i;n++)t[n]&&("-"===(e=t[n].replace(/\*/g,".*?"))[0]?a.skips.push(new RegExp("^"+e.substr(1)+"$")):a.names.push(new RegExp("^"+e+"$")))},a.enabled=function(e){var t,i;for(t=0,i=a.skips.length;t<i;t++)if(a.skips[t].test(e))return!1;for(t=0,i=a.names.length;t<i;t++)if(a.names[t].test(e))return!0;return!1},a.humanize=e("ms"),a.names=[],a.skips=[],a.formatters={}},{ms:58}],56:[function(e,t,a){"function"==typeof l.a?t.exports=function(e,t){e.super_=t,e.prototype=l()(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}},{}],57:[function(t,a,i){(function(e){(function(){var t={function:!0,object:!0},n=t[void 0===i?"undefined":u()(i)]&&i&&!i.nodeType&&i,l=t["undefined"==typeof window?"undefined":u()(window)]&&window||this,o=n&&t[void 0===a?"undefined":u()(a)]&&a&&!a.nodeType&&"object"==(void 0===e?"undefined":u()(e))&&e;function s(e,a){e||(e=l.Object()),a||(a=l.Object());var i=e.Number||l.Number,n=e.String||l.String,o=e.Object||l.Object,r=e.Date||l.Date,c=e.SyntaxError||l.SyntaxError,d=e.TypeError||l.TypeError,p=e.Math||l.Math,h=e.JSON||l.JSON;"object"==(void 0===h?"undefined":u()(h))&&h&&(a.stringify=h.stringify,a.parse=h.parse);var f,m,g,v=o.prototype,b=v.toString,y=new r(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(e){}function x(e){if(x[e]!==g)return x[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=x("json-stringify")&&x("json-parse");else{var l,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var s=a.stringify,c="function"==typeof s&&y;if(c){(l=function(){return 1}).toJSON=l;try{c="0"===s(0)&&"0"===s(new i)&&'""'==s(new n)&&s(b)===g&&s(g)===g&&s()===g&&"1"===s(l)&&"[1]"==s([l])&&"[null]"==s([g])&&"null"==s(null)&&"[null,null,null]"==s([g,b,null])&&s({a:[l,!0,!1,null,"\0\b\n\f\r\t"]})==o&&"1"===s(null,l)&&"[\n 1,\n 2\n]"==s([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==s(new r(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==s(new r(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new r(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==s(new r(-1))}catch(e){c=!1}}t=c}if("json-parse"==e){var d=a.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){var u=5==(l=d(o)).a.length&&1===l.a[0];if(u){try{u=!d('"\t"')}catch(e){}if(u)try{u=1!==d("01")}catch(e){}if(u)try{u=1!==d("1.")}catch(e){}}}}catch(e){u=!1}t=u}}return x[e]=!!t}if(!x("json")){var _=x("bug-string-char-index");if(!y)var w=p.floor,k=[0,31,59,90,120,151,181,212,243,273,304,334],S=function(e,t){return k[t]+365*(e-1970)+w((e-1969+(t=+(t>1)))/4)-w((e-1901+t)/100)+w((e-1601+t)/400)};if((f=v.hasOwnProperty)||(f=function(e){var t,a={};return(a.__proto__=null,a.__proto__={toString:1},a).toString!=b?f=function(e){var t=this.__proto__,a=e in(this.__proto__=null,this);return this.__proto__=t,a}:(t=a.constructor,f=function(e){var a=(this.constructor||t).prototype;return e in this&&!(e in a&&this[e]===a[e])}),a=null,f.call(this,e)}),m=function(e,a){var i,n,l,o=0;for(l in(i=function(){this.valueOf=0}).prototype.valueOf=0,n=new i)f.call(n,l)&&o++;return i=n=null,o?m=2==o?function(e,t){var a,i={},n="[object Function]"==b.call(e);for(a in e)n&&"prototype"==a||f.call(i,a)||!(i[a]=1)||!f.call(e,a)||t(a)}:function(e,t){var a,i,n="[object Function]"==b.call(e);for(a in e)n&&"prototype"==a||!f.call(e,a)||(i="constructor"===a)||t(a);(i||f.call(e,a="constructor"))&&t(a)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,a){var i,l,o="[object Function]"==b.call(e),s=!o&&"function"!=typeof e.constructor&&t[u()(e.hasOwnProperty)]&&e.hasOwnProperty||f;for(i in e)o&&"prototype"==i||!s.call(e,i)||a(i);for(l=n.length;i=n[--l];s.call(e,i)&&a(i));}),m(e,a)},!x("json-stringify")){var D={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},N=function(e,t){return("000000"+(t||0)).slice(-e)},P=function(e){for(var t='"',a=0,i=e.length,n=!_||i>10,l=n&&(_?e.split(""):e);a<i;a++){var o=e.charCodeAt(a);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=D[o];break;default:if(o<32){t+="\\u00"+N(2,o.toString(16));break}t+=n?l[a]:e.charAt(a)}}return t+'"'};a.stringify=function(e,a,i){var n,l,o,s;if(t[void 0===a?"undefined":u()(a)]&&a)if("[object Function]"==(s=b.call(a)))l=a;else if("[object Array]"==s){o={};for(var r,c=0,p=a.length;c<p;r=a[c++],("[object String]"==(s=b.call(r))||"[object Number]"==s)&&(o[r]=1));}if(i)if("[object Number]"==(s=b.call(i))){if((i-=i%1)>0)for(n="",i>10&&(i=10);n.length<i;n+=" ");}else"[object String]"==s&&(n=i.length<=10?i:i.slice(0,10));return function e(t,a,i,n,l,o,s){var r,c,p,h,v,y,x,_,k,D,C,R,V,E,T,I;try{r=a[t]}catch(e){}if("object"==(void 0===r?"undefined":u()(r))&&r)if("[object Date]"!=(c=b.call(r))||f.call(r,"toJSON"))"function"==typeof r.toJSON&&("[object Number]"!=c&&"[object String]"!=c&&"[object Array]"!=c||f.call(r,"toJSON"))&&(r=r.toJSON(t));else if(r>-1/0&&r<1/0){if(S){for(v=w(r/864e5),p=w(v/365.2425)+1970-1;S(p+1,0)<=v;p++);for(h=w((v-S(p,0))/30.42);S(p,h+1)<=v;h++);v=1+v-S(p,h),x=w((y=(r%864e5+864e5)%864e5)/36e5)%24,_=w(y/6e4)%60,k=w(y/1e3)%60,D=y%1e3}else p=r.getUTCFullYear(),h=r.getUTCMonth(),v=r.getUTCDate(),x=r.getUTCHours(),_=r.getUTCMinutes(),k=r.getUTCSeconds(),D=r.getUTCMilliseconds();r=(p<=0||p>=1e4?(p<0?"-":"+")+N(6,p<0?-p:p):N(4,p))+"-"+N(2,h+1)+"-"+N(2,v)+"T"+N(2,x)+":"+N(2,_)+":"+N(2,k)+"."+N(3,D)+"Z"}else r=null;if(i&&(r=i.call(a,t,r)),null===r)return"null";if("[object Boolean]"==(c=b.call(r)))return""+r;if("[object Number]"==c)return r>-1/0&&r<1/0?""+r:"null";if("[object String]"==c)return P(""+r);if("object"==(void 0===r?"undefined":u()(r))){for(E=s.length;E--;)if(s[E]===r)throw d();if(s.push(r),C=[],T=o,o+=l,"[object Array]"==c){for(V=0,E=r.length;V<E;V++)R=e(V,r,i,n,l,o,s),C.push(R===g?"null":R);I=C.length?l?"[\n"+o+C.join(",\n"+o)+"\n"+T+"]":"["+C.join(",")+"]":"[]"}else m(n||r,function(t){var a=e(t,r,i,n,l,o,s);a!==g&&C.push(P(t)+":"+(l?" ":"")+a)}),I=C.length?l?"{\n"+o+C.join(",\n"+o)+"\n"+T+"}":"{"+C.join(",")+"}":"{}";return s.pop(),I}}("",((r={})[""]=e,r),l,o,n,"",[])}}if(!x("json-parse")){var C,R,V=n.fromCharCode,E={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},T=function(){throw C=R=null,c()},I=function(){for(var e,t,a,i,n,l=R,o=l.length;C<o;)switch(n=l.charCodeAt(C)){case 9:case 10:case 13:case 32:C++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=_?l.charAt(C):l[C],C++,e;case 34:for(e="@",C++;C<o;)if((n=l.charCodeAt(C))<32)T();else if(92==n)switch(n=l.charCodeAt(++C)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=E[n],C++;break;case 117:for(t=++C,a=C+4;C<a;C++)(n=l.charCodeAt(C))>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70||T();e+=V("0x"+l.slice(t,C));break;default:T()}else{if(34==n)break;for(n=l.charCodeAt(C),t=C;n>=32&&92!=n&&34!=n;)n=l.charCodeAt(++C);e+=l.slice(t,C)}if(34==l.charCodeAt(C))return C++,e;T();default:if(t=C,45==n&&(i=!0,n=l.charCodeAt(++C)),n>=48&&n<=57){for(48==n&&((n=l.charCodeAt(C+1))>=48&&n<=57)&&T(),i=!1;C<o&&((n=l.charCodeAt(C))>=48&&n<=57);C++);if(46==l.charCodeAt(C)){for(a=++C;a<o&&((n=l.charCodeAt(a))>=48&&n<=57);a++);a==C&&T(),C=a}if(101==(n=l.charCodeAt(C))||69==n){for(43!=(n=l.charCodeAt(++C))&&45!=n||C++,a=C;a<o&&((n=l.charCodeAt(a))>=48&&n<=57);a++);a==C&&T(),C=a}return+l.slice(t,C)}if(i&&T(),"true"==l.slice(C,C+4))return C+=4,!0;if("false"==l.slice(C,C+5))return C+=5,!1;if("null"==l.slice(C,C+4))return C+=4,null;T()}return"$"},M=function(e,t,a){var i=F(e,t,a);i===g?delete e[t]:e[t]=i},F=function(e,t,a){var i,n=e[t];if("object"==(void 0===n?"undefined":u()(n))&&n)if("[object Array]"==b.call(n))for(i=n.length;i--;)M(n,i,a);else m(n,function(e){M(n,e,a)});return a.call(e,t,n)};a.parse=function(e,t){var a,i;return C=0,R=""+e,a=function e(t){var a,i;if("$"==t&&T(),"string"==typeof t){if("@"==(_?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(a=[];"]"!=(t=I());i||(i=!0))i&&(","==t?"]"==(t=I())&&T():T()),","==t&&T(),a.push(e(t));return a}if("{"==t){for(a={};"}"!=(t=I());i||(i=!0))i&&(","==t?"}"==(t=I())&&T():T()),","!=t&&"string"==typeof t&&"@"==(_?t.charAt(0):t[0])&&":"==I()||T(),a[t.slice(1)]=e(I());return a}T()}return t}(I()),"$"!=I()&&T(),C=R=null,t&&"[object Function]"==b.call(t)?F(((i={})[""]=a,i),"",t):a}}}return a.runInContext=s,a}if(!o||o.global!==o&&o.window!==o&&o.self!==o||(l=o),n)s(l,n);else{var r=l.JSON,c=l.JSON3,d=!1,p=s(l,l.JSON3={noConflict:function(){return d||(d=!0,l.JSON=r,l.JSON3=c,r=c=null),p}});l.JSON={parse:p.parse,stringify:p.stringify}}}).call(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(e,t,a){var i=1e3,n=60*i,l=60*n,o=24*l,r=365.25*o;function c(e,t,a){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+a:Math.ceil(e/t)+" "+a+"s"}t.exports=function(e,t){t=t||{};var a,d=void 0===e?"undefined":u()(e);if("string"===d&&e.length>0)return function(e){if((e=String(e)).length>1e4)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*r;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*l;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===d&&!1===isNaN(e))return t.long?c(a=e,o,"day")||c(a,l,"hour")||c(a,n,"minute")||c(a,i,"second")||a+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=l)return Math.round(e/l)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=i)return Math.round(e/i)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+s()(e))}},{}],59:[function(e,t,a){var i=Object.prototype.hasOwnProperty;a.stringify=function(e,t){t=t||"";var a=[];for(var n in"string"!=typeof t&&(t="?"),e)i.call(e,n)&&a.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return a.length?t+a.join("&"):""},a.parse=function(e){for(var t,a=/([^=?&]+)=?([^&]*)/g,i={};t=a.exec(e);i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return i}},{}],60:[function(e,t,a){t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],61:[function(e,t,a){var i=e("requires-port"),n=e("./lolcation"),l=e("querystringify"),o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,s=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]];function r(e){var t=o.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function c(e,t,a){if(!(this instanceof c))return new c(e,t,a);var o,d,p,h,f,m,g=s.slice(),v=void 0===t?"undefined":u()(t),b=this,y=0;for("object"!==v&&"string"!==v&&(a=t,t=null),a&&"function"!=typeof a&&(a=l.parse),t=n(t),o=!(d=r(e||"")).protocol&&!d.slashes,b.slashes=d.slashes||o&&t.slashes,b.protocol=d.protocol||t.protocol||"",e=d.rest,d.slashes||(g[2]=[/(.*)/,"pathname"]);y<g.length;y++)p=(h=g[y])[0],m=h[1],p!=p?b[m]=e:"string"==typeof p?~(f=e.indexOf(p))&&("number"==typeof h[2]?(b[m]=e.slice(0,f),e=e.slice(f+h[2])):(b[m]=e.slice(f),e=e.slice(0,f))):(f=p.exec(e))&&(b[m]=f[1],e=e.slice(0,f.index)),b[m]=b[m]||o&&h[3]&&t[m]||"",h[4]&&(b[m]=b[m].toLowerCase());a&&(b.query=a(b.query)),o&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){for(var a=(t||"/").split("/").slice(0,-1).concat(e.split("/")),i=a.length,n=a[i-1],l=!1,o=0;i--;)"."===a[i]?a.splice(i,1):".."===a[i]?(a.splice(i,1),o++):o&&(0===i&&(l=!0),a.splice(i,1),o--);return l&&a.unshift(""),"."!==n&&".."!==n||a.push(""),a.join("/")}(b.pathname,t.pathname)),i(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(h=b.auth.split(":"),b.username=h[0]||"",b.password=h[1]||""),b.origin=b.protocol&&b.host&&"file:"!==b.protocol?b.protocol+"//"+b.host:"null",b.href=b.toString()}c.prototype.set=function(e,t,a){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(a||l.parse)(t)),n[e]=t;break;case"port":n[e]=t,i(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!a;break;case"pathname":n.pathname=t.length&&"/"!==t.charAt(0)?"/"+t:t;break;default:n[e]=t}for(var o=0;o<s.length;o++){var r=s[o];r[4]&&(n[r[1]]=n[r[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},c.prototype.toString=function(e){e&&"function"==typeof e||(e=l.stringify);var t,a=this,i=a.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var n=i+(a.slashes?"//":"");return a.username&&(n+=a.username,a.password&&(n+=":"+a.password),n+="@"),n+=a.host+a.pathname,(t="object"===u()(a.query)?e(a.query):a.query)&&(n+="?"!==t.charAt(0)?"?"+t:t),a.hash&&(n+=a.hash),n},c.extractProtocol=r,c.location=n,c.qs=l,t.exports=c},{"./lolcation":62,querystringify:59,"requires-port":60}],62:[function(t,a,i){(function(e){var i,n=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l={hash:1,query:1};a.exports=function(a){a=a||e.location||{},i=i||t("./");var o,s={},r=void 0===a?"undefined":u()(a);if("blob:"===a.protocol)s=new i(unescape(a.pathname),{});else if("string"===r)for(o in s=new i(a,{}),l)delete s[o];else if("object"===r){for(o in a)o in l||(s[o]=a[o]);void 0===s.slashes&&(s.slashes=n.test(a.href))}return s}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":61}]},{},[1])(1)})}).call(t,a("DuR2"),a("f1Eh")(e))},ECOc:function(e,t){},EwLT:function(e,t){},GVqr:function(e,t){(function(){var e,a,i,n,l={}.hasOwnProperty,o=[].slice;e={LF:"\n",NULL:"\0"},i=function(){var t;function a(e,t,a){this.command=e,this.headers=null!=t?t:{},this.body=null!=a?a:""}return a.prototype.toString=function(){var t,i,n,o,s;for(i in t=[this.command],(n=!1===this.headers["content-length"])&&delete this.headers["content-length"],s=this.headers)l.call(s,i)&&(o=s[i],t.push(i+":"+o));return this.body&&!n&&t.push("content-length:"+a.sizeOfUTF8(this.body)),t.push(e.LF+this.body),t.join(e.LF)},a.sizeOfUTF8=function(e){return e?encodeURI(e).match(/%..|./g).length:0},t=function(t){var i,n,l,o,s,r,c,d,u,p,h,f,m,g,v,b,y;for(o=t.search(RegExp(""+e.LF+e.LF)),l=(s=t.substring(0,o).split(e.LF)).shift(),r={},f=function(e){return e.replace(/^\s+|\s+$/g,"")},m=0,v=(b=s.reverse()).length;m<v;m++)d=(p=b[m]).indexOf(":"),r[f(p.substring(0,d))]=f(p.substring(d+1));if(i="",h=o+2,r["content-length"])u=parseInt(r["content-length"]),i=(""+t).substring(h,h+u);else for(n=null,c=g=h,y=t.length;(h<=y?g<y:g>y)&&(n=t.charAt(c))!==e.NULL;c=h<=y?++g:--g)i+=n;return new a(l,r,i)},a.unmarshall=function(a){var i,n,l,o;return n=a.split(RegExp(""+e.NULL+e.LF+"*")),(o={frames:[],partial:""}).frames=function(){var e,a,l,o;for(o=[],e=0,a=(l=n.slice(0,-1)).length;e<a;e++)i=l[e],o.push(t(i));return o}(),(l=n.slice(-1)[0])===e.LF||-1!==l.search(RegExp(""+e.NULL+e.LF+"*$"))?o.frames.push(t(l)):o.partial=l,o},a.marshall=function(t,i,n){return new a(t,i,n).toString()+e.NULL},a}(),a=function(){var t;function a(e){this.ws=e,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={},this.partialData=""}return a.prototype.debug=function(e){var t;return"undefined"!=typeof window&&null!==window&&null!=(t=window.console)?t.log(e):void 0},t=function(){return Date.now?Date.now():(new Date).valueOf},a.prototype._transmit=function(e,t,a){var n;for(n=i.marshall(e,t,a),"function"==typeof this.debug&&this.debug(">>> "+n);;){if(!(n.length>this.maxWebSocketFrameSize))return this.ws.send(n);this.ws.send(n.substring(0,this.maxWebSocketFrameSize)),n=n.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+n.length)}},a.prototype._setupHeartbeat=function(a){var i,l,o,s,r,c,d;if((r=a.version)===n.VERSIONS.V1_1||r===n.VERSIONS.V1_2)return l=(c=function(){var e,t,i,n;for(n=[],e=0,t=(i=a["heart-beat"].split(",")).length;e<t;e++)s=i[e],n.push(parseInt(s));return n}())[0],i=c[1],0!==this.heartbeat.outgoing&&0!==i&&(o=Math.max(this.heartbeat.outgoing,i),"function"==typeof this.debug&&this.debug("send PING every "+o+"ms"),this.pinger=n.setInterval(o,(d=this,function(){return d.ws.send(e.LF),"function"==typeof d.debug?d.debug(">>> PING"):void 0}))),0!==this.heartbeat.incoming&&0!==l?(o=Math.max(this.heartbeat.incoming,l),"function"==typeof this.debug&&this.debug("check PONG every "+o+"ms"),this.ponger=n.setInterval(o,function(e){return function(){var a;if((a=t()-e.serverActivity)>2*o)return"function"==typeof e.debug&&e.debug("did not receive server activity for the last "+a+"ms"),e.ws.close()}}(this))):void 0},a.prototype._parseConnect=function(){var e,t,a,i;switch(i={},(e=1<=arguments.length?o.call(arguments,0):[]).length){case 2:i=e[0],t=e[1];break;case 3:e[1]instanceof Function?(i=e[0],t=e[1],a=e[2]):(i.login=e[0],i.passcode=e[1],t=e[2]);break;case 4:i.login=e[0],i.passcode=e[1],t=e[2],a=e[3];break;default:i.login=e[0],i.passcode=e[1],t=e[2],a=e[3],i.host=e[4]}return[i,t,a]},a.prototype.connect=function(){var a,l,s,r,c;return a=1<=arguments.length?o.call(arguments,0):[],r=this._parseConnect.apply(this,a),s=r[0],this.connectCallback=r[1],l=r[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=(c=this,function(a){var n,o,s,r,d,u,p,h,f,m,g,v,b;if(r="undefined"!=typeof ArrayBuffer&&a.data instanceof ArrayBuffer?(n=new Uint8Array(a.data),"function"==typeof c.debug&&c.debug("--- got data length: "+n.length),function(){var e,t,a;for(a=[],e=0,t=n.length;e<t;e++)o=n[e],a.push(String.fromCharCode(o));return a}().join("")):a.data,c.serverActivity=t(),r!==e.LF){for("function"==typeof c.debug&&c.debug("<<< "+r),f=i.unmarshall(c.partialData+r),c.partialData=f.partial,b=[],m=0,g=(v=f.frames).length;m<g;m++)switch((d=v[m]).command){case"CONNECTED":"function"==typeof c.debug&&c.debug("connected to server "+d.headers.server),c.connected=!0,c._setupHeartbeat(d.headers),b.push("function"==typeof c.connectCallback?c.connectCallback(d):void 0);break;case"MESSAGE":h=d.headers.subscription,(p=c.subscriptions[h]||c.onreceive)?(s=c,u=d.headers["message-id"],d.ack=function(e){return null==e&&(e={}),s.ack(u,h,e)},d.nack=function(e){return null==e&&(e={}),s.nack(u,h,e)},b.push(p(d))):b.push("function"==typeof c.debug?c.debug("Unhandled received MESSAGE: "+d):void 0);break;case"RECEIPT":b.push("function"==typeof c.onreceipt?c.onreceipt(d):void 0);break;case"ERROR":b.push("function"==typeof l?l(d):void 0);break;default:b.push("function"==typeof c.debug?c.debug("Unhandled frame: "+d):void 0)}return b}"function"==typeof c.debug&&c.debug("<<< PONG")}),this.ws.onclose=function(e){return function(){var t;return t="Whoops! Lost connection to "+e.ws.url,"function"==typeof e.debug&&e.debug(t),e._cleanUp(),"function"==typeof l?l(t):void 0}}(this),this.ws.onopen=function(e){return function(){return"function"==typeof e.debug&&e.debug("Web Socket Opened..."),s["accept-version"]=n.VERSIONS.supportedVersions(),s["heart-beat"]=[e.heartbeat.outgoing,e.heartbeat.incoming].join(","),e._transmit("CONNECT",s)}}(this)},a.prototype.disconnect=function(e,t){return null==t&&(t={}),this._transmit("DISCONNECT",t),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof e?e():void 0},a.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&n.clearInterval(this.pinger),this.ponger)return n.clearInterval(this.ponger)},a.prototype.send=function(e,t,a){return null==t&&(t={}),null==a&&(a=""),t.destination=e,this._transmit("SEND",t,a)},a.prototype.subscribe=function(e,t,a){var i;return null==a&&(a={}),a.id||(a.id="sub-"+this.counter++),a.destination=e,this.subscriptions[a.id]=t,this._transmit("SUBSCRIBE",a),i=this,{id:a.id,unsubscribe:function(){return i.unsubscribe(a.id)}}},a.prototype.unsubscribe=function(e){return delete this.subscriptions[e],this._transmit("UNSUBSCRIBE",{id:e})},a.prototype.begin=function(e){var t,a;return a=e||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:a}),t=this,{id:a,commit:function(){return t.commit(a)},abort:function(){return t.abort(a)}}},a.prototype.commit=function(e){return this._transmit("COMMIT",{transaction:e})},a.prototype.abort=function(e){return this._transmit("ABORT",{transaction:e})},a.prototype.ack=function(e,t,a){return null==a&&(a={}),a["message-id"]=e,a.subscription=t,this._transmit("ACK",a)},a.prototype.nack=function(e,t,a){return null==a&&(a={}),a["message-id"]=e,a.subscription=t,this._transmit("NACK",a)},a}(),n={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(e,t){var i;return null==t&&(t=["v10.stomp","v11.stomp"]),i=new(n.WebSocketClass||WebSocket)(e,t),new a(i)},over:function(e){return new a(e)},Frame:i},void 0!==t&&null!==t&&(t.Stomp=n),"undefined"!=typeof window&&null!==window?(n.setInterval=function(e,t){return window.setInterval(t,e)},n.clearInterval=function(e){return window.clearInterval(e)},window.Stomp=n):t||(self.Stomp=n)}).call(this)},"Gpj+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{"text-align":"left","padding-left":"0px"}},[a("el-button",{attrs:{type:"success",size:"mini",plain:"",icon:"el-icon-success"},on:{click:e.allRead}},[e._v("全部标为已读")]),e._v(" "),e.isAdmin?a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){e.dialogVisible=!0}}},[a("i",{staticClass:"fa fa-send",staticStyle:{"margin-right":"15px"}}),e._v("发送系统通知\n      ")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.loadSalaryCfg}})],1),e._v(" "),a("el-main",{staticStyle:{padding:"0px"}},[a("el-collapse",{staticStyle:{width:"90%"},attrs:{accordion:""},on:{change:e.handleChange},model:{value:e.mid,callback:function(t){e.mid=t},expression:"mid"}},e._l(e.sysmsgs,function(t,i){return a("el-collapse-item",{key:i,attrs:{name:t.msgContent.id}},[a("template",{slot:"title"},[a("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center"}},[a("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",width:"25px",height:"25px"}},[1==t.msgState?a("div",{staticStyle:{width:"8px",height:"8px","background-color":"#ea0206","border-radius":"8px"}}):e._e()]),e._v(" "),a("span",{staticStyle:{width:"600px","text-align":"left"}},[e._v(e._s(t.msgContent.title))]),e._v(" "),3==t.msgState?a("span",{staticStyle:{"text-align":"left"}},[e._v("已撤销")]):e._e(),e._v(" "),a("el-tag",[e._v(e._s(e._f("formatDate")(t.msgContent.createDate)))])],1)]),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center","border-style":"solid","border-width":"1px","border-color":"#409eff","border-radius":"5px",padding:"4px 0px 4px 8px","box-sizing":"border-box",height:"100%"}},[e._v("\n            "+e._s(t.msgContent.message)+"\n          ")])],2)}),1),e._v(" "),0==e.sysmsgs.length?a("div",{staticStyle:{color:"#ea0206","font-size":"18px","text-align":"center"}},[e._v("暂无通知")]):e._e()],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],attrs:{title:"发送系统通知",visible:e.dialogVisible,"close-on-click-modal":!1,width:"45%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:3}},[e._v("\n          通知标题:\n        ")]),e._v(" "),a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:3}},[e._v("\n          通知内容:\n        ")]),e._v(" "),a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{type:"textarea",size:"mini",autosize:{minRows:5,maxRows:10},placeholder:"请输入通知内容..."},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px","padding-right":"10px"}},[a("el-col",{attrs:{offset:5}},[a("el-button",{attrs:{type:"default",size:"mini"},on:{click:e.cancelSend}},[e._v("取消\n          ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sendNFMsg}},[a("i",{staticClass:"fa fa-send",staticStyle:{"margin-right":"15px"}}),e._v("发送\n          ")])],1)],1)],1)],1)],1)},staticRenderFns:[]},n=a("VU/8")({data:function(){return{dialogVisible:!1,dialogLoading:!1,title:"",message:"",mid:-1,sysmsgs:[]}},mounted:function(){this.initSysMsgs()},computed:{isAdmin:function(){var e=!1;return this.$store.state.user.roles.forEach(function(t){"ROLE_admin"==t.name&&(e=!0)}),e}},methods:{handleChange:function(e){if(""!=e){var t=this;this.postRequest("/chat/markread",{flag:this.mid}).then(function(e){e&&200==e.status&&t.initSysMsgs()})}},initSysMsgs:function(){var e=this;this.getRequest("/chat/sysmsgs").then(function(t){e.sysmsgs=t.data.data;var a=!1;e.sysmsgs.forEach(function(e){1==e.msgState&&(a=!0)}),e.$store.commit("toggleNFDot",a)})},loadSalaryCfg:function(){this.initSysMsgs()},allRead:function(){var e=this;this.postRequest("/chat/markread",{flag:-1}).then(function(t){t&&200==t.status&&(e.$store.commit("toggleNFDot",!1),e.initSysMsgs())})},sendNFMsg:function(){this.dialogLoading=!0;var e=this;this.postRequest("/chat/nf",{message:this.message,title:this.title}).then(function(t){e.dialogLoading=!1,t&&200==t.status&&200==t.data.status&&(e.initSysMsgs(),e.cancelSend(),e.$store.state.stomp.send("/ws/nf",{},""))})},cancelSend:function(){this.dialogVisible=!1,this.title="",this.message=""}}},i,!1,null,null,null);t.default=n.exports},GqWn:function(e,t){},"H+Q0":function(e,t){},HGcV:function(e,t){},"Ior+":function(e,t){},JrsW:function(e,t){},KNe0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),n=a.n(i),l=a("zL8q"),o={data:function(){var e;return e={outRecive:{quantity:"",note:"",materialId:""},dialogInTitle:"采购数量",dialogFormInVisible:!1,activeName:"material",confirmDialogTitle:"采购确认单",tempPlan:[],materialsReceives:[],confirms:{},nowMaterial:{quantity:"",notes:"",complete:""},newMaterial:{name:"",specifications:"",quantity:"",unitName:"",notes:""},tableLoading:!1,confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",RecordKeywords:"",confirmKewords:""},n()(e,"tableLoading",!1),n()(e,"advanceSearchViewVisible",!1),n()(e,"rules",{materialName:[{required:!0,message:"必填:原料名称",trigger:"blur"}],quantity:[{required:!0,message:"必填:数量",trigger:"blur"},{validator:function(e,t,a){/^\d+$/.test(t)?a():a("数字格式错误!")},message:"数字格式错误",trigger:"blur"}],clientId:[{required:!0,message:"必选:公司",trigger:"change"}],unitId:[{required:!0,message:"必选:单位",trigger:"change"}]}),n()(e,"materials",[]),n()(e,"defaultProps",{label:"name",isLeaf:"leaf",children:"child"}),n()(e,"dialogTitle",""),n()(e,"currentPage",1),n()(e,"confirmCurrentPage",1),n()(e,"currentReceivePage",1),n()(e,"formLabelWidth","120px"),n()(e,"totalCount",-1),n()(e,"receiveTotalCount",-1),n()(e,"confirmTotalCount",-1),n()(e,"material",{materialName:"",unitId:"",specs:""}),n()(e,"clients",[]),n()(e,"units",[]),n()(e,"dialogTableVisible",!1),n()(e,"dialogFormVisible",!1),n()(e,"currentIndex",""),n()(e,"matriallist",[]),e},mounted:function(){this.initData()},methods:{selfbuy:function(e){this.outRecive.materialId=e.id,this.dialogFormInVisible=!0},handleCurrentChange:function(e){console.log(e),this.newMaterial=e},tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.buyStatus?"warning-row":"success-row"},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},clearNewMaterial:function(){this.newMaterial={name:"",specifications:"",quantity:"",unitName:"",notes:"",id:0},this.nowMaterial={quantity:"",notes:"",complete:""},this.confirmDialogTitle="采购确认单"},showBuyConfirm:function(e,t){var a=this;this.clearNewMaterial(),a.tableLoading=!0,this.confirmDialogTitle=t.materialName+this.confirmDialogTitle,this.getRequest("/rowMaterialBuyPlanDetail/buyPlanDetail?materailId="+t.id).then(function(e){if(a.tableLoading=!1,e&&200==e.status){var t=e.data.root.matriallist,i=[];t.length&&t.forEach(function(e,t,a){i.push({name:e[0],specifications:e[1],quantity:e[2],confirmStatus:e[3],unitName:e[4],createDate:e[5],planSerialNumber:e[6],note:e[7],id:e[8]})}),a.matriallist=i,a.confirmFormVisible=!0}})},searchRecordData:function(){this.loadReceivedData()},searchConfirmData:function(){this.loadConfirmData()},cancelConfirm:function(e){var t=this;this.getRequest("/rowPruchaseVerify/withdraw?id="+e.id).then(function(e){if(e&&200==e.status){e.data;t.loadConfirmData()}})},cancelRecordData:function(e){var t=this;this.getRequest("/materialInReceiveRecord/withdraw?id="+e.id).then(function(e){if(e&&200==e.status){e.data;t.loadReceivedData()}})},planConfirm:function(e){var t=this,a=this;return console.log(a.newMaterial.id),console.log(a.nowMaterial.complete),0==a.newMaterial.id?(a.$message({type:"info",message:"请选择采购计划！"}),!1):""==a.nowMaterial.complete?(a.$message({type:"info",message:"请选择是否完成！"}),!1):""==this.nowMaterial.quantity||0==this.nowMaterial.quantity?(a.$message({type:"info",message:"请填入实收数量！"}),!1):void this.$confirm("当前选择的是,"+this.newMaterial.name+"入库数量为："+this.nowMaterial.quantity+" 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$refs[e].validate(function(e){e&&a.getRequest("/rowPruchaseVerify/add?purchasePlanDetailId="+a.newMaterial.id+"&buyType=2&confirmStatus="+a.nowMaterial.complete+"&quantity="+a.nowMaterial.quantity+"&notes="+a.nowMaterial.notes).then(function(e){if(e&&200==e.status){e.data;a.confirmFormVisible=!1}})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},selectChange:function(e){var t=this;console.log(e),this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.material.specifiCations=a.name)})},cancelChoos:function(){console.log(this.pName),this.material.supplier=this.pName,this.material.clientId=this.pId},initData:function(){var e=this;e.loadData(),this.getRequest("/material/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients}})},keywordsChange:function(e){""==e&&this.loadData()},recordKeywordsChange:function(e){""==e&&this.searchRecordData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushData:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},popConfirm:function(e){var t=this;this.$prompt("请输入出库数量","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number",inputValidator:function(a){if(console.log(a),parseInt(a)>parseInt(e.quantity))return t.$message({type:"info",message:"数量过大"}),!1},inputErrorMessage:"非法输入！"}).then(function(a){var i=a.value;t.getRequest("/material/receive?id="+e.id+"&quantity="+i).then(function(e){if(e&&200==e.status){e.data;t.loadData(),t.$message({type:"success",message:"出库成功!"})}})}).catch(function(){t.$message({type:"info",message:"取消输入"})})},searchData:function(){this.loadData()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.material=t,this.material.createDate=t.createDate,delete this.material.unit,this.dialogFormVisible=!0},addData:function(e){var t=this;this.dialogFormVisible=!0;var a=this;if(0==this.material.unitId||""==this.material.unitId)return l.Message.error({message:"请选择单位！"}),!1;this.$refs[e].validate(function(e){if(!e)return!1;t.material.id?(t.tableLoading=!0,console.log(t.material),t.postRequest("/material/update",t.material).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.material),t.material.quantity=0,t.postRequest("/material/add",t.material).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},addInData:function(e){var t=this,a=this;if(""==this.outRecive.quantity)return l.Message.error({message:"请输入数量"}),!1;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(a.outRecive),t.getRequest("/materialInReceiveRecord/add?id="+t.outRecive.materialId+"&quaity="+t.outRecive.quantity+"&notes="+t.outRecive.note).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormInVisible=!1,a.loadData(),a.emptyInData()}})})},emptyInData:function(){this.outRecive={quaity:"",materailId:"",note:""}},cancelOptIn:function(){this.dialogFormInVisible=!1,this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/material/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this;this.tableLoading=!0,this.getRequest("/material/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var a=t.data.data;e.materials=a,e.totalCount=t.data.total,e.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.material={materialName:"",standard:"",specs:"",materialNo:"",unitId:"",specifiCations:"",notes:"",quantity:""}}},computed:{routes:function(){}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("\n              搜索\n            ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("添加原料")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addDataForm",attrs:{model:e.material,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"原料名称:",prop:"materialName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"原料名称..."},model:{value:e.material.materialName,callback:function(t){e.$set(e.material,"materialName",t)},expression:"material.materialName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"原料规格:",prop:"specs"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"规格..."},model:{value:e.material.specs,callback:function(t){e.$set(e.material,"specs",t)},expression:"material.specs"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位:",prop:"unitId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择单位"},on:{change:e.selectChange},model:{value:e.material.unitId,callback:function(t){e.$set(e.material,"unitId",t)},expression:"material.unitId"}},e._l(e.units,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addDataForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogInTitle,"close-on-click-modal":!1,visible:e.dialogFormInVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormInVisible=t},close:e.cancelOptIn}},[e.dialogFormInVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addInData",attrs:{model:e.outRecive,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"采购数量..."},model:{value:e.outRecive.quantity,callback:function(t){e.$set(e.outRecive,"quantity",t)},expression:"outRecive.quantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注..."},model:{value:e.outRecive.note,callback:function(t){e.$set(e.outRecive,"note",t)},expression:"outRecive.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormInVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addInData("addInData")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.confirmDialogTitle,"close-on-click-modal":!1,visible:e.confirmFormVisible,width:"650px"},on:{"update:visible":function(t){e.confirmFormVisible=t},close:e.cancelOpt}},[e.confirmFormVisible?a("div",{staticStyle:{width:"100%"},attrs:{height:"200"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.matriallist,border:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"planSerialNumber",align:"left",fixed:"",label:"采购编号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"下单时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e._f("formatDate")(t.row.createDate))+"\n                ")]}}],null,!1,2821067331)}),e._v(" "),a("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n                ")]}}],null,!1,3134996586)}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注",width:"240"}})],1),e._v(" "),e.newMaterial.name?a("div",{staticStyle:{padding:"16px","text-align":"left",border:"1px solid gainsboro"}},[e._v("\n              当前选择：\n\n              "),a("div",{staticStyle:{display:"flex","justify-content":"space-around",padding:"5px"}},[a("div",[e._v("\n                  名称:"+e._s(e.newMaterial.name)+"\n                ")]),e._v(" "),a("div",[e._v("\n                  规格:"+e._s(e.newMaterial.specifications)+"\n                ")]),e._v(" "),a("div",[e._v("\n                  数量:"+e._s(e.newMaterial.quantity)+" "+e._s(e.newMaterial.unitName)+"\n                ")]),e._v(" "),a("div",[e._v("\n                  备注:"+e._s(e.newMaterial.note)+"\n                ")])])]):e._e(),e._v(" "),a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-form",{ref:"newconfirmForm",attrs:{model:e.nowMaterial,rules:e.rules,size:"sam","label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"收货数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"当次实际收货数量"},model:{value:e.nowMaterial.quantity,callback:function(t){e.$set(e.nowMaterial,"quantity",t)},expression:"nowMaterial.quantity"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注"},model:{value:e.nowMaterial.notes,callback:function(t){e.$set(e.nowMaterial,"notes",t)},expression:"nowMaterial.notes"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"完成:"}},[a("el-radio-group",{model:{value:e.nowMaterial.complete,callback:function(t){e.$set(e.nowMaterial,"complete",t)},expression:"nowMaterial.complete"}},[a("el-radio",{attrs:{label:2}},[e._v("完成")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:1}},[e._v("未完成")])],1)],1)],1)])],1)],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.confirmFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.planConfirm("newconfirmForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materials,"highlight-current-row":"",border:"",fit:"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"materialName",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specs",align:"left",fixed:"",label:"原料规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"原料数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.quantity)+e._s(t.row.unit.name)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",fixed:"",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px","margin-left":"2px"},attrs:{size:"mini"},on:{click:function(a){return e.popConfirm(t.row)}}},[e._v("出库\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.selfbuy(t.row)}}},[e._v("厂部自购\n                ")]),e._v(" "),t.row.buyStatus?a("el-badge",{attrs:{value:"new"}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showBuyConfirm(t.$index,t.row)}}},[e._v("采购确认\n                  ")])],1):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(o,s,!1,function(e){a("w/O8")},null,null);t.default=r.exports},KhUb:function(e,t){},Kzbj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{workstepName:[{required:!0,message:"必填:工序名称",trigger:"blur"}]},steps:[],dialogTitle:"",currentPage:1,totalCount:-1,step:{workstepName:"",intro:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},searchEmp:function(){this.loadData()},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.dialogFormVisible=!0,this.emptyData()},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.step=t,delete this.step.noteMaker,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.step.id?(t.tableLoading=!0,console.log(t.step),t.postRequest("/workStep/stepAdd",t.step).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.step),t.postRequest("/workStep/stepAdd",t.step).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/workStep/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/workStep/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.steps=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.step={workstepName:"",intro:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n        ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.step,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"工序名称:",prop:"workstepName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入工序名称。。"},model:{value:e.step.workstepName,callback:function(t){e.$set(e.step,"workstepName",t)},expression:"step.workstepName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工序描述:",prop:"intro"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"工序描述"},model:{value:e.step.intro,callback:function(t){e.$set(e.step,"intro",t)},expression:"step.intro"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.steps}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"workstepName",align:"left",fixed:"",label:"工序名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"intro",width:"220",align:"left",label:"介绍"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(e){a("jW5Z")},null,null);t.default=s.exports},LNkA:function(e,t){},LrNQ:function(e,t){},LwTo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:中文名",trigger:"blur"}]},units:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,unit:{name:"",code:""},deps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""==e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},addAndFlushEmp:function(){this.dialogTitle="添加单位",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadDatas()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.unit=t,delete this.unit.sysMenu,delete this.unit.users,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.unit.id?(t.tableLoading=!0,console.log(t.unit),t.postRequest("/sysunit/addAndUpdate",t.unit).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadDatas(),a.emptyData())})):(t.tableLoading=!0,console.log(a.unit),t.postRequest("/sysunit/addAndUpdate",t.unit).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadDatas(),a.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/sysunit/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadDatas()}})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/sysunit/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.units=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.unit={name:"",code:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n     ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.unit,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"单位名称"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"缩写:",prop:"code"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"单位英文名..."},model:{value:e.unit.code,callback:function(t){e.$set(e.unit,"code",t)},expression:"unit.code"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.units,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"单位名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",align:"left",fixed:"",label:"英文缩写",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n         ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n         ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("+Ip0")},null,null);t.default=l.exports},M3Sl:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=a("VU/8")({name:"App"},n,!1,function(e){a("ZEO7")},null,null).exports,o=a("/ocq"),s=a("xJsL"),r=a("lO7g"),c=a("6+aJ"),d=a("fER9"),u=a("qYX3"),p=a("2tLV"),h=a("gxTg"),f=a("eTb0"),m=a("lGFz"),g=a("0Wrx"),v=a("mOMX"),b=a("Ave/"),y=a("hR2O"),x=a("Kzbj"),_=a("kBn+"),w=a("T5Y6"),k=a("pQHM"),S=a("VDSS"),D=a("4d3/"),N=a("d0NV"),P=a("Uct3"),C=a("LwTo"),R=a("WaId");i.default.use(o.a);var V=new o.a({routes:[{path:"/",name:"Login",component:s.default,hidden:!0},{path:"/home",name:"主页",component:r.default,hidden:!0,meta:{requireAuth:!0},children:[{path:"/main",name:"首页界面",component:c.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/department",name:"部门",component:d.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/carRecord",name:"行车记录",component:m.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/carRepair",name:"车辆维护",component:g.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/emp",name:"员工",component:u.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/position",name:"职位",component:f.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/product",name:"产品管理",component:v.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/askRequest",name:"用车申请",component:b.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/askBack",name:"分配车辆",component:y.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/workStep",name:"工序步骤",component:x.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/company",name:"客户",component:_.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/buyPlan",name:"采购计划",component:h.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/chat",name:"消息",component:w.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/sysRole",name:"角色",component:k.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/sale",name:"销售",component:R.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/users",name:"用户",component:S.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productsFinished",name:"成品库存",component:D.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/material",name:"原材料库",component:P.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productMid",name:"半成品库",component:N.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/sysUnit",name:"单位管理",component:C.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/car",name:"车辆管理",component:p.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}}]}]}),E=a("zL8q"),T=a.n(E),I=(a("tvR6"),a("mvHQ")),M=a.n(I),F=a("ifoU"),q=a.n(F),L=a("NYxO");a("BiC4"),a("GVqr");i.default.use(L.a);var O=new L.a.Store({state:{user:{name:null==window.localStorage.getItem("user")?"未登录":JSON.parse(window.localStorage.getItem("user")).name,userface:null==window.localStorage.getItem("user")?"":JSON.parse(window.localStorage.getItem("user")).userface,username:null==window.localStorage.getItem("user")?"":JSON.parse(window.localStorage.getItem("user")).username,roles:null==window.localStorage.getItem("user")?"":JSON.parse(window.localStorage.getItem("user")).roles},routes:[],msgList:[],isDotMap:new q.a,currentFriend:{},stomp:null,nfDot:!1},mutations:{initMenu:function(e,t){e.routes=t},login:function(e,t){e.user=t,window.localStorage.setItem("user",M()(t))},logout:function(e){window.localStorage.removeItem("user"),e.routes=[]},toggleNFDot:function(e,t){e.nfDot=t},updateMsgList:function(e,t){e.msgList=t},updateCurrentFriend:function(e,t){e.currentFriend=t},addValue2DotMap:function(e,t){e.isDotMap.set(t,"您有未读消息")},removeValueDotMap:function(e,t){e.isDotMap.delete(t)}},actions:{connect:function(e){console.log(e+"9999"),e.state.stomp=Stomp.over(new SockJS("/ws/endpointChat")),console.log(e.state.stomp),e.state.stomp.connect({},function(t){e.state.stomp.subscribe("/user/queue/chat",function(t){var a=JSON.parse(t.body);console.log(a);var i=window.localStorage.getItem(e.state.user.username+"#"+a.from);if(null==i)(i=[]).push(a),window.localStorage.setItem(e.state.user.username+"#"+a.from,M()(i));else{var n=JSON.parse(i);n.push(a),window.localStorage.setItem(e.state.user.username+"#"+a.from,M()(n))}a.from!=e.state.currentFriend.username&&e.commit("addValue2DotMap","isDot#"+e.state.user.username+"#"+a.from);var l=window.localStorage.getItem(e.state.user.username+"#"+e.state.currentFriend.username);null==l?e.commit("updateMsgList",[]):e.commit("updateMsgList",JSON.parse(l))}),e.state.stomp.subscribe("/topic/nf",function(t){e.commit("toggleNFDot",!0)})},function(e){})}}}),z=(a("e0XP"),a("VsUZ")),$=function e(t){var i=[];return t.forEach(function(t){var n=t.path,l=t.component,o=t.name,s=t.meta,r=t.iconCls,c=t.children;c&&c instanceof Array&&(c=e(c));var d={path:n,component:function(e){l.startsWith("Home")?a.e(3).then(function(){var t=[a("2eoi")("./"+l+".vue")];e.apply(null,t)}.bind(this)).catch(a.oe):l.startsWith("Emp")?a.e(0).then(function(){var t=[a("8cST")("./"+l+".vue")];e.apply(null,t)}.bind(this)).catch(a.oe):l.startsWith("Car")?a.e(1).then(function(){var t=[a("O6hm")("./"+l+".vue")];e.apply(null,t)}.bind(this)).catch(a.oe):l.startsWith("Pro")?a.e(1).then(function(){var t=[a("O6hm")("./"+l+".vue")];e.apply(null,t)}.bind(this)).catch(a.oe):l.startsWith("Com")?a.e(0).then(function(){var t=[a("8cST")("./"+l+".vue")];e.apply(null,t)}.bind(this)).catch(a.oe):l.startsWith("Sys")?a.e(2).then(function(){var t=[a("kC/Z")("./"+l+".vue")];e.apply(null,t)}.bind(this)).catch(a.oe):l.startsWith("User")?a.e(2).then(function(){var t=[a("kC/Z")("./"+l+".vue")];e.apply(null,t)}.bind(this)).catch(a.oe):l.startsWith("Depa")?a.e(0).then(function(){var t=[a("8cST")("./"+l+".vue")];e.apply(null,t)}.bind(this)).catch(a.oe):l.startsWith("Posi")?a.e(0).then(function(){var t=[a("8cST")("./"+l+".vue")];e.apply(null,t)}.bind(this)).catch(a.oe):l.startsWith("Sal")?a.e(4).then(function(){var t=[a("UlK9")("./"+l+".vue")];e.apply(null,t)}.bind(this)).catch(a.oe):l.startsWith("Buy")&&a.e(1).then(function(){var t=[a("O6hm")("./"+l+".vue")];e.apply(null,t)}.bind(this)).catch(a.oe)},name:o,iconCls:r,meta:s,children:c};i.push(d)}),i};function j(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();t.getHours(),t.getMinutes(),t.getSeconds();return i<10&&(i="0"+i),n<10&&(n="0"+n),a+"-"+i+"-"+n}i.default.filter("formatDate",j),i.default.prototype.formatDate=j,i.default.filter("formatDateTime",function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),l=t.getHours(),o=t.getMinutes();return i<10&&(i="0"+i),n<10&&(n="0"+n),a+"-"+i+"-"+n+" "+l+":"+o}),i.default.directive("dialogDrag",{bind:function(e,t,a,i){var n=e.querySelector(".el-dialog__header"),l=e.querySelector(".el-dialog");n.style.cssText+=";cursor:move;",l.style.cssText+=";top:0px;";var o=window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]};n.onmousedown=function(e){var t=e.clientX-n.offsetLeft,a=e.clientY-n.offsetTop,i=document.body.clientWidth,s=document.documentElement.clientHeight,r=l.offsetWidth,c=l.offsetHeight,d=l.offsetLeft,u=i-l.offsetLeft-r,p=l.offsetTop,h=s-l.offsetTop-c,f=o(l,"left"),m=o(l,"top");f.includes("%")?(f=+document.body.clientWidth*(+f.replace(/\%/g,"")/100),m=+document.body.clientHeight*(+m.replace(/\%/g,"")/100)):(f=+f.replace(/\px/g,""),m=+m.replace(/\px/g,"")),document.onmousemove=function(e){var i=e.clientX-t,n=e.clientY-a;-i>d?i=-d:i>u&&(i=u),-n>p?n=-p:n>h&&(n=h),l.style.cssText+=";left:"+(i+f)+"px;top:"+(n+m)+"px;"},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}});var A=a("NwKb"),B=a.n(A),H=(a("M4fF"),a("ZphK"),a("37t0"),a("b79p"),a("q1nB")),U=a.n(H);i.default.use(U.a),i.default.prototype.getRequest=z.b,i.default.prototype.postRequest=z.d,i.default.prototype.deleteRequest=z.a,i.default.prototype.putRequest=z.e,i.default.prototype.jsonToString=z.c,i.default.prototype.isNotNullORBlank=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];for(var i=0;i<t.length;i++){var n=t[i];if(null==n||""==n||void 0==n)return E.Message.warning({message:"数据不能为空!"}),!1}return!0},i.default.config.productionTip=!1,i.default.use(T.a),i.default.use(B.a),V.beforeEach(function(e,t,a){var i,n;"Login"!=e.name?"未登录"==O.state.user.name?e.meta.requireAuth||null==e.name?a({path:"/",query:{redirect:e.path}}):a():(i=V,(n=O).state.routes.length>0||Object(z.b)("/users/getMenu").then(function(e){if(e&&200==e.status){console.log(e);var t=$(e.data.root.menuData);i.addRoutes(t),n.commit("initMenu",t),n.dispatch("connect")}}),"/chat"==e.path&&O.commit("updateMsgList",[]),a()):a()}),i.default.directive("enterNumber",{inserted:function(e){e.addEventListener("keypress",function(e){var t="number"==typeof(e=e||window.event).charCode?e.charCode:e.keyCode;!/\d/.test(String.fromCharCode(t))&&t>9&&!e.ctrlKey&&(e.preventDefault?e.preventDefault():e.returnValue=!1)})}}),new i.default({el:"#app",router:V,store:O,components:{App:l},template:"<App/>"})},Nzev:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{tempPlan:[],confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midConfirms:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){console.log("嘿嘿哈！"),this.initData()},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.middleProduct.utilname=a.name)})},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var a="",i=e.plant;return this.positions.forEach(function(e,t,n){i.forEach(function(t,i,n){e.id==t&&(a+=e.name+" , ")})}),a},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){var e=this;e.loadData(),this.getRequest("/middleProduct/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients,e.products=a.root.products}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midPruchaseVerify/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midPruchaseVerify/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.midConfirms=i,t.totalCount=a.data.total}})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midConfirms,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"name",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"serialNumber",fixed:"",label:"计划单编号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"计划采购数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"实收数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.practicalQuantity)+" "+e._s(t.row.unitName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"记录人",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.employee.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"下发时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDateTime")(t.row.planDate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelRecordData(t.row)}}},[e._v("撤销\n          ")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("wd3D")},null,null);t.default=l.exports},O9uO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l=a("bOdI"),o=a.n(l),s=a("zL8q"),r=a("VsUZ"),c={data:function(){var e;return e={forSale:!0,forDetail:!1,activeName:["1"],lastPlanDetail:{startNo:"J00000001",endNo:"J00000100"},lastPlanproductionPlanDetails:[{startNo:"J00000001",endNo:"J00000100"},{startNo:"K00000001",endNo:"K00000100"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],plans:[],clients:[],units:[],selectsales:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{id:0,notes:"",productionPlanNo:"",productionPlanDetails:""},detail:{id:0,actualQuantity:"",salesPlanId:"",note:"",salesPlan:{},serialNumbers:[],type:"new",status:1,productionPlanSerialNumber:"",productionPlanId:0},serialNumbers:[],serialNumber:{sid:1,id:0,startNo:"",endNo:"",note:"",clientId:0,productId:0,type:"new"},productionPlanDetails:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择销售计划",selectSalePlan:{},selectedM:{},filterText:""},o()(e,"lastPlanDetail",""),o()(e,"crrentSelectShop",{}),o()(e,"isCurrentShop",!0),o()(e,"isprarent",!1),o()(e,"sugestParentstartNo",""),o()(e,"sugestParentEndNo",""),o()(e,"sugestSelfEndNumbers",""),o()(e,"sugestSelfNumbers",""),o()(e,"currentParentShop",{}),o()(e,"currentParentShops",[]),o()(e,"currentShop",{}),o()(e,"currentShops",[]),o()(e,"serialNuberDeleted",[]),o()(e,"serialNuberUpdate",[]),o()(e,"serialNuberList",[]),o()(e,"serialNuberOld",[]),o()(e,"serialNuberNew",[]),o()(e,"planDetails",[]),o()(e,"dialogPlanVisible",!1),o()(e,"dialogPlanTitle","生产计划"),o()(e,"currntPlanRow",{}),o()(e,"codeLen",1),o()(e,"isEdite",!0),o()(e,"currentSalePlan",{}),o()(e,"selectedStep",{}),o()(e,"manageStatus",1),o()(e,"activePanel","0"),e},mounted:function(){this.initData()},methods:{handleClick:function(){console.log(this.activePanel);var e=!1;switch(this.activePanel){case"0":e=!0;break;case"1":this.manageStatus=1;break;case"2":this.manageStatus=2;break;case"3":this.manageStatus=3;break;case"4":this.manageStatus=4;break;case"5":this.manageStatus=""}e?(this.loadMaterial(),this.forSale=!0,this.forDetail=!1):(this.loadData(),this.forSale=!1,this.forDetail=!0)},useCurrentNo:function(e){this.serialNumbers[0]&&(this.serialNumbers[0].startNo=this.sugestStartNo(e.endNo,1),this.serialNumbers[0].note="",this.serialNumbers[0].clientId=this.crrentSelectShop.id,this.serialNumbers[0].productId=this.detail.proId,this.detail.actualQuantity&&(this.serialNumbers[0].endNo=this.sugestStartNo(this.sugestStartNo(e.endNo,1),this.detail.actualQuantity)))},plandetailStatus:function(e){var t="";switch(e.status){case 1:t="新建";break;case 2:t="开始生产";break;case 3:t="生产完成";break;case 4:t="生产撤销"}return t},codeLenSet:function(e){var t=this;console.log(e),this.codeLen=e,this.serialNumbers.length&&this.serialNumbers.forEach(function(e){""!==e.startNo&&void 0!=e.startNo&&(e.startNo=t.sugestStartNo(e.startNo,1)),""!==e.endNo&&void 0!==e.endNo&&(e.endNo=t.sugestStartNo(e.endNo,1))})},cancelPlanOpt:function(){this.dialogFormVisible=!1,this.plan={notes:"",productionPlanNo:"",productionPlanDetails:""},this.selectSalePlan={},this.loadData()},editePlan:function(e,t){this.dialogTitle="修改计划单";this.plan=t;var a=_.cloneDeep(t).details;a.forEach(function(e){delete e.salesPlan});var i=Object(r.c)(a);this.plan.productionPlanDetails=i,this.dialogPlanVisible=!0},addPlan:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.plan.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/productionplan/update",t.plan).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&(t.dialogPlanVisible=!1,t.loadData(),t.emptyData(),t.emptyDetail(),t.clearSerialNumbers())})):(t.tableLoading=!0,console.log(t.plan),t.postRequest("/productionplan/add",t.plan).then(function(e){t.tableLoading=!1,e&&200==e.status&&(t.dialogPlanVisible=!1,t.loadData(),t.emptyData(),t.emptyDetail(),t.clearSerialNumbers())}))})},serialNumberAdd:function(){var e=0;if(this.serialNumbers.length){var t=0;this.serialNumbers.forEach(function(e,a,i){t=e.sid>t?e.sid:t}),e=t+1}else e=1;this.serialNumbers.push({sid:e,id:0,note:"",startNo:"",endNo:"",clientId:0,productId:0,type:"new"})},deletSerialNo:function(e){var t=this.serialNumbers.splice(e,1);""===t[0].endNo||""===t[0].startNo||"new"===t[0].type||(t[0].type="delete",this.serialNuberDeleted.push(t[0])),console.log(t)},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectSalePlan=e,console.log(this.selectSalePlan)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择了销售计划！");var t=this;if(this.selectSalePlan.id>0){var a=this.selectSalePlan.client.name+"，     产品："+this.selectSalePlan.product.producteName+";";this.$confirm("您当前选择 ：客户"+a+" 确认选择该销售计划吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择！"})},setDetailData:function(){var e=this.selectSalePlan;console.log(e+"=*-*="),this.currentSalePlan=this.selectSalePlan,this.detail.salesPlanId=e.id,this.detail.salesPlan=e,this.detail.specification=e.specification,this.detail.productNo=e.productNo,this.getCurrentPlans(),this.dialogMaterialVisible=!1},cancelChoose:function(){console.log("选择框关闭"),this.selectSalePlan={},this.selectedM={}},formatStatus:function(e){return 1===e.materialType?"已确认":"未确认"},clearSerialNumbers:function(){this.serialNumbers=[],this.selectsales=[],this.detail.serialNumbers=[]},editeDetail:function(e,t){console.log("詳情："+t),this.detail=t,t.salesPlan&&(this.detail.salesPlanId=t.salesPlan.id,this.currentSalePlan=t.salesPlan,this.selectSalePlan=t.salesPlan),this.isEdite=!1,this.serialNumbers=t.serialNumbers,this.serialNumbers.length&&this.serialNumbers.forEach(function(e){e.type="old"}),this.serialNuberOld=_.cloneDeep(this.serialNumbers),this.getCurrentPlans(),this.dialogFormVisible=!0},deleteDetail:function(e,t){var a=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.detailDelete(t.id)}).catch(function(){})},detailDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productionplandetails/deletmark?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},emptyDetail:function(){this.detail={id:0,actualQuantity:"",salesPlanId:"",note:"",salesPlan:{},serialNumbers:[],type:"new",status:3,productNo:"",specifications:"",productionPlanId:0},this.selectedStep={},this.selectSteps=[]},initData:function(){var e=this;e.loadData(),e.handleClick(),this.getRequest("/productionplan/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.clients=e.toTree(a.root.clients),e.midProduct=e.materials.concat(e.midProduct);var i=[];a.root.products.forEach(function(e){i.push({id:e[0],producteName:e[1],specification:e[2],proType:e[3],mark:e[4],color:e[5]})}),e.products=i}})},keywordsChange:function(e){""===e&&this.loadData()},keywordsMaterialChange:function(e){""===e&&this.loadMaterial()},showCurrentNo:function(){this.isprarent?this.isprarent=!1:this.isprarent=!0},showDetails:function(e){console.log("show"),this.planDetails=[],this.currntPlanRow=e;var t=e.details||[],a=[];t.length&&(t.forEach(function(e){e.enabled&&a.push(e)}),this.planDetails=a),this.detail.productionPlanId=e.id,this.plan.id=e.id},getCurrentPlans:function(){var e=this;this.getRequest("/productionplan/getPlanDetails?clientId="+e.selectSalePlan.client.id+"&productId="+e.selectSalePlan.product.id).then(function(t){if(e.tableLoading=!1,t&&200===t.status&&t.data.success){var a=t.data.root,i=a.parent||[];if(i.length){e.currentParentShop=i[0],e.currentParentShops=[];for(var n=0,l=i.length;n<l;n++)n<3&&e.currentParentShops.push(i[n])}else{var o=e.sugestStartNo("1",1);e.currentParentShop={startNo:"00000001",endNo:"00000001",note:""},e.setStartSerialNo(o,e.sugestParentEndNo.endNo,"parent")}var s=a.self||[];if(s.length){e.currentShop=s[0],e.currentShops=[];for(var r=0,c=s.length;r<c;r++)r<3&&e.currentShops.push(s[r])}else e.sugestSelfNumbers=e.sugestStartNo("1",1),e.currentShop={startNo:"00000001",endNo:"00000001",note:""}}})},setEndNumber:function(e){console.log(e);if(""!=this.serialNumbers[0].startNo)this.sugestSelfEndNumbers=this.sugestStartNo(this.serialNumbers[0].startNo,parseInt(e)),this.sugestSelfEndNumbers&&(this.serialNumbers[0].endNo=this.sugestSelfEndNumbers,this.serialNumbers[0].note="",this.serialNumbers[0].clientId=this.crrentSelectShop.id,this.serialNumbers[0].productId=this.detail.proId);else{for(var t=1,a=0;a<this.codeLen-1;a++)t="0"+t;this.setCurrentEndData(t,e,0)}},setbyStartNo:function(e){var t=this.serialNumbers[e].startNo;if(0==e){if(console.log(t+"********************startNO"+e),t.toString().length>this.codeLen)return Object(s.Message)("编码长度错误!"),!1;""!==this.detail.actualQuantity&&(this.serialNumbers[e].endNo=this.sugestStartNo(t,this.detail.actualQuantity))}this.serialNumbers[e].startNo=this.sugestStartNo(t,1)},setbyEndNo:function(e){var t=this.serialNumbers[e].endNo;this.serialNumbers[e].endNo=this.sugestStartNo(t,1)},setCurrentEndData:function(e,t,a){if(console.log(a),0==a){var i=this.sugestStartNo(e,t);this.serialNumbers[a].endNo=i,this.serialNumbers[a].startNo=e}},sugestStartNo:function(e,t){var a=function(e,t){if(t=t||!1,"string"==typeof e){var a=e.match(t?/[0-9]\d{1,}/g:/\d{1,}/g);return console.log(a),a.map(function(e){return e})}return[]},i=e.indexOf(a(e)[0]),n=e.substr(0,i),l=e.substr(i+a(e)[0].length,e.length-1),o=parseInt(a(e)[0])+parseInt(t)-1,s=o.toString().length,r=this.codeLen-s-n.length-l.length;if(r)for(var c=0;c<r;c++)o="0"+o;var d=n+o+l;return d.length>this.codeLen&&this.$message({type:"info",message:"长度超过设置的编码长度"}),d},setStartSerialNo:function(e,t,a){this.serialNumbers.length&&(this.serialNumbers[0].startNo=e,this.serialNumbers[0].endNo=""!==t?t:"",this.serialNumbers[0].note="")},clearChoose:function(){this.detail.clientId=0,this.detail.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(a,i){a.id==e&&(console.log(a.id),t.detail.unitName=a.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){var e=this,t=this;this.$confirm("是否新建生产计划?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.addNewPlan()}).catch(function(){e.$message({type:"info",message:"已取消"})})},addNewPlan:function(){var e=this;this.plan.id=0,e.plan.note="",e.tableLoading=!0,console.log(e.plan),e.postRequest("/productionplan/add",e.plan).then(function(t){if(e.tableLoading=!1,t&&200==t.status){t.data;e.dialogPlanVisible=!1,e.loadData(),e.emptyData(),e.emptyDetail()}})},addNewDetail:function(e){this.dialogTitle="郑铁公司生产计划单";this.serialNumbers=[],this.detail.productionPlanId=e.id,this.plan.id=0,this.serialNumber={sid:1,id:0,startNo:"",endNo:"",note:"",clientId:0,productId:0,type:"new"},this.selectSalePlan=e,this.setDetailData(),this.isEdite=!0,this.dialogFormVisible=!0},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},add:function(e){var t=this,a=this;if(console.log("addbox！！！！"),""===this.detail.actualQuantity||void 0===this.detail.actualQuantity)return Object(s.Message)("请输入数量！"),!1;if(""===this.detail.salesPlanId)return Object(s.Message)("请选择销售计划"),!1;this.detail.serialNumbers=this.serialNumbers,this.productionPlanDetails.push(this.detail);var i=_.cloneDeep(this.plan),n=_.cloneDeep(this.productionPlanDetails);n.forEach(function(e){delete e.salesPlan});var l=this.jsonToString(n);i.productionPlanDetails=l,this.$refs[e].validate(function(e){if(!e)return!1;if(t.plan.id){a.tableLoading=!0,a.serialNuberList=a.getNowSerialNumbers();var n=_.cloneDeep(a.detail),l=Object(r.c)(a.detail.serialNumbers);n.productionPlanSerialNumber=l,n.productionPlanId=a.plan.id,delete n.salesPlan,delete n.serialNumbers,a.postRequest("/productionplandetails/update",n).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers(),a.showDetails(a.currntPlanRow))})}else t.tableLoading=!0,console.log(i),a.postRequest("/productionplan/add",i).then(function(e){if(a.tableLoading=!1,e&&200===e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers(),a.showDetails(a.currntPlanRow)}})})},cancelOpt:function(){this.dialogFormVisible=!1,this.clearChoose(),this.isEdite=!0,this.clearSerialNumbers(),this.emptyDetail(),this.loadData(),this.currentSalePlan={},console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productionplan/deletmark?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&t.loadData()})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productionplan/findbypage?page="+this.currentPage+"&size=10&status="+this.manageStatus).then(function(a){e.tableLoading=!1,a&&200===a.status&&a.data.success?(t.plans=t.preForData(a.data.data)||[],!t.currntPlanRow.id&&t.plans.length&&(t.currntPlanRow=t.plans[0],t.showDetails(t.plans[0])),t.totalCount=a.data.total,t.emptyData()):e.$message({type:"infor",message:"查询失败"})})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/sales/findbystatus?page="+this.currentMaterialPage+"&size=10&status=1").then(function(a){e.tableLoading=!1,a&&200===a.status&&(t.materialList=t.preMattrialData(a.data.data),t.totalMaterialCount=a.data.total,t.forSale=!0,t.forDetail=!1)})},preMattrialData:function(e){if(e&&e.length>0)for(var t=e.length-1;t>=0;t--){var a=e[t]+"";switch(a.status){case"1":a.bgcolor="#eeeeee";break;case"2":a.bgcolor="yellowgreen"}}return e},emptyData:function(){this.productionPlanDetails=[],this.plan={id:0,notes:"",productionPlanNo:"",productionPlanDetails:""},this.currntPlanRow&&(this.plan.id=this.currntPlanRow.id)},preForData:function(e){if(e.length)for(var t=e.length-1;t>=0;t--){var a=e[t];if(a.details.length)for(var i=a.details.length-1;i>=0;i--){var n=a.details[i];if(n.onhover=!1,n.status)switch(n.status){case 1:n.bgcolor="#FFFFFF";break;case 2:case 3:n.bgcolor="#13ce66";break;case 4:n.bgcolor="#e9e9e9"}}}return e},getNowSerialNumbers:function(){for(var e=0,t=this.detail.serialNumbers.length;e<t;e++)for(var a=0,i=this.serialNuberOld.length;a<i;a++){if(e==a)n()(this.serialNuberOld[a])===n()(this.detail.serialNumbers[e])&&this.serialNuberOld[a].id===this.detail.serialNumbers[e].id||(this.detail.serialNumbers[e].type="update",this.serialNuberUpdate.push(this.detail.serialNumbers[e]))}if(this.detail.serialNumbers.length>this.serialNuberOld.length)for(var l=this.serialNuberOld.length;l<this.detail.serialNumbers.length;l++)this.detail.serialNumbers[l].type="new",this.serialNuberNew.push(this.detail.serialNumbers[l]);if(this.detail.serialNumbers.length<this.serialNuberOld.length)for(var o=this.detail.serialNumbers.length;o<this.serialNuberOld.length;o++)this.serialNuberOld[o].type="delete",this.serialNuberDeleted.push(this.serialNuberOld[o]);return this.serialNuberUpdate.concat(this.serialNuberDeleted,this.serialNuberNew)},toTree:function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.child});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.parentClientId];i?(i.child||(i.child=[])).push(e):t.push(e)}),t}},computed:{routes:function(){return this.$store.state.routes}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n        ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}})]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogPlanTitle,"close-on-click-modal":!1,visible:e.dialogPlanVisible,width:"750px"},on:{"update:visible":function(t){e.dialogPlanVisible=t},close:e.cancelPlanOpt}},[e.dialogPlanVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addPlanForm",attrs:{model:e.plan,rules:e.rules,size:"mini","label-width":"90px"}},[a("div",{staticStyle:{width:"100%",height:"auto"}},[a("el-row",[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"600px",background:"#fff"},attrs:{placeholder:"生产计划备注...","prefix-icon":"el-icon-edit",type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:e.plan.notes,callback:function(t){e.$set(e.plan,"notes",t)},expression:"plan.notes"}})],1)],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogPlanVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addPlan("addPlanForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.plan,rules:e.rules,size:"mini","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("div",[a("div",{staticStyle:{"background-color":"bisque"}},[a("el-form",{attrs:{model:e.detail}},[a("div",{staticStyle:{"text-align":"left"}},[e._v("\n\n                  销售详情：\n                  ")]),e._v(" "),e.currentSalePlan.id?a("div",{staticClass:"current-selcetion-plan",attrs:{model:e.currentSalePlan}},[a("div",{staticClass:"plan-item"},[e._v(e._s(e.currentSalePlan.client.name))]),e._v(" "),a("div",{staticClass:"plan-item"},[e._v("\n                      产品:"+e._s(e.currentSalePlan.product.producteName)+"\n                      |"+e._s(e.currentSalePlan.productNo)+"\n                      |"+e._s(e.currentSalePlan.specification.name)+"\n                      |"+e._s(e.currentSalePlan.color.name)+"\n                        ")]),e._v(" "),a("div",{staticClass:"plan-item"},[a("u",[e._v("需求数量:"+e._s(e.currentSalePlan.quantity))]),e._v(" "),e.currentSalePlan.quantity-e.currentSalePlan.nextQuantity>=0?a("u",{staticStyle:{color:"firebrick"}},[e._v("|未下发数量："+e._s(e.currentSalePlan.quantity-e.currentSalePlan.nextQuantity)+"枚")]):a("u",{staticStyle:{color:"firebrick"}},[e._v("|\n                        超额下发："+e._s(e.currentSalePlan.quantity-e.currentSalePlan.nextQuantity)+"枚")]),e._v(" "),a("u",[e._v("|已下发数量："+e._s(e.currentSalePlan.nextQuantity)+"枚")]),e._v(" "),a("u",[e._v("|生产完数量："+e._s(e.currentSalePlan.endQuantity)+"枚")])]),e._v(" "),a("div",{staticClass:"plan-item"},[e._v("备注:"+e._s(e.currentSalePlan.notes))])]):e._e(),e._v(" "),e.currentSalePlan.id?a("div",{staticStyle:{"text-align":"justify"}},[a("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-collapse-item",{attrs:{title:"**最近该公司下发的销售单编码信息**",name:"1"}},[a("div",{staticClass:"shops-no"},[a("div",[a("span",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px",color:"#3a8ee6"},on:{click:function(t){return t.stopPropagation(),e.useCurrentNo(e.currentParentShop)}}},[e._v("使用该编码\n                            ")])]),e._v(" "),a("div",[e._v("\n                            总公司编码 :\n                          ")]),e._v(" "),e._l(e.currentParentShops,function(t){return t.startNo?a("div",{key:t.id},[a("span",[e._v(e._s(t.startNo)+"-")]),a("span",[e._v(e._s(t.endNo)+" ;")])]):e._e()})],2),e._v(" "),a("div",{staticClass:"shops-no"},[a("div",[a("span",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px",color:"#3a8ee6"},on:{click:function(t){return t.stopPropagation(),e.useCurrentNo(e.currentShop)}}},[e._v("使用该编码\n                            ")])]),e._v(" "),a("div",[e._v("\n                            分公司编码:\n                          ")]),e._v(" "),e._l(e.currentShops,function(t){return e.currentShop.startNo?a("div",{key:t.id},[a("span",[e._v(e._s(t.startNo)+"-")]),a("span",[e._v(e._s(t.endNo)+" ;")])]):e._e()})],2)])],1)],1):e._e(),e._v(" "),a("el-row",{staticStyle:{padding:"15px 0"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"实际数量:",prop:"actualQuantity"}},[a("el-input",{staticClass:"input-class",attrs:{type:"number",placeholder:"本次生产实际数量",size:"mini","prefix-icon":"el-icon-edit",min:"0"},on:{change:e.setEndNumber},model:{value:e.detail.actualQuantity,callback:function(t){e.$set(e.detail,"actualQuantity",t)},expression:"detail.actualQuantity"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticClass:"input-class",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注信息。。。"},model:{value:e.detail.note,callback:function(t){e.$set(e.detail,"note",t)},expression:"detail.note"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"编码长度:"}},[a("el-input-number",{staticClass:"input-class",attrs:{min:7,max:100,label:"设置编码长度"},on:{change:e.codeLenSet},model:{value:e.codeLen,callback:function(t){e.codeLen=t},expression:"codeLen"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"是否完成:"}},[a("el-radio-group",{model:{value:e.detail.status,callback:function(t){e.$set(e.detail,"status",t)},expression:"detail.status"}},[a("el-radio",{attrs:{label:2}},[e._v("未完成")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:3}},[e._v("完成")])],1)],1)],1)],1)],1),e._v(" "),a("div",[a("div",{staticStyle:{"text-align":"left",display:"flex","justify-content":"flex-start"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.serialNumberAdd()}}},[e._v("新增编码\n                    ")])],1),e._v(" "),e._l(e.serialNumbers,function(t,i){return a("div",[a("el-row",{staticClass:"e-rows",attrs:{gutter:2}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"编码:"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"起始编码..."},on:{change:function(t){return e.setbyStartNo(i)}},model:{value:t.startNo,callback:function(a){e.$set(t,"startNo",a)},expression:"serialNumber.startNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[a("span",[e._v("--")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"结束编码"},on:{change:function(t){return e.setbyEndNo(i)}},model:{value:t.endNo,callback:function(a){e.$set(t,"endNo",a)},expression:"serialNumber.endNo"}})],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"text",placeholder:"编码备注 。。。"},model:{value:t.note,callback:function(a){e.$set(t,"note",a)},expression:"serialNumber.note"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-tooltip",{attrs:{effect:"light",content:"删除",placement:"right"}},[a("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.deletSerialNo(i)}}})],1)],1)],1)],1)})],2)],1)])])])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"1000px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelChoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0",padding:"0"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n            ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"客户名",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.client.name)+"\n            ")]}}],null,!1,216778349)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量/完成数量/下发数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.quantity)+"/"+e._s(t.row.endQuantity)+"/"+e._s(t.row.nextQuantity)+"枚\n            ")]}}],null,!1,3295119124)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"产品名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.product.producteName)+"\n            ")]}}],null,!1,2808458929)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"规格",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.specification.name)+"\n            ")]}}],null,!1,4614025)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+"枚")]}}],null,!1,3875320087)}),e._v(" "),a("el-table-column",{attrs:{prop:"productNo",align:"left",label:"型号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("div",[a("el-tabs",{attrs:{type:"card","tab-position":"top"},on:{"tab-click":e.handleClick},model:{value:e.activePanel,callback:function(t){e.activePanel=t},expression:"activePanel"}},[a("el-tab-pane",{attrs:{label:"新订单",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"新建",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"生产中",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"生产完成",name:"3"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"撤销",name:"4"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"汇总",name:"5"}})],1),e._v(" "),e.forSale?a("div",[a("div",{staticClass:"main-plan-progress-plan flex-plan"},e._l(e.materialList,function(t,i){return a("div",{key:t.id,staticClass:"item-plan",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-plans-show",style:{backgroundColor:t.bgcolor}},[a("div",[a("div",{staticClass:"text-alight"},[e._v("客户:"+e._s(t.client.name)+" ")]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                产品:"+e._s(t.product.producteName)+"\n                /"+e._s(t.specification.name)+"\n                /"+e._s(t.color.name)+"\n              ")]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                型号："+e._s(t.productNo)+"\n              ")]),e._v(" "),a("div",[a("u",[e._v("数量:"+e._s(t.quantity)+"|完成:"+e._s(t.endQuantity)+"|计划:"+e._s(t.nextQuantity)+"枚")]),e._v(" "),(t.quantity,t.nextQuantity,a("u",[e._v("|未下计划："+e._s(t.quantity-t.nextQuantity))]))]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                备注："+e._s(t.notes)+"\n              ")])]),e._v(" "),a("div",{staticStyle:{padding:"12px 0"}},[a("el-button",{staticStyle:{padding:"2px",margin:"2px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.addNewDetail(t)}}},[e._v("下生产计划\n              ")])],1)])])}),0),e._v(" "),0==e.plans.length?a("div",[e._v("\n        暂无数据\n      ")]):e._e(),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentMaterialChange}})],1)]):e._e(),e._v(" "),e.forDetail?a("div",[e.plans.length?a("el-collapse",e._l(e.plans,function(t){return a("el-collapse-item",{key:t.id,staticClass:"plan-item-style",attrs:{name:t.id}},[a("template",{slot:"title"},[a("div",{staticStyle:{"border-bottom":"1px solid #eeeeee"}},[a("span",{attrs:{size:"medium"}},[e._v("编号:"+e._s(t.planNo))]),e._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(e._f("formatDate")(t.createDate)))]),e._v(" "),a("i",[e._v("("+e._s(t.details.length)+")")])])]),e._v(" "),a("div",{staticClass:"main-plan-progress-plan flex-plan"},e._l(t.details,function(t,i){return a("div",{key:t.id,staticClass:"item-plan",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-plans-show",style:{backgroundColor:t.bgcolor}},[a("div",[a("div",{staticClass:"text-alight"},[e._v("客户:"+e._s(t.salesPlan.client.name)+" ")]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                    产品:"+e._s(t.salesPlan.product.producteName)+"\n                    |"+e._s(t.salesPlan.specification.name)+"\n                    |"+e._s(t.salesPlan.color.name)+"\n                  ")]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                    已完成数："+e._s(t.accomplishNO)+"\n                    |本次下发数量:"+e._s(t.actualQuantity)+"\n                    |销售需求总量"+e._s(t.salesPlan.quantity)+"\n                  ")]),e._v(" "),a("div",[e._v(e._s(t.salesPlan.planString))]),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("\n                    备注："+e._s(t.note)+"\n                  ")]),e._v(" "),t.serialNumbers.length?a("div",e._l(t.serialNumbers,function(t){return a("div",{key:t.id,staticClass:"text-alight serial"},[a("p",[e._v("编码: "+e._s(t.startNo)+"- "+e._s(t.endNo)+" ;备注: "+e._s(t.note)+";")])])}),0):e._e()]),e._v(" "),a("div",{staticStyle:{padding:"12px 0"}},[a("el-button",{staticStyle:{padding:"3px 12px",margin:"2px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editeDetail(i,t)}}},[e._v("编辑\n                  ")])],1)])])}),0)],2)}),1):e._e(),e._v(" "),0==e.plans.length?a("div",[e._v("\n          暂无数据\n        ")]):e._e(),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentChange}})],1)],1):e._e()],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(e){a("2QJa")},null,null);t.default=u.exports},PffU:function(e,t){},Pycp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("zL8q");var i={data:function(){return{outRecive:{quantity:"",note:"",materialId:""},dialogInTitle:"采购数量",dialogFormInVisible:!1,activeName:"material",confirmDialogTitle:"采购确认单",tempPlan:[],materialsReceives:[],confirms:{},nowMaterial:{quantity:"",notes:"",complete:""},confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",RecordKeywords:"",confirmKewords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{materialName:[{required:!0,message:"必填:原料名称",trigger:"blur"}],quantity:[{required:!0,message:"必填:数量",trigger:"blur"},{validator:function(e,t,a){/^\d+$/.test(t)?a():a("数字格式错误!")},message:"数字格式错误",trigger:"blur"}],clientId:[{required:!0,message:"必选:公司",trigger:"change"}],unitId:[{required:!0,message:"必选:单位",trigger:"change"}]},materials:[],defaultProps:{label:"name",isLeaf:"leaf",children:"child"},dialogTitle:"",currentPage:1,confirmCurrentPage:1,currentReceivePage:1,formLabelWidth:"120px",totalCount:-1,receiveTotalCount:-1,material:{materialName:"",unitId:"",specs:""},clients:[],units:[],dialogTableVisible:!1,dialogFormVisible:!1,currentIndex:"",matriallist:[]}},mounted:function(){this.initData()},methods:{formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},searchRecordData:function(){this.loadReceivedData()},doDelete:function(e){var t=this;this.getRequest("/materialInReceiveRecord/withdraw?id="+e.id).then(function(e){if(e&&200==e.status){e.data;t.loadReceivedData()}})},initData:function(){this.loadReceivedData()},keywordsChange:function(e){""==e&&this.loadReceivedData()},recordKeywordsChange:function(e){""==e&&this.searchRecordData()},currentReceiveChange:function(e){this.currentReceivePage=e,console.log(this.currentReceivePage),this.loadReceivedData()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.material=t,this.material.createDate=t.createDate,delete this.material.unit,this.dialogFormVisible=!0},cancelOptIn:function(){this.dialogFormInVisible=!1,this.loadReceivedData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadReceivedData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e)}).catch(function(){})},loadReceivedData:function(){var e=this;this.tableLoading=!0,this.getRequest("/materialInReceiveRecord/findbypage?page="+this.currentReceivePage+"&size=10&queryName="+this.RecordKeywords).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var a=t.data.data;e.materialsReceives=a,e.receiveTotalCount=t.data.total}})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.recordKeywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchRecordData(t)}},model:{value:e.RecordKeywords,callback:function(t){e.RecordKeywords=t},expression:"RecordKeywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchRecordData}},[e._v("搜索\n    ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialsReceives,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.materail.materialName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"operatorName",label:"记录人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.operator.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDate")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelRecordData(t.row)}}},[e._v("撤销\n          ")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentReceivePage,layout:"prev, pager, next",total:e.receiveTotalCount},on:{"current-change":e.currentReceiveChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("Ior+")},null,null);t.default=l.exports},QWIT:function(e,t){},RGDL:function(e,t){},T5Y6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("ngyR"),n=a("Gpj+"),l={data:function(){return{activeName:"notification"}},methods:{handleClick:function(e,t){console.log(e,t)}},components:{fc:i.default,nf:n.default}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"系统通知",name:"notification"}},[a("nf")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"好友聊天",name:"chat"}},[a("fc")],1)],1)],1)},staticRenderFns:[]},s=a("VU/8")(l,o,!1,null,null,null);t.default=s.exports},TjZE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),n=a.n(i),l=a("mvHQ"),o=a.n(l),s=a("zL8q"),r={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],plans:[],clients:[],units:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{materialType:"",notes:"",serialNumber:"",clientId:"",clientName:""},detail:{sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",type:"",specifications:""},details:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择原材料",selectMaterial:{},selectedM:{},filterText:""}},mounted:function(){this.initData()},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectMaterial.id>0){var a=this.selectMaterial.materialName+""+this.selectMaterial.specs+";";this.$confirm("您当前选择了"+a+"确认选择该原料吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(e){var t=e.selectMaterial;e.detail.unitId=t.unitId,e.detail.unitName=t.unit.name,e.detail.name=t.materialName,e.detail.materialId=t.id,e.detail.specifications=t.specs,this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectMaterial={},this.selectedM={}},formatStatus:function(e,t){return 1==e.materialType?"已确认":"未确认"},selectType:function(e,t,a){console.log("changne"),this.types=e,2==e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(a,i,n){a.id==e&&(t.detail.unitId=a.unitId,t.detail.unitName=a.unitName,t.detail.name=a.name,t.detail.materialId=a.id,t.detail.specifications=a.specs)})},addBox:function(){var e=this;if(console.log("asdfadsfasdfasd"),""==this.detail.quantity||void 0==this.detail.quantity)return Object(s.Message)("请输入数量"),!1;if(""==this.detail.name||void 0==this.detail.name)return Object(s.Message)("请选择物料"),!1;if(""==this.detail.sid)if(this.details.length>0){var t=!1;this.details.forEach(function(a,i,n){a.materialId==e.detail.materialId&&a.mtype==e.types&&(t=!0,a.quantity=parseFloat(e.detail.quantity)+parseFloat(a.quantity))}),t||(this.maxSid+=1,this.detail.sid=this.maxSid,this.detail.type="new",this.detail.mtype=this.types,this.details.push(this.detail))}else this.detail.sid=1,this.detail.type="new",this.detail.mtype=this.types,this.maxSid+=1,this.details.push(this.detail);else if(this.details.length)for(var a=0,i=this.details.length;a<i;a++){var n=this.details[a];"odd"===n.type?(this.detail.type="update",n.sid==this.detail.sid&&(this.details.splice(a,1),this.details.push(this.detail))):n.sid==this.detail.sid&&(this.details.splice(a,1),this.details.push(this.detail))}this.emptyDetail()},editeDetail:function(e,t){this.detail=t},deleteDetail:function(e,t){console.log("delete");var a=this.details.splice(e,1);"odd"===a[0].type&&(a[0].type="delete",this.currentDeleteData.push(a[0])),this.maxSid-=1},emptyDetail:function(){this.detail={sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",specifications:"",type:""}},initData:function(){var e=this;e.loadData(),this.getRequest("/rowBuyPlan/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients;var i=[];a.root.materials.forEach(function(e,t,a){var n=e[0],l=e[1],o=e[2];i.push({name:n,unitId:l,id:o,unitName:e[3],specs:e[4],mtype:1})}),e.materials=i,e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var n=[];a.root.products.forEach(function(e,t,a){n.push({name:e[0],unitId:e[1],id:e[2],unitName:e[3],specs:e[4],mtype:2})}),e.products=n}})},keywordsChange:function(e){""==e&&this.loadData()},keywordsMaterialChange:function(e){""==e&&this.loadMaterial()},handleNodeClick:function(e){this.plan.clientId=e.id,this.plan.clientName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.plan.clientId=0,this.plan.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(a,i){a.id==e&&(console.log(a.id),t.detail.unitName=a.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){this.dialogTitle="郑铁公司采购单";var e=this;this.getRequest("/rowBuyPlan/getSerialNumber").then(function(t){if(e.tableLoading=!1,t&&200==t.status){var a=t.data;e.plan.serialNumber=a.root.serialNumber,e.dialogFormVisible=!0}})},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(e,t){console.log(t);this.dialogTitle="编辑信息",this.plan=t,this.plan.createDate=t.createDate;var a=_.cloneDeep(t);void 0!=a.detail&&(a.detail.forEach(function(e,t,a){e.type="odd",e.sid=t+1}),this.details=a.detail,this.maxSid=a.detail.length),this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this,i=_.cloneDeep(this.plan);if(0==this.details.length)return this.$message({type:"info",message:"详情不能为空！"}),!1;var l=[],s=this.details.concat(this.currentDeleteData),r=o()(s,function(e,t){if("object"===(void 0===t?"undefined":n()(t))&&null!==t){if(-1!==l.indexOf(t))return;l.push(t)}return t});l=null,i.detail=r,this.$refs[e].validate(function(e){if(!e)return!1;t.validateplanNo();t.plan.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/rowBuyPlan/update",i).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail())})):(t.tableLoading=!0,0==t.plan.clientId||""==t.plan.clientId?(t.plan.clientId=0,i.materialType=1):i.materialType=2,console.log(i),t.postRequest("/rowBuyPlan/addnew",i).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail()}}))})},validateplanNo:function(){return!0},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.serialNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/rowBuyPlan/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/rowBuyPlan/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.plans=i,t.totalCount=a.data.total,t.emptyData()}})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/material/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.materialList=i,t.totalMaterialCount=a.data.total,t.dialogMaterialVisible=!0}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.details=[],this.plan={materialType:"",notes:"",serialNumber:"",clientId:0,clientName:""}}},computed:{routes:function(){return this.$store.state.routes}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("\n        添加\n      ")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.plan,rules:e.rules,size:"small","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编号:",prop:"serialNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"计划编号"},model:{value:e.plan.serialNumber,callback:function(t){e.$set(e.plan,"serialNumber",t)},expression:"plan.serialNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"供货商:",prop:"clientId"}},[a("el-popover",{attrs:{placement:"right",title:"供货商",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{attrs:{data:e.clients,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{ref:"tree2",staticStyle:{width:"200px",height:"28px",display:"inline-flex","justify-content":"space-between","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference","filter-node-method":e.filterNode},on:{click:e.showDepTree},slot:"reference"},[a("div",[e._v(e._s(e.plan.clientName))]),e._v(" "),a("div",{staticClass:"el-icon-circle-close",staticStyle:{color:"#606266"},on:{click:e.clearChoose}})])],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.plan.notes,callback:function(t){e.$set(e.plan,"notes",t)},expression:"plan.notes"}})],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"left",border:"1px solid #eeeeee"}},[e._v("\n          购买详情:\n        ")]),e._v(" "),a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"名称"},on:{focus:e.showMaterial},model:{value:e.detail.name,callback:function(t){e.$set(e.detail,"name",t)},expression:"detail.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"规格:",prop:"specifications"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",disabled:!0,size:"mini",placeholder:"规格。。"},model:{value:e.detail.specifications,callback:function(t){e.$set(e.detail,"specifications",t)},expression:"detail.specifications"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"append",disabled:!0,placeholder:"单位"},on:{change:e.selectChange},slot:"append",model:{value:e.detail.unitId,callback:function(t){e.$set(e.detail,"unitId",t)},expression:"detail.unitId"}},e._l(e.units,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.detail.notes,callback:function(t){e.$set(e.detail,"notes",t)},expression:"detail.notes"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addBox}},[e._v("添加")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.details,border:"",height:"200"}},[a("el-table-column",{attrs:{prop:"sid",align:"left",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+e._s(t.row.unitName))]}}],null,!1,3476428609)}),e._v(" "),a("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.editeDetail(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteDetail(t.$index,t.row)}}},[e._v("删除\n                ")])]}}],null,!1,987709478)})],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{prop:"materialName",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specs",align:"left",fixed:"",label:"原料规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"单位",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.unit.name)+"\n          ")]}}],null,!1,2595393714)})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.plans,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.detail,function(t,i){return a("el-form",{key:t.id,staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",[a("span",[e._v(e._s(i+1))])]),e._v(" "),a("el-form-item",{attrs:{label:"名称:"}},[a("span",[e._v(e._s(t.name)+";")])]),e._v(" "),a("el-form-item",{attrs:{label:"规格:"}},[a("span",[e._v(e._s(t.specifications)+" ;")])]),e._v(" "),a("el-form-item",{attrs:{label:"数量:"}},[a("span",[e._v(e._s(t.quantity)+" "+e._s(t.units.name)+";")])]),e._v(" "),a("el-form-item",{attrs:{label:"状态:"}},[a("span",[e._v(e._s(1==t.confirmStatus?"未确认":"已收货"))])]),e._v(" "),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[e._v(e._s(t.notes))])])],1)})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serialNumber",align:"left",label:"编号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clientName",width:"120",align:"left",label:"公司名称"}}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"left",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"confirmStatus",width:"80",align:"left",formatter:e.formatStatus,label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(r,c,!1,function(e){a("X3mk")},null,null);t.default=d.exports},UZTo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{tempPlan:[],confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midRecords:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){this.initData()},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.middleProduct.utilname=a.name)})},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var a="",i=e.plant;return this.positions.forEach(function(e,t,n){i.forEach(function(t,i,n){e.id==t&&(a+=e.name+" , ")})}),a},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){var e=this;e.loadData(),this.getRequest("/middleProduct/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients,e.products=a.root.products}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midProductInRecieving/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midProductInRecieving/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.midRecords=i,t.totalCount=a.data.total}})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midRecords,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"入库时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"规格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.midproduct.standard)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"left",label:"原料数量",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.operator.name)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelRecordData(t.row)}}},[e._v("撤销\n          ")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("JrsW")},null,null);t.default=l.exports},Uct3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("axNP"),n=a("ePtJ"),l=a("KNe0"),o=a("Pycp"),s={data:function(){return{activeName:"midProduct"}},methods:{handleClick:function(e,t){console.log(e,t),this.$refs.child.initData()}},components:{mpout:i.default,mpconfirm:n.default,rowmateril:l.default,materilinrecord:o.default}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"原料库",name:"midProduct",lazy:""}},[a("rowmateril",{ref:"child"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"出库记录",name:"midOutRecord",lazy:""}},[a("mpout",{ref:"child"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"入库记录",name:"midInRecord",lazy:""}},[a("materilinrecord",{ref:"child"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"采购确认",name:"midConfirm",lazy:""}},[a("mpconfirm",{ref:"child"})],1)],1)],1)},staticRenderFns:[]},c=a("VU/8")(s,r,!1,null,null,null);t.default=c.exports},VDSS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{username:[{required:!0,message:"必填:姓名",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"},{validator:function(e,t,a){/^1[3|4|5|7|8][0-9]\d{8}$/.test(t)?a():a("电话号码格式错误!")},message:"电话号码错误",trigger:"blur"}],password:[{required:!0,message:"必填:密码",trigger:"blur"}],roles:[{required:!0,message:"必选:角色",trigger:"change"}],empId:[{required:!0,message:"必选:员工",trigger:"change"}]},roles:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,user:{username:"",phone:""},users:[],deps:[],emps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{formatSex:function(e,t){return"1"==e.gender?"男":"2"==e.gender?"女":"未知"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.user.departmentName=e.name,this.user.departmentId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadData(),this.getRequest("/users/basicdata").then(function(t){if(t&&200==t.status){var a=t.data;e.emps=a.root.emps,e.roles=a.root.roles}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加用户",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadData()},showEditEmpView:function(e,t){this.dialogTitle="编辑用户",console.log(t),console.log(e),this.user=t,this.currentIndex=e,this.user.username=t.username,this.user.empId=t.empId,this.user.empName=t.empName;var a=[];t.roles.forEach(function(e){a.push(e.id)}),this.user.roles=a,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.user.id?(t.tableLoading=!0,console.log(t.user),t.postRequest("/users/update",t.user).then(function(e){a.tableLoading=!1,e&&200==e.status&&(console.log(e),a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.user),console.log("添加"),t.postRequest("/users/addAndUpdate",t.user).then(function(e){if(a.tableLoading=!1,console.log(e),e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteEmp:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/users/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/users/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.users=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.user={username:"",phone:"",password:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过姓名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n    ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.user,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"昵称:",prop:"username"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入昵称"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-phone",size:"mini",placeholder:"电话号码..."},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码:",prop:"password"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"密码..."},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"员工:",prop:"empId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择员工"},model:{value:e.user.empId,callback:function(t){e.$set(e.user,"empId",t)},expression:"user.empId"}},e._l(e.emps,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"角色:",prop:"roles"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",multiple:"",size:"mini",placeholder:"请选择角色"},model:{value:e.user.roles,callback:function(t){e.$set(e.user,"roles",t)},expression:"user.roles"}},e._l(e.roles,function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}),1)],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",align:"left",fixed:"",label:"昵称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",align:"left",fixed:"",label:"电话",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteEmp(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("/V9a")},null,null);t.default=l.exports},Va7D:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),n=a.n(i),l=a("mvHQ"),o=a.n(l),s=a("zL8q"),r={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],plans:[],clients:[],units:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{materialType:"",notes:"",serialNumber:"",clientId:"",clientName:""},detail:{sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",type:"",specifications:""},details:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择原材料",selectMaterial:{},selectedM:{}}},mounted:function(){this.initData()},methods:{showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectMaterial.id>0){var a=this.selectMaterial.name+""+this.selectMaterial.standard+";";this.$confirm("您当前选择了"+a+"确认选择该原料吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(e){var t=e.selectMaterial;e.detail.unitId=t.unitId,e.detail.unitName=t.unit.name,e.detail.name=t.name,e.detail.materialId=t.id,e.detail.specifications=t.standard,this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectMaterial={},this.selectedM={}},formatStatus:function(e,t){return 1==e.materialType?"已确认":"未确认"},selectType:function(e,t,a){console.log("changne"),this.types=e,2==e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(a,i,n){a.id==e&&(t.detail.unitId=a.unitId,t.detail.unitName=a.unitName,t.detail.name=a.name,t.detail.materialId=a.id,t.detail.specifications=a.specs)})},addBox:function(){var e=this;if(console.log("asdfadsfasdfasd"),""==this.detail.quantity||void 0==this.detail.quantity)return Object(s.Message)("请输入数量"),!1;if(""==this.detail.name||void 0==this.detail.name)return Object(s.Message)("请选择物料"),!1;if(""==this.detail.sid)if(this.details.length>0){var t=!1;this.details.forEach(function(a,i,n){a.materialId==e.detail.materialId&&a.mtype==e.types&&(t=!0,a.quantity=parseFloat(e.detail.quantity)+parseFloat(a.quantity))}),t||(this.maxSid+=1,this.detail.sid=this.maxSid,this.detail.type="new",this.detail.mtype=this.types,this.details.push(this.detail))}else this.detail.sid=1,this.detail.type="new",this.detail.mtype=this.types,this.maxSid+=1,this.details.push(this.detail);else if(this.details.length)for(var a=0,i=this.details.length;a<i;a++){var n=this.details[a];"odd"===n.type?(this.detail.type="update",n.sid==this.detail.sid&&(this.details.splice(a,1),this.details.push(this.detail))):n.sid==this.detail.sid&&(this.details.splice(a,1),this.details.push(this.detail))}this.emptyDetail()},editeDetail:function(e,t){this.detail=t},deleteDetail:function(e,t){console.log("delete");var a=this.details.splice(e,1);"odd"===a[0].type&&(a[0].type="delete",this.currentDeleteData.push(a[0])),this.maxSid-=1},emptyDetail:function(){this.detail={sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",specifications:"",type:""}},initData:function(){var e=this;e.loadData(),this.getRequest("/midBuyPlan/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients;var i=[];a.root.materials.forEach(function(e,t,a){var n=e[0],l=e[1],o=e[2];i.push({name:n,unitId:l,id:o,unitName:e[3],specs:e[4],mtype:1})}),e.materials=i,e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var n=[];a.root.products.forEach(function(e,t,a){n.push({name:e[0],unitId:e[1],id:e[2],unitName:e[3],specs:e[4],mtype:2})}),e.products=n}})},keywordsChange:function(e){""==e&&this.loadData()},keywordsMaterialChange:function(e){""==e&&this.loadMaterial()},handleNodeClick:function(e){this.plan.clientId=e.id,this.plan.clientName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.plan.clientId=0,this.plan.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(a,i){a.id==e&&(console.log(a.id),t.detail.unitName=a.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){this.dialogTitle="郑铁公司采购单";var e=this;this.getRequest("/midBuyPlan/getSerialNumber").then(function(t){if(e.tableLoading=!1,t&&200==t.status){var a=t.data;e.plan.serialNumber=a.root.serialNumber,e.dialogFormVisible=!0}})},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(e,t){console.log(t);this.dialogTitle="编辑信息",this.plan=t,this.plan.createDate=t.createDate;var a=_.cloneDeep(t);void 0!=a.detail&&(a.detail.forEach(function(e,t,a){e.type="odd",e.sid=t+1}),this.details=a.detail,this.maxSid=a.detail.length),this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this,i=_.cloneDeep(this.plan);if(0==this.details.length)return this.$message({type:"info",message:"详情不能为空！"}),!1;var l=[],s=this.details.concat(this.currentDeleteData),r=o()(s,function(e,t){if("object"===(void 0===t?"undefined":n()(t))&&null!==t){if(-1!==l.indexOf(t))return;l.push(t)}return t});l=null,i.detail=r,this.$refs[e].validate(function(e){if(!e)return!1;t.validateplanNo();t.plan.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/midBuyPlan/update",i).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail())})):(t.tableLoading=!0,0==t.plan.clientId||""==t.plan.clientId?(t.plan.clientId=0,i.materialType=1):i.materialType=2,console.log(i),t.postRequest("/midBuyPlan/addnew",i).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail()}}))})},validateplanNo:function(){return!0},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.serialNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midBuyPlan/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midBuyPlan/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.plans=i,t.totalCount=a.data.total,t.emptyData()}})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/middleProduct/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.materialList=i,t.totalMaterialCount=a.data.total,t.dialogMaterialVisible=!0}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.details=[],this.plan={materialType:"",notes:"",serialNumber:"",clientId:0,clientName:""}}},computed:{}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("\n        添加\n      ")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.plan,rules:e.rules,size:"small","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编号:",prop:"serialNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"计划编号"},model:{value:e.plan.serialNumber,callback:function(t){e.$set(e.plan,"serialNumber",t)},expression:"plan.serialNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"供货商:",prop:"clientId"}},[a("el-popover",{attrs:{placement:"right",title:"供货商",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.clients,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"28px",display:"inline-flex","justify-content":"space-between","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[a("div",[e._v(e._s(e.plan.clientName))]),e._v(" "),a("div",{staticClass:"el-icon-circle-close",staticStyle:{color:"#606266"},on:{click:e.clearChoose}})])],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.plan.notes,callback:function(t){e.$set(e.plan,"notes",t)},expression:"plan.notes"}})],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"left",border:"1px solid #eeeeee"}},[e._v("\n          购买详情:\n        ")]),e._v(" "),a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"名称"},on:{focus:e.showMaterial},model:{value:e.detail.name,callback:function(t){e.$set(e.detail,"name",t)},expression:"detail.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"规格:",prop:"specifications"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",disabled:!0,size:"mini",placeholder:"规格。。"},model:{value:e.detail.specifications,callback:function(t){e.$set(e.detail,"specifications",t)},expression:"detail.specifications"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"append",disabled:!0,placeholder:"单位"},on:{change:e.selectChange},slot:"append",model:{value:e.detail.unitId,callback:function(t){e.$set(e.detail,"unitId",t)},expression:"detail.unitId"}},e._l(e.units,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.detail.notes,callback:function(t){e.$set(e.detail,"notes",t)},expression:"detail.notes"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addBox}},[e._v("添加")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.details,border:"",height:"200"}},[a("el-table-column",{attrs:{prop:"sid",align:"left",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+e._s(t.row.unitName))]}}],null,!1,3476428609)}),e._v(" "),a("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.editeDetail(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteDetail(t.$index,t.row)}}},[e._v("删除\n                ")])]}}],null,!1,987709478)})],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"standard",align:"left",fixed:"",label:"原料规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"单位",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.unit.name)+"\n          ")]}}],null,!1,2595393714)})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.plans,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.detail,function(t,i){return a("el-form",{key:t.id,staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",[a("span",[e._v(e._s(i+1))])]),e._v(" "),a("el-form-item",{attrs:{label:"名称:"}},[a("span",[e._v(e._s(t.name)+";")])]),e._v(" "),a("el-form-item",{attrs:{label:"规格:"}},[a("span",[e._v(e._s(t.specifications)+" ;")])]),e._v(" "),a("el-form-item",{attrs:{label:"数量:"}},[a("span",[e._v(e._s(t.quantity)+" "+e._s(t.units.name)+";")])]),e._v(" "),a("el-form-item",{attrs:{label:"状态:"}},[a("span",[e._v(e._s(1==t.confirmStatus?"未确认":"已收货"))])]),e._v(" "),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[e._v(e._s(t.notes))])])],1)})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serialNumber",align:"left",label:"编号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clientName",width:"120",align:"left",label:"公司名称"}}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"left",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"confirmStatus",width:"80",align:"left",formatter:e.formatStatus,label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(r,c,!1,function(e){a("kxoV")},null,null);t.default=d.exports},VeYG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{plateNumber:[{required:!0,message:"必填:车牌",trigger:"blur"}],buyedDate:[{required:!0,message:"必填:购车时间",trigger:"blur"}],manufacturer:[{required:!0,message:"必选:生产厂家",trigger:"blur"}],vehicleType:[{required:!0,message:"必填:车辆型号",trigger:"blur"}]},cars:[],dialogTitle:"",currentPage:1,totalCount:-1,car:{plateNumber:"",buyedDate:"",carryingNumber:"",manufacturer:"",maintenanceMile:"",vehicleType:"",carStatus:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{formatStatus:function(e,t){return"USED"==e.carStatus?"使用中":"REPAIR"==e.carStatus?"修理中":"FREE"==e.carStatus?"空闲":"报废"},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadEmps()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.car=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.car.buyedDate=this.formatDate(t.buyedDate),delete this.car.noteMaker,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.validateCarNo();t.car.id?(t.tableLoading=!0,console.log(t.car),t.postRequest("/vehicle/addupvf",t.car).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.car),t.postRequest("/vehicle/addupvf",t.car).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},validateCarNo:function(){return!0},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.plateNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehicle/deletvf?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehicle/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.cars=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.car={plateNumber:"",carStatus:"",buyedDate:"",manufacturer:"",maintenanceMile:"",carryingNumber:"",vehicleType:""}}},computed:{}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n    \n          ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.car,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"车牌:",prop:"plateNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入车牌号。。"},model:{value:e.car.plateNumber,callback:function(t){e.$set(e.car,"plateNumber",t)},expression:"car.plateNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生产厂家:",prop:"manufacturer"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"生产厂家"},model:{value:e.car.manufacturer,callback:function(t){e.$set(e.car,"manufacturer",t)},expression:"car.manufacturer"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车辆型号:",prop:"vehicleType"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"车辆型号"},model:{value:e.car.vehicleType,callback:function(t){e.$set(e.car,"vehicleType",t)},expression:"car.vehicleType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"购买日期:",prop:"buyedDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"购买日期"},model:{value:e.car.buyedDate,callback:function(t){e.$set(e.car,"buyedDate",t)},expression:"car.buyedDate"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cars,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plateNumber",align:"left",fixed:"",label:"车牌",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"carStatus",width:"120",align:"left",formatter:e.formatStatus,label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"left",label:"购车时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.buyedDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"manufacturer",width:"220",align:"left",label:"生产厂家"}}),e._v(" "),a("el-table-column",{attrs:{prop:"vehicleType",width:"160",align:"left",label:"车型号"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n          ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(e){a("LrNQ")},null,null);t.default=s.exports},VsUZ:function(e,t,a){"use strict";a.d(t,"d",function(){return d}),a.d(t,"e",function(){return u}),a.d(t,"a",function(){return p}),a.d(t,"b",function(){return h}),a.d(t,"c",function(){return f});var i=a("pFYg"),n=a.n(i),l=a("mvHQ"),o=a.n(l),s=a("mtWM"),r=a.n(s),c=a("zL8q");a.n(c);r.a.interceptors.request.use(function(e){return e},function(e){c.Message.error({message:"请求超时!"})}),r.a.interceptors.response.use(function(e){if(!e.status||200!==e.status||500!==e.data.status)return e.data.msg&&c.Message.success({message:e.data.msg}),e;c.Message.error({message:e.data.msg})},function(e){504===e.response.status||404===e.response.status?c.Message.error({message:"服务器未连接⊙﹏⊙∥"}):403===e.response.status?c.Message.error({message:"权限不足,请联系管理员!"}):401===e.response.status?c.Message.error({message:e.response.data.msg}):e.response.data.msg?c.Message.error({message:e.response.data.msg}):c.Message.error({message:"未知错误!"})});var d=function(e,t){return r()({method:"post",url:""+e,data:t,transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded;;charset=UTF-8"}})},u=function(e,t){return r()({method:"put",url:""+e,data:t,transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},p=function(e){return r()({method:"delete",url:""+e})},h=function(e){return r()({method:"get",url:""+e})},f=function(e){var t=[],a=o()(e,function(e,a){if("object"===(void 0===a?"undefined":n()(a))&&null!==a){if(-1!==t.indexOf(a))return;t.push(a)}return a});return t=null,a}},VsxF:function(e,t){},WaId:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("6HRJ"),n=a("O9uO"),l=a("giJI"),o=a("5xx1"),s=a("3L9A"),r={data:function(){return{activeName:"plan"}},methods:{handleClick:function(e,t){console.log(e,t),this.$refs.plan&&this.$refs.plan.initData(),this.$refs.planed&&this.$refs.planed.initData(),this.$refs.planedManager&&this.$refs.planedManager.initData(),this.$refs.midTransform&&this.$refs.midTransform.initData(),this.$refs.send&&this.$refs.send.initData()}},components:{mp:i.default,mps:n.default,mpm:l.default,mptrans:o.default,send:s.default}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"销售计划",name:"plan"}},[a("mp",{ref:"plan"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"生产计划",name:"planed"}},[a("mps",{ref:"planed"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"生产进度",name:"planedManager"}},[a("mpm",{ref:"planed"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"物料周转",name:"midTransform",lazy:""}},[a("mptrans",{ref:"child"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"发货管理",name:"send",lazy:""}},[a("send",{ref:"send"})],1)],1)],1)},staticRenderFns:[]},d=a("VU/8")(r,c,!1,null,null,null);t.default=d.exports},X3mk:function(e,t){},"Ya/P":function(e,t){},ZEO7:function(e,t){},ZphK:function(e,t){},agNU:function(e,t){},axNP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{tempPlan:[],depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midRecords:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){this.initData(),console.log("fiand")},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.middleProduct.utilname=a.name)})},selectType:function(e){this.middleProduct.selectType=e},initData:function(){console.log("pop"),this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/materialOutReceiveRecord/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,console.log("find"),this.getRequest("/materialOutReceiveRecord/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.midRecords=i,t.totalCount=a.data.total}})}},computed:{routes:function(){}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midRecords,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"出库时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDate")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.materail.materialName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"规格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.materail.specs)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"left",label:"原料数量",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.operator.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelRecordData(t.row)}}},[e._v("撤销 \n          ")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("e4Wq")},null,null);t.default=l.exports},b79p:function(e,t){},cSB1:function(e,t){},d0NV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("0wq/"),n=a("UZTo"),l=a("ev2I"),o=a("Nzev"),s={data:function(){return{activeName:"midProduct"}},methods:{handleClick:function(e,t){console.log(e,t),console.log("被点了"),this.$refs.child.initData()}},components:{product:i.default,productinrecord:n.default,mpoutrecord:l.default,mpconfirm:o.default}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"半成品库",name:"midProduct"}},[a("product",{ref:"child"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"出库记录",name:"midOutRecord",lazy:""}},[a("mpoutrecord",{ref:"child"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"入库记录",name:"midInRecord",lazy:""}},[a("productinrecord",{ref:"child"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"采购确认",name:"midConfirm",lazy:""}},[a("mpconfirm",{ref:"child"})],1)],1)],1)},staticRenderFns:[]},c=a("VU/8")(s,r,!1,null,null,null);t.default=c.exports},dnay:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:中文名",trigger:"blur"}]},units:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,unit:{name:"",code:""},deps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""==e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},addAndFlushEmp:function(){this.dialogTitle="添加单位",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadDatas()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.unit=t,delete this.unit.sysMenu,delete this.unit.users,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.unit.id?(t.tableLoading=!0,console.log(t.unit),t.postRequest("/specification/create",t.unit).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadDatas(),a.emptyData())})):(t.tableLoading=!0,console.log(a.unit),t.postRequest("/specification/create",t.unit).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadDatas(),a.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/specification/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadDatas()}})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/specification/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.units=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.unit={name:"",code:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n    ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.unit,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"规格名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品规格"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.units,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("H+Q0")},null,null);t.default=l.exports},e0XP:function(e,t){},e4Wq:function(e,t){},ePtJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),n=a.n(i),l=(a("zL8q"),{data:function(){var e;return e={outRecive:{quantity:"",note:"",materialId:""},dialogInTitle:"采购数量",dialogFormInVisible:!1,activeName:"material",confirmDialogTitle:"采购确认单",tempPlan:[],materialsReceives:[],confirms:[],nowMaterial:{quantity:"",notes:"",complete:""},newMaterial:{name:"",specifications:"",quantity:"",unitName:"",notes:""},tableLoading:!1,confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",RecordKeywords:"",confirmKewords:""},n()(e,"tableLoading",!1),n()(e,"advanceSearchViewVisible",!1),n()(e,"rules",{materialName:[{required:!0,message:"必填:原料名称",trigger:"blur"}],quantity:[{required:!0,message:"必填:数量",trigger:"blur"},{validator:function(e,t,a){/^\d+$/.test(t)?a():a("数字格式错误!")},message:"数字格式错误",trigger:"blur"}],clientId:[{required:!0,message:"必选:公司",trigger:"change"}],unitId:[{required:!0,message:"必选:单位",trigger:"change"}]}),n()(e,"materials",[]),n()(e,"defaultProps",{label:"name",isLeaf:"leaf",children:"child"}),n()(e,"dialogTitle",""),n()(e,"currentPage",1),n()(e,"confirmCurrentPage",1),n()(e,"formLabelWidth","120px"),n()(e,"totalCount",-1),n()(e,"receiveTotalCount",-1),n()(e,"confirmTotalCount",-1),n()(e,"material",{materialName:"",unitId:"",specs:""}),n()(e,"clients",[]),n()(e,"units",[]),n()(e,"dialogTableVisible",!1),n()(e,"dialogFormVisible",!1),n()(e,"currentIndex",""),n()(e,"matriallist",[]),e},mounted:function(){this.initData()},methods:{formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},searchConfirmData:function(){this.loadConfirmData()},doDelete:function(e){var t=this;this.getRequest("/rowPruchaseVerify/withdraw?id="+e.id).then(function(e){if(e&&200==e.status){e.data;t.loadConfirmData()}})},handleNodeClick:function(e){this.material.supplier=e.name,this.material.clientId=e.id,this.pName=e.name,this.pId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.material.supplier="",this.material.clientId=""},cancelChoos:function(){console.log(this.pName),this.material.supplier=this.pName,this.material.clientId=this.pId},initData:function(){this.loadConfirmData()},confirmKeywordsChange:function(e){""==e&&this.searchConfirmData()},currentConfirmChange:function(e){this.confirmCurrentPage=e,console.log(this.confirmCurrentPage),this.loadConfirmData()},cancelOptIn:function(){this.dialogFormInVisible=!1,this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},cancelConfirm:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e)}).catch(function(){})},loadConfirmData:function(){var e=this;this.tableLoading=!0,this.getRequest("/rowPruchaseVerify/findbypage?page="+this.confirmCurrentPage+"&size=10&queryName="+this.confirmKewords).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var a=t.data.data;e.confirms=a,e.confirmTotalCount=t.data.total}})},emptyData:function(){console.log("+++++_+++++_"),this.material={materialName:"",standard:"",specs:"",materialNo:"",unitId:"",specifiCations:"",notes:"",quantity:""}}},computed:{routes:function(){}}}),o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"min-width":"600px"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.confirmKeywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchConfirmData(t)}},model:{value:e.confirmKewords,callback:function(t){e.confirmKewords=t},expression:"confirmKewords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchConfirmData}},[e._v("搜索\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.confirms,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serialNumber",align:"left",fixed:"",label:"采购单编号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"下发时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("formatDateTime")(t.row.planDate))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"确认时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"left",label:"原料数量",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"practicalQuantity",align:"left",label:"确认数量",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelConfirm(t.row)}}},[e._v("撤销\n                ")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.confirmCurrentPage,layout:"prev, pager, next",total:e.confirmTotalCount},on:{"current-change":e.currentConfirmChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(e){a("ECOc")},null,null);t.default=s.exports},eTb0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:名称",trigger:"blur"}]},positions:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,position:{name:"",specification:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加职位",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.position=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,delete this.position.deNumber,this.dialogFormVisible=!0},addData:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.position.id?(t.tableLoading=!0,console.log(t.position),t.postRequest("/position/posAdd",t.position).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.position),t.postRequest("/position/posAdd",t.position).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/position/deletPro?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/position/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.positions=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){this.position={name:"",describes:""}}},computed:{}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过职位名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加职位")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addForm",attrs:{model:e.position,rules:e.rules,size:"sam","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入职位名称"},model:{value:e.position.name,callback:function(t){e.$set(e.position,"name",t)},expression:"position.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述:",prop:"specification"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"职位描述..."},model:{value:e.position.specification,callback:function(t){e.$set(e.position,"specification",t)},expression:"position.specification"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.positions}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specification",align:"left",fixed:"",label:"描述",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(e){a("GqWn")},null,null);t.default=s.exports},ev2I:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{tempPlan:[],confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midRecords:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){this.initData()},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.middleProduct.utilname=a.name)})},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var a="",i=e.plant;return this.positions.forEach(function(e,t,n){i.forEach(function(t,i,n){e.id==t&&(a+=e.name+" , ")})}),a},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){var e=this;e.loadData(),this.getRequest("/middleProduct/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients,e.products=a.root.products}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midProductOutRecieving/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midProductOutRecieving/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){e.tableLoading=!1,a&&200==a.status&&(t.midRecords=a.data.data||[],t.totalCount=a.data.total)})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midRecords,fit:"",border:""}},[a("el-table-column",{attrs:{align:"left",fixed:"",label:"下发时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.midproduct.standard)+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"left",label:"原料数量"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.operator.name)+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelRecordData(t.row)}}},[e._v("撤销\n              ")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("qwhi")},null,null);t.default=l.exports},ev96:function(e,t){},fER9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:名称",trigger:"blur"}]},departs:[{name:"",describes:""}],dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,depart:{name:"",phone:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlush:function(){this.dialogTitle="添加部门",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadData()},showEditView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.depart=t,this.depart.name=t.name,this.depart.describes=t.describes,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,delete this.depart.deNumber,this.dialogFormVisible=!0},addData:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.depart.id?(t.tableLoading=!0,console.log(t.depart),t.postRequest("/depart/depAdd",t.depart).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.depart),t.postRequest("/depart/depAdd",t.depart).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},deleteEmp:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/depart/deletDep?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/depart/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.departs=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){this.depart={name:"",describes:""}}},computed:{}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过部门名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n  \n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlush}},[e._v("添加部门")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addForm",attrs:{model:e.depart,rules:e.rules,size:"sam","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入部门名称"},model:{value:e.depart.name,callback:function(t){e.$set(e.depart,"name",t)},expression:"depart.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述:",prop:"describes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"部门描述..."},model:{value:e.depart.describes,callback:function(t){e.$set(e.depart,"describes",t)},expression:"depart.describes"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.departs}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditView(t.$index,t.row)}}},[e._v("编辑\n      ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteEmp(t.row)}}},[e._v("删除\n      ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(e){a("HGcV")},null,null);t.default=s.exports},giJI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),n=a.n(i),l=a("mvHQ"),o=a.n(l),s=a("zL8q"),r={data:function(){return{activePanel:"0",onhover:!0,mainProduct:!1,detailProduct:!1,showheader:!1,isEdited:!0,positions:[{id:"注塑車間",name:"注塑車間"},{id:"激光車間",name:"激光車間"},{id:"裝配車間",name:"裝配車間"},{id:"加工車間",name:"加工車間"}],activeNames:"1",planProgress:[],lastPlanproductionPlanDetails:[{startNo:"J00000001",endNo:"J00000100"},{startNo:"K00000001",endNo:"K00000100"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,types:2,midProduct:[],plans:[],clients:[],units:[],selectPlans:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{id:0,note:"",planDetailsId:"",progressId:""},detail:{id:0,actualQuantity:"",salesPlanId:"",notes:"",salesPlan:{},serialNumbers:[],type:"new",status:3,productNo:"",specifications:"",productionPlanId:0},serialNumbers:[],serialNumber:{sid:1,id:0,startNo:"",endNo:"",note:"",clientId:0,productId:0,type:"new"},productionPlanDetails:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择生产计划",selectSalePlan:{},selectedM:{},filterText:"",crrentSelectShop:{},isCurrentShop:!0,isprarent:!1,sugestParentstartNo:"",sugestParentEndNo:"",sugestSelfEndNumbers:"",sugestSelfNumbers:"",currentParentShop:{},currentShop:{},lastPlanDetail:{startNo:"",endNo:""},serialNuberDeleted:[],serialNuberUpdate:[],serialNuberList:[],planDetails:[],dialogPlanVisible:!1,dialogPlanTitle:"生产进度",currntPlanRow:{},codeLen:1,dialogProgressVisible:!1,dialogProgressTitle:"",selectedStep:{},selectSteps:[],stepRecords:[],progresses:[],stepLength:0,stepIndex:0,stepRecord:{plant:"",qualifiedNo:0,junkedNo:0,unitsId:"",notes:""},stepRecordEdited:{plant:"",qualifiedNo:0,junkedNo:0,unitsId:"",notes:""},stepShow:!1,currentManatger:{},maxQuantity:0,dialogRecordEditeVisible:!1,dialogRecordEditesTitle:"编辑详情",manageStatus:1}},mounted:function(){this.initData()},methods:{handleClick:function(){console.log(this.activePanel);var e=!1;switch(this.activePanel){case"0":e=!0;break;case"1":this.manageStatus=1;break;case"2":this.manageStatus=2;break;case"3":this.manageStatus=3;break;case"4":this.manageStatus=4;break;case"5":this.manageStatus=""}e?(this.loadMaterial(),this.mainProduct=!1):(this.loadData(),this.mainProduct=!0)},back:function(){"0"===this.activePanel?(this.mainProduct=!1,this.detailProduct=!1):(this.mainProduct=!0,this.detailProduct=!1)},showSteps:function(e){this.planProgress=e.progress},canceldetails:function(){this.dialogRecordEditeVisible=!1,this.stepRecordEdited={plant:"",qualifiedNo:0,junkedNo:0,unitsId:"",notes:""}},recordDetailConfirm:function(e,t){var a=this,i=this,n=t.planDetails.salesPlan.client.name;this.$confirm("确认"+n+"的生产计划已完成?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("完成"),i.comfirmProgress(t)}).catch(function(){a.$message({type:"info",message:"已取消"})})},comfirmProgress:function(e){var t=this;t.getRequest("/productmanage/end?id="+e.id).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&(t.loadData(),t.emptyData())})},editDetails:function(e){console.log(e),this.stepRecordEdited=e,this.maxQuantity=this.currntPlanRow.planDetails.actualQuantity,this.dialogRecordEditeVisible=!0},editeConfirm:function(e){var t=this;console.log(e);var a={manageId:this.plan.id,manageDetailId:this.stepRecordEdited.id,quantity:this.stepRecordEdited.qualifiedNo,junkedNo:this.stepRecordEdited.junkedNo,plant:this.stepRecordEdited.plant,notes:this.stepRecordEdited.notes};t.postRequest("/pmDetails/update",a).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&(t.dialogRecordEditeVisible=!1,t.loadData(),t.emptyData())})},deleteDetails:function(){},addSteps:function(){var e=this;if(this.progresses){for(var t=_.cloneDeep(this.progresses),a=[],i=t.length-1;i>=0;i--){var n=t[i],l=void 0===n.inform.plant||void 0===n.inform.qualifiedNo||void 0===n.inform.junkedNo||0===n.inform.qualifiedNo;if(console.log("**___**"+l),l)!0,t.splice(i,1);else{var o={plant:n.inform.plant,qualifiedNo:n.inform.qualifiedNo,junkedNo:n.inform.junkedNo,notes:n.inform.notes,productProcessId:n.id,unitsId:e.currentManatger.planDetails.salesPlan.product.sysUnitId};a.push(o)}}a=this.jsonToString(a);var s={manageId:this.currentManagerId,manageDetails:a};e.postRequest("/pmDetails/add",s).then(function(t){e.tableLoading=!1,t&&200===t.status&&t.data.success&&(e.dialogProgressVisible=!1,e.loadData(),e.emptyData())})}},preStep:function(){0===this.stepIndex?this.stepIndex=this.stepLength-1:this.stepIndex--,(void 0!==this.progresses[this.stepIndex].inform.plant||void 0!==this.progresses[this.stepIndex].inform.qualifiedNo||void 0!==this.progresses[this.stepIndex].inform.junkedNo||void 0!==this.progresses[this.stepIndex].inform.notes)&&(this.stepRecord=this.progresses[this.stepIndex].inform)},nextStep:function(e){""!==this.progresses[this.stepIndex].inform.plant||""!==this.progresses[this.stepIndex].inform.qualifiedNo||""!==this.progresses[this.stepIndex].inform.junkedNo||this.progresses[this.stepIndex].inform.notes;this.progresses[this.stepIndex].inform=this.stepRecord,this.progresses[this.stepIndex].showData=!0,this.stepRecord={plant:"",qualifiedNo:0,junkedNo:0,unitsId:"",notes:""},this.stepIndex===this.stepLength-1?this.stepIndex=0:this.stepIndex++,(""!==this.progresses[this.stepIndex].inform.plant||""!==this.progresses[this.stepIndex].inform.qualifiedNo||0!==this.progresses[this.stepIndex].inform.junkedNo||""!==this.progresses[this.stepIndex].inform.notes)&&(this.stepRecord=this.progresses[this.stepIndex].inform)},setCurrent:function(){console.log("open"),void 0!==this.$refs.multipleTable&&this.$refs.multipleTable.setCurrentRow(this.selectedStep)},handleSelectionChange:function(e){this.selectedStep=e,this.plan.progressId=e.id},cancelsetpOpt:function(){this.progresses=[]},confirm:function(e,t){},addRecord:function(e,t){var a=this,i=this;null!==t.progressId?this.getRequest("/productpreprocess/findbyid?id="+t.progressId).then(function(e){if(a.tableLoading=!1,e&&200===e.status){console.log(e);var n=e.data.t;i.progresses=n.process,i.progresses.forEach(function(e){e.inform={plant:"",qualifiedNo:0,junkedNo:0,unitsId:"",notes:""}}),i.currentManagerId=t.id,i.currentManatger=t,i.maxQuantity=t.planDetails.actualQuantity,i.stepLength=i.progresses.length,a.dialogProgressTitle="添加生产记录",a.dialogProgressVisible=!0}}):this.$message({type:"info",message:"请为该计划选择工序！"})},codeLenSet:function(e){console.log(e),this.codeLen=e},cancelPlanOpt:function(){this.dialogFormVisible=!1,this.isEdited=!0,this.plan={id:0,note:"",planDetailsId:"",progressId:""},this.loadData()},addManager:function(e){var t=this;return 0===this.plan.productionPlanId?(this.$message({type:"error",message:"请选择生产计划!!"}),!1):void 0===this.plan.progressId||""===this.plan.progressId?(this.$message({type:"warning",message:"请选择工序!!"}),!1):void this.$refs[e].validate(function(e){if(!e)return!1;t.plan.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/productmanage/update",t.plan).then(function(e){t.tableLoading=!1,e&&200===e.status&&(t.dialogFormVisible=!1,t.isEdited=!0,t.loadMaterial(),t.emptyData(),t.emptyDetail(),t.clearSerialNumbers())})):(t.tableLoading=!0,console.log(t.plan),t.postRequest("/productmanage/add",t.plan).then(function(e){if(t.tableLoading=!1,e&&200===e.status){e.data;t.dialogFormVisible=!1,t.loadMaterial(),t.emptyData(),t.emptyDetail(),t.clearSerialNumbers()}}))})},serialNumberAdd:function(){var e=0;if(this.serialNumbers.length){var t=0;this.serialNumbers.forEach(function(e,a,i){t=e.sid>t?e.sid:t}),e=t+1}else e=1;this.serialNumbers.push({sid:e,id:0,startNo:"",endNo:"",clientId:0,productId:0,type:"new"})},deletSerialNo:function(e){var t=this.serialNumbers.splice(e,1);""===t[0].endNo||""===t[0].startNo||"new"===t[0].type||(t[0].type="delete",this.serialNuberDeleted.push(t[0])),console.log(t)},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectSalePlan=e,console.log(this.selectSalePlan)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectSalePlan.id>0){var a=this.selectSalePlan.salesPlan.client.name+"，     产品："+this.selectSalePlan.salesPlan.product.producteName+";";this.$confirm("您当前选择 ：客户"+a+" 确认选择该销售计划吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(){var e=this.selectPlans;console.log(e+"=*-*="),this.selectSteps=e.salesPlan.product.preprosess,this.plan.planDetailsId=this.selectPlans.id,this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectSalePlan={},this.selectedM={}},formatStatus:function(e,t){return 1===e.materialType?"已确认":"未确认"},selectType:function(e,t,a){console.log("changne"),this.types=e,2===e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(a,i,n){a.id===e&&(t.detail.unitId=a.unitId,t.detail.unitName=a.unitName,t.detail.name=a.name,t.detail.materialId=a.id,t.detail.specifications=a.specs)})},clearSerialNumbers:function(){this.serialNumbers=[],this.selectPlans={},this.serialNumbers.push({sid:1,id:0,startNo:"",endNo:"",type:"new",note:""})},deleteDetail:function(e,t){var a=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.detailDelete(t.id)}).catch(function(){})},detailDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productionplandetails/deletmark?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},emptyDetail:function(){this.detail={id:0,actualQuantity:"",salesPlanId:"",notes:"",salesPlan:{},serialNumbers:[],type:"new",status:3,productNo:"",specifications:"",productionPlanId:0}},initData:function(){var e=this;e.loadMaterial(),this.getRequest("/productionplan/basedata").then(function(t){if(t&&200==t.status){var a=t.data,i=[];a.root.clients.forEach(function(e,t,a){var n=e[0],l=e[1],o=e[2];i.push({name:n,id:l,parentClientId:o,parentName:e[3],address:e[4],phone:e[5],abbreviation:e[6]})}),e.clients=i,e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var n=[];a.root.products.forEach(function(e,t,a){n.push({id:e[0],producteName:e[1],specification:e[2],proType:e[3],mark:e[4],color:e[5]})}),e.products=n}})},keywordsChange:function(e){""===e&&this.loadData()},keywordsMaterialChange:function(e){""===e&&this.loadMaterial()},handleNodeClick:function(e){this.tableLoading=!0,this.crrentSelectShop=e,this.detail.clientId=e.id,this.detail.clientName=e.name,this.detail.abbrName=e.abbreviation,this.showOrHidePop=!1,this.depTextColor="#606266",this.getCurrentPlans()},showCurrentNo:function(){this.isprarent?this.isprarent=!1:this.isprarent=!0},showDetails:function(e){if(this.currntPlanRow=e,this.planDetails=e.details||[],!this.planDetails.length)return this.$message({type:"info",message:"无生产记录！"}),!1;this.plan.id=e.id,this.mainProduct=!1,this.detailProduct=!0},changeNO:function(){this.isCurrentShop?(this.lastPlanDetail=this.currentShop,this.isCurrentShop=!1):(this.lastPlanDetail=this.currentParentShop,this.isCurrentShop=!0)},getCurrentPlans:function(){var e=this;this.getRequest("/productionplan/getPlanDetails?clientId="+e.selectSalePlan.client.id+"&productId="+e.selectSalePlan.product.id).then(function(t){if(e.tableLoading=!1,t&&200===t.status){var a=t.data;if(e.currentParentShop=a.root.parent||[],e.currentParentShop.length){var i=e.currentParentShop.length-1;e.currentParentShop=e.currentParentShop[i];var n=e.currentParentShop[i].endNo;e.sugestParentstartNo=e.sugestStartNo(n,1)}else e.sugestParentstartNo="00000001",e.currentParentShop={},e.setStartSerialNo(e.sugestParentstartNo,e.sugestParentEndNo.endNo,"parent");if(e.currentShop=a.root.self||[],e.currentShop.length){var l=e.currentShop.length-1;e.currentShop=e.currentShop[l];var o=e.currentShop[l].endNo;e.sugestSelfNumbers=e.sugestStartNo(o,1)}else e.sugestSelfNumbers="00000001",e.currentShop={}}})},setEndNumber:function(e){console.log(e);if(this.isCurrentShop)if(this.lastPlanDetail=this.currentShop,this.currentShop.length){var t=this.currentShop.length-1;this.sugestSelfEndNumbers=this.sugestStartNo(this.currentShop[t].endNo,parseInt(e)+1),this.sugestSelfEndNumbers&&(this.serialNumbers[0].startNo=this.sugestSelfNumbers,this.serialNumbers[0].endNo=this.sugestSelfEndNumbers,this.serialNumbers[0].note="",this.serialNumbers[0].clientId=this.crrentSelectShop.id,this.serialNumbers[0].productId=this.detail.proId)}else{var a=this.sugestSelfNumbers;this.setCurrentEndData(a,e)}else if(this.lastPlanDetail=this.currentParentShop,this.currentParentShop.length){var i=this.currentParentShop.length-1;this.sugestParentEndNo=this.sugestStartNo(this.currentParentShop[i].endNo,parseInt(e)+1),this.sugestParentEndNo&&(this.serialNumbers[0].startNo=this.sugestParentstartNo,this.serialNumbers[0].endNo=this.sugestParentEndNo,this.serialNumbers[0].note="",this.serialNumbers[0].clientId=this.crrentSelectShop.id,this.serialNumbers[0].productId=this.detail.proId)}else{var n=this.currentParentShop;this.setCurrentEndData(n,e)}},setbyStartNo:function(e){console.log(e),e.length>this.codeLen&&Object(s.Message)("编码错误!"),this.detail.actualQuantity&&this.setCurrentEndData(e,this.detail.actualQuantity)},setCurrentEndData:function(e,t){e.toString().length;var a=parseInt(e)+parseInt(t),i=a.toString().length,n=this.codeLen-i;if(n)for(var l=0;l<n;l++)a="0"+a;this.serialNumbers[0].endNo=a},sugestStartNo:function(e,t){var a=function(e,t){if(t=t||!1,"string"==typeof e){var a=e.match(t?/[0-9]\d{1,}/g:/\d{1,}/g);return console.log(a),a.map(function(e){return e})}return[]},i=e.indexOf(a(e)[0]),n=e.substr(0,i),l=e.substr(i+a(e)[0].length,e.length-1),o=parseInt(a(e)[0])+t,s=o-o.toString().length;if(s)for(var r=0;r<s;r++)o+="0";return n+o+l},setStartSerialNo:function(e,t,a){this.serialNumbers.length&&(this.serialNumbers[0].startNo=e,this.serialNumbers[0].endNo=t||"",this.serialNumbers[0].note="")},clearChoose:function(){this.detail.clientId=0,this.detail.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(a,i){a.id===e&&(console.log(a.id),t.detail.unitName=a.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(e,t){this.dialogTitle="郑铁公司生产计划单",this.plan.id=0,this.selectPlans=t,this.setDetailData(),this.dialogFormVisible=!0},addNewDetail:function(e){this.dialogTitle="郑铁公司生产计划单";this.serialNumbers=[],this.detail.productionPlanId=e.id,this.plan.id=0,this.serialNumbers.push(this.serialNumber),this.dialogFormVisible=!0},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},add:function(e){var t=this,a=this;if(console.log("addbox！！！！"),""===this.detail.actualQuantity||void 0===this.detail.actualQuantity)return Object(s.Message)("请输入数量！"),!1;if(""===this.detail.salesPlanId)return Object(s.Message)("请选择销售计划"),!1;this.detail.serialNumbers=this.serialNumbers,this.productionPlanDetails.push(this.detail);var i=_.cloneDeep(this.plan),l=[],r=_.cloneDeep(this.productionPlanDetails);r.forEach(function(e){delete e.salesPlan});var c=o()(r,function(e,t){if("object"===(void 0===t?"undefined":n()(t))&&null!==t){if(-1!==l.indexOf(t))return;l.push(t)}return t});l=null,i.productionPlanDetails=c,this.$refs[e].validate(function(e){if(!e)return!1;t.plan.id?(t.tableLoading=!0,t.postRequest("/productionplan/update",i).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers(),a.showDetails(a.currntPlanRow))})):(t.tableLoading=!0,console.log(i),t.postRequest("/productionplan/add",i).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers(),a.showDetails(a.currntPlanRow))}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.clearChoose(),this.clearSerialNumbers(),this.emptyDetail(),this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productionplan/deletmark?id="+e).then(function(e){if(t.tableLoading=!1,e&&200===e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productmanage/findbypage?page="+this.currentPage+"&size=10&status="+this.manageStatus).then(function(a){if(e.tableLoading=!1,a&&200===a.status&&a.data.success){var i=a.data.data;t.plans=t.preData(i)||[],t.totalCount=a.data.total,t.emptyData()}})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productionplan/findbypage?page="+this.currentMaterialPage+"&size=10&status=1").then(function(a){e.tableLoading=!1,a&&200===a.status&&(t.materialList=t.preWoriteData(a.data.data),console.log(t.materialList),t.totalMaterialCount=a.data.total)})},preWoriteData:function(e){return e.length&&e.forEach(function(e){e.details.length&&e.details.forEach(function(e){e.bgcolor="orange"})}),e},mangeStatus:function(e){var t="";switch(e.mangeStatus){case 1:t="未生产";break;case 2:t="生产中";break;case 3:t="生产完成";break;case 4:t="撤销生产"}return t},emptyData:function(){this.productionPlanDetails=[],this.currentManagerId=0,this.stepRecord={plant:"",qualifiedNo:0,junkedNo:0,unitsId:"",notes:""},this.currentManatger={},this.plan={id:0,notes:"",planDetailsId:"",progressId:""},this.currntPlanRow&&(this.plan.id=this.currntPlanRow.id)},preData:function(e){return e.length&&e.forEach(function(e){var t=e.progress||[];if(t.length){for(var a=void 0,i=t.length-1;i>=0;i--){var n=t[i];"ENDSTEP"===n.productProcess.productProcessCode&&(a=n)}if(a){var l=a.quantity/e.planDetails.actualQuantity;l=Math.round(1e4*l)/100,console.log(l),e.gres=l,l>80&&l<100?e.color="gold":l>=100&&(e.status="success",e.gres=100);var o=e.mangeStatus;if(null!==o)switch(o){case 1:e.bgcolor="bisque";break;case 2:e.bgcolor="lightyellow";break;case 3:e.bgcolor="palegoldenrod";break;case 4:e.status="exception",e.bgcolor="#eeeeee"}e.onhover=!1}}}),e}},computed:{routes:function(){return this.$store.state.routes}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-tooltip",{attrs:{effect:"dark",content:"返回主表",placement:"left-start"}},[e.detailProduct?a("el-button",{attrs:{type:"success",icon:"el-icon-back",circle:""},on:{click:e.back}}):e._e()],1)],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogPlanTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelPlanOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addPlanForm",attrs:{model:e.plan,size:"mini","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("div",[a("div",{staticStyle:{"background-color":"bisque"}},[a("el-form",{attrs:{model:e.plan,size:"mini","label-width":"50px"}},[a("div",{staticStyle:{"text-align":"left","justify-items":"center"},model:{value:e.selectPlans,callback:function(t){e.selectPlans=t},expression:"selectPlans"}},[a("div",[e._v("产品:"+e._s(e.selectPlans.salesPlan.product.producteName)+"\n                      |"+e._s(e.selectPlans.salesPlan.specification.name)+"\n                      |"+e._s(e.selectPlans.salesPlan.color.name)+"\n                    ")]),e._v(" "),a("div",[e._v("\n                      发货需求数量:"+e._s(e.selectPlans.salesPlan.quantity)+"\n                      |完成数:"+e._s(e.selectPlans.salesPlan.endQuantity)+"\n                      |已下计划量:"+e._s(e.selectPlans.salesPlan.nextQuantity)+"\n                      |未下计划量:"+e._s(e.selectPlans.salesPlan.quantity-e.selectPlans.salesPlan.nextQuantity)+"\n                    ")]),e._v(" "),a("div",[e._v("本次生产量："+e._s(e.selectPlans.actualQuantity))]),e._v(" "),a("div",[e._v("销售员："+e._s(e.selectPlans.employee.name))])]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.selectSteps,"tooltip-effect":"dark","highlight-current-row":"",border:""},on:{"current-change":e.handleSelectionChange}},[e._v("\n                    ]\n                    "),a("el-table-column",{attrs:{align:"left",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.name)+"\n                      ")]}}],null,!1,3700785178)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"流程"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-steps",{attrs:{"align-center":""}},e._l(t.row.process,function(e,t){return a("el-step",{key:t,staticClass:"detail",attrs:{title:e.name}})}),1)]}}],null,!1,1387342495)})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{staticStyle:{width:"100%"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注信息。。。"},model:{value:e.plan.note,callback:function(t){e.$set(e.plan,"note",t)},expression:"plan.note"}})],1)],1)],1)],1)])])])],1):e._e()]):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addManager("addPlanForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogProgressTitle,"close-on-click-modal":!1,visible:e.dialogProgressVisible,width:"750px"},on:{"update:visible":function(t){e.dialogProgressVisible=t},close:e.cancelsetpOpt}},[e.dialogProgressVisible?a("div",{staticStyle:{width:"100%"}},[e.dialogProgressVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-start"}},[a("el-steps",{staticClass:"step-detail-progress",attrs:{active:e.stepIndex,direction:"vertical",space:160,"align-center":""}},e._l(e.progresses,function(t){return a("el-step",{key:e.progresses.id,attrs:{title:t.name,size:"mini"}},[a("div",{staticStyle:{width:"100%"},attrs:{slot:"description"},slot:"description"},[t.showData?a("div",[a("div",[e._v("\n                    车间："+e._s(t.inform.plant)+";\n                  ")]),e._v(" "),a("div",[e._v("\n                    数量："+e._s(t.inform.qualifiedNo)+"\n                  ")]),e._v(" "),a("div",[e._v("\n                    报废数："+e._s(t.inform.junkedNo)+";\n                  ")]),e._v(" "),a("div",[e._v("\n                    备注："+e._s(t.inform.notes)+";\n                  ")])]):e._e()])])}),1),e._v(" "),a("el-form",{ref:"stepDetail",staticClass:"step-detail",model:{value:e.stepRecord,callback:function(t){e.stepRecord=t},expression:"stepRecord"}},[a("div",[a("el-form-item",{attrs:{label:"车间：",prop:"plant"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择车间"},model:{value:e.stepRecord.plant,callback:function(t){e.$set(e.stepRecord,"plant",t)},expression:"stepRecord.plant"}},e._l(e.positions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"confirm-text"},[e._v("生产计划目标数量"+e._s(e.maxQuantity))]),e._v(" "),a("div",{staticClass:"detail"},[a("el-form-item",{attrs:{label:"数量：",prop:"qualifiedNo"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"生产合格数量...",size:"mini",type:"number",min:"0"},model:{value:e.stepRecord.qualifiedNo,callback:function(t){e.$set(e.stepRecord,"qualifiedNo",e._n(t))},expression:"stepRecord.qualifiedNo"}},[e._v("\n                  clearable\n                ")])],1)],1),e._v(" "),a("div",{staticClass:"detail"},[a("el-form-item",{attrs:{label:" 报废：",prop:"junkedNo"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"生产报废数量...",size:"mini",type:"number",min:"0",clearable:""},model:{value:e.stepRecord.junkedNo,callback:function(t){e.$set(e.stepRecord,"junkedNo",e._n(t))},expression:"stepRecord.junkedNo"}})],1)],1),e._v(" "),a("div",{staticClass:"detail"},[a("el-form-item",{attrs:{label:" 备注：",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"备注...",size:"mini",type:"textarea",clearable:""},model:{value:e.stepRecord.notes,callback:function(t){e.$set(e.stepRecord,"notes",t)},expression:"stepRecord.notes"}})],1)],1)])],1),e._v(" "),a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",padding:"0",margin:"0"}},[0!=e.stepIndex?a("el-button",{attrs:{round:"",size:"mini"},on:{click:e.preStep}},[e._v("上一步")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.nextStep("stepDetail")}}},[e._v("下一步\n          ")])],1)]):e._e()]):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogProgressVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addSteps("addStep")}}},[e._v("完成")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogRecordEditesTitle,"close-on-click-modal":!1,visible:e.dialogRecordEditeVisible,width:"450px"},on:{"update:visible":function(t){e.dialogRecordEditeVisible=t},close:e.canceldetails}},[e.dialogRecordEditeVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"detail",staticStyle:{width:"inherit"},model:{value:e.stepRecordEdited,callback:function(t){e.stepRecordEdited=t},expression:"stepRecordEdited"}},[a("el-form-item",{attrs:{label:"车间:"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择车间"},model:{value:e.stepRecordEdited.plant,callback:function(t){e.$set(e.stepRecordEdited,"plant",t)},expression:"stepRecordEdited.plant"}},e._l(e.positions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v("\n        计划数量"+e._s(e.maxQuantity)+"\n        "),a("el-form-item",{attrs:{label:"数量:"}},[a("el-input",{directives:[{name:"enter-number2",rawName:"v-enter-number2"}],staticStyle:{width:"200px"},attrs:{placeholder:"生产合格数量...",size:"mini",type:"text"},model:{value:e.stepRecordEdited.qualifiedNo,callback:function(t){e.$set(e.stepRecordEdited,"qualifiedNo",t)},expression:"stepRecordEdited.qualifiedNo"}},[e._v("\n            clearable\n          ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"报废:"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"生产报废数量...",size:"mini",type:"number",min:"0",clearable:""},model:{value:e.stepRecordEdited.junkedNo,callback:function(t){e.$set(e.stepRecordEdited,"junkedNo",t)},expression:"stepRecordEdited.junkedNo"}})],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"备注...",size:"mini",type:"textarea",clearable:""},model:{value:e.stepRecordEdited.notes,callback:function(t){e.$set(e.stepRecordEdited,"notes",t)},expression:"stepRecordEdited.notes"}})],1)],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogRecordEditeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editeConfirm("detail")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"900px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0",padding:"0"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,fit:"",border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"客户名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.client.name))]}}],null,!1,3882530648)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.product.producteName))]}}],null,!1,2073558564)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.actualQuantity)+"枚")]}}],null,!1,363731897)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.specification.name))]}}],null,!1,3947734364)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.product.proType))]}}],null,!1,3516178968)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createDate)))]}}],null,!1,1190445174)}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"编码规则"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e._l(t.row.serialNumbers,function(t,i){return a("div",[a("p",[e._v("编号: "+e._s(t.startNo)+"- "+e._s(t.endNo)+" ;备注: "+e._s(t.note)+" ")])])}),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v("编码")])],1)],2)]}}],null,!1,1851021655)})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailProduct,expression:"!detailProduct"}],staticClass:"main-pro"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activePanel,callback:function(t){e.activePanel=t},expression:"activePanel"}},[a("el-tab-pane",{attrs:{label:"新任务",name:"0"}},[a("div",[e.materialList.length?a("el-collapse",e._l(e.materialList,function(t){return a("el-collapse-item",{key:t.id,staticClass:"plan-item-style",attrs:{name:t.id}},[a("template",{slot:"title"},[a("div",{staticStyle:{"border-bottom":"1px solid #eeeeee"}},[a("span",{attrs:{size:"medium"}},[e._v("编号:"+e._s(t.planNo))]),e._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(e._f("formatDate")(t.createDate)))]),e._v(" "),a("i",[e._v("("+e._s(t.details.length)+")")])])]),e._v(" "),a("div",{staticClass:"main-plan-progress-plan sendflex"},e._l(t.details,function(t,i){return a("div",{key:t.id,staticClass:"senditem",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-send-show",style:{backgroundColor:t.bgcolor}},[a("div",[a("p",{staticClass:"text-alight"},[e._v("客户:"+e._s(t.salesPlan.client.name)+" ")]),e._v(" "),a("p",{staticClass:"text-alight"},[e._v("\n                          产品:"+e._s(t.salesPlan.product.producteName)+"\n                          /"+e._s(t.salesPlan.specification.name)+"\n                          /"+e._s(t.salesPlan.color.name)+"\n                        ")]),e._v(" "),a("p",{staticClass:"text-alight"},[e._v("\n                          已完成数："+e._s(t.accomplishNO)+"|需求数量:"+e._s(t.actualQuantity)+"\n                        ")]),e._v(" "),a("p",{staticClass:"text-alight"},[e._v("\n                          备注："+e._s(t.note)+"\n                        ")]),e._v(" "),t.serialNumbers.length?a("div",e._l(t.serialNumbers,function(t){return a("div",{key:t.id,staticClass:"text-alight serial"},[a("p",[e._v("编码: "+e._s(t.startNo)+"- "+e._s(t.endNo)+" ;备注: "+e._s(t.note)+";")])])}),0):e._e()]),e._v(" "),a("div",{staticStyle:{padding:"12px 0"}},[a("el-button",{staticStyle:{padding:"3px 12px",margin:"2px",height:"20px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.addAndFlushData(i,t)}}},[e._v("确认生产\n                        ")])],1)])])}),0)],2)}),1):e._e(),e._v(" "),0===e.materialList.length?a("div",[e._v("\n              暂无数据\n            ")]):e._e(),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"未开始生产",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"生产中",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"生产完成",name:"3"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"撤销生产",name:"4"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"汇总",name:"5"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.mainProduct,expression:"mainProduct"}],staticClass:"main-product"},[a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"start"}},[e.plans.length?a("div",{staticClass:"main-progress flex"},e._l(e.plans,function(t,i){return a("div",{key:t.id,staticClass:"item",on:{click:function(a){return a.preventDefault(),e.showSteps(t)},mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("li",{staticClass:"in-show",style:{backgroundColor:t.bgcolor}},[a("div",[a("div",[e._v("客户:"+e._s(t.planDetails.salesPlan.client.name))]),e._v(" "),a("div",[e._v("\n                    产品:"+e._s(t.planDetails.salesPlan.product.producteName)+"\n                    |"+e._s(t.planDetails.salesPlan.specification.name)+"\n                    |"+e._s(t.planDetails.salesPlan.color.name)+"\n                  ")]),e._v(" "),a("div",[e._v("生产：下发数:"+e._s(t.planDetails.actualQuantity)+"\n                    |已完成:"+e._s(t.planDetails.accomplishNO)+"\n                  ")]),e._v(" "),a("div",[e._v("\n                    销售："),a("u",[e._v("总需求量:"+e._s(t.planDetails.salesPlan.quantity))]),e._v(" "),a("u",[e._v("|已下:"+e._s(t.planDetails.salesPlan.nextQuantity)+"枚")])]),e._v(" "),a("div",[e._v("\n                    计划：\n                    "),t.planDetails.salesPlan.quantity-t.planDetails.salesPlan.nextQuantity>=0?a("u",[e._v("未下发:"+e._s(t.planDetails.salesPlan.quantity-t.planDetails.salesPlan.nextQuantity)+"枚")]):a("u",[e._v("超额下发:"+e._s(t.planDetails.salesPlan.nextQuantity-t.planDetails.salesPlan.quantity)+"枚")])])]),e._v(" "),a("div",{staticClass:"item-manager-progress"},[a("div",{staticStyle:{width:"40%"}},[a("el-progress",{staticStyle:{"align-items":"flex-start"},attrs:{percentage:t.gres,color:t.color,"text-inside":!1,"stroke-width":10,width:80,type:"circle",status:t.status}})],1),e._v(" "),a("div",{staticStyle:{width:"60%",height:"100%",display:"inline-flex","justify-content":"end","flex-flow":"row wrap"}},[t.details.length?a("el-button",{staticClass:"cover-item-buttom",staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"success"},on:{click:function(a){return a.preventDefault(),e.showDetails(t)}}},[e._v("\n                      查看详情\n                    ")]):e._e(),e._v(" "),1===t.mangeStatus||2===t.mangeStatus?a("el-button",{staticClass:"cover-item-buttom",staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return a.preventDefault(),e.addRecord(i,t)}}},[e._v(" 添加记录\n                    ")]):e._e(),e._v(" "),1===t.mangeStatus||2===t.mangeStatus?a("el-button",{staticClass:"cover-item-buttom",staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return a.preventDefault(),e.recordDetailConfirm(i,t)}}},[e._v("确认完成\n                    ")]):e._e()],1)])])])}),0):e._e(),e._v(" "),0==e.plans.length?a("div",{staticClass:"main-progress sendflex"},[a("div",{staticStyle:{"text-align":"center",width:"100%"}},[e._v("暂无数据")])]):e._e(),e._v(" "),a("div",{staticClass:"detail-progress"},[a("el-steps",{attrs:{direction:"vertical","align-center":""}},e._l(e.planProgress,function(t){return a("el-step",{key:t.id,attrs:{title:t.productProcess.name}},[a("div",{staticStyle:{width:"100%",color:"#000000"},attrs:{slot:"description"},slot:"description"},[a("div",[e._v("当前数量:"+e._s(t.quantity)+e._s(t.unit.name))]),e._v(" "),a("div",[e._v("更新时间:"+e._s(e._f("formatDateTime")(t.createDate)))])])])}),1)],1)]),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.detailProduct,expression:"detailProduct"}],staticClass:"detail-product"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planDetails,fit:"",border:""}},[a("el-table-column",{attrs:{align:"left",fixed:"",label:"工序"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.productProcess.name)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"生产车间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.plant)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"合格数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.qualifiedNo)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"报废数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.junkedNo)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.notes)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return a.stopPropagation(),e.editDetails(t.row)}}},[e._v("修改\n              ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return a.stopPropagation(),e.deleteDetails(t.row)}}},[e._v("撤销\n              ")])],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(r,c,!1,function(e){a("M3Sl")},null,null);t.default=d.exports},gxTg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("TjZE"),n=a("Va7D"),l={data:function(){return{activeName:"material"}},methods:{handleClick:function(e,t){console.log(e,t)}},components:{mp:i.default,mps:n.default}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"原材料采购计划",name:"material"}},[a("mp")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"半成品采购计划",name:"midproduct"}},[a("mps")],1)],1)],1)},staticRenderFns:[]},s=a("VU/8")(l,o,!1,null,null,null);t.default=s.exports},hR2O:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},emps:[],depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{note:[{required:!0,message:"必填:备注",trigger:"blur"}],carNo:[{required:!0,message:"必选:车辆",trigger:"blur"}]},carReRepairs:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],carReRepair:{carNo:"",note:"",carRequestId:"",preStartDate:"",preEndDate:"",empName:"",operatorId:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData();var e=this;this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var a=t.data;console.log(a),e.cars=a.root.cars}})},methods:{searchEmp:function(){this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.carReRepair.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadData(),this.getRequest("/users/basicdata").then(function(t){if(t&&200==t.status){var a=t.data;e.emps=a.root.emps}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.carReRepair=t,delete this.carReRepair.vech,delete this.carReRepair.assingedId,this.carReRepair.carRequestId=t.carRequestId,this.carReRepair.preStartDate=this.formatDate(t.preStartDate),this.carReRepair.preEndDate=this.formatDate(t.preEndDate),this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.carReRepair.id&&(t.tableLoading=!0,console.log(t.carReRepair),t.postRequest("/vehicleAllot/update",t.carReRepair).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())}))})},deleteData:function(e){var t=this;this.$confirm("此操将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehicleAllot/delevcalt?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehicleAllot/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.carReRepairs=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.carReRepair={carNo:"",note:"",carRequestId:"",preStartDate:"",preEndDate:"",empName:"",operatorId:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n        ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.carReRepair,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"车辆:",prop:"carNo"}},[a("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carReRepair.carNo)+"\n            ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出行时间:",prop:"preStartDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出行时间"},model:{value:e.carReRepair.preStartDate,callback:function(t){e.$set(e.carReRepair,"preStartDate",t)},expression:"carReRepair.preStartDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"返回时间:",prop:"preEndDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"返回时间"},model:{value:e.carReRepair.preEndDate,callback:function(t){e.$set(e.carReRepair,"preEndDate",t)},expression:"carReRepair.preEndDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"执行人:",prop:"operatorId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择员工"},model:{value:e.carReRepair.operatorId,callback:function(t){e.$set(e.carReRepair,"operatorId",t)},expression:"carReRepair.operatorId"}},e._l(e.emps,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carReRepair.note,callback:function(t){e.$set(e.carReRepair,"note",t)},expression:"carReRepair.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carReRepairs,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"车牌号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.vech.plateNumber))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"aplyDate",width:"120",align:"left",label:"申请时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.aplyDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"preStartDate",width:"120",align:"left",label:"计划出行时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.preStartDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"preEndDate",width:"120",align:"left",label:"计划返回时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.preEndDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"empName",align:"left",label:"申请人",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",align:"left",label:"执行人",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("KhUb")},null,null);t.default=l.exports},jW5Z:function(e,t){},"kBn+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("c/Tr"),n=a.n(i),l=a("pFYg"),o=a.n(l),s=a("mvHQ"),r=a.n(s),c={components:{treeTable:a("s3ol").default},data:function(){return{columns:[{text:"公司名称",value:"name",width:200},{text:"编号",value:"id"},{text:"电话",value:"phone"},{text:"地址",value:"address"}],dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:名称",trigger:"blur"}]},companys:[],defaultProps:{label:"name",isLeaf:"leaf",children:"child"},dialogTitle:"",currentPage:1,tableData:Array(10).fill({}),formLabelWidth:"120px",totalCount:-1,company:{name:"",phone:"",address:"",email:"",fax:"",status:"",abbreviation:"",parentName:"",parentClientId:"",infor:""},shops:[],posts:[],dialogTableVisible:!1,dialogFormVisible:!1,pName:"",pId:"",activeName:"down",tempShops:[],formVisible:!1,formTitle:""}},mounted:function(){this.initData()},methods:{addChild:function(e){console.log(e),this.formTitle="添加子公司";var t=e,a=_.cloneDeep(t);console.log(e),this.isChild=!0,this.selectRadio=!0,this.tempShops=[],0===a.parentClientId||a.parentClientId===a.id?delete a.child:void 0!==a.parent&&delete a.parent,this.tempShops.push(a),this.company.parentName=a.name,this.company.parentClientId=a.id,this.company.status=a.status,this.formVisible=!0},formatSex:function(e,t){return"up"===e.status?"上游":"down"===e.status?"下游":"未知"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},onTreeDataChange:function(){},handleNodeClick:function(e){this.company.parentName=e.name,this.company.parentClientId=e.id,this.pId=e.id,this.pName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},handleClick:function(e,t){var a=this.activeName;this.loadMyData(a)},clearChoose:function(){this.company.parentName="",this.company.parentClientId=""},headCall:function(e){this.companys=e},cancelChoos:function(){console.log(this.pName),this.company.parentName=this.pName,this.company.parentClientId=this.pId},initData:function(){var e=this.activeName;this.loadMyData(e)},keywordsChange:function(e){if(""==e){var t=this.activeName;this.loadMyData(t)}},currentChange:function(e){this.currentPage=e,console.log(this.currentPage);var t=this.activeName;this.loadMyData(t)},addAndFlushData:function(){this.$refs.companyRef.addAndFlushData()},searchData:function(){var e=this.activeName;this.loadMyData(e)},showEditEmpView:function(e){console.log(e),this.isChild=!1,this.tempShops=[],this.formTitle="编辑客户信息",this.company=e,this.selectRadio=!0,console.log(e),this.company.parentClientId=e.parentClientId,this.company.createDate=e.createDate,this.company.parentName=e.parentName,delete this.company.purchasePlan,delete this.company.product,this.formVisible=!0},addData:function(e){var t=this;this.formVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;var i=_.cloneDeep(t.company),n=[],l=r()(i.child,function(e,t){if("object"===(void 0===t?"undefined":o()(t))&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t});n=null,i.child=l,void 0!==i.parentClientId&&null!==i.parentClientId&&""!==i.parentClientId||(i.parentClientId=0,i.parentName=""),delete i.parent,console.log(i),t.company.id?(a.tableLoading=!0,t.postRequest("/client/update",i).then(function(e){if(a.tableLoading=!1,e&&200===e.status&&e.data.success){a.formVisible=!1;var i=a.activeName;a.loadData(i),a.emptyData()}else t.$message({type:"info",message:"更新失败"})})):(t.tableLoading=!0,t.postRequest("/client/add",i).then(function(e){if(a.tableLoading=!1,e&&200===e.status&&e.data.success){e.data;a.formVisible=!1;var i=a.activeName;a.loadData(i),a.emptyData()}else t.$message({type:"info",message:"添加失败"})}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.emptyData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("55"),t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){var t=this;console.log("666"),this.tableLoading=!0;var a=this;a.getRequest("/client/delete?id="+e).then(function(e){if(a.tableLoading=!1,console.log("777777"),e&&200===e.status&&e.data.success){var i=t.activeName;a.loadMyData(i)}else t.$message({type:"info",message:"失败"})})},loadMyData:function(){var e=this,t=this,a=this.activeName;this.tableLoading=!0,console.log(a),this.getRequest("/client/findbypage?page="+this.currentPage+"&size=100&queryName="+this.keywords+"&shopType="+a).then(function(a){e.tableLoading=!1,a&&200===a.status&&(t.companys=t.famatDataArr(a.data.data),console.log(t.companys),t.totalCount=a.data.total,t.emptyData())}),this.getRequest("/client/baseData").then(function(e){e&&200===e.status&&(t.shops=e.data.data)})},famatDataArr:function(e){var t=this;return e&&e.length&&n()(e).forEach(function(e){t.toArrays(e)}),e},toArrays:function(e){var t=this;e.child&&e.child.length>0&&(e.children=e.child,n()(e.children).forEach(function(e){e.child&&e.child.length>0&&t.toArrays(e)}))},toTree:function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.child});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.parentClientId];i?(i.children||(i.children=[])).push(e):t.push(e)}),console.log(t),t},emptyData:function(){console.log("+++++_+++++_"),this.company={name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",status:"",departmentName:"",departmentId:""}}},computed:{routes:function(){return this.$store.state.routes}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.formTitle,"close-on-click-modal":!1,visible:e.formVisible,width:"500px"},on:{"update:visible":function(t){e.formVisible=t},close:e.cancelOpt}},[e.formVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addDataForm",attrs:{model:e.company,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"站名:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入客户名称"},model:{value:e.company.name,callback:function(t){e.$set(e.company,"name",t)},expression:"company.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简称:",prop:"abbreviation"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-phone",size:"mini",placeholder:"请输入客户简称..."},model:{value:e.company.abbreviation,callback:function(t){e.$set(e.company,"abbreviation",t)},expression:"company.abbreviation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司电话..."},model:{value:e.company.phone,callback:function(t){e.$set(e.company,"phone",t)},expression:"company.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"传真:",prop:"fax"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司传真..."},model:{value:e.company.fax,callback:function(t){e.$set(e.company,"fax",t)},expression:"company.fax"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-message",size:"mini",placeholder:"公司邮箱..."},model:{value:e.company.email,callback:function(t){e.$set(e.company,"email",t)},expression:"company.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性质:",prop:"status"}},[a("el-radio-group",{attrs:{disabled:e.selectRadio},model:{value:e.company.status,callback:function(t){e.$set(e.company,"status",t)},expression:"company.status"}},[a("el-radio",{attrs:{label:"down"}},[e._v("下游")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"up"}},[e._v("上游")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"地址:",prop:"address"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司地址..."},model:{value:e.company.address,callback:function(t){e.$set(e.company,"address",t)},expression:"company.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址:",prop:"addressDetails"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"详细地址..."},model:{value:e.company.addressDetails,callback:function(t){e.$set(e.company,"addressDetails",t)},expression:"company.addressDetails"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.formVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addDataForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过客户名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n        ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("添加总公司")])],1)]),e._v(" "),a("div",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"下游客户",name:"down"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"上游企业",name:"up"}})],1),e._v(" "),a("div",[a("TreeGrid",{staticStyle:{height:"auto"},attrs:{data:e.companys,lines:"true",idField:"id",treeField:"name"}},[a("GridColumn",{attrs:{field:"name",title:"公司名"}}),e._v(" "),a("GridColumn",{attrs:{field:"phone",title:"电话"}}),e._v(" "),a("GridColumn",{attrs:{field:"address",title:"地址"}}),e._v(" "),a("GridColumn",{attrs:{field:"progress",title:"操作"},scopedSlots:e._u([{key:"cell",fn:function(t){var i=t.row;return[a("div",[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(t){return e.showEditEmpView(i)}}},[e._v("编辑\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(t){return e.addChild(i)}}},[e._v("添加子公司\n                ")]),e._v(" "),i.children?e._e():a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteData(i)}}},[e._v("删除\n                ")])],1)]}}])})],1)],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(e){a("oaCT")},null,null);t.default=u.exports},kxoV:function(e,t){},lGFz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},keywords:"",depTextColor:"#c0c4cc",tableLoading:!1,advanceSearchViewVisible:!1,rules:{carNo:[{required:!0,message:"必填:车牌",trigger:"blur"}]},cars:[],carRecords:[],dialogTitle:"",currentPage:1,totalCount:-1,carRecord:{startCause:"",startMileage:"",startDate:"",endMileage:"",endCause:"",endDate:"",note:"",carNo:""},dialogFormVisible:!1,dialogbeginVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{searchEmp:function(){this.loadEmps()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("heheh")},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.carRecord.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadData(),this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var a=t.data;console.log(a),e.cars=a.root.cars}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.dialogFormVisible=!0,this.emptyData()},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.carRecord=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.carRecord.endDate=this.formatDate(t.endDate),this.carRecord.startDate=this.formatDate(t.startDate),delete this.carRecord.user,delete this.carRecord.verification,delete this.carRecord.enabled,delete this.carRecord.distributeDate,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.carRecord.id?(t.tableLoading=!0,console.log(t.carRecord),t.postRequest("/vehiclerecord/addvd",t.carRecord).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.carRecord),t.postRequest("/vehiclerecord/addvd",t.carRecord).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除该次记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehiclerecord/deletvd?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehiclerecord/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.carRecords=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.carRecord={startCause:"",startMileage:"",startDate:"",endMileage:"",endCause:"",endDate:"",note:"",carNo:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n          ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.carRecord,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"车牌:",prop:"carNo"}},[a("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRecord.carNo)+"\n              ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出车事由:",prop:"startCause"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入出车事由"},model:{value:e.carRecord.startCause,callback:function(t){e.$set(e.carRecord,"startCause",t)},expression:"carRecord.startCause"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"初始里程:",prop:"startMileage"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"初始里程"},model:{value:e.carRecord.startMileage,callback:function(t){e.$set(e.carRecord,"startMileage",t)},expression:"carRecord.startMileage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出发日期:",prop:"startDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出发日期"},model:{value:e.carRecord.startDate,callback:function(t){e.$set(e.carRecord,"startDate",t)},expression:"carRecord.startDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际事由:",prop:"endCause"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入该次出车实际事由"},model:{value:e.carRecord.endCause,callback:function(t){e.$set(e.carRecord,"endCause",t)},expression:"carRecord.endCause"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束里程:",prop:"endMileage"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"结束里程"},model:{value:e.carRecord.endMileage,callback:function(t){e.$set(e.carRecord,"endMileage",t)},expression:"carRecord.endMileage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束日期:",prop:"endDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"结束日期"},model:{value:e.carRecord.endDate,callback:function(t){e.$set(e.carRecord,"endDate",t)},expression:"carRecord.endDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRecord.note,callback:function(t){e.$set(e.carRecord,"note",t)},expression:"carRecord.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogbeginVisible,width:"500px"},on:{"update:visible":function(t){e.dialogbeginVisible=t},close:e.cancelOpt}},[e.dialogbeginVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addForm",attrs:{model:e.carRecord,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"车牌:",prop:"carNo"}},[a("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRecord.carNo)+"\n              ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出车事由:",prop:"startCause"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入出车事由"},model:{value:e.carRecord.startCause,callback:function(t){e.$set(e.carRecord,"startCause",t)},expression:"carRecord.startCause"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"初始里程:",prop:"startMileage"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"初始里程"},model:{value:e.carRecord.startMileage,callback:function(t){e.$set(e.carRecord,"startMileage",t)},expression:"carRecord.startMileage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出发日期:",prop:"startDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出发日期"},model:{value:e.carRecord.startDate,callback:function(t){e.$set(e.carRecord,"startDate",t)},expression:"carRecord.startDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRecord.note,callback:function(t){e.$set(e.carRecord,"note",t)},expression:"carRecord.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogbeginVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.carRecord,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"车牌:",prop:"carNo"}},[a("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRecord.carNo)+"\n    ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出车事由:",prop:"startCause"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入出车事由"},model:{value:e.carRecord.startCause,callback:function(t){e.$set(e.carRecord,"startCause",t)},expression:"carRecord.startCause"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"初始里程:",prop:"startMileage"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"初始里程"},model:{value:e.carRecord.startMileage,callback:function(t){e.$set(e.carRecord,"startMileage",t)},expression:"carRecord.startMileage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出发日期:",prop:"startDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出发日期"},model:{value:e.carRecord.startDate,callback:function(t){e.$set(e.carRecord,"startDate",t)},expression:"carRecord.startDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际事由:",prop:"endCause"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入该次出车实际事由"},model:{value:e.carRecord.endCause,callback:function(t){e.$set(e.carRecord,"endCause",t)},expression:"carRecord.endCause"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束里程:",prop:"endMileage"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"结束里程"},model:{value:e.carRecord.endMileage,callback:function(t){e.$set(e.carRecord,"endMileage",t)},expression:"carRecord.endMileage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束日期:",prop:"endDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"结束日期"},model:{value:e.carRecord.endDate,callback:function(t){e.$set(e.carRecord,"endDate",t)},expression:"carRecord.endDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRecord.note,callback:function(t){e.$set(e.carRecord,"note",t)},expression:"carRecord.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carRecords}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"carNo",align:"left",fixed:"",label:"车牌",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startCause",align:"left",fixed:"",label:"出发事由",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startMileage",width:"120",align:"left",label:"出发行程"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"left",label:"出发时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.startDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endCause",width:"220",align:"left",label:"实际事由"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endMileage",width:"120",align:"left",label:"结束行程"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"left",label:"结束日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.endDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"note",width:"120",align:"left",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n          ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(e){a("cSB1")},null,null);t.default=s.exports},lO7g:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:姓名",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"}],gender:[{required:!0,message:"必选:性别",trigger:"blur"}],email:[{required:!0,message:"必填:电子邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],beginDate:[{required:!0,message:"必填:入职日期",trigger:"blur"}]},emps:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}],dialogTitle:"",currentPage:1,tableData:Array(10).fill({date:"2016-05-02",name:"张三",address:"上海市普陀区金沙江路 1518 弄"}),formLabelWidth:"120px",totalCount:-1,employee:{name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",gender:""},isDot:!1,dialogTableVisible:!1,dialogFormVisible:!1,menuitems:[{iconCls:"el-icon-menu",index:"/home",title:"首页",name:"部门管理",leaf:!1,hidden:!1,children:[{path:"/emp",name:"员工"},{path:"/department",name:"部门"},{path:"/position",name:"职位"},{path:"/company",name:"客户"}]},{iconCls:"el-icon-menu",index:"/home",title:"综合管理",name:"综合部",leaf:!1,hidden:!1,children:[{path:"/car",name:"车辆管理"},{path:"/product",name:"产品管理"},{path:"/buyPlan",name:"采购计划"}]},{iconCls:"el-icon-menu",index:"/home",title:"销售管理",name:"销售管理",leaf:!1,hidden:!1,children:[{path:"/sale",name:"销售管理"}]},{iconCls:"el-icon-menu",index:"/home",title:"生产管理",name:"生产管理",leaf:!1,hidden:!1,children:[{path:"/productsFinished",name:"成品管理"},{path:"/productMid",name:"半成品库"},{path:"/material",name:"原材料库"}]},{iconCls:"el-icon-menu",index:"/home",title:"系统管理",name:"系统管理",leaf:!1,hidden:!1,children:[{path:"/sysRole",name:"角色管理"},{path:"/users",name:"用户管理"},{path:"/sysUnit",name:"单位管理"}]}]}},mounted:function(){this.loadNF()},methods:{loadNF:function(){var e=this;this.getRequest("/chat/sysmsgs").then(function(t){var a=!1;t.data.data.forEach(function(e){1==e.msgState&&(a=!0)}),e.$store.commit("toggleNFDot",a)})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.getRequest("/logout"),t.$store.commit("logout"),t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},goChat:function(){this.$router.push({path:"/chat"})},emptyEmpData:function(){this.employee={name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",gender:""}}},computed:{user:function(){return this.$store.state.user},routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticClass:"home-header"},[a("span",{staticClass:"home_title"},[e._v("郑铁管理系统")]),e._v(" "),a("div",{staticStyle:{display:"flex","align-items":"center","margin-right":"7px"}},[a("el-badge",{staticStyle:{"margin-right":"30px"},attrs:{"is-dot":this.$store.state.nfDot}},[a("i",{staticClass:"fa fa-bell-o",staticStyle:{cursor:"pointer"},on:{click:e.goChat}})]),e._v(" "),a("el-dropdown",{on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link home_userinfo",staticStyle:{display:"flex","align-items":"center"}},[e._v("\n            "+e._s(e.user.username)+"\n            "),a("i",[""!=e.user.userface?a("img",{staticStyle:{width:"40px",height:"40px","margin-right":"5px","margin-left":"5px","border-radius":"40px"},attrs:{src:e.user.userface}}):e._e()])]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[e._v("个人中心")]),e._v(" "),a("el-dropdown-item",[e._v("设置")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e._v("注销")])],1)],1)],1)]),e._v(" "),a("el-container",[a("el-aside",{staticClass:"home-aside",attrs:{width:"200px"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-start",width:"180px","text-align":"left"}},[a("el-menu",{staticStyle:{background:"#ececec",width:"180px"},attrs:{"unique-opened":"",router:""}},[e._l(e.menuitems,function(t,i){return t.hidden?e._e():[t.leaf?e._e():a("el-submenu",{attrs:{index:i+""}},[a("template",{slot:"title"},[a("i",{class:t.iconCls}),e._v(e._s(t.name))]),e._v(" "),e._l(t.children,function(t){return t.hidden?e._e():a("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v(e._s(t.name)+"\n                ")])})],2),e._v(" "),t.leaf&&t.children.length>0?a("el-menu-item",{attrs:{index:t.children[0].path}},[a("i",{class:t.iconCls}),e._v(e._s(t.children[0].name)+"\n              ")]):e._e()]})],2)],1)]),e._v(" "),a("el-container",[a("el-main",{staticClass:"home-main"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/main"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{domProps:{textContent:e._s(this.$router.currentRoute.name)}})],1),e._v(" "),a("keep-alive",[this.$route.meta.keepAlive?a("router-view"):e._e()],1),e._v(" "),this.$route.meta.keepAlive?e._e():a("router-view")],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("LNkA")},null,null);t.default=l.exports},mOMX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("4K/P"),n=a("dnay"),l=a("v2zK"),o=a("Kzbj"),s=a("ptqw"),r={data:function(){return{activeName:"product"}},methods:{handleClick:function(e,t){console.log(e,t),console.log("被点了"),this.$refs.child&&this.$refs.child.initData(),this.$refs.grow&&this.$refs.grow.initData(),this.$refs.step&&this.$refs.step.initData(),this.$refs.specs&&this.$refs.specs.initData(),this.$refs.specs&&this.$refs.color.initData()}},components:{Products:i.default,specs:n.default,color:l.default,step:o.default,gress:s.default}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"产品管理",name:"product",lazy:""}},[a("Products",{ref:"child"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"工序设置",name:"gress",lazy:""}},[a("gress",{ref:"grow"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"工序词典",name:"step",lazy:""}},[a("step",{ref:"step"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"规格设置",name:"specs",lazy:""}},[a("specs",{ref:"specs"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"颜色设置",name:"color",lazy:""}},[a("color",{ref:"color"})],1)],1)],1)},staticRenderFns:[]},d=a("VU/8")(r,c,!1,null,null,null);t.default=d.exports},mtbN:function(e,t){},ngyR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l={data:function(){return{hrs:[],msg:"",currentUser:this.$store.state.user,currentFriend:{}}},computed:{msgList:{get:function(){return this.$store.state.msgList}},isDotMap:{get:function(){return this.$store.state.isDotMap}}},watch:{msgList:function(){document.getElementById("chatDiv").scrollTop=document.getElementById("chatDiv").scrollHeight}},methods:{sendMsg:function(){var e=window.localStorage.getItem(this.$store.state.user.username+"#"+this.currentFriend.username);if(console.log("hihi-_-!!!!"),null==e)(e=[]).push({msg:this.msg,from:this.$store.state.user.username}),window.localStorage.setItem(this.$store.state.user.username+"#"+this.currentFriend.username,n()(e));else{var t=JSON.parse(e);t.push({msg:this.msg,from:this.$store.state.user.username}),window.localStorage.setItem(this.$store.state.user.username+"#"+this.currentFriend.username,n()(t))}this.$store.state.stomp.send("/ws/chat",{},this.msg+";"+this.currentFriend.username),this.msg="",this.updateChatDiv()},updateChatDiv:function(){var e=window.localStorage.getItem(this.currentUser.username+"#"+this.currentFriend.username);null==e?this.$store.commit("updateMsgList",[]):this.$store.commit("updateMsgList",JSON.parse(e))},toggleFriend:function(e){e!=this.currentFriend&&(this.currentFriend=e,this.$store.commit("updateCurrentFriend",e),this.updateChatDiv(),this.$store.commit("removeValueDotMap","isDot#"+this.currentUser.username+"#"+e.username),document.getElementById("chatDiv").scrollTop=document.getElementById("chatDiv").scrollHeight)},loadHrs:function(){var e=this;this.getRequest("/chat/hrs").then(function(t){e.hrs=t.data})}},mounted:function(){this.loadHrs()}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-aside",{attrs:{width:"160px"}},[e._l(e.hrs,function(t,i){return a("div",{key:t.id,staticClass:"friendListDiv",class:{currentChatFriend:e.currentFriend.id==t.id},on:{click:function(a){return e.toggleFriend(t)}}},[a("img",{staticClass:"userfaceImg",attrs:{src:t.userface}}),e._v(" "),a("el-badge",{attrs:{"is-dot":null!=e.isDotMap.get("isDot#"+e.currentUser.username+"#"+t.username)}},[e._v(e._s(t.username))])],1)}),e._v(" "),a("div",{staticStyle:{"background-color":"#20a0ff",height:"1px",width:"160px"}})],2),e._v(" "),a("el-main",{staticStyle:{"padding-top":"0px","padding-bottom":"0px"}},[a("div",{ref:"chatDiv",staticClass:"chatDiv",attrs:{id:"chatDiv"}},[a("p",{directives:[{name:"show",rawName:"v-show",value:e.currentFriend.username,expression:"currentFriend.username"}]},[e._v("与\n          "),a("el-tag",{staticStyle:{"margin-left":"5px","margin-right":"5px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.currentFriend.username)+"\n          ")]),e._v("\n          聊天中\n        ")],1),e._v(" "),e._l(e.msgList,function(t){return[t.from==e.currentFriend.username?a("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center","box-sizing":"border-box"}},[a("img",{staticClass:"userfaceImg",attrs:{src:e.currentFriend.userface}}),e._v(" "),a("div",{staticStyle:{display:"inline-flex","border-style":"solid","border-width":"1px","border-color":"#20a0ff","border-radius":"5px",padding:"5px 8px 5px 8px"}},[e._v("\n              "+e._s(t.msg)+"\n            ")])]):e._e(),e._v(" "),t.from!=e.currentFriend.username?a("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center","box-sizing":"border-box"}},[a("div",{staticStyle:{display:"inline-flex","border-style":"solid","border-width":"1px","border-color":"#20a0ff","border-radius":"5px",padding:"5px 8px 5px 8px","margin-right":"3px","background-color":"#9eea6a"}},[e._v("\n              "+e._s(t.msg)+"\n            ")]),e._v(" "),a("img",{staticClass:"userfaceImg",attrs:{src:e.currentUser.userface}})]):e._e()]})],2),e._v(" "),a("div",{staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入内容",size:"mini",type:"textarea",autosize:""},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),e._v(" "),a("el-button",{staticClass:"sendBtn",attrs:{disabled:!e.currentFriend.id,size:"small",type:"primary"},on:{click:e.sendMsg}},[a("i",{staticClass:"fa fa-send",staticStyle:{"margin-right":"15px"}}),e._v("发送\n        ")])],1)])],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(e){a("2MWp")},null,null);t.default=s.exports},nyr8:function(e,t){},oaCT:function(e,t){},pQHM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{roleName:[{required:!0,message:"必填:中文名",trigger:"blur"}],name:[{required:!0,message:"必填:英文名称",trigger:"blur"},{validator:function(e,t,a){/^ROLE_[a-zA-Z]+$/.test(t)?a():a("角色格式错误!")},message:"名称错误",trigger:"blur"}]},roles:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,role:{name:"",roleName:""},deps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""==e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},addAndFlushEmp:function(){this.dialogTitle="添加员工",this.emptyEmpData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadDatas()},showEditEmpView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.role=t,delete this.role.sysMenu,delete this.role.users,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.role.id?(t.tableLoading=!0,console.log(t.role),t.postRequest("/sysrole/addAndUpdate",t.role).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadDatas(),a.emptyEmpData())})):(t.tableLoading=!0,console.log(a.role),t.postRequest("/sysrole/addAndUpdate",t.role).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadDatas(),a.emptyEmpData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteEmp:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/sysrole/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadDatas()}})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/sysrole/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.roles=i,t.totalCount=a.data.total,t.emptyEmpData()}})},emptyEmpData:function(){console.log("+++++_+++++_"),this.role={name:"",roleName:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过角色名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n    ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.role,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"英文名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"角色名称英文简写"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色名称:",prop:"roleName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"角色名称中文名..."},model:{value:e.role.roleName,callback:function(t){e.$set(e.role,"roleName",t)},expression:"role.roleName"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roles,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",align:"left",fixed:"",label:"中文名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteEmp(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("VsxF")},null,null);t.default=l.exports},ptqw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:名称",trigger:"blur"}]},processs:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],process:{preProcessId:0,name:"",currentSteps:"",code:""},dialogTableVisible:!1,dialogFormVisible:!1,steps:[],selectSteps:[],addprogress:[],delprogress:[],updprogress:[],oodprogress:[],oodcode:"",nowcode:""}},mounted:function(){this.initData()},methods:{searchEmp:function(){this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.process.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadData(),this.getRequest("/product/basicdata").then(function(t){if(t&&200==t.status){var a=t.data;e.steps=a.root.steps,console.log(e.steps)}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},searchData:function(){this.loadData()},showProcessView:function(e){console.log(e),this.dialogTitle="查看工序"},showEditEmpView:function(e){console.log(e);if(this.dialogTitle="编辑信息",this.process.name=e.name,this.process.preProcessId=e.id,e.process&&e.process.length){for(var t=e.process.length,a=0;a<t;a++){var i=e.process[a];this.selectSteps.push(i.workstep.id)}this.oodcode=this.selectSteps.join("")}this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;if(0==this.selectSteps.length)return this.$message({type:"info",message:"请添加工序！"}),!1;this.$refs[e].validate(function(e){if(!e)return!1;if(t.process.preProcessId)if(a.nowcode=a.selectSteps.join(""),a.nowcode!=a.oodcode){for(var i=a.nowcode.split(""),n=a.oodcode.split(""),l=0,o=n.length;l<o;l++)for(var s=n[l],r=0,c=i.length;r<c;r++){var d=i[r];l==r&&s!==d&&a.updprogress.push({stepNumber:r+1,step:parseInt(d),stepType:"update"})}if(i.length>n.length)for(var u=n.length-1,p=i.length-1;p>u;p--)a.addprogress.push({stepNumber:p+1,step:parseInt(i[p]),stepType:"add"});else if(i.length<n.length)for(var h=i.length-1,f=n.length-1;f>h;f--)a.delprogress.push({stepNumber:f+1,step:parseInt(n[f]),stepType:"delete"});var m=a.updprogress.concat(a.addprogress,a.delprogress);console.log(m);var g=t.jsonToString(m);t.process.currentSteps=g,t.process.code=a.nowcode,t.tableLoading=!0,console.log(t.process),t.postRequest("/productpreprocess/update",t.process).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})}else a.dialogFormVisible=!1;else{a.process.currentSteps=t.selectSteps.join(","),a.process.code=t.selectSteps.join(""),a.selectSteps.forEach(function(e,t,i){a.addprogress.push({stepNumber:t,step:e,stepType:"add"})});var v=t.jsonToString(a.addprogress);a.process.currentSteps=v,a.tableLoading=!0,console.log(a.process),t.postRequest("/productpreprocess/add",t.process).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}})}})},deleteData:function(e){var t=this;this.$confirm("此操作将删除该行记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productpreprocess/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productpreprocess/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.processs=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.process={name:"",code:"",currentSteps:"",preProcessId:0},this.addprogress=[],this.delprogress=[],this.updprogress=[],this.oodprogress=[],this.selectSteps=[],this.oodcode="",this.nowcode=""}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过工序名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"600px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.process,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"工序名称"},model:{value:e.process.name,callback:function(t){e.$set(e.process,"name",t)},expression:"process.name"}})],1),e._v(" "),a("el-transfer",{staticStyle:{"text-align":"left"},attrs:{filterable:"","target-order":"push",props:{key:"id",label:"workstepName"},titles:["工序步骤","工序"],data:e.steps},model:{value:e.selectSteps,callback:function(t){e.selectSteps=t},expression:"selectSteps"}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.processs,fit:"",border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"name",label:"工序名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"流程"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-steps",{attrs:{space:"20%","align-center":""}},e._l(t.row.process,function(e,t){return a("el-step",{key:t,staticClass:"detail",attrs:{title:e.name}})}),1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("32wl")},null,null);t.default=l.exports},qYX3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),l={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:姓名",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"},{validator:function(e,t,a){/^1[3|4|5|7|8][0-9]\d{8}$/.test(t)?a():a("电话号码格式错误!")},message:"电话号码错误",trigger:"blur"}],gender:[{required:!0,message:"必选:性别",trigger:"blur"}],departmentName:[{required:!0,message:"必选:部门",trigger:"blur"}],email:[{required:!0,message:"必填:电子邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],entryDate:[{required:!0,message:"必填:入职日期",trigger:"blur"}],positionId:[{required:!0,message:"必选:职位",trigger:"change"}],birthday:[{required:!0,message:"必填:出生日期",trigger:"blur"}]},emps:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,employee:{name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",gender:"",departmentName:"",departmentId:"",positionName:"",positionId:""},deps:[],posts:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{formatSex:function(e,t){return"1"==e.gender?"男":"2"==e.gender?"女":"未知"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.employee.departmentName=e.name,this.employee.departmentId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadEmps(),this.getRequest("/emp/basicdata").then(function(t){if(t&&200==t.status){var a=t.data;e.deps=a.root.department,e.posts=a.root.position}})},keywordsChange:function(e){""==e&&this.loadEmps()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadEmps()},addAndFlushEmp:function(){this.dialogTitle="添加员工",this.emptyEmpData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadEmps()},showEditEmpView:function(e,t){this.dialogTitle="编辑员工",console.log(t),console.log(e),this.employee=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.employee.name=t.name,this.employee.birthday=this.formatDate(new Date(t.birthday)),this.employee.entryDate=this.formatDate(new Date(t.entryDate)),this.employee.departmentId=t.departmentId,this.employee.departmentName=t.departmentName,this.employee.positionId=t.positionId,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.employee.id?(t.tableLoading=!0,console.log(t.employee),t.postRequest("/emp/empAdd",t.employee).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadEmps(),a.emptyEmpData())})):(t.tableLoading=!0,console.log(a.employee),t.postRequest("/emp/empAdd",t.employee).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadEmps(),a.emptyEmpData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadEmps()},deleteEmp:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/emp/deletEmp?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadEmps()}})},loadEmps:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/emp/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.emps=i,t.totalCount=a.data.total,t.emptyEmpData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyEmpData:function(){console.log("+++++_+++++_"),this.employee={name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",gender:"",departmentName:"",departmentId:"",positionName:"",positionId:""}}},computed:{routes:function(){return this.$store.state.routes}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过员工名搜索员工,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n  \n        ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加员工")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.employee,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入员工姓名"},model:{value:e.employee.name,callback:function(t){e.$set(e.employee,"name",t)},expression:"employee.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-phone",size:"mini",placeholder:"电话号码..."},model:{value:e.employee.phone,callback:function(t){e.$set(e.employee,"phone",t)},expression:"employee.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别:",prop:"gender"}},[a("el-radio-group",{model:{value:e.employee.gender,callback:function(t){e.$set(e.employee,"gender",t)},expression:"employee.gender"}},[a("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:2}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"部门:",prop:"departmentName"}},[a("el-popover",{attrs:{placement:"right",title:"请选择部门",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.deps,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[e._v(e._s(e.employee.departmentName)+"\n            ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-message",size:"mini",placeholder:"电子邮箱地址..."},model:{value:e.employee.email,callback:function(t){e.$set(e.employee,"email",t)},expression:"employee.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"职位:",prop:"positionId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择职位"},model:{value:e.employee.positionId,callback:function(t){e.$set(e.employee,"positionId",t)},expression:"employee.positionId"}},e._l(e.posts,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期:",prop:"birthday"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出生日期"},model:{value:e.employee.birthday,callback:function(t){e.$set(e.employee,"birthday",t)},expression:"employee.birthday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系地址:",prop:"address"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"联系地址..."},model:{value:e.employee.address,callback:function(t){e.$set(e.employee,"address",t)},expression:"employee.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"入职日期:",prop:"entryDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"入职日期"},model:{value:e.employee.entryDate,callback:function(t){e.$set(e.employee,"entryDate",t)},expression:"employee.entryDate"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.emps,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"departmentName",align:"left",fixed:"",label:"所属部门",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"positionName",align:"left",label:"职位",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",width:"120",align:"left",label:"电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gender",width:"80",align:"left",formatter:e.formatSex,label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",width:"180",align:"left",label:"邮箱"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"left",label:"入职日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.entryDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",width:"220",align:"left",label:"联系地址"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",fixed:"right",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteEmp(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(l,o,!1,function(e){a("5tuq")},null,null);t.default=s.exports},qwhi:function(e,t){},s3ol:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=a("bOdI"),l=a.n(n),o=a("pFYg"),s=a.n(o),r=a("mvHQ"),c=a.n(r),d=a("c/Tr"),u=a.n(d),p=a("7+uW");function h(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=[];return u()(e).forEach(function(e){void 0===e._expanded&&p.default.set(e,"_expanded",t);var l=1;if(void 0!==i&&null!==i&&(l=i+1),p.default.set(e,"_level",l),a&&p.default.set(e,"parent",a),n.push(e),e.child&&e.child.length>0){var o=h(e.child,t,e,l);n=n.concat(o)}}),console.log(n),n}var f={name:"TreeTable",data:function(){return{rules:{name:[{required:!0,message:"必填:姓名",trigger:"blur"}],status:[{required:!0,message:"必选:性质",trigger:"blur"}],parentClientId:[{required:!0,message:"必选:总公司",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"},{validator:function(e,t,a){/^1[3|4|5|6|7|8|9][0-9]\d{8}$/.test(t)?a():a("电话号码格式错误!")},message:"电话号码错误",trigger:"blur"}],email:[{required:!0,message:"必填:电子邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]},chooseson:!0,key:!0,formVisible:!1,formTitle:"",depTextColor:"#c0c4cc",defaultProps:{label:"name",isLeaf:"leaf",children:"child"},showOrHidePop:!1,selectRadio:!1,currentPage:1,totalCount:-1,company:{name:"",phone:"",address:"",email:"",fax:"",status:"up",abbreviation:"",parentName:"",parentClientId:"",infor:"",createDate:""},isChild:!1,tempShops:[],pName:"",pId:0}},props:{data:{type:[Array,Object],required:!0},shops:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1},activeName:{type:String,required:!0}},computed:{formatData:function(){var e=void 0;e=Array.isArray(this.data)?this.data:[this.data];var t=this.evalFunc||h,a=this.evalArgs?[e,this.expandAll].concat(this.evalArgs):[e,this.expandAll];return console.log(a),t.apply(null,a)}},methods:(i={showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?"display:none;":"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;"},toggleExpanded:function(e){console.log("hehan666");var t=this.formatData[e],a=t._expanded;console.log(a),console.log(t),t._expanded=!a},toggleAllExpanded:function(){console.log("****____******999"),this.formatData.forEach(function(e,t){0===e.parentClientId||e.parentClientId===e.id?e._expanded=!0:e._expanded=!1})},iconShow:function(e,t){return 0===e&&t.child&&t.child.length>0},renderHeader:function(e,t){return e("span",[e("input",{attrs:{id:"chooseall",type:"checkbox",style:"border: 1px solid #dcdfe6;border-radius: 2px;box-sizing: border-box;width: 14px;height: 14px;background-color: #fff;"}})])},setchildtobeselect:function(e,t){var a=this;e.forEach(function(e,i){e.checks=t,e._expanded=t,e.child&&a.setchildtobeselect(e.child,e.checks)})},isallchecked:function(e){var t=this;e.forEach(function(e,a){e.checks||(t.key=!1),e.child&&t.isallchecked(e.child)})},setparenttrue:function(e,t,a){var i=this;e.forEach(function(e,n){if(e._level===a-1&&e.child){var l=!0,o=!1;e.child.forEach(function(e,a){e.id===t&&(o=!0),e.checks||(l=!1)}),l&&o&&(e.checks=!0)}e.child&&i.setparentfalse(e.child,t,a)})},toselect:function(e){console.log(e),e.child&&this.setchildtobeselect(e.child,e.checks),this.key=!0,this.isallchecked(this.formatData),e.checks?this.setparenttrue(this.formatData,e.id,e._level):(this.setparentfalse(this.formatData,e.id,e._level),document.getElementById("chooseall").checked=!1),this.key&&(document.getElementById("chooseall").checked=!0)},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},onTreeDataChange:function(){},handleNodeClick:function(e){this.company.parentName=e.name,this.company.parentClientId=e.id,this.pId=e.id,this.pName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.company.parentName="",this.company.parentClientId=0},cancelChoos:function(){console.log(this.pName),this.company.parentName=this.pName,this.company.parentClientId=this.pId},initData:function(){var e=this.activeName;this.loadData(e)},keywordsChange:function(e){if(""===e){var t=this.activeName;this.loadData(t)}},currentChange:function(e){this.currentPage=e;var t=this.activeName;this.loadData(t)},addAndFlushData:function(){this.formTitle="添加客户",this.formVisible=!0},searchData:function(){var e=this.activeName;this.loadData(e)},addChild:function(e){console.log(e),this.formTitle="添加子公司";var t=e,a=_.cloneDeep(t);console.log(e),this.isChild=!0,this.selectRadio=!0,this.tempShops=[],0===a.parentClientId||a.parentClientId===a.id?delete a.child:void 0!==a.parent&&delete a.parent,this.tempShops.push(a),this.company.parentName=a.name,this.company.parentClientId=a.id,this.company.status=a.status,this.formVisible=!0},showEditEmpView:function(e){console.log(e),this.isChild=!1,this.tempShops=[],this.formTitle="编辑客户信息",this.company=e,this.selectRadio=!0,console.log(e),this.company.parentClientId=e.parentClientId,this.company.createDate=e.createDate,this.company.parentName=e.parentName,delete this.company.purchasePlan,delete this.company.product,this.formVisible=!0},addData:function(e){var t=this;this.formVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;var i=_.cloneDeep(t.company),n=[],l=c()(i.child,function(e,t){if("object"===(void 0===t?"undefined":s()(t))&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t});n=null,i.child=l,void 0!=i.parentClientId&&null!=i.parentClientId&&""!=i.parentClientId||(i.parentClientId=0,i.parentName=""),delete i.parent,console.log(i),t.company.id?(a.tableLoading=!0,t.postRequest("/client/update",i).then(function(e){if(a.tableLoading=!1,e&&200===e.status&&e.data.success){a.formVisible=!1;var i=a.activeName;a.loadData(i),a.emptyData()}else t.$message({type:"info",message:"更新失败"})})):(t.tableLoading=!0,t.postRequest("/client/add",i).then(function(e){if(a.tableLoading=!1,e&&200===e.status&&e.data.success){e.data;a.formVisible=!1;var i=a.activeName;a.loadData(i),a.emptyData()}else t.$message({type:"info",message:"添加失败"})}))})},cancelOpt:function(){this.formVisible=!1,this.isChild=!1,this.tempShops=[],this.selectRadio=!1,this.emptyData()},deleteData:function(e){var t=this,a=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("55"),a.getRequest("/client/delete?id="+e.id).then(function(e){if(a.tableLoading=!1,console.log("777777"),e&&200===e.status&&e.data.success){e.data;var i=t.activeName;a.loadData(i)}else t.$message({type:"info",message:"失败"})})}).catch(function(){})},doDelete:function(e){var t=this;console.log("666"),this.tableLoading=!0;var a=this;a.getRequest("/client/delete?id="+row.id).then(function(e){if(a.tableLoading=!1,console.log("777777"),e&&200===e.status&&e.data.success){var i=t.activeName;a.loadData(i)}else t.$message({type:"info",message:"失败"})})},loadData:function(e){this.$emit("headCallBack")},emptyData:function(){console.log("+++++_+++++_"),this.company={name:"",phone:"",address:"",email:"",fax:"",status:"",abbreviation:"",parentName:"",parentClientId:"",infor:"",createDate:""}},setparentfalse:function(e,t,a){var i=this;e.forEach(function(e,n){e._level==a-1&&e.child&&e.child.forEach(function(a,i){if(a.id==t)return e.checks=!1,!1}),e.child&&i.setparentfalse(e.child,t,a)})}},l()(i,"setparenttrue",function(e,t,a){var i=this;e.forEach(function(e,n){if(e._level==a-1&&e.child){var l=!0,o=!1;e.child.forEach(function(e,a){e.id==t&&(o=!0),e.checks||(l=!1)}),l&&o&&(e.checks=!0)}e.child&&i.setparentfalse(e.child,t,a)})}),l()(i,"toselect",function(e){console.log(e),e.child&&this.setchildtobeselect(e.child,e.checks),this.key=!0,this.isallchecked(this.formatData),e.checks?this.setparenttrue(this.formatData,e.id,e._level):(this.setparentfalse(this.formatData,e.id,e._level),document.getElementById("chooseall").checked=!1),this.key&&(document.getElementById("chooseall").checked=!0)}),i),mounted:function(){var e=this;this.$nextTick(function(){var t=e,a=document.getElementById("chooseall");a.onchange=function(e){console.log(a.checked),1==a.checked?t.setchildtobeselect(t.formatData,!0):t.setchildtobeselect(t.formatData,!1)},e.toggleAllExpanded()})}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.formTitle,"close-on-click-modal":!1,visible:e.formVisible,width:"500px"},on:{"update:visible":function(t){e.formVisible=t},close:e.cancelOpt}},[e.formVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addDataForm",attrs:{model:e.company,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"站名:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入客户名称"},model:{value:e.company.name,callback:function(t){e.$set(e.company,"name",t)},expression:"company.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简称:",prop:"abbreviation"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-phone",size:"mini",placeholder:"局简称..."},model:{value:e.company.abbreviation,callback:function(t){e.$set(e.company,"abbreviation",t)},expression:"company.abbreviation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司电话..."},model:{value:e.company.phone,callback:function(t){e.$set(e.company,"phone",t)},expression:"company.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"传真:",prop:"fax"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司传真..."},model:{value:e.company.fax,callback:function(t){e.$set(e.company,"fax",t)},expression:"company.fax"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-message",size:"mini",placeholder:"公司邮箱..."},model:{value:e.company.email,callback:function(t){e.$set(e.company,"email",t)},expression:"company.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性质:",prop:"status"}},[a("el-radio-group",{attrs:{disabled:e.selectRadio},model:{value:e.company.status,callback:function(t){e.$set(e.company,"status",t)},expression:"company.status"}},[a("el-radio",{attrs:{label:"down"}},[e._v("下游")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"up"}},[e._v("上游")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"地址:",prop:"address"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司地址..."},model:{value:e.company.address,callback:function(t){e.$set(e.company,"address",t)},expression:"company.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址:",prop:"addressDetails"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"详细地址..."},model:{value:e.company.addressDetails,callback:function(t){e.$set(e.company,"addressDetails",t)},expression:"company.addressDetails"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.formVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addDataForm")}}},[e._v("确 定")])],1)]),e._v(" "),[a("el-table",e._b({ref:"multipleTable",attrs:{data:e.formatData,"row-style":e.showRow}},"el-table",e.$attrs,!1),[a("el-table-column",{attrs:{"render-header":e.renderHeader,width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.toselect(t.row)}},model:{value:t.row.checks,callback:function(a){e.$set(t.row,"checks",a)},expression:"scope.row.checks"}})]}}])}),e._v(" "),0===e.columns.length?a("el-table-column",{attrs:{width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,function(e){return a("span",{key:e,staticClass:"ms-tree-space"})}),e._v(" "),e.iconShow(0,t.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(a){return e.toggleExpanded(t.$index)}}},[t.row._expanded?a("i",{staticClass:"el-icon-minus"}):a("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n          "+e._s(t.$index)+"\n        ")]}}],null,!1,1575631500)}):e._l(e.columns,function(t,i){return a("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(n.row._level,function(t){return 0===i?a("span",{key:t,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.iconShow(i,n.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(t){return e.toggleExpanded(n.$index)}}},[n.row._expanded?a("i",{staticClass:"el-icon-minus"}):a("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n          "+e._s(n.row[t.value])+"\n        ")]}}],null,!0)})}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.row)}}},[e._v("编辑\n          ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.addChild(t.row)}}},[e._v("添加子公司\n          ")]),e._v(" "),t.row.child?e._e():a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n          ")])]}}])}),e._v(" "),e._t("default")],2)],e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],2)},staticRenderFns:[]};var g=a("VU/8")(f,m,!1,function(e){a("8mpM"),a("agNU")},"data-v-48f9f9f1",null);t.default=g.exports},tPxm:function(e,t){},tvR6:function(e,t){},v2zK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:中文名",trigger:"blur"}]},units:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,unit:{name:"",code:""},deps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""==e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},addAndFlushEmp:function(){this.dialogTitle="添加单位",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadDatas()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.unit=t,delete this.unit.sysMenu,delete this.unit.users,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.unit.id?(t.tableLoading=!0,console.log(t.unit),t.postRequest("/color/add",t.unit).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadDatas(),a.emptyData())})):(t.tableLoading=!0,console.log(a.unit),t.postRequest("/color/add",t.unit).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadDatas(),a.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/color/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadDatas()}})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/color/findAll").then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.units=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.unit={name:"",code:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.unit,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"颜色:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"颜色"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.units,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"颜色",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n         ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n         ")])]}}])})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("3CVU")},null,null);t.default=l.exports},"w/O8":function(e,t){},wd3D:function(e,t){},xJsL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0,loginForm:{username:"张三",password:"123"},loading:!1}},mounted:function(){this.$refs.loginFocus.focus()},methods:{submitClick:function(){var e=this;this.loading=!0,this.postRequest("/login",{username:this.loginForm.username,password:this.loginForm.password}).then(function(t){if(e.loading=!1,console.log(t),t&&200==t.status){var a=t.data;console.log(a),e.$store.commit("login",a.obj);var i=e.$route.query.redirect;console.log(e.$route),e.$router.replace({path:"/"==i||void 0==i?"/home":i})}})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"login-container",attrs:{rules:e.rules,"label-position":"left","label-width":"0px",model:e.loginForm}},[a("h3",{staticClass:"login_title"},[e._v("系统登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{ref:"loginFocus",attrs:{type:"text","auto-complete":"off",placeholder:"账号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitClick(t)}},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitClick(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),a("el-checkbox",{staticClass:"login_remember",attrs:{"label-position":"left"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",autofocus:""},on:{click:e.submitClick},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.submitClick(t):null}}},[e._v("登录")])],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(e){a("tPxm")},null,null);t.default=l.exports}},["NHnr"]);
//# sourceMappingURL=app.72ad277d0c5d7d255e5b.js.map