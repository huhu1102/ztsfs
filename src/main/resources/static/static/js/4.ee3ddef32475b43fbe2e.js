webpackJsonp([4],{O9uO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("pFYg"),l=a.n(i),n=a("mvHQ"),r=a.n(n),s=a("bOdI"),o=a.n(s),c=a("zL8q"),d={data:function(){var t;return t={lastPlanDetail:{startNo:"J00000001",endNo:"J00000100"},lastPlanmarketPlanDetails:[{startNo:"J00000001",endNo:"J00000100"},{startNo:"K00000001",endNo:"K00000100"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],plans:[],clients:[],units:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{materialType:"",notes:"",serialNumber:"",clientName:""},detail:{sid:0,id:0,clientId:0,clientName:"",abbrName:"",quantity:"",notes:"",name:"",proId:"",specs:"",stamp:"",proNo:"",marketPlanSerialNumber:[],type:"",specifications:""},marketPlanSerialNumber:[],serialNumber:{sid:1,id:0,startNo:"",endNo:"",note:"",clientId:0,productId:0,type:"new"},marketPlanDetails:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择产品",selectMaterial:{},selectedM:{},filterText:""},o()(t,"lastPlanDetail",""),o()(t,"crrentSelectShop",{}),o()(t,"isCurrentShop",!0),o()(t,"isprarent",!1),o()(t,"sugestParentstartNo",""),o()(t,"sugestParentEndNo",""),o()(t,"sugestSelfEndNumbers",""),o()(t,"sugestSelfNumbers",""),o()(t,"currentParentShop",{}),o()(t,"currentShop",{}),o()(t,"lastPlanDetail",{startNo:"",endNo:""}),o()(t,"serialNuberDeleted",[]),o()(t,"serialNuberUpdate",[]),o()(t,"serialNuberList",[]),t},mounted:function(){this.initData()},methods:{serialNumberAdd:function(){var t=0;if(this.marketPlanSerialNumber.length){var e=0;this.marketPlanSerialNumber.forEach(function(t,a,i){e=t.sid>e?t.sid:e}),t=e+1}else t=1;this.marketPlanSerialNumber.push({sid:t,id:0,startNo:"",endNo:"",clientId:0,productId:0,type:"new"})},deletSerialNo:function(t){var e=this.marketPlanSerialNumber.splice(t,1);""==e[0].endNo||""==e[0].startNo||"new"==e[0].type||(e[0].type="delete",this.serialNuberDeleted.push(e[0])),console.log(e)},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},showRow:function(t){this.selectedM=this.materialList.indexOf(t),this.selectMaterial=t,console.log(this.selectMaterial)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var t=this;console.log("选择原料了！");var e=this;if(this.selectMaterial.id>0){var a=this.selectMaterial.producteName+""+this.selectMaterial.specification+";";this.$confirm("您当前选择了"+a+"确认选择该产品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.setDetailData(e)}).catch(function(){t.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(t){var e=t.selectMaterial;console.log(e),t.detail.name=e.producteName,t.detail.proId=e.id,t.detail.specs=e.specification,t.detail.proNo=e.proType,t.getCurrentPlans(),this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectMaterial={},this.selectedM={}},formatStatus:function(t,e){return 1==t.materialType?"已确认":"未确认"},selectType:function(t,e,a){console.log("changne"),this.types=t,2==t?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(t){console.log(t);var e=this;this.midProduct.forEach(function(a,i,l){a.id==t&&(e.detail.unitId=a.unitId,e.detail.unitName=a.unitName,e.detail.name=a.name,e.detail.materialId=a.id,e.detail.specifications=a.specs)})},addBox:function(){var t=this;if(console.log("asdfadsfasdfasd"),""==this.detail.quantity||void 0==this.detail.quantity)return Object(c.Message)("请输入数量"),!1;if(""==this.detail.name||void 0==this.detail.name)return Object(c.Message)("请选择产品！"),!1;if(""==this.detail.sid)if(this.marketPlanDetails.length>0){var e=!1;this.marketPlanDetails.forEach(function(a,i,l){a.materialId==t.detail.materialId&&a.mtype==t.types&&(e=!0,a.quantity=parseFloat(t.detail.quantity)+parseFloat(a.quantity))}),e||(this.maxSid+=1,this.detail.sid=this.maxSid,this.detail.type="new",this.marketPlanDetails.push(this.detail))}else this.detail.sid=1,this.detail.type="new",this.detail.mtype=this.types,this.maxSid+=1,this.marketPlanDetails.push(this.detail);else if(this.marketPlanDetails.length)for(var a=0,i=this.marketPlanDetails.length;a<i;a++){var l=this.marketPlanDetails[a];"odd"===l.type?(this.detail.type="update",l.sid==this.detail.sid&&(this.marketPlanDetails.splice(a,1),this.marketPlanDetails.push(this.detail))):l.sid==this.detail.sid&&(this.marketPlanDetails.splice(a,1),this.marketPlanDetails.push(this.detail))}this.detail.marketPlanSerialNumber=t.marketPlanSerialNumber,this.clearSerialNumbers(),this.emptyDetail()},clearSerialNumbers:function(){this.marketPlanSerialNumber=[],this.marketPlanSerialNumber.push({sid:1,id:0,startNo:"",endNo:"",type:"new",note:""})},editeDetail:function(t,e){this.detail=e},deleteDetail:function(t,e){console.log("delete");var a=this.marketPlanDetails.splice(t,1);"odd"===a[0].type&&(a[0].type="delete",this.currentDeleteData.push(a[0])),this.maxSid-=1},emptyDetail:function(){this.detail={sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",specifications:"",type:""}},initData:function(){var t=this;t.loadData(),this.getRequest("/marketingplan/basedata").then(function(e){if(e&&200==e.status){var a=e.data,i=[];a.root.clients.forEach(function(t,e,a){var l=t[0],n=t[1],r=t[2];i.push({name:l,id:n,parentClientId:r,parentName:t[3],address:t[4],phone:t[5],abbreviation:t[6]})}),t.clients=i,t.midProduct=[],t.midProduct=t.materials.concat(t.midProduct);var l=[];a.root.products.forEach(function(t,e,a){l.push({id:t[0],producteName:t[1],specification:t[2],proType:t[3],mark:t[4],color:t[5]})}),t.products=l}})},keywordsChange:function(t){""==t&&this.loadData()},keywordsMaterialChange:function(t){""==t&&this.loadMaterial()},handleNodeClick:function(t){this.tableLoading=!0,this.crrentSelectShop=t,this.detail.clientId=t.id,this.detail.clientName=t.name,this.detail.abbrName=t.abbreviation,this.showOrHidePop=!1,this.depTextColor="#606266",this.getCurrentPlans()},showCurrentNo:function(){this.isprarent?this.isprarent=!1:this.isprarent=!0},changeNO:function(){this.isCurrentShop?(this.lastPlanDetail=this.currentShop,this.isCurrentShop=!1):(this.lastPlanDetail=this.currentParentShop,this.isCurrentShop=!0)},getCurrentPlans:function(){var t=this;void 0==this.crrentSelectShop.id?this.$message({type:"info",message:"请选择公司"}):void 0==this.detail.proId||""==this.detail.proId?this.$message({type:"info",message:"请选择产品"}):this.getRequest("/marketingplan/getPlanDetails?clientId="+this.crrentSelectShop.id+"&productId="+this.detail.proId).then(function(e){if(t.tableLoading=!1,e&&200==e.status){var a=e.data;if(t.currentParentShop=a.root.parent,t.currentParentShop.length){var i=t.currentParentShop.length-1;t.currentParentShop=t.currentParentShop[i];var l=t.currentParentShop[i].endNo;t.sugestParentstartNo=t.sugestStartNo(l,1)}else t.sugestParentstartNo="00000001",t.currentParentShop={};if(""!=t.detail.quantity&&(t.sugestParentEndNo=t.sugestStartNo(t.currentParentShop[i].endNo,parseInt(t.detail.quantity)+1)),t.setStartSerialNo(t.sugestParentstartNo,t.sugestParentEndNo.endNo,"parent"),t.lastPlanDetail=t.currentParentShop,t.currentShop=a.root.self,t.currentShop.length){var n=t.currentShop.length-1;t.currentShop=t.currentShop[n];var r=t.currentShop[n].endNo;t.sugestSelfNumbers=t.sugestStartNo(r,1)}else t.sugestSelfNumbers="00000001",t.currentShop={}}})},setEndNumber:function(t){console.log(t);if(this.isCurrentShop)if(this.lastPlanDetail=this.currentShop,this.currentShop.length){var e=this.currentShop.length-1;this.sugestSelfEndNumbers=this.sugestStartNo(this.currentShop[e].endNo,parseInt(t)+1),this.marketPlanSerialNumber[0].startNo=this.sugestSelfNumbers,this.marketPlanSerialNumber[0].endNo=this.sugestSelfEndNumbers,this.marketPlanSerialNumber[0].note="",this.marketPlanSerialNumber[0].clientId=this.crrentSelectShop.id,this.marketPlanSerialNumber[0].productId=this.detail.proId}else{var a=this.sugestSelfNumbers;this.setCurrentEndData(a,t)}else if(this.lastPlanDetail=this.currentParentShop,this.currentParentShop.length){var i=this.currentParentShop.length-1;this.sugestParentEndNo=this.sugestStartNo(this.currentParentShop[i].endNo,parseInt(t)+1),this.marketPlanSerialNumber[0].startNo=this.sugestParentstartNo,this.marketPlanSerialNumber[0].endNo=this.sugestParentEndNo,this.marketPlanSerialNumber[0].note="",this.marketPlanSerialNumber[0].clientId=this.crrentSelectShop.id,this.marketPlanSerialNumber[0].productId=this.detail.proId}else{a=this.currentParentShop;this.setCurrentEndData(a,t)}},setCurrentEndData:function(t,e){var a=t.length,i=parseInt(t)+parseInt(e),l=a-i.toString().length;if(l)for(var n=0;n<l;n++)i="0"+i;this.marketPlanSerialNumber[0].endNo=i},sugestStartNo:function(t,e){var a=function(t,e){if(e=e||!1,"string"==typeof t){var a=t.match(e?/[0-9]\d{1,}/g:/\d{1,}/g);return console.log(a),a.map(function(t){return t})}return[]},i=t.indexOf(a(t)[0]),l=t.substr(0,i),n=t.substr(i+a(t)[0].length,t.length-1),r=(a(t)[0].length,parseInt(a(t)[0])+e),s=r-r.toString().length;if(s)for(var o=0;o<s;o++)r+="0";return l+r+n},setStartSerialNo:function(t,e,a){this.marketPlanSerialNumber.length&&(this.marketPlanSerialNumber[0].startNo=t,this.marketPlanSerialNumber[0].endNo=e,this.marketPlanSerialNumber[0].note="")},clearChoose:function(){this.detail.clientId=0,this.detail.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(t){var e=this;console.log(t),e.units&&e.units.forEach(function(a,i){a.id==t&&(console.log(a.id),e.detail.unitName=a.name)})},currentChange:function(t){this.currentPage=t,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(t){this.currentMaterialPage=t,this.loadMaterial()},addAndFlushData:function(){this.dialogTitle="郑铁公司销售单";this.marketPlanSerialNumber=[],this.marketPlanSerialNumber.push(this.serialNumber),this.dialogFormVisible=!0},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(t,e){console.log(e);this.dialogTitle="编辑信息",this.plan=e,this.plan.createDate=e.createDate;var a=_.cloneDeep(e);void 0!=a.detail&&(a.detail.forEach(function(t,e,a){t.type="odd",t.sid=e+1}),this.marketPlanDetails=a.detail,this.maxSid=a.detail.length),this.dialogFormVisible=!0},add:function(t){var e=this;this.dialogFormVisible=!0;var a=this,i=_.cloneDeep(this.plan);if(0==this.marketPlanDetails.length)return this.$message({type:"info",message:"详情不能为空！"}),!1;var n=[],s=this.marketPlanDetails.concat(this.currentDeleteData),o=r()(s,function(t,e){if("object"===(void 0===e?"undefined":l()(e))&&null!==e){if(-1!==n.indexOf(e))return;n.push(e)}return e});n=null,i.marketPlanDetails=o,this.$refs[t].validate(function(t){if(!t)return!1;e.validateplanNo();e.plan.id?(e.tableLoading=!0,console.log(e.plan),e.postRequest("/marketingplan/update",i).then(function(t){a.tableLoading=!1,t&&200==t.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers())})):(e.tableLoading=!0,0==e.plan.clientId||""==e.plan.clientId?(e.plan.clientId=0,i.materialType=1):i.materialType=2,console.log(i),e.postRequest("/marketingplan/add",i).then(function(t){if(a.tableLoading=!1,t&&200==t.status){t.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers()}}))})},validateplanNo:function(){return!0},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(t){var e=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.doDelete(t.id)}).catch(function(){})},doDelete:function(t){this.tableLoading=!0;var e=this;this.getRequest("/marketingplan/deletmark?id="+t).then(function(t){if(e.tableLoading=!1,t&&200==t.status){t.data;e.loadData()}})},loadData:function(){var t=this,e=this;this.tableLoading=!0,this.getRequest("/marketingplan/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(t.tableLoading=!1,a&&200==a.status){var i=a.data.data;e.plans=i,e.totalCount=a.data.total,e.emptyData()}})},loadMaterial:function(){var t=this,e=this;this.tableLoading=!0,this.getRequest("/product/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(a){if(t.tableLoading=!1,a&&200==a.status){var i=a.data.data;e.materialList=i,e.totalMaterialCount=a.data.total,e.dialogMaterialVisible=!0}})},emptyData:function(){this.marketPlanDetails=[],this.plan={materialType:"",notes:"",serialNumber:"",clientId:0,clientName:""}}},computed:{routes:function(){return this.$store.state.routes}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":t.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.value5,callback:function(e){t.value5=e},expression:"value5"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:t.searchData}},[t._v("搜索\n      ")])],1),t._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:t.addAndFlushData}},[t._v("\n        添加\n      ")])],1)]),t._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:t.dialogTitle,"close-on-click-modal":!1,visible:t.dialogFormVisible,width:"750px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.cancelOpt}},[t.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:t.plan,rules:t.rules,size:"mini","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:t.plan.notes,callback:function(e){t.$set(t.plan,"notes",e)},expression:"plan.notes"}})],1)],1)],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"left",border:"1px solid #eeeeee"}},[t._v("\n          销售详情:\n        ")]),t._v(" "),a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("div",{staticStyle:{"background-color":"bisque"}},[a("div",{staticStyle:{"text-align":"left"}},[t._v("\n              客户信息\n            ")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"客户:",prop:"clientId"}},[a("el-popover",{attrs:{placement:"right",title:"客户信息",trigger:"hover"},model:{value:t.showOrHidePop,callback:function(e){t.showOrHidePop=e},expression:"showOrHidePop"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),a("el-tree",{attrs:{data:t.clients,"default-expand-all":!1,props:t.defaultProps,"expand-on-click-node":!1},on:{"node-click":t.handleNodeClick}}),t._v(" "),a("div",{ref:"tree2",staticStyle:{width:"200px",height:"28px",display:"inline-flex","justify-content":"space-between","background-color":"#fff","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:t.depTextColor},attrs:{slot:"reference","filter-node-method":t.filterNode},on:{click:t.showDepTree},slot:"reference"},[a("div",[t._v(t._s(t.detail.clientName))]),t._v(" "),a("div",{staticClass:"el-icon-arrow-down",staticStyle:{color:"#606266"},attrs:{alt:"hehehehe"},on:{click:t.clearChoose}})])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"简称:",prop:"abbrName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"局简称"},on:{focus:t.showMaterial},model:{value:t.detail.abbrName,callback:function(e){t.$set(t.detail,"abbrName",e)},expression:"detail.abbrName"}}),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"最近一次订单",placement:"top"}})],1)],1)],1)],1),t._v(" "),a("div",{staticStyle:{"background-color":"rgb(175, 218, 136)"}},[a("div",{staticStyle:{"text-align":"left"}},[t._v("\n              产品信息\n            ")]),t._v(" "),a("form",{attrs:{model:t.detail,size:"mini","label-width":"50px"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品名称。。。"},on:{focus:t.showMaterial},model:{value:t.detail.name,callback:function(e){t.$set(t.detail,"name",e)},expression:"detail.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"规格:",prop:"specs"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",disabled:!0,size:"mini",placeholder:"规格。。"},model:{value:t.detail.specs,callback:function(e){t.$set(t.detail,"specs",e)},expression:"detail.specs"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"型号:",prop:"proNo"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"型号"},model:{value:t.detail.proNo,callback:function(e){t.$set(t.detail,"proNo",e)},expression:"detail.proNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"标记:",prop:"stamp"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"标记"},model:{value:t.detail.stamp,callback:function(e){t.$set(t.detail,"stamp",e)},expression:"detail.stamp"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit"},on:{change:t.setEndNumber},model:{value:t.detail.quantity,callback:function(e){t.$set(t.detail,"quantity",e)},expression:"detail.quantity"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:t.detail.notes,callback:function(e){t.$set(t.detail,"notes",e)},expression:"detail.notes"}})],1)],1)],1)],1),t._v(" "),a("div"),t._v(" "),a("div",{staticStyle:{"text-align":"justify"}},[t._v("\n              ***查看最近一次下发的销售单信息***\n              "),a("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"success",icon:"el-icon-arrow-down",circle:""},on:{click:t.showCurrentNo}}),t._v(" "),t.isprarent?a("div",[a("el-form",{attrs:{"label-position":"left",inline:"",model:t.lastPlanDetail}},[t.lastPlanDetail.startNo?a("el-form-item",{attrs:{label:"产品编码:"}},[a("span",[t._v(t._s(t.lastPlanDetail.startNo)+"-")]),a("span",[t._v(t._s(t.lastPlanDetail.endNo)+" ;")]),t._v(" "),a("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"success",icon:"el-icon-refresh",circle:""},on:{click:t.changeNO}})],1):a("span",[t._v("暂无数据")]),t._v(" "),a("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"success",icon:"el-icon-refresh",circle:""},on:{click:t.changeNO}})],1)],1):t._e()],1),t._v(" "),a("div",{staticStyle:{"background-color":"bisque"}},[a("div",{staticStyle:{"text-align":"left",display:"flex","justify-content":"space-between"}},[t._v("\n                编号 "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.serialNumberAdd()}}},[t._v("新增\n                ")])],1),t._v(" "),t._l(t.marketPlanSerialNumber,function(e,i){return a("div",[a("el-row",{staticClass:"e-rows",attrs:{gutter:5}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"编码:"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"起始编号..."},model:{value:e.startNo,callback:function(a){t.$set(e,"startNo",a)},expression:"serialNumber.startNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:1}},[a("span",[t._v("--")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"结束编号"},model:{value:e.endNo,callback:function(a){t.$set(e,"endNo",a)},expression:"serialNumber.endNo"}})],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"text",placeholder:"编码备注 。。。"},model:{value:e.note,callback:function(a){t.$set(e,"note",a)},expression:"serialNumber.note"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-tooltip",{attrs:{effect:"light",content:"删除",placement:"right"}},[a("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.deletSerialNo(i)}}})],1)],1)],1)],1)})],2)]),t._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addBox}},[t._v("添加")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.marketPlanDetails,border:"",height:"200"}},[a("el-table-column",{attrs:{prop:"sid",align:"left",label:"序号",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"clientName",align:"left",label:"客户名",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"abbrName",align:"left",label:"客户简称",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"产品名称",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.quantity)+"枚")]}}],null,!1,3875320087)}),t._v(" "),a("el-table-column",{attrs:{prop:"specs",align:"left",label:"规格",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"proNo",align:"left",label:"型号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"编码规则",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t._l(e.row.marketPlanSerialNumber,function(e,i){return a("div",[a("p",[t._v("编号: "+t._s(e.startNo)+"- "+t._s(e.endNo)+" ;备注: "+t._s(e.note)+" ")])])}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("编码")])],1)],2)]}}],null,!1,3299174963)}),t._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return t.editeDetail(e.$index,e.row)}}},[t._v("编辑\n                ")]),t._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.deleteDetail(e.$index,e.row)}}},[t._v("删除\n                ")])]}}],null,!1,987709478)})],1)],1)])],1):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add("addEmpForm")}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:t.dialogMaterialTitle,"close-on-click-modal":!1,visible:t.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(e){t.dialogMaterialVisible=e},close:t.cancelchoose}},[t.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:t.keywordsMaterialChange},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchMaterialData(e)}},model:{value:t.keyMaterialwords,callback:function(e){t.keyMaterialwords=e},expression:"keyMaterialwords"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:t.searchMaterialData}},[t._v("搜索\n          ")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.materialList,border:""},on:{"row-click":t.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{attrs:{label:e.$index},model:{value:t.selectedM,callback:function(e){t.selectedM=e},expression:"selectedM"}},[t._v(" ")])]}}],null,!1,3683309166)}),t._v(" "),a("el-table-column",{attrs:{prop:"producteName",align:"left",fixed:"",label:"名称",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"specification",align:"left",fixed:"",label:"规格",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"proType",align:"left",fixed:"",label:"型号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"color",align:"left",fixed:"",label:"颜色",width:"120"}})],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":t.currentMaterialPage,layout:"prev, pager, next",total:t.totalMaterialCount},on:{"current-change":t.currentMaterialChange}})],1)],1):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogMaterialVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.chooseMaterial()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.plans,border:""}},[a("el-table-column",{attrs:{prop:"marketPlanNo",align:"left",label:"编号",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{width:"100",align:"left",label:"下单时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDate")(e.row.createDate)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",width:"80",align:"left",formatter:t.formatStatus,label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return t.showEditEmpView(e.$index,e.row)}}},[t._v("编辑\n        ")]),t._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.deleteData(e.row)}}},[t._v("删除\n        ")])]}}])})],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":t.currentPage,layout:"prev, pager, next",total:t.totalCount},on:{"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(t){a("oV1B")},null,null);e.default=p.exports},UlK9:function(t,e,a){var i={"./ProductionPlan.vue":"O9uO","./SaleBase.vue":"WaId","./SalesPlan.vue":"6HRJ"};function l(t){return a(n(t))}function n(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}l.keys=function(){return Object.keys(i)},l.resolve=n,t.exports=l,l.id="UlK9"},oV1B:function(t,e){}});
//# sourceMappingURL=4.ee3ddef32475b43fbe2e.js.map