webpackJsonp([3],{"2eoi":function(e,t,a){var i={"./404.vue":"thLP","./Home.vue":"lO7g","./Login.vue":"xJsL","./TreeTable/index.vue":"s3ol","./chat/Chat.vue":"T5Y6","./chat/FriendChat.vue":"ngyR","./chat/Notification.vue":"Gpj+","./dept/BuyPlan.vue":"TjZE","./dept/BuyPlanBase.vue":"gxTg","./dept/BuyPlanMidProduct.vue":"Va7D","./dept/Car.vue":"VeYG","./dept/CarBase.vue":"2tLV","./dept/CarRecord.vue":"lGFz","./dept/CarRepair.vue":"0Wrx","./dept/CarReqRecord.vue":"hR2O","./dept/CarRequest.vue":"Ave/","./emp/Company.vue":"kBn+","./emp/Department.vue":"fER9","./emp/Emp.vue":"qYX3","./emp/Position.vue":"eTb0","./main.vue":"6+aJ","./produce/Product.vue":"4K/P","./produce/ProductBase.vue":"mOMX","./produce/ProductColor.vue":"v2zK","./produce/ProductFinshBase.vue":"e3r7","./produce/ProductFinshed.vue":"4d3/","./produce/ProductMidBase.vue":"d0NV","./produce/ProductMidConfirm.vue":"Nzev","./produce/ProductMidInRecord.vue":"UZTo","./produce/ProductMidOutRecord.vue":"ev2I","./produce/ProductMiddle.vue":"0wq/","./produce/ProductProcess.vue":"tuy1","./produce/ProductSpec.vue":"dnay","./produce/ProductStep.vue":"Kzbj","./produce/RowMaterial.vue":"KNe0","./produce/RowMaterialBase.vue":"Uct3","./produce/RowMaterialConfirms.vue":"ePtJ","./produce/RowMaterialInReceive.vue":"Pycp","./produce/RowMaterialOutReceive.vue":"axNP","./produce/productMidRecieving.vue":"5xx1","./sale/ProductionPlan.vue":"O9uO","./sale/SaleBase.vue":"WaId","./sale/SalesPlan.vue":"6HRJ","./sys/SysUnit.vue":"LwTo","./sys/Sysrole.vue":"pQHM","./sys/User.vue":"VDSS"};function l(e){return a(n(e))}function n(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}l.keys=function(){return Object.keys(i)},l.resolve=n,e.exports=l,l.id="2eoi"},"8lAK":function(e,t){},O9uO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),l=a.n(i),n=a("mvHQ"),r=a.n(n),s=a("bOdI"),o=a.n(s),c=a("zL8q"),d={data:function(){var e;return e={lastPlanDetail:{startNo:"J00000001",endNo:"J00000100"},lastPlanmarketPlanDetails:[{startNo:"J00000001",endNo:"J00000100"},{startNo:"K00000001",endNo:"K00000100"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],plans:[],clients:[],units:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{materialType:"",notes:"",serialNumber:"",clientName:""},detail:{sid:0,id:0,clientId:0,clientName:"",abbrName:"",quantity:"",notes:"",name:"",proId:"",specs:"",stamp:"",proNo:"",marketPlanSerialNumber:[],type:"",specifications:""},marketPlanSerialNumber:[],serialNumber:{sid:1,id:0,startNo:"",endNo:"",note:"",clientId:0,productId:0,type:"new"},marketPlanDetails:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择产品",selectMaterial:{},selectedM:{},filterText:""},o()(e,"lastPlanDetail",""),o()(e,"crrentSelectShop",{}),o()(e,"isCurrentShop",!0),o()(e,"isprarent",!1),o()(e,"sugestParentstartNo",""),o()(e,"sugestParentEndNo",""),o()(e,"sugestSelfEndNumbers",""),o()(e,"sugestSelfNumbers",""),o()(e,"currentParentShop",{}),o()(e,"currentShop",{}),o()(e,"lastPlanDetail",{startNo:"",endNo:""}),o()(e,"serialNuberDeleted",[]),o()(e,"serialNuberUpdate",[]),o()(e,"serialNuberList",[]),e},mounted:function(){this.initData()},methods:{serialNumberAdd:function(){var e=0;if(this.marketPlanSerialNumber.length){var t=0;this.marketPlanSerialNumber.forEach(function(e,a,i){t=e.sid>t?e.sid:t}),e=t+1}else e=1;this.marketPlanSerialNumber.push({sid:e,id:0,startNo:"",endNo:"",clientId:0,productId:0,type:"new"})},deletSerialNo:function(e){var t=this.marketPlanSerialNumber.splice(e,1);""==t[0].endNo||""==t[0].startNo||"new"==t[0].type||(t[0].type="delete",this.serialNuberDeleted.push(t[0])),console.log(t)},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectMaterial.id>0){var a=this.selectMaterial.producteName+""+this.selectMaterial.specification+";";this.$confirm("您当前选择了"+a+"确认选择该产品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(e){var t=e.selectMaterial;console.log(t),e.detail.name=t.producteName,e.detail.proId=t.id,e.detail.specs=t.specification,e.detail.proNo=t.proType,e.getCurrentPlans(),this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectMaterial={},this.selectedM={}},formatStatus:function(e,t){return 1==e.materialType?"已确认":"未确认"},selectType:function(e,t,a){console.log("changne"),this.types=e,2==e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(a,i,l){a.id==e&&(t.detail.unitId=a.unitId,t.detail.unitName=a.unitName,t.detail.name=a.name,t.detail.materialId=a.id,t.detail.specifications=a.specs)})},addBox:function(){var e=this;if(console.log("asdfadsfasdfasd"),""==this.detail.quantity||void 0==this.detail.quantity)return Object(c.Message)("请输入数量"),!1;if(""==this.detail.name||void 0==this.detail.name)return Object(c.Message)("请选择产品！"),!1;if(""==this.detail.sid)if(this.marketPlanDetails.length>0){var t=!1;this.marketPlanDetails.forEach(function(a,i,l){a.materialId==e.detail.materialId&&a.mtype==e.types&&(t=!0,a.quantity=parseFloat(e.detail.quantity)+parseFloat(a.quantity))}),t||(this.maxSid+=1,this.detail.sid=this.maxSid,this.detail.type="new",this.marketPlanDetails.push(this.detail))}else this.detail.sid=1,this.detail.type="new",this.detail.mtype=this.types,this.maxSid+=1,this.marketPlanDetails.push(this.detail);else if(this.marketPlanDetails.length)for(var a=0,i=this.marketPlanDetails.length;a<i;a++){var l=this.marketPlanDetails[a];"odd"===l.type?(this.detail.type="update",l.sid==this.detail.sid&&(this.marketPlanDetails.splice(a,1),this.marketPlanDetails.push(this.detail))):l.sid==this.detail.sid&&(this.marketPlanDetails.splice(a,1),this.marketPlanDetails.push(this.detail))}this.detail.marketPlanSerialNumber=e.marketPlanSerialNumber,this.clearSerialNumbers(),this.emptyDetail()},clearSerialNumbers:function(){this.marketPlanSerialNumber=[],this.marketPlanSerialNumber.push({sid:1,id:0,startNo:"",endNo:"",type:"new",note:""})},editeDetail:function(e,t){this.detail=t},deleteDetail:function(e,t){console.log("delete");var a=this.marketPlanDetails.splice(e,1);"odd"===a[0].type&&(a[0].type="delete",this.currentDeleteData.push(a[0])),this.maxSid-=1},emptyDetail:function(){this.detail={sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",specifications:"",type:""}},initData:function(){var e=this;e.loadData(),this.getRequest("/marketingplan/basedata").then(function(t){if(t&&200==t.status){var a=t.data,i=[];a.root.clients.forEach(function(e,t,a){var l=e[0],n=e[1],r=e[2];i.push({name:l,id:n,parentClientId:r,parentName:e[3],address:e[4],phone:e[5],abbreviation:e[6]})}),e.clients=i,e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var l=[];a.root.products.forEach(function(e,t,a){l.push({id:e[0],producteName:e[1],specification:e[2],proType:e[3],mark:e[4],color:e[5]})}),e.products=l}})},keywordsChange:function(e){""==e&&this.loadData()},keywordsMaterialChange:function(e){""==e&&this.loadMaterial()},handleNodeClick:function(e){this.tableLoading=!0,this.crrentSelectShop=e,this.detail.clientId=e.id,this.detail.clientName=e.name,this.detail.abbrName=e.abbreviation,this.showOrHidePop=!1,this.depTextColor="#606266",this.getCurrentPlans()},showCurrentNo:function(){this.isprarent?this.isprarent=!1:this.isprarent=!0},changeNO:function(){this.isCurrentShop?(this.lastPlanDetail=this.currentShop,this.isCurrentShop=!1):(this.lastPlanDetail=this.currentParentShop,this.isCurrentShop=!0)},getCurrentPlans:function(){var e=this;void 0==this.crrentSelectShop.id?this.$message({type:"info",message:"请选择公司"}):void 0==this.detail.proId||""==this.detail.proId?this.$message({type:"info",message:"请选择产品"}):this.getRequest("/marketingplan/getPlanDetails?clientId="+this.crrentSelectShop.id+"&productId="+this.detail.proId).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var a=t.data;if(e.currentParentShop=a.root.parent,e.currentParentShop.length){var i=e.currentParentShop.length-1;e.currentParentShop=e.currentParentShop[i];var l=e.currentParentShop[i].endNo;e.sugestParentstartNo=e.sugestStartNo(l,1)}else e.sugestParentstartNo="00000001",e.currentParentShop={};if(""!=e.detail.quantity&&(e.sugestParentEndNo=e.sugestStartNo(e.currentParentShop[i].endNo,parseInt(e.detail.quantity)+1)),e.setStartSerialNo(e.sugestParentstartNo,e.sugestParentEndNo.endNo,"parent"),e.lastPlanDetail=e.currentParentShop,e.currentShop=a.root.self,e.currentShop.length){var n=e.currentShop.length-1;e.currentShop=e.currentShop[n];var r=e.currentShop[n].endNo;e.sugestSelfNumbers=e.sugestStartNo(r,1)}else e.sugestSelfNumbers="00000001",e.currentShop={}}})},setEndNumber:function(e){console.log(e);if(this.isCurrentShop)if(this.lastPlanDetail=this.currentShop,this.currentShop.length){var t=this.currentShop.length-1;this.sugestSelfEndNumbers=this.sugestStartNo(this.currentShop[t].endNo,parseInt(e)+1),this.marketPlanSerialNumber[0].startNo=this.sugestSelfNumbers,this.marketPlanSerialNumber[0].endNo=this.sugestSelfEndNumbers,this.marketPlanSerialNumber[0].note="",this.marketPlanSerialNumber[0].clientId=this.crrentSelectShop.id,this.marketPlanSerialNumber[0].productId=this.detail.proId}else{var a=this.sugestSelfNumbers;this.setCurrentEndData(a,e)}else if(this.lastPlanDetail=this.currentParentShop,this.currentParentShop.length){var i=this.currentParentShop.length-1;this.sugestParentEndNo=this.sugestStartNo(this.currentParentShop[i].endNo,parseInt(e)+1),this.marketPlanSerialNumber[0].startNo=this.sugestParentstartNo,this.marketPlanSerialNumber[0].endNo=this.sugestParentEndNo,this.marketPlanSerialNumber[0].note="",this.marketPlanSerialNumber[0].clientId=this.crrentSelectShop.id,this.marketPlanSerialNumber[0].productId=this.detail.proId}else{a=this.currentParentShop;this.setCurrentEndData(a,e)}},setCurrentEndData:function(e,t){var a=e.length,i=parseInt(e)+parseInt(t),l=a-i.toString().length;if(l)for(var n=0;n<l;n++)i="0"+i;this.marketPlanSerialNumber[0].endNo=i},sugestStartNo:function(e,t){var a=function(e,t){if(t=t||!1,"string"==typeof e){var a=e.match(t?/[0-9]\d{1,}/g:/\d{1,}/g);return console.log(a),a.map(function(e){return e})}return[]},i=e.indexOf(a(e)[0]),l=e.substr(0,i),n=e.substr(i+a(e)[0].length,e.length-1),r=(a(e)[0].length,parseInt(a(e)[0])+t),s=r-r.toString().length;if(s)for(var o=0;o<s;o++)r+="0";return l+r+n},setStartSerialNo:function(e,t,a){this.marketPlanSerialNumber.length&&(this.marketPlanSerialNumber[0].startNo=e,this.marketPlanSerialNumber[0].endNo=t,this.marketPlanSerialNumber[0].note="")},clearChoose:function(){this.detail.clientId=0,this.detail.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(a,i){a.id==e&&(console.log(a.id),t.detail.unitName=a.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){this.dialogTitle="郑铁公司销售单";this.marketPlanSerialNumber=[],this.marketPlanSerialNumber.push(this.serialNumber),this.dialogFormVisible=!0},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(e,t){console.log(t);this.dialogTitle="编辑信息",this.plan=t,this.plan.createDate=t.createDate;var a=_.cloneDeep(t);void 0!=a.detail&&(a.detail.forEach(function(e,t,a){e.type="odd",e.sid=t+1}),this.marketPlanDetails=a.detail,this.maxSid=a.detail.length),this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this,i=_.cloneDeep(this.plan);if(0==this.marketPlanDetails.length)return this.$message({type:"info",message:"详情不能为空！"}),!1;var n=[],s=this.marketPlanDetails.concat(this.currentDeleteData),o=r()(s,function(e,t){if("object"===(void 0===t?"undefined":l()(t))&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t});n=null,i.marketPlanDetails=o,this.$refs[e].validate(function(e){if(!e)return!1;t.validateplanNo();t.plan.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/marketingplan/update",i).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers())})):(t.tableLoading=!0,0==t.plan.clientId||""==t.plan.clientId?(t.plan.clientId=0,i.materialType=1):i.materialType=2,console.log(i),t.postRequest("/marketingplan/add",i).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers()}}))})},validateplanNo:function(){return!0},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/marketingplan/deletmark?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/marketingplan/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.plans=i,t.totalCount=a.data.total,t.emptyData()}})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/product/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.materialList=i,t.totalMaterialCount=a.data.total,t.dialogMaterialVisible=!0}})},emptyData:function(){this.marketPlanDetails=[],this.plan={materialType:"",notes:"",serialNumber:"",clientId:0,clientName:""}}},computed:{routes:function(){return this.$store.state.routes}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("\n        添加\n      ")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.plan,rules:e.rules,size:"mini","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.plan.notes,callback:function(t){e.$set(e.plan,"notes",t)},expression:"plan.notes"}})],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"left",border:"1px solid #eeeeee"}},[e._v("\n          销售详情:\n        ")]),e._v(" "),a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("div",{staticStyle:{"background-color":"bisque"}},[a("div",{staticStyle:{"text-align":"left"}},[e._v("\n              客户信息\n            ")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"客户:",prop:"clientId"}},[a("el-popover",{attrs:{placement:"right",title:"客户信息",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{attrs:{data:e.clients,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{ref:"tree2",staticStyle:{width:"200px",height:"28px",display:"inline-flex","justify-content":"space-between","background-color":"#fff","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference","filter-node-method":e.filterNode},on:{click:e.showDepTree},slot:"reference"},[a("div",[e._v(e._s(e.detail.clientName))]),e._v(" "),a("div",{staticClass:"el-icon-arrow-down",staticStyle:{color:"#606266"},attrs:{alt:"hehehehe"},on:{click:e.clearChoose}})])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"简称:",prop:"abbrName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"局简称"},on:{focus:e.showMaterial},model:{value:e.detail.abbrName,callback:function(t){e.$set(e.detail,"abbrName",t)},expression:"detail.abbrName"}}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"最近一次订单",placement:"top"}})],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"background-color":"rgb(175, 218, 136)"}},[a("div",{staticStyle:{"text-align":"left"}},[e._v("\n              产品信息\n            ")]),e._v(" "),a("form",{attrs:{model:e.detail,size:"mini","label-width":"50px"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品名称。。。"},on:{focus:e.showMaterial},model:{value:e.detail.name,callback:function(t){e.$set(e.detail,"name",t)},expression:"detail.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"规格:",prop:"specs"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",disabled:!0,size:"mini",placeholder:"规格。。"},model:{value:e.detail.specs,callback:function(t){e.$set(e.detail,"specs",t)},expression:"detail.specs"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"型号:",prop:"proNo"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"型号"},model:{value:e.detail.proNo,callback:function(t){e.$set(e.detail,"proNo",t)},expression:"detail.proNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"标记:",prop:"stamp"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"标记"},model:{value:e.detail.stamp,callback:function(t){e.$set(e.detail,"stamp",t)},expression:"detail.stamp"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit"},on:{change:e.setEndNumber},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.detail.notes,callback:function(t){e.$set(e.detail,"notes",t)},expression:"detail.notes"}})],1)],1)],1)],1),e._v(" "),a("div"),e._v(" "),a("div",{staticStyle:{"text-align":"justify"}},[e._v("\n              ***查看最近一次下发的销售单信息***\n              "),a("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"success",icon:"el-icon-arrow-down",circle:""},on:{click:e.showCurrentNo}}),e._v(" "),e.isprarent?a("div",[a("el-form",{attrs:{"label-position":"left",inline:"",model:e.lastPlanDetail}},[e.lastPlanDetail.startNo?a("el-form-item",{attrs:{label:"产品编码:"}},[a("span",[e._v(e._s(e.lastPlanDetail.startNo)+"-")]),a("span",[e._v(e._s(e.lastPlanDetail.endNo)+" ;")]),e._v(" "),a("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"success",icon:"el-icon-refresh",circle:""},on:{click:e.changeNO}})],1):a("span",[e._v("暂无数据")]),e._v(" "),a("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"success",icon:"el-icon-refresh",circle:""},on:{click:e.changeNO}})],1)],1):e._e()],1),e._v(" "),a("div",{staticStyle:{"background-color":"bisque"}},[a("div",{staticStyle:{"text-align":"left",display:"flex","justify-content":"space-between"}},[e._v("\n                编号 "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.serialNumberAdd()}}},[e._v("新增\n                ")])],1),e._v(" "),e._l(e.marketPlanSerialNumber,function(t,i){return a("div",[a("el-row",{staticClass:"e-rows",attrs:{gutter:5}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"编码:"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"起始编号..."},model:{value:t.startNo,callback:function(a){e.$set(t,"startNo",a)},expression:"serialNumber.startNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[a("span",[e._v("--")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"结束编号"},model:{value:t.endNo,callback:function(a){e.$set(t,"endNo",a)},expression:"serialNumber.endNo"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"text",placeholder:"编码备注 。。。"},model:{value:t.note,callback:function(a){e.$set(t,"note",a)},expression:"serialNumber.note"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-tooltip",{attrs:{effect:"light",content:"删除",placement:"right"}},[a("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.deletSerialNo(i)}}})],1)],1)],1)],1)})],2)]),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addBox}},[e._v("添加")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.marketPlanDetails,border:"",height:"200"}},[a("el-table-column",{attrs:{prop:"sid",align:"left",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clientName",align:"left",label:"客户名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"abbrName",align:"left",label:"客户简称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"产品名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+"枚")]}}],null,!1,3875320087)}),e._v(" "),a("el-table-column",{attrs:{prop:"specs",align:"left",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proNo",align:"left",label:"型号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"编码规则",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e._l(t.row.marketPlanSerialNumber,function(t,i){return a("div",[a("p",[e._v("编号: "+e._s(t.startNo)+"- "+e._s(t.endNo)+" ;备注: "+e._s(t.note)+" ")])])}),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v("编码")])],1)],2)]}}],null,!1,3299174963)}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.editeDetail(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteDetail(t.$index,t.row)}}},[e._v("删除\n                ")])]}}],null,!1,987709478)})],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{prop:"producteName",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specification",align:"left",fixed:"",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proType",align:"left",fixed:"",label:"型号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"color",align:"left",fixed:"",label:"颜色",width:"120"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.plans,border:""}},[a("el-table-column",{attrs:{prop:"marketPlanNo",align:"left",label:"编号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"left",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.createDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",width:"80",align:"left",formatter:e.formatStatus,label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(e){a("oV1B")},null,null);t.default=p.exports},aNkL:function(e,t){},e3r7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("VU/8")(null,null,!1,null,null,null);t.default=i.exports},oV1B:function(e,t){},thLP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"error-page"},[e._m(0),e._v(" "),a("div",{staticClass:"error-desc"},[e._v("啊哦~ 你所访问的页面不存在")]),e._v(" "),a("div",{staticClass:"error-handle"},[a("router-link",{attrs:{to:"/"}},[a("el-button",{attrs:{type:"primary",size:"large"}},[e._v("返回首页")])],1),e._v(" "),a("el-button",{staticClass:"error-btn",attrs:{type:"primary",size:"large"},on:{click:e.goBack}},[e._v("返回上一页")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"error-code"},[this._v("4"),t("span",[this._v("0")]),this._v("4")])}]};var l=a("VU/8")({methods:{goBack:function(){this.$router.go(-1)}}},i,!1,function(e){a("aNkL")},"data-v-67688f9f",null);t.default=l.exports},tuy1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{address:[{required:!0,message:"必填:地址",trigger:"blur"}],carNo:[{required:!0,message:"必选:车牌号",trigger:"blur"}]},processs:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],process:{carNo:"",address:"",maintainDate:"",nowMileage:"",mks:""},dialogTableVisible:!1,dialogFormVisible:!1}},mounted:function(){this.initData();var e=this;this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var a=t.data;console.log(a),e.cars=a.root.cars}})},methods:{searchEmp:function(){this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.process.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},searchData:function(){this.loadData()},showProcessView:function(e){console.log(e),this.dialogTitle="查看工序"},showEditEmpView:function(e){console.log(e),this.dialogTitle="编辑信息",this.process=e,this.process.maintainDate=this.formatDate(e.maintainDate),delete this.process.noteMaker,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.process.id?(t.tableLoading=!0,console.log(t.process),t.postRequest("/vehicleRepair/addvmt",t.process).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.process),t.postRequest("/vehicleRepair/addvmt",t.process).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.plateNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehicleRepair/delevmt?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehicleRepair/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.processs=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.process={carNo:"",address:"",maintainDate:"",nowMileage:"",mks:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过工序名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n    \n          ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"600px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.process,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"工序名称"},model:{value:e.process.address,callback:function(t){e.$set(e.process,"address",t)},expression:"process.address"}})],1),e._v(" "),a("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block"},attrs:{filterable:"","filter-method":e.filterMethod,"filter-placeholder":"工序名称",titles:["工序顺序","工序步骤"],"button-texts":["添加","移除"],data:e.data2},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.processs}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mks",width:"120",align:"left",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showProcessView(t.row)}}},[e._v("查看工序\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var n=a("VU/8")(i,l,!1,function(e){a("8lAK")},null,null);t.default=n.exports}});
//# sourceMappingURL=3.c489a2d3142ce372aed2.js.map