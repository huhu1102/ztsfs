webpackJsonp([2],{"+8VK":function(e,t){},"+Ip0":function(e,t){},"/V9a":function(e,t){},"0OYy":function(e,t){},"0Wrx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),s={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{address:[{required:!0,message:"必填:保养地址",trigger:"blur"}],carNo:[{required:!0,message:"必选:车牌号",trigger:"blur"}]},carRepairs:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],car:{},carRepair:{carNo:"",address:"",maintainDate:"",nowMileage:"",mks:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData();var e=this;this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var a=t.data;console.log(a),e.cars=a.root.cars}})},methods:{searchEmp:function(){this.loadEmps()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.carRepair.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.dialogFormVisible=!0,this.emptyData()},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.carRepair=t,this.carRepair.maintainDate=this.formatDate(t.maintainDate),this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,delete this.carRepair.noteMaker,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.carRepair.id?(t.tableLoading=!0,console.log(t.carRepair),t.postRequest("/vehicleRepair/addvmt",t.carRepair).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.carRepair),t.postRequest("/vehicleRepair/addvmt",t.carRepair).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除该次记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehicleRepair/delevmt?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehicleRepair/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.carRepairs=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.carRepair={carNo:"",address:"",maintainDate:"",nowMileage:"",mks:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n  \n        ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.carRepair,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"车牌号:",prop:"carNo"}},[a("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRepair.carNo)+"\n            ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"保养地址:",prop:"address"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"保养地址"},model:{value:e.carRepair.address,callback:function(t){e.$set(e.carRepair,"address",t)},expression:"carRepair.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"当前里程:",prop:"nowMileage"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",step:"100",min:"0",placeholder:"当前表盘里程"},model:{value:e.carRepair.nowMileage,callback:function(t){e.$set(e.carRepair,"nowMileage",t)},expression:"carRepair.nowMileage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"mks"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRepair.mks,callback:function(t){e.$set(e.carRepair,"mks",t)},expression:"carRepair.mks"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"维护里程:",prop:"maintenanceMile"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"下次维护里程"},model:{value:e.carRepair.maintenanceMile,callback:function(t){e.$set(e.carRepair,"maintenanceMile",t)},expression:"carRepair.maintenanceMile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"保养时间:",prop:"maintainDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"保养时间"},model:{value:e.carRepair.maintainDate,callback:function(t){e.$set(e.carRepair,"maintainDate",t)},expression:"carRepair.maintainDate"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carRepairs}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"carNo",align:"left",fixed:"",label:"车牌号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",align:"left",label:"保养地址",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"maintainDate",width:"120",align:"left",label:"保养时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.maintainDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nowMileage",width:"220",align:"left",label:"当次保养里程"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mks",width:"120",align:"left",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("7vo2")},null,null);t.default=o.exports},"0wq/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),n=a.n(i),s={data:function(){var e;return e={tempPlan:[],oddMaterial:{name:"",standard:"",quantity:"",unitName:"",notes:""},newMaterial:{name:"",standard:"",quantity:"",unitName:"",notes:""},confirmFormVisible:!1,positions:[{id:1,name:"一楼仓库"},{id:2,name:"二楼仓库"},{id:3,name:"注塑車間"},{id:4,name:"激光車間"},{id:5,name:"裝配車間"},{id:6,name:"加工車間"}],dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{productId:[{required:!0,message:"必选:产品名称",trigger:"change"}],unitId:[{required:!0,message:"必选:单位",trigger:"change"}],productNo:[{required:!0,message:"必填:数量",trigger:"blur"},{validator:function(e,t,a){/^\d+$/.test(t)?a():a("数字格式错误!")},message:"数字格式错误",trigger:"blur"}]},middleProducts:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[],confirmDialogTitle:"采购确认单",nowMaterial:{quantity:"",notes:"",complete:""}},n()(e,"newMaterial",{name:"",specifications:"",quantity:"",unitName:"",notes:""}),n()(e,"outRecive",{quantity:"",note:"",materialId:""}),n()(e,"dialogInTitle","采购添加"),n()(e,"dialogFormInVisible",!1),e},mounted:function(){this.initData()},methods:{tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.buyStatus?"warning-row":"success-row"},cancelOptIn:function(){this.dialogFormInVisible=!1,this.loadData()},addInData:function(e){var t=this,a=this;if(""==this.outRecive.quantity)return Message.error({message:"请输入数量"}),!1;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(a.outRecive),t.getRequest("/midProductInRecieving/add?id="+t.outRecive.materialId+"&quaity="+t.outRecive.quantity+"&notes="+t.outRecive.note).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormInVisible=!1,a.loadData(),a.emptyInData()}})})},emptyInData:function(){this.outRecive={quaity:"",materailId:"",note:""}},selfbuy:function(e){this.outRecive.materialId=e.id,this.dialogFormInVisible=!0},popConfirm:function(e){var t=this;this.$prompt("请输入出库数量","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number",inputValidator:function(a){if(console.log(a),parseInt(a)>parseInt(e.quantity))return t.$message({type:"info",message:"数量过大"}),!1},inputErrorMessage:"非法输入！"}).then(function(a){var i=a.value;t.getRequest("/midProductOutRecieving/add?id="+e.id+"&quantity="+i).then(function(e){if(e&&200==e.status){e.data;t.loadData(),t.$message({type:"success",message:"出库成功!"})}})}).catch(function(){t.$message({type:"info",message:"取消输入"})})},handleCurrentChange:function(e){console.log(e),this.newMaterial=e},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.middleProduct.utilname=a.name)})},clearNewMaterial:function(){console.log("clear"),this.newMaterial={name:"",specifications:"",quantity:"",unitName:"",notes:"",id:0},this.nowMaterial={quantity:"",notes:"",complete:""},this.confirmDialogTitle="采购确认单"},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var a="",i=e.plant;return this.positions.forEach(function(e,t,n){i.forEach(function(t,i,n){e.id==t&&(a+=e.name+" , ")})}),a},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){var e=this;e.loadData(),this.getRequest("/middleProduct/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients,e.products=a.root.products}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushData:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},handleNodeClick:function(e){this.middleProduct.clientName=e.name,this.middleProduct.clientId=e.id,this.pName=e.name,this.pId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.middleProduct.clientName="",this.middleProduct.clientId=""},cancelChoos:function(){console.log(this.pName),this.middleProduct.clientName=this.pName,this.middleProduct.clientId=this.pId},searchData:function(){this.loadData()},showEditView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.middleProduct=t,this.middleProduct.productId=t.productId,delete this.middleProduct.units,this.dialogFormVisible=!0},showBuyConfirm:function(e,t){var a=this;a.tableLoading=!0,this.confirmDialogTitle=t.name+this.confirmDialogTitle,this.getRequest("/midBuyPlanDetail/buyPlanDetail?materailId="+t.id).then(function(e){if(a.tableLoading=!1,e&&200==e.status){var t=[];e.data.root.midproductlist.forEach(function(e,a,i){t.push({name:e[0],specifications:e[1],quantity:e[2],confirmStatus:e[3],unitName:e[4],createDate:e[5],planSerialNumber:e[6],note:e[7],id:e[8]})}),a.matriallist=t}}),this.confirmFormVisible=!0},planConfirm:function(e){var t=this,a=this;return console.log(a.newMaterial.id),console.log(a.nowMaterial.complete),0==a.newMaterial.id?(a.$message({type:"info",message:"请选择采购计划！"}),!1):""==a.nowMaterial.complete?(a.$message({type:"info",message:"请选择是否完成！"}),!1):""==this.nowMaterial.quantity||0==this.nowMaterial.quantity?(a.$message({type:"info",message:"请填入实收数量！"}),!1):void this.$confirm("当前选择的是,"+this.newMaterial.name+"入库数量为："+this.nowMaterial.quantity+" 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$refs[e].validate(function(e){e&&a.getRequest("/midPruchaseVerify/add?purchasePlanDetailId="+a.newMaterial.id+"&confirmStatus="+a.nowMaterial.complete+"&quantity="+a.nowMaterial.quantity+"&notes="+a.nowMaterial.notes).then(function(e){if(e&&200==e.status){e.data;a.loadData(),a.confirmFormVisible=!1}})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},addEmp:function(e){var t=this,a=this;delete this.middleProduct.unit;var i=_.cloneDeep(this.middleProduct);i.plant=i.plant.join(","),this.$refs[e].validate(function(e){if(!e)return!1;t.middleProduct.id?(t.tableLoading=!0,console.log(t.middleProduct),t.postRequest("/middleProduct/update",i).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.middleProduct),t.postRequest("/middleProduct/add",i).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/middleProduct/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/middleProduct/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;i.forEach(function(e,t,a){e.plant=e.plant.split(",")}),t.middleProducts=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addDataForm",attrs:{model:e.middleProduct,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入半成品名称。。。"},model:{value:e.middleProduct.name,callback:function(t){e.$set(e.middleProduct,"name",t)},expression:"middleProduct.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规格:",prop:"standard"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"半成品规格、大小"},model:{value:e.middleProduct.standard,callback:function(t){e.$set(e.middleProduct,"standard",t)},expression:"middleProduct.standard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型:"}},[a("el-radio-group",{on:{change:e.selectType},model:{value:e.middleProduct.productStyle,callback:function(t){e.$set(e.middleProduct,"productStyle",t)},expression:"middleProduct.productStyle"}},[a("el-radio",{attrs:{label:"1"}},[e._v("常备")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"2"}},[e._v("普通")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"单位:",prop:"unitId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择单位"},on:{change:e.selectChange},model:{value:e.middleProduct.unitId,callback:function(t){e.$set(e.middleProduct,"unitId",t)},expression:"middleProduct.unitId"}},e._l(e.units,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"存放位置:",prop:"plant"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"",size:"mini",placeholder:"请选择位置"},model:{value:e.middleProduct.plant,callback:function(t){e.$set(e.middleProduct,"plant",t)},expression:"middleProduct.plant"}},e._l(e.positions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.middleProduct.note,callback:function(t){e.$set(e.middleProduct,"note",t)},expression:"middleProduct.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addDataForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogInTitle,"close-on-click-modal":!1,visible:e.dialogFormInVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormInVisible=t},close:e.cancelOptIn}},[e.dialogFormInVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addInData",attrs:{model:e.outRecive,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"采购数量..."},model:{value:e.outRecive.quantity,callback:function(t){e.$set(e.outRecive,"quantity",t)},expression:"outRecive.quantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"规格..."},model:{value:e.outRecive.note,callback:function(t){e.$set(e.outRecive,"note",t)},expression:"outRecive.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormInVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addInData("addInData")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.confirmDialogTitle,"close-on-click-modal":!1,visible:e.confirmFormVisible,width:"650px"},on:{"update:visible":function(t){e.confirmFormVisible=t},close:e.clearNewMaterial}},[e.confirmFormVisible?a("div",{staticStyle:{width:"100%"},attrs:{height:"200"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.matriallist,border:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"planSerialNumber",align:"left",fixed:"",label:"采购编号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"下单时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n           "+e._s(e._f("formatDate")(t.row.createDate))+"\n         ")]}}],null,!1,450011427)}),e._v(" "),a("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n         "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n       ")]}}],null,!1,3015498410)}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注",width:"240"}})],1),e._v(" "),e.newMaterial.name?a("div",{staticStyle:{padding:"16px","text-align":"left",border:"1px solid gainsboro"}},[e._v("\n       当前选择：\n    \n     "),a("div",{staticStyle:{display:"flex","justify-content":"space-around",padding:"5px"}},[a("div",[e._v("\n       名称:"+e._s(e.newMaterial.name)+" \n         ")]),e._v(" "),a("div",[e._v("\n       规格:"+e._s(e.newMaterial.specifications)+"\n         ")]),e._v(" "),a("div",[e._v("\n       数量:"+e._s(e.newMaterial.quantity)+" "+e._s(e.newMaterial.unitName)+" \n         ")]),e._v(" "),a("div",[e._v("\n       备注:"+e._s(e.newMaterial.note)+" \n         ")])])]):e._e(),e._v(" "),a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-form",{ref:"newconfirmForm",attrs:{model:e.nowMaterial,rules:e.rules,size:"sam","label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"收货数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"当次实际收货数量"},model:{value:e.nowMaterial.quantity,callback:function(t){e.$set(e.nowMaterial,"quantity",t)},expression:"nowMaterial.quantity"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注"},model:{value:e.nowMaterial.notes,callback:function(t){e.$set(e.nowMaterial,"notes",t)},expression:"nowMaterial.notes"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"完成:"}},[a("el-radio-group",{model:{value:e.nowMaterial.complete,callback:function(t){e.$set(e.nowMaterial,"complete",t)},expression:"nowMaterial.complete"}},[a("el-radio",{attrs:{label:2}},[e._v("完成")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:1}},[e._v("未完成")])],1)],1)],1)])],1)],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.confirmFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.planConfirm("newconfirmForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.middleProducts,border:"","row-class-name":e.tableRowClassName}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"standard",align:"left",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"半成品数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.productNo)+e._s(t.row.unit.name)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"productStyle",align:"left",formatter:e.formatStyle,label:"类型",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plantName",align:"left",formatter:e.formatPlant,label:"存放地点",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditView(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n          ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.selfbuy(t.row)}}},[e._v("厂部自购\n          ")]),e._v(" "),t.row.buyStatus?a("el-badge",{attrs:{value:"new"}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showBuyConfirm(t.$index,t.row)}}},[e._v("采购确认\n            ")])],1):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("UnK0")},null,null);t.default=o.exports},"2MWp":function(e,t){},"2tLV":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{activeName:"cars"}},methods:{detials:function(e){this.$router.replace({path:e.path})}},components:{},computed:{stepOpt:function(){var e={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(t){"/carBase"===t.path&&(e=t)}),console.log(e.id);var t=[];return this.$store.state.routes.forEach(function(a){a.parentId===e.id&&t.push(a)}),console.log(t),t||[]}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{display:"flex","flex-direction":"column","font-size":"14px"}},[a("div",{staticStyle:{"margin-left":"20px","line-height":"30px",height:"30px","text-align":"start","padding-left":"20px","border-left":"4px solid red","font-weight":"700"}},[e._v("\n          销售管理\n        ")]),e._v(" "),a("el-main",{staticClass:"product-base"},e._l(e.stepOpt,function(t){return a("div",{key:t.id,staticClass:"product-item",on:{click:function(a){return e.detials(t)}}},[a("div",{staticClass:"item-left"},[a("div",{staticStyle:{margin:"60px 0","font-size":"16px"}},[a("span",{staticClass:"fa fa-product-hunt",staticStyle:{display:"block"}}),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v(e._s(t.name))])])]),e._v(" "),a("div",{staticClass:"item-right"})])}),0)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("lxdu")},null,null);t.default=s.exports},"37t0":function(e,t){},"3L9A":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),n=a.n(i),s=a("zL8q"),l={data:function(){var e;return e={stateList:[{label:"运输中",value:1},{label:"已到达",value:2},{label:"已签收",value:3}],plansRecord:[],isRecord:!1,typeItems:[{value:1,name:"销售计划"},{value:2,name:"发货请求"},{value:3,name:"发货记录"},{value:4,name:"回访记录"}],tap:1,defaultProps:{value:"id",label:"name",children:"child"},rules:{planNumber:[{required:!0,message:"必填:数量",trigger:"blur"}]},options:[{value:"自提",label:"自提"},{value:"送货上门",label:"送货上门"},{value:"其他(备注)",label:"其他(备注)"}],selectedStep:{},pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,types:2,midProduct:[],plans:[],clients:[],units:[],dialogTitle:"",currentPage:1,totalCount:-1,currentRePage:1,totalReCount:-1,currentSePage:1,totalSeCount:-1,currentVePage:1,totalVeCount:-1,detail:{id:0,planNumber:"",destination:"",receiveWay:"",receiver:"",relation:"",note:""},sendState:2,dialogFormVisible:!1,dialogMaterialVisible:!1,dialogMaterialTitle:"请选择产品",activePanel:"4",manageStatus:"4",showPlan:!0,detailPage:1,CurrentSalesId:"",getUrl:"",showDetaillist:!1,detailsList:[],dialogSendTitle:"",dialogSendVisible:!1,confirmData:{id:0,shippingRequestDetailsId:0,clientId:[],dispatchBillNo:"",boxs:"",consignee:"",consigneePhone:"",address:"",consigner:"",consignerPhone:"",remarks:"",cargoName:"",freights:"",shortHaulMoney:"",freightDetails:"",collFreight:"",collFreightBig:"",serviceCode:"",receipt:"",totalMoney:"",stype:""},clientProps:{value:"id",label:"name",children:"child",checkStrictly:!0},currentSale:0,payCode:[{value:"微信",label:"微信"},{value:"支付宝",label:"支付宝"},{value:"银行卡",label:"银行卡"},{value:"现金",label:"现金"},{value:"其他（备注）",label:"其他（备注）"}],serviceCodes:[{value:"送货回单",label:"送货回单"},{value:"自提",label:"自提"}],rulesSend:{clientId:[{required:!0,message:"必须选:物流公司",trigger:"blur"}]},dialogVisitTitle:"回访记录",dialogVisitVisible:!1,visit:{id:0,note:"",billId:"",billstatus:""},visitRules:{}},n()(e,"advanceSearchViewVisible",!1),n()(e,"faangledoubleup","fa-angle-double-up"),n()(e,"faangledoubledown","fa-angle-double-down"),n()(e,"keyproductName",""),n()(e,"keyClientName",""),n()(e,"keyempName",""),n()(e,"startDate",""),n()(e,"endDate",""),n()(e,"visitStateList",[{name:"未到达",value:1,disabled:!1},{name:"已到达",value:2,disabled:!1},{name:"已签收",value:3,disabled:!1}]),n()(e,"manageData",""),n()(e,"currentPhoneRecord",""),e},mounted:function(){this.initData()},methods:{stateChage:function(e){},handleEdit:function(e,t){},returnVisit:function(e){this.visit.billId=e.id,this.visit.billstatus=e.shipingStatus;e.id;this.currentPhoneRecord=e,this.tableLoading=!0;var t=this.formatDateTime(new Date);console.log(t),this.loadRecord()},editRowEvent:function(e,t){console.log("index"+e),console.log("row"+t),this.visit.id=t.id,this.visit.billstatus=t.billstatus,this.visit.note=t.note,this.visit.createDate=t.createDate,t.show=!0},saveRowEvent:function(e){var t=this;if(e.show){if(null===e.billstatus||""===e.billstatus)return Object(s.Message)("请选择状态！"),!1;this.visit.billstatus=e.billstatus,this.visit.note=e.note,e.id?(this.createDate=e.createDate,this.visit.id=e.id,this.tableLoading=!0,this.postRequest("/returnvisit/add",this.visit).then(function(a){t.tableLoading=!1,a&&200===a.status&&a.data.success&&(e.show=!1,t.loadRecord())})):(this.tableLoading=!0,this.postRequest("/returnvisit/add",this.visit).then(function(a){t.tableLoading=!1,a&&200===a.status&&a.data.success?(e.show=!1,t.loadRecord()):Object(s.Message)("添加失败")}))}},loadRecord:function(){var e=this,t=this;this.getUrl="/returnvisit/findByBillId/"+this.currentPhoneRecord.id,this.getRequest(this.getUrl).then(function(a){e.tableLoading=!1,a&&200===a.status&&a.data.success&&(console.log(t.detailsList),t.$nextTick(function(){t.detailsList=a.data.data||[],t.detailsList.push({billstatus:"",note:"",creatDate:new Date,show:!0})}),t.detailsList.map(function(e){e.show=!1}),t.dialogVisitVisible=!0)})},clearsendDates:function(){this.endDate="",this.startDate=""},showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyData(),this.loadData())},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyData(),this.loadData()},visitChange:function(e,t){console.log(t),this.confirmData.clientId=t.clientId,this.confirmData.cargoName=t.cargoName,this.confirmData.planNumber=t.planNumber,this.confirmData.address=t.address,this.confirmData.consignee=t.consignee,this.confirmData.consigneePhone=t.consigneePhone,this.confirmData.stype=t.stype,this.confirmData.serviceCode=t.serviceCode,this.confirmData.receipt=t.receipt,this.confirmData.shortHaulMoney=t.shortHaulMoney,this.confirmData.freightDetails=t.freightDetails,this.confirmData.consigner=t.consigner,this.confirmData.consignerPhone=t.consignerPhone,this.confirmData.collFreight=t.collFreight,this.confirmData.collFreightBig=t.collFreightBig,this.confirmData.dispatchBillNo=t.dispatchBillNo,this.confirmData.freights=t.freights,this.confirmData.boxs=t.boxs,this.confirmData.remarks=t.remarks,this.confirmData.id=t.id,this.dialogSendVisible=!0},addViist:function(e){var t=this,a=this,i=_.cloneDeep(this.visit);this.$refs[e].validate(function(e){if(!e)return!1;i.id?(t.tableLoading=!0,console.log(a.plan),t.postRequest("/returnvisit/add",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success&&(a.dialogVisitVisible=!1,a.loadData(),a.cancelvisit())})):(t.tableLoading=!0,t.postRequest("/returnvisit/add",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success?(a.dialogVisitVisible=!1,a.loadData(),a.cancelvisit()):Object(s.Message)("添加失败")}))})},cancelvisit:function(){this.visit={note:"",id:0,billId:"",billstatus:""}},cancelSend:function(){this.confirmData={id:0,shippingRequestDetailsId:0,clientId:[],dispatchBillNo:"",boxs:"",consignee:"",consigneePhone:"",address:"",consigner:"",consignerPhone:"",remarks:"",cargoName:"",freights:"",shortHaulMoney:"",freightDetails:"",collFreight:"",collFreightBig:"",serviceCode:"",receipt:"",totalMoney:"",stype:"",startDate:"",endDate:""}},confirmDelivery:function(e,t){console.log("16a16541a65s4df65a"),this.dialogSendTitle="发货确认",this.confirmData.shippingRequestDetailsId=t.id,this.dialogSendVisible=!0},confirmAdd:function(e){var t=this,a=this,i=_.cloneDeep(this.confirmData);this.$refs[e].validate(function(e){if(!e)return!1;i.id?(t.tableLoading=!0,t.postRequest("/shippingBill/update",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogSendVisible=!1,a.loadData(),a.cancelSend())})):(t.tableLoading=!0,t.postRequest("/shippingBill/add",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success?(a.dialogSendVisible=!1,a.loadData(),a.cancelSend()):Object(s.Message)("添加失败")}))})},deliveryRequest:function(e){this.dialogTitle="发货请求";this.CurrentSalesId=e.id,this.dialogFormVisible=!0},showDetails:function(e){this.currentSale=e,this.detailsList=e.details,this.showDetaillist=!0},used:function(e){this.handleClick("","",e.value+"")},handleClick:function(e,t,a){console.log(a);switch(e.name){case"4":this.sendState="2";break;case"5":this.sendState="3"}this.loadData()},formatStatus:function(e,t){return 1===e.materialType?"已确认":"未确认"},initData:function(){var e=this;e.loadData(),this.getRequest("/productionplan/basedata").then(function(t){t&&200===t.status&&t.data.success?e.clients=e.toTree(t.data.root.clients):Object(s.Message)("初始化公司错误！@")})},keywordsChange:function(e){""===e&&this.loadData()},keywordsMaterialChange:function(e){""===e&&this.loadMaterial()},showCurrentNo:function(){this.isprarent?this.isprarent=!1:this.isprarent=!0},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentReChange:function(e){this.currentRePage=e,console.log(this.currentRePage),this.loadData()},currentSeChange:function(e){this.currentSePage=e,console.log(this.currentSePage),this.loadData()},currentVeChange:function(e){this.currentVePage=e,console.log(this.currentVePage),this.loadData()},addAndFlushData:function(){this.dialogTitle="发货请求";this.dialogFormVisible=!0},searchData:function(){console.log(this.value5),this.value5&&this.value5.length&&(this.startDate=this.formatDateTime(this.value5[0]),this.endDate=this.formatDateTime(this.value5[1]),console.log(this.startDate)),this.loadData()},add:function(e){var t=this,a=this,i=_.cloneDeep(this.detail),n={shippingRequestDetails:i};this.$refs[e].validate(function(e){if(!e)return!1;a.detail.id?(t.tableLoading=!0,console.log(a.plan),t.postRequest("/shippingrequestdetails/update",n).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,t.postRequest("/shippingrequestdetails/add?salesPlanId="+t.CurrentSalesId,i).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success?(a.dialogFormVisible=!1,a.loadData(),a.emptyData()):Object(s.Message)("添加失败")}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),this.emptyData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/sales/delete?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success?t.loadData():t.$message({type:"info",message:"删除失败！"})})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productmanage/findForSend?page="+this.currentPage+"&size=10&status="+this.sendState+"&productName="+this.keyproductName+"&empName="+this.keyempName+"&clientName="+this.keyClientName+"&start="+this.startDate+"&endDate="+this.endDate).then(function(a){if(e.tableLoading=!1,a&&200===a.status&&a.data.success){var i=a.data.data;t.plans=t.preData(i)||[],t.totalCount=a.data.total,t.emptyData(),t.upDataAllData()}})},upDataAllData:function(){var e=this;""!==this.manageData&&this.plans&&this.plans.length&&this.plans.forEach(function(t){t.id===e.manageData.id&&(console.log("plansRecord"+e.plansRecord),e.manageData=t,e.plansRecord=e.manageData.billList)}),""!==this.currentPhoneRecord&&this.lookPhoneRecord(this.currentPhoneRecord)},preData:function(e){return e.forEach(function(e){e.onhover=!1}),e},emptyData:function(){this.CurrentSalesId="",this.detail={id:0,planNumber:"",destination:"",receiveWay:"",receiver:"",relation:"",note:""}},back:function(){this.currentPhoneRecord="",this.showDetaillist=!this.showDetaillist},preDataSale:function(e){if(e.length)for(var t=e.length-1;t>=0;t--){var a=e[t];switch(a.status+""){case"1":a.bgcolor="#eeeeee";break;case"2":a.bgcolor="yellowgreen";break;case"3":a.bgcolor="green";break;case"4":a.bgcolor="#e4e4e4";break;case"5":a.bgcolor="#2974df";break;case"6":a.bgcolor="#85ce61"}}return e},toTree:function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.child});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.parentClientId];i?(i.child||(i.child=[])).push(e):t.push(e)}),console.log(t),t},lookSendDetail:function(e){this.manageData=e,this.plansRecord=e.billList,console.log(e.billList),this.isRecord=!0},backMange:function(){this.isRecord=!1,this.plansRecord=[],this.currentPhoneRecord="",this.manageData=""},lookPhoneRecord:function(e){var t=this,a=this,i=e.id;this.currentPhoneRecord=e,this.tableLoading=!0,this.getUrl="/returnvisit/findByBillId/"+i,this.getRequest(this.getUrl).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&(a.detailsList=e.data.data,console.log(a.detailsList),a.detailsList&&a.detailsList.length?a.showDetaillist=!0:t.$message({message:"未回访，请添加记录",type:"warning"}),a.emptyData())})},manageStatusFormat:function(e){console.log(e);var t=e.billstatus;return 1===t?"未到":2===t?"到达":3===t?"已签收":"未知"},editeAsk:function(e,t){this.visit.note=t.note,this.visit.billId=t.billId,this.visit.billstatus=t.billstatus,this.visit.id=t.id,this.dialogVisitVisible=!0},deleteAsk:function(e,t){var a=this;this.$confirm("此操作将删除该条回访记录， 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.doDeleteRecord(t.id)}).catch(function(){})},doDeleteRecord:function(e){this.tableLoading=!0;var t=this;this.getRequest("/returnvisit/delete?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&t.loadData()})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-container",{staticClass:"divce-mode"},[a("el-header",{staticClass:"send-head"},[a("div",{staticStyle:{display:"inline"}}),e._v(" "),a("el-button",{staticClass:"send-head-left-btn",attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:e.showAdvanceSearchView},slot:"reference"},[a("i",{staticClass:"fa fa-lg",class:[e.advanceSearchViewVisible?e.faangledoubleup:e.faangledoubledown],staticStyle:{"margin-right":"5px"}}),e._v("高级搜索\n          ")]),e._v(" "),a("div",{staticClass:"send-head-right-btn"},[e.showDetaillist?a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-arrow-left"},on:{click:e.back}},[e._v("\n              返回\n            ")]):e._e()],1)],1),e._v(" "),a("el-main",{staticClass:"send-main"},[a("transition",{staticClass:"slide-fade"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticClass:"send-main-div"},[a("el-row",[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",clearable:""},on:{clear:e.clearsendDates},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[e._v("\n                  产品:\n                  "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品名称。。。"},model:{value:e.keyproductName,callback:function(t){e.keyproductName=t},expression:"keyproductName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                  客户:\n                  "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"客户名。。。"},model:{value:e.keyClientName,callback:function(t){e.keyClientName=t},expression:"keyClientName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                  操作人:\n                  "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"员工名。。。"},model:{value:e.keyempName,callback:function(t){e.keyempName=t},expression:"keyempName"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"flex-end"}},[a("el-col",{attrs:{span:5,offset:4}},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelSearch}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.searchData}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),e.showDetaillist?e._e():a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isRecord,expression:"!isRecord"}]},[a("el-tabs",{attrs:{type:"card","tab-position":"top"},on:{"tab-click":e.handleClick},model:{value:e.activePanel,callback:function(t){e.activePanel=t},expression:"activePanel"}},[a("el-tab-pane",{attrs:{label:"未完成",name:"4"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"生产完成",name:"5"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"4"===e.activePanel||"5"===e.activePanel,expression:"activePanel==='4'||activePanel==='5'"}]},[a("div",{staticClass:"flex-send"},e._l(e.plans,function(t,i){return a("div",{key:"sd"+t.id,staticClass:"item-send",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-send-show"},[a("div",{staticClass:"item-left"},[a("div",[e._v(e._s(t.number))]),e._v(" "),t.planDetails&&t.planDetails.salesPlan&&t.planDetails.salesPlan.client?a("div",{staticClass:"text-alight"},[e._v("\n                          "+e._s(t.planDetails.salesPlan.client.name)+"\n                        ")]):e._e(),e._v(" "),a("div",{staticClass:"text-alight"},[e._v("--:"+e._s(t.planDetails.salesPlan.client.parentName))]),e._v(" "),t.planDetails&&t.planDetails.employee?a("div",{staticClass:"text-alight"},[e._v("\n                          "+e._s(t.planDetails.employee.name)+"\n                        ")]):e._e()]),e._v(" "),a("div",{staticClass:"item-right"},[a("div",{staticClass:"right-head"},[a("div",[e._v("最近发货概要(总需求量:"+e._s(t.planDetails.actualQuantity)+")")]),e._v(" "),e._l(t.billList.slice(-3),function(t,i){return a("div",{key:"m"+t.id},[a("div",{staticClass:"text-left"},[e._v(e._s(i+1)+": "+e._s(e._f("formatDateTime")(t.createDate))+" \n                              发货量:"+e._s(t.planNumber)+"\n\n                            ")])])})],2),e._v(" "),a("div",{staticClass:"right-bottom"},[a("el-tooltip",{attrs:{content:"查看发货记录"}},[a("span",{staticClass:"fa fa-leanpub",staticStyle:{padding:"4px",margin:"4px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.lookSendDetail(t)}}})])],1)])])])}),0),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentSePage,layout:"prev, pager, next",total:e.totalSeCount},on:{"current-change":e.currentSeChange}})],1),e._v(" "),0==e.plans.length?a("div",[e._v("\n                  暂无数据\n                ")]):e._e()])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isRecord,expression:"isRecord"}]},[a("div",{staticStyle:{"text-align":"right",padding:"0 100px 10px 0",color:"#2fc5da",cursor:"pointer"}},[a("el-tooltip",{attrs:{content:"返回"}},[a("span",{staticClass:"fa fa-fast-backward",on:{click:e.backMange}},[e._v("返回")])])],1),e._v(" "),a("div",[a("el-table",{attrs:{data:e.plansRecord,fit:"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"客户"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                      "+e._s(t.row.client.name)+"\n                    ")]}}],null,!1,1934796397)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                      "+e._s(t.row.planNumber)+"\n                    ")]}}],null,!1,2803447469)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"发货时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                      "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n                    ")]}}],null,!1,1161363414)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"货运单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                      "+e._s(t.row.dispatchBillNo)+"\n                    ")]}}],null,!1,287561863)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                      "+e._s(1===t.row.shipingStatus?"运输中":2===t.row.shipingStatus?"已到达":3===t.row.shipingStatus?"已签收":"未知")+"\n                    ")]}}],null,!1,3683690052)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                      "+e._s(t.row.notes)+"\n                    ")]}}],null,!1,711859102)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-tooltip",{attrs:{content:"修改"}},[a("span",{staticClass:"fa fa-pencil",staticStyle:{padding:"3px 4px 3px 4px",color:"#2fc5da"},attrs:{size:"mini"},on:{click:function(a){return e.visitChange(t.$index,t.row)}}})]),e._v(" "),a("el-tooltip",{attrs:{content:"新回访"}},[a("span",{staticClass:"fa fa-phone",staticStyle:{padding:"4px","margin-left":"5px",color:"#2fc5da"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.returnVisit(t.row)}}})])],1)]}}],null,!1,393101815)})],1)],1),e._v(" "),0==e.plansRecord.length?a("div",[e._v("\n                暂无数据\n              ")]):e._e(),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentVePage,layout:"prev, pager, next",total:e.totalVeCount},on:{"current-change":e.currentVeChange}})],1)])]),e._v(" "),e.showDetaillist?a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.detailsList,fit:"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"billstatus",align:"left",formatter:e.manageStatusFormat,label:"货物状态",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"回访人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.recorder.name)+"\n                ")]}}],null,!1,4270297134)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"回访时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n                ")]}}],null,!1,3229454806)}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-tooltip",{attrs:{content:"编辑"}},[a("span",{staticClass:"fa fa-pencil",staticStyle:{padding:"3px 4px 3px 4px",margin:"2px",color:"#2fc5da"},attrs:{size:"mini"},on:{click:function(a){return e.editeAsk(t.$index,t.row)}}})]),e._v(" "),a("el-tooltip",{attrs:{content:"删除"}},[0==t.row.id?a("span",{staticClass:"fa fa-trash",staticStyle:{padding:"3px 4px 3px 4px","margin-left":"5px",color:"red"},attrs:{size:"mini"},on:{click:function(a){return e.deleteAsk(t.$index,t.row)}}}):e._e()])],1)]}}],null,!1,2790397333)})],1)],1):e._e()],1)],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogSendTitle,"close-on-click-modal":!1,visible:e.dialogSendVisible,width:"1150px"},on:{"update:visible":function(t){e.dialogSendVisible=t},close:e.cancelSend}},[e.dialogSendVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"sendForm",attrs:{model:e.confirmData,rules:e.rulesSend,size:"mini","label-width":"80px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"物流名:",prop:"clientId"}},[a("el-cascader",{staticClass:"send-input",staticStyle:{width:"400px"},attrs:{placeholder:"--选择物流公司--",options:e.clients,props:e.clientProps},model:{value:e.confirmData.clientId,callback:function(t){e.$set(e.confirmData,"clientId",t)},expression:"confirmData.clientId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"货名:",prop:"cargoName"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"货名"},model:{value:e.confirmData.cargoName,callback:function(t){e.$set(e.confirmData,"cargoName",t)},expression:"confirmData.cargoName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"数量:",prop:"planNumber"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",step:"1000",placeholder:"数量"},model:{value:e.confirmData.planNumber,callback:function(t){e.$set(e.confirmData,"planNumber",t)},expression:"confirmData.planNumber"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收货地:",prop:"address"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"收货地址"},model:{value:e.confirmData.address,callback:function(t){e.$set(e.confirmData,"address",t)},expression:"confirmData.address"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收货人:",prop:"consignee"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"收货人"},model:{value:e.confirmData.consignee,callback:function(t){e.$set(e.confirmData,"consignee",t)},expression:"confirmData.consignee"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"电话:",prop:"consigneePhone"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",min:"0",placeholder:"收货人电话"},model:{value:e.confirmData.consigneePhone,callback:function(t){e.$set(e.confirmData,"consigneePhone",t)},expression:"confirmData.consigneePhone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"方式:",prop:"stype"}},[a("el-select",{staticClass:"send-input",attrs:{filterable:"",placeholder:"----支付方式----"},model:{value:e.confirmData.stype,callback:function(t){e.$set(e.confirmData,"stype",t)},expression:"confirmData.stype"}},e._l(e.payCode,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"服务:",prop:"serviceCode"}},[a("el-select",{staticClass:"send-input",attrs:{filterable:"",placeholder:"----请选择服务方式----"},model:{value:e.confirmData.serviceCode,callback:function(t){e.$set(e.confirmData,"serviceCode",t)},expression:"confirmData.serviceCode"}},e._l(e.serviceCodes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"回单:",prop:"receipt"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"回单信息"},model:{value:e.confirmData.receipt,callback:function(t){e.$set(e.confirmData,"receipt",t)},expression:"confirmData.receipt"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"上门费:",prop:"shortHaulMoney"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",step:"10",placeholder:"上门费"},model:{value:e.confirmData.shortHaulMoney,callback:function(t){e.$set(e.confirmData,"shortHaulMoney",t)},expression:"confirmData.shortHaulMoney"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"详情:",prop:"freightDetails"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"运费详情"},model:{value:e.confirmData.freightDetails,callback:function(t){e.$set(e.confirmData,"freightDetails",t)},expression:"confirmData.freightDetails"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发货人:",prop:"consigner"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"发货人"},model:{value:e.confirmData.consigner,callback:function(t){e.$set(e.confirmData,"consigner",t)},expression:"confirmData.consigner"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"电话:",prop:"consignerPhone"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"发货人电话"},model:{value:e.confirmData.consignerPhone,callback:function(t){e.$set(e.confirmData,"consignerPhone",t)},expression:"confirmData.consignerPhone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收货款:",prop:"collFreight"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",placeholder:"代收货款"},model:{value:e.confirmData.collFreight,callback:function(t){e.$set(e.confirmData,"collFreight",t)},expression:"confirmData.collFreight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"大写:",prop:"collFreightBig"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",disabled:!0,placeholder:"代收货款大写"},model:{value:e.confirmData.collFreightBig,callback:function(t){e.$set(e.confirmData,"collFreightBig",t)},expression:"confirmData.collFreightBig"}})],1)],1)],1),e._v(" "),a("el-row"),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单号:",prop:"dispatchBillNo"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"单号"},model:{value:e.confirmData.dispatchBillNo,callback:function(t){e.$set(e.confirmData,"dispatchBillNo",t)},expression:"confirmData.dispatchBillNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"运费:",prop:"freights"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",placeholder:"运费"},model:{value:e.confirmData.freights,callback:function(t){e.$set(e.confirmData,"freights",t)},expression:"confirmData.freights"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"件数:",prop:"boxs"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",placeholder:"件数"},model:{value:e.confirmData.boxs,callback:function(t){e.$set(e.confirmData,"boxs",t)},expression:"confirmData.boxs"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"备注:",prop:"remarks"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"textarea",placeholder:"备注"},model:{value:e.confirmData.remarks,callback:function(t){e.$set(e.confirmData,"remarks",t)},expression:"confirmData.remarks"}})],1)],1)],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSendVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmAdd("sendForm")}}},[e._v("确 定")])],1)]),e._v(" "),e.dialogFormVisible?a("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"550px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addForm",attrs:{model:e.detail,rules:e.rules,size:"mini","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-form-item",{attrs:{label:"发货数量",prop:"planNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",step:"1000",placeholder:"发货数量"},model:{value:e.detail.planNumber,callback:function(t){e.$set(e.detail,"planNumber",t)},expression:"detail.planNumber"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"收货人",prop:"receiver"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"收货人"},model:{value:e.detail.receiver,callback:function(t){e.$set(e.detail,"receiver",t)},expression:"detail.receiver"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"联系方式",prop:"relation"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"联系人电话"},model:{value:e.detail.relation,callback:function(t){e.$set(e.detail,"relation",t)},expression:"detail.relation"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"收货方式:",prop:"receiveWay"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"----请选择----"},model:{value:e.detail.receiveWay,callback:function(t){e.$set(e.detail,"receiveWay",t)},expression:"detail.receiveWay"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"收货地址",prop:"destination"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"收货地址"},model:{value:e.detail.destination,callback:function(t){e.$set(e.detail,"destination",t)},expression:"detail.destination"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"备注",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"textarea",placeholder:"备注"},model:{value:e.detail.note,callback:function(t){e.$set(e.detail,"note",t)},expression:"detail.note"}})],1)],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addForm")}}},[e._v("确 定")])],1)]):e._e(),e._v(" "),a("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogVisitTitle,"close-on-click-modal":!1,visible:e.dialogVisitVisible,width:"900"},on:{"update:visible":function(t){e.dialogVisitVisible=t},close:e.cancelvisit}},[e.dialogVisitVisible?a("div",{staticStyle:{width:"100%","font-size":"12px"}},[a("el-table",{ref:"xTable",attrs:{border:"",fit:"",width:"100%",size:"mini","tooltip-effect":"light",model:e.visit,"highlight-current-row":"",data:e.detailsList}},[a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{label:"货物状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],on:{change:e.stateChage},model:{value:t.row.billstatus,callback:function(a){e.$set(t.row,"billstatus",a)},expression:"scope.row.billstatus"}},e._l(e.stateList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}]},[e._v(e._s(1===t.row.billstatus?"运输中":2===t.row.billstatus?"到达":3==t.row.billstatus?"签收":"未知"))])]}}],null,!1,1741803735)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],attrs:{placeholder:"请输入备注"},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.note,callback:function(a){e.$set(t.row,"note",a)},expression:"scope.row.note"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}]},[e._v(e._s(t.row.note))])]}}],null,!1,547291103)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"回访时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.createDate,expression:"scope.row.createDate"}]},[e._v(e._s(e._f("formatDateTime")(t.row.createDate)))])]}}],null,!1,3867666290)}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[[a("el-tooltip",{attrs:{content:"编辑"}},[null!=t.row.id?a("span",{staticClass:"fa fa-pencil btn-left",on:{click:function(a){return e.editRowEvent(t.$index,t.row)}}}):e._e()]),e._v(" "),a("el-tooltip",[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    "+e._s(t.row.show?"保存":"更新")+"\n                  ")]),e._v(" "),a("span",{staticClass:"fa fa-save btn-left",on:{click:function(a){return e.saveRowEvent(t.row)}}})]),e._v(" "),a("el-tooltip",{attrs:{content:"删除"}},[a("span",{staticClass:"fa fa-trash btn-left",on:{click:function(a){return e.cancelRowEvent(t.row)}}})])]]}}],null,!1,3022725060)})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisitVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addViist("addVisitForm")}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(l,o,!1,function(e){a("zfsx")},"data-v-2b853a7b",null);t.default=r.exports},"4K/P":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=a("bOdI"),s=a.n(n),l=a("zL8q"),o=a("dnay"),r=a("v2zK"),c=a("Kzbj"),d=a("ptqw"),u=a("XoE2"),p={data:function(){return{dialogset:"设置",dialogspecVisible:!1,dialoggressVisible:!1,dialogstepVisible:!1,dialogcolorVisible:!1,dialoguseVisible:!1,typeItems:[],tap:1,keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,colors:[],faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",keyUse:"",keyspeName:"",keycolorName:"",proTypes:[{id:"油罐车",name:"油罐车"},{id:"仪表",name:"仪表"},{id:"集装箱",name:"集装箱"},{id:"篷车",name:"篷车"}],units:[],rules:{producteName:[{required:!0,message:"必填:名称",trigger:"blur"}]},selectSteps:[],steps:[],products:[],dialogTitle:"",currentPage:1,totalCount:-1,process:{name:""},product:{producteName:"",specification:"",proType:"",color:"",clientName:"",clientId:"",sysUnitId:0,imageUrl:"",uploadName:""},processModel:{currentSteps:"",productId:0,processName:""},productId:"",currentProgress:[],addProgress:[],updateProgress:[],deleteProgress:[],olderProgress:[],midProduct:[],dialogTableVisible:!1,dialogFormVisible:!1,processVisible:!1,currentRowData:{},currentIndex:"",renderFunc:function(e,t){return console.log(t),console.log(e),t.workstepName},detail:{id:0,sid:0,midProductId:0,name:"",quantity:"",mtype:""},details:[],currentDeleteData:[],maxSid:0,clients:[],specs:[],depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},dialogMaterialTitle:"",dialogMaterialVisible:!1,keyMaterialwords:"",selectedM:{},totalMaterialCount:-1,currentMaterialPage:1,selectMaterial:{},currentSelectStepIds:[],imgVisible:!1,ImageUrl:""}},mounted:function(){this.initData()},components:{specs:o.default,color:r.default,step:c.default,gress:d.default,uses:u.default},methods:(i={uploadPic:function(e){var t=this;console.log(e);var a=new FormData,i=e.file;i&&(t.product.uploadName=i.name),a.append("file",i),t.uploadFileRequest("/uploadfile/file/upload",a).then(function(e){if(e&&200===e.status){var a=e.data;t.ImageUrl=a,t.product.imageUrl=a}})},handleRemove:function(e,t){console.log(e,t),this.ImageUrl=""},handlePictureCardPreview:function(e){this.ImageUrl=e.url,this.imgVisible=!0},handleCommand:function(e){switch(console.log(e),e){case"spec":this.dialogspecVisible=!0;break;case"stepCode":this.dialogstepVisible=!0;break;case"color":this.dialogcolorVisible=!0;break;case"step":this.dialoggressVisible=!0;break;case"modUse":this.dialoguseVisible=!0}},used:function(e){this.keyUse=e.name,e.num>0?(this.loadData(),this.tap=2):this.$message({type:"info",message:"暂无数据！"}),this.keyUse=""},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyData(),this.loadData()},showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyData(),this.loadData())},getRowClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0===t?"background:#F5F7FA":""},selcetSteps:function(){this.loadMaterial()},cancelchoose:function(){this.selectMaterial={},this.selectedM={}},deleteSelected:function(e,t){this.selectSteps.splice(e,1)},searchMaterialData:function(){this.loadMaterial()},keywordsMaterialChange:function(e){""==e&&this.loadMaterial()},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},currentMaterialChange:function(){this.currentMaterialPage=currentChange,this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectMaterial.id>0){var a=this.selectMaterial.name+";";this.$confirm("您当前选择了"+a+"确认选择该工序吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(){var e=this.selectMaterial;console.log(e);var t=!1;this.selectSteps.length&&this.selectSteps.forEach(function(a,i,n){a.id===e.id&&(t=!0)}),t||this.selectSteps.push(e),this.dialogMaterialVisible=!1},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productpreprocess/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(a){if(e.tableLoading=!1,a&&200===a.status){var i=a.data.data;t.materialList=i,t.totalMaterialCount=a.data.total,t.dialogMaterialVisible=!0}})},handleNodeClick:function(e){this.product.clientId=e.id,this.product.clientName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.product.clientId=0,this.product.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(a,i,n){a.id===e&&(t.detail.name=a.name,t.detail.midProductId=a.id)})},addBox:function(){var e=this;if(console.log("添加"),""===this.detail.quantity||void 0===this.detail.quantity)return Object(l.Message)("请输入数量"),!1;if(""===this.detail.name||void 0===this.detail.name)return Object(l.Message)("请选择物料"),!1;if(this.details.length>0){var t=!1;e.details.forEach(function(a,i,n){a.midProductId===e.detail.midProductId&&(t=!0,a.quantity=parseFloat(e.detail.quantity),"odd"===a.mtype&&(a.mtype="update"))}),t||(this.maxSid++,this.detail.sid=this.maxSid,this.detail.mtype="new",this.details.push(this.detail))}else this.detail.sid=1,this.detail.mtype="new",this.maxSid++,this.details.push(this.detail);this.emptyDetail()},editeDetail:function(e,t){this.detail=t},deleteDetail:function(e,t){console.log("delete");var a=this.details.splice(e,1);"odd"===a[0].mtype&&(a[0].mtype="delete",this.currentDeleteData.push(a[0])),this.maxSid--},emptyDetail:function(){this.detail={id:0,sid:0,midProductId:0,name:"",quantity:"",mtype:""},this.currentDeleteData=[]},cancelOpt:function(){this.tap=2,this.emptyDetail(),this.details=[],this.loadData()},cancelpre:function(){this.emptypressData(),this.processVisible=!1},initData:function(){this.loadData(),this.basedate()},basedate:function(){var e=this;this.getRequest("/product/basicdata").then(function(t){if(t&&200===t.status){var a=t.data;console.log("hehehe"),e.steps=a.root.steps,e.colors=a.root.colors,e.units=a.root.units,e.specs=a.root.specs,e.proTypes=a.root.uses,(a.root.productType||[]).forEach(function(t){e.typeItems.push({id:t[0],num:t[1],name:t[2]})});var i=[];a.root.midProducts.forEach(function(e){i.push({name:e[0],id:e[1]})}),e.midProduct=i}})},keywordsChange:function(e){""===e&&this.loadData()},handleChange:function(){},currentChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()}),addAndFlushEmp:function(){this.dialogTitle="添加",this.tap=3,this.emptyData()},addProcess:function(e){var t=this,a=this,i="";this.selectSteps.length&&(this.selectSteps.forEach(function(e,t,i){a.currentSelectStepIds.push(e.id)}),i=this.currentSelectStepIds.join(","));var n=this.product.id;this.getRequest("/product/addProcess?productId="+n+"&stepIds="+i).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data.data;a.processVisible=!1,a.loadData(),a.emptyData()}})},emptypressData:function(){this.processModel={currentSteps:"",productId:0,processName:""},this.currentProgress=[],this.addProgress=[],this.updateProgress=[],this.deleteProgress=[],this.olderProgress=[],this.selectSteps=[]},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.product=t,this.ImageUrl=t.imageUrl,this.product.proType=this.product.proType.split(",")||[],this.currentRowData=_.cloneDeep(t),this.currentIndex=e,delete this.product.clienteleid;var a=this.currentRowData.midMaterials||[];a.length>0&&(a.forEach(function(e,t,a){e.mtype="odd",e.sid=t+1}),this.details=a,this.maxSid=a.length);var i=[],n=[];this.product.specs.length&&this.product.specs.forEach(function(e){i.push(e.id)}),this.product.colors.length&&this.product.colors.forEach(function(e){n.push(e.id)}),this.product.specification=i,this.product.color=n,this.tap=3},add:function(e){var t=this,a=this,i=_.cloneDeep(this.product),n=a.details.concat(a.currentDeleteData),s="";n.length?(n.forEach(function(e){void 0===e.createDate&&(e.createDate=a.formatDate(new Date))}),s=this.jsonToString(n)):s="",i.midMaterials=s,i.clientId=0,null==i.preprosessId&&(i.preprosessId=0),console.log("productModel++"+i),i.specification=i.specification.join(","),i.colors=i.color.join(","),this.$refs[e].validate(function(e){if(!e)return Object(l.Message)("输入有误!"),!1;t.product.id?(a.tableLoading=!0,delete i.sysUnit,delete i.specs,a.postRequest("/product/posAdd",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.tap=2,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.product),t.postRequest("/product/addNew",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.tap=2,a.loadData(),a.emptyData())}))})},processCancel:function(){this.processVisible=!1},showProcessView:function(e){this.productId=e.id,this.product=e,console.log(e),this.selectSteps=[],this.olderProgress=[];var t=e.preprosess;if(t.length)for(var a=0;a<t.length;a++){var i=t[a];this.selectSteps.push(i)}this.processVisible=!0},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.producteName+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/product/deletPro?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;console.log("insts"),this.tableLoading=!0,this.getRequest("/product/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords+"&keyUse="+this.keyUse+"&keyspeName="+this.keyspeName+"&keycolorName="+this.keycolorName).then(function(a){e.tableLoading=!1,a&&200===a.status&&a.data.success&&(t.products=a.data.data,t.totalCount=a.data.total,t.emptyData())})}},s()(i,"searchData",function(){this.loadData()}),s()(i,"emptyData",function(){this.product={producteName:"",specification:"",proType:"",color:"",ImageUrl:""},this.currentSelectStepIds=[]}),i),computed:{routes:function(){return this.$store.state.routes}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticClass:"productbg"},[a("el-header",[a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"flex-start","text-align":"left","margin-left":"20px"}},[a("div",{staticClass:"fa fa-window-restore",class:{stamp:1===e.tap},staticStyle:{cursor:"pointer"},on:{click:function(t){e.tap=1}}},[e._v("产品分类（用途）\n            ")]),e._v(" "),a("div",{staticClass:"fa fa-list-ul",class:{stamp:2===e.tap},staticStyle:{"margin-left":"30px",cursor:"pointer"},on:{click:function(t){e.tap=2}}},[e._v("\n              列表展示\n            ")])]),e._v(" "),a("div",{staticStyle:{height:"100%","margin-left":"60px",display:"flex","flex-direction":"row","justify-content":"flex-start"}},[a("el-dropdown",{on:{command:e.handleCommand}},[a("el-button",{attrs:{icon:"el-icon-setting",type:"primary",size:"mini"}},[e._v("\n                设置"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"spec"}},[e._v("规格设置")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"stepCode"}},[e._v("工序设置")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"color"}},[e._v("颜色设置")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"step"}},[e._v("工序步骤设置")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"modUse"}},[e._v("用途设置")])],1)],1)],1)])]),e._v(" "),2===e.tap?a("el-container",{staticClass:"divce-mode"},[a("div",{staticClass:"product-header-style"},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0",padding:"0"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n            ")]),e._v(" "),a("el-button",{staticClass:"send-head-right-btn",attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:e.showAdvanceSearchView},slot:"reference"},[a("i",{staticClass:"fa fa-lg",class:[e.advanceSearchViewVisible?e.faangledoubleup:e.faangledoubledown],staticStyle:{"margin-right":"5px"}}),e._v("高级搜索\n            ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-main",{staticStyle:{margin:"0 20px"}},[a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticClass:"send-main-div"},[a("el-row",[a("el-col",{attrs:{span:8}},[e._v("\n                  用途:\n                  "),a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"用途。。。"},model:{value:e.keyUse,callback:function(t){e.keyUse=t},expression:"keyUse"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                  规格:\n                  "),a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"规格。。。"},model:{value:e.keyspeName,callback:function(t){e.keyspeName=t},expression:"keyspeName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                  颜色:\n                  "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"颜色。。。"},model:{value:e.keycolorName,callback:function(t){e.keycolorName=t},expression:"keycolorName"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"flex-end"}},[a("el-col",{attrs:{span:5,offset:4}},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelSearch}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.searchData}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.products,fit:"","highlight-current-row":""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"left",fixed:"",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.producteName?a("span",[e._v(e._s(t.row.producteName))]):a("span",[e._v("'未知'")])]}}],null,!1,3455661790)}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"left",label:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.specName?a("span",[e._v(e._s(t.row.specName))]):a("span",[e._v("'未知'")])]}}],null,!1,3664517694)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"用途"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.proType?a("span",[e._v(e._s(t.row.proType))]):a("span",[e._v("'未知'")])]}}],null,!1,2153592254)}),e._v(" "),a("el-table-column",{attrs:{sortable:"",align:"left",label:"颜色"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.colorName?a("span",[e._v(e._s(t.row.colorName))]):a("span",[e._v("'未知'")])]}}],null,!1,1392572286)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.sysUnit?a("span",[e._v(e._s(t.row.sysUnit.name))]):a("span",[e._v("'未知'")])]}}],null,!1,4185842359)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showProcessView(t.row)}}},[e._v("\n                  查看工序\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n                ")])]}}],null,!1,1264445810)})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)],1):3===e.tap?a("el-container",[a("el-header",[a("el-button",{attrs:{type:"warning",icon:"el-icon-caret-left",circle:""},on:{click:e.cancelOpt}})],1),e._v(" "),a("el-main",{staticStyle:{height:"100%"}},[a("el-form",{ref:"addEmpForm",staticStyle:{display:"flex","flex-direction":"column","justify-content":"center"},attrs:{model:e.product,"label-position":"right",rules:e.rules,size:"small","label-width":"100px"}},[a("el-row",{staticClass:"product-form-item"},[a("div",[e._v("\n                  名称:\n                ")]),e._v(" "),a("div",[a("el-input",{staticClass:"product-input-btn-class",staticStyle:{border:"none",width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"名称"},model:{value:e.product.producteName,callback:function(t){e.$set(e.product,"producteName",t)},expression:"product.producteName"}})],1)]),e._v(" "),a("el-row",{staticClass:"product-form-item"},[a("div",[e._v("\n                  用途:\n                ")]),e._v(" "),a("div",[a("el-select",{staticClass:"product-input-btn-class",staticStyle:{width:"200px"},attrs:{multiple:"",size:"mini",filterable:"",remote:"",placeholder:"---请选择---"},model:{value:e.product.proType,callback:function(t){e.$set(e.product,"proType",t)},expression:"product.proType"}},e._l(e.proTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1)]),e._v(" "),a("el-row",{staticClass:"product-form-item"},[a("div",[e._v("\n                  颜色:\n                ")]),e._v(" "),a("div",[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",remote:"",multiple:"",size:"mini",placeholder:"请选择产品颜色"},model:{value:e.product.color,callback:function(t){e.$set(e.product,"color",t)},expression:"product.color"}},e._l(e.colors,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)]),e._v(" "),a("el-row",{staticClass:"product-form-item"},[a("div",[e._v("\n                  规格:\n                ")]),e._v(" "),a("div",[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",multiple:"",size:"mini",placeholder:"请选择规格"},model:{value:e.product.specification,callback:function(t){e.$set(e.product,"specification",t)},expression:"product.specification"}},e._l(e.specs,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)]),e._v(" "),a("el-row",{staticClass:"product-form-item"},[a("div",[e._v("\n                  单位:\n                ")]),e._v(" "),a("div",[a("el-select",{staticClass:"product-input-btn-class",staticStyle:{width:"200px"},attrs:{filterable:"",remote:"",size:"mini",placeholder:"请选择产品颜色"},model:{value:e.product.sysUnitId,callback:function(t){e.$set(e.product,"sysUnitId",t)},expression:"product.sysUnitId"}},e._l(e.units,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)]),e._v(" "),a("el-row",{staticClass:"product-form-item"},[a("div",[e._v("\n                  备注:\n                ")]),e._v(" "),a("div",[a("el-input",{staticClass:"product-input-btn-class",staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.product.note,callback:function(t){e.$set(e.product,"note",t)},expression:"product.note"}})],1)]),e._v(" "),a("el-row",[e._v("\n                产品图片：\n                "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":e.uploadPic,"show-file-list":!1,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[e.ImageUrl?a("img",{staticClass:"avatar",attrs:{src:e.ImageUrl}}):a("i",{staticClass:"el-icon-plus "})]),e._v(" "),a("el-dialog",{attrs:{visible:e.imgVisible},on:{"update:visible":function(t){e.imgVisible=t}}},[a("img",{attrs:{width:"100%",src:e.ImageUrl,alt:""}})])],1),e._v(" "),a("div",{staticStyle:{"text-align":"center",padding:"0 0 12px 0"}},[a("span",{staticClass:"labels-style"},[e._v("消耗原料清单: ")])]),e._v(" "),a("el-row",{staticClass:"product-form-item"},[a("div",[e._v("原料:")]),e._v(" "),a("div",[a("el-select",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"mini",placeholder:"请选择原料"},on:{change:e.matterSelect,clear:e.emptyDetail},model:{value:e.detail.name,callback:function(t){e.$set(e.detail,"name",t)},expression:"detail.name"}},e._l(e.midProduct,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})}),1)],1)]),e._v(" "),a("el-row",{staticClass:"product-form-item"},[a("div",[e._v("\n                原料数量:\n              ")]),e._v(" "),a("div",[a("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit",min:"0",type:"number"},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}})],1)]),e._v(" "),a("span",{staticClass:"fa fa-plus",staticStyle:{color:"blue"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addBox(t)}}},[e._v(" 添加")]),e._v(" "),a("el-row",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"center"}},[0!==e.details.length?a("div",{staticStyle:{width:"100%",display:"flex","flex-direction":"column","justify-content":"center"}},e._l(e.details,function(t,i,n){return a("div",{key:t.sid,staticStyle:{width:"100%"}},[e._v("\n                    "+e._s(t.sid)+"\n                    "+e._s(t.quantity)+"\n                    "+e._s(t.name)+"\n                    "),a("span",{on:{click:function(a){return e.editeDetail(n,t)}}},[e._v(" 编辑")]),e._v(" "),a("span",{on:{click:function(a){return e.deleteDetail(n,t)}}},[e._v(" 删除")])])}),0):a("div",{staticStyle:{width:"100%","text-align":"center"}},[e._v("\n                  暂无原料\n                ")])])],1),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:e.cancelOpt}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add("addEmpForm")}}},[e._v("确 定")])],1)],1)],1):a("el-container",{staticClass:"product-model-base"},e._l(e.typeItems,function(t){return a("div",{key:t.id,staticClass:"product-model-item",on:{click:function(a){return e.used(t)}}},[a("span",{staticClass:"fa fa-bomb"}),e._v(" "),a("span",[e._v(e._s(t.name))]),e._v(" "),a("span",[e._v("（"+e._s(t.num)+"）")])])}),0)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"}],ref:"dialog__wrapper",staticStyle:{padding:"0",height:"900px",overflow:"hidden","overflow-y":"scroll"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"450px",center:"","destroy-on-close":"","header-cell-style":e.getRowClass},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}}),e._v(" "),a("el-dialog",{staticStyle:{padding:"0"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n            ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.name)+"\n            ")]}}],null,!1,1106356250)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"流程"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-steps",{attrs:{space:"20%","align-center":""}},e._l(t.row.process,function(e,t){return a("el-step",{key:t,staticClass:"detail",attrs:{title:e.name}})}),1)]}}],null,!1,2149232586)})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v("\n      .\n      "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-form",{ref:"processForm",attrs:{model:e.process,rules:e.rules,size:"small","label-width":"90px"}},[a("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.processVisible,width:"600px"},on:{"update:visible":function(t){e.processVisible=t},close:e.cancelpre}},[e.processVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{"text-align":"end"}},[a("el-button",{staticStyle:{padding:"6px 8px 6px 8px",margin:"2px"},attrs:{type:"success",size:"mini"},on:{click:e.selcetSteps}},[e._v("\n              +工序步骤\n            ")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.selectSteps,fit:"",border:""}},[a("el-table-column",{attrs:{align:"left",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteSelected(t.$index,t.row)}}},[e._v("删除\n                ")])]}}],null,!1,2485244149)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"工序名",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.name)+"\n              ")]}}],null,!1,3907821594)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"流程"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-steps",{attrs:{space:"20%","align-center":""}},e._l(t.row.process,function(e,t){return a("el-step",{key:t,staticClass:"detail",attrs:{title:e.name}})}),1)]}}],null,!1,2149232586)})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.processVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addProcess("processForm")}}},[e._v("确 定")])],1)])],1),e._v(" "),a("el-dialog",{staticStyle:{padding:"0"},attrs:{title:e.dialogset,"close-on-click-modal":!1,visible:e.dialogspecVisible,width:"500px"},on:{"update:visible":function(t){e.dialogspecVisible=t},close:e.cancelOpt}},[a("div",[a("specs")],1)]),e._v(" "),a("el-dialog",{staticStyle:{padding:"0"},attrs:{title:e.dialogset,"close-on-click-modal":!1,visible:e.dialogcolorVisible,width:"500px"},on:{"update:visible":function(t){e.dialogcolorVisible=t},close:e.cancelOpt}},[a("div",[a("color")],1)]),e._v(" "),a("el-dialog",{staticStyle:{padding:"0"},attrs:{title:e.dialogset,"close-on-click-modal":!1,visible:e.dialogstepVisible,width:"500px"},on:{"update:visible":function(t){e.dialogstepVisible=t},close:e.cancelOpt}},[a("div",[a("step")],1)]),e._v(" "),a("el-dialog",{staticStyle:{padding:"0"},attrs:{title:e.dialogset,fullscreen:!0,"close-on-click-modal":!1,visible:e.dialoggressVisible,width:"500px"},on:{"update:visible":function(t){e.dialoggressVisible=t},close:e.cancelOpt}},[a("div",[a("gress")],1)]),e._v(" "),a("el-dialog",{staticStyle:{padding:"0"},attrs:{title:e.dialogset,"close-on-click-modal":!1,visible:e.dialoguseVisible,width:"500px"},on:{"update:visible":function(t){e.dialoguseVisible=t},close:e.cancelOpt}},[a("div",[a("uses")],1)])],1)},staticRenderFns:[]};var f=a("VU/8")(p,h,!1,function(e){a("xNd/")},null,null);t.default=f.exports},"4b6G":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"ZtDialog",props:{ztDialogClass:{type:String,default:""},isShow:{type:Boolean,default:!1,required:!0},widNum:{type:String,default:"86.5"},heightNum:{type:String,default:"300"},leftSite:{type:String,default:"0"},topDistance:{type:String,default:"35"},pdt:{type:String,default:"0"},pdb:{type:String,default:"0"}},methods:{closeMyself:function(){this.$emit("on-close")}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog"},[e.isShow?a("div",{staticClass:"dialog-cover back",on:{click:e.closeMyself}}):e._e(),e._v(" "),a("transition",{attrs:{name:"drop"}},[e.isShow?a("div",{staticClass:"dialog-content",staticStyle:{margin:"0 auto"},style:{top:e.topDistance+"px",width:e.widNum+"px",left:e.leftSite+"px",height:e.heightNum+"px"}},[a("div",{staticStyle:{width:"100%","text-align":"right"}},[e._t("header",[e._v("表头")])],2),e._v(" "),e._t("main"),e._v(" "),a("div",{staticClass:"foot_close",on:{click:e.closeMyself}},[a("div",{staticClass:"close_img back"})])],2):e._e()])],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("spHa")},"data-v-7d3def91",null);t.default=s.exports},"4d3/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),s={data:function(){return{productsList:[],dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{productId:[{required:!0,message:"必选:产品名称",trigger:"change"}],proNumber:[{required:!0,message:"必选:数量",trigger:"blur"}]},products:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,product:{proName:"",productId:"",proNumber:"",clientName:"",note:"",clientId:""},deps:[],posts:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pId:"",pName:""}},mounted:function(){this.initData()},methods:{formatSex:function(e,t){return"1"==e.gender?"男":"2"==e.gender?"女":"未知"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.product.clientName=e.name,this.product.clientId=e.id,this.pId=e.id,this.pName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.product.clientName="",this.product.clientId=""},cancelChoos:function(){console.log(this.pName),this.product.clientName=this.pName,this.product.clientId=this.pId},initData:function(){var e=this;e.loadData(),this.getRequest("/finishedProduct/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.products=a.root.pruducts}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushData:function(){this.dialogTitle="添加",this.emptyEmpData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadData()},showEditView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.product=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.product.name=t.name,this.product.positionId=t.positionId,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.product.id?(t.tableLoading=!0,console.log(t.product),t.postRequest("/finishedProduct/add",t.product).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyEmpData())})):(t.tableLoading=!0,console.log(a.product),t.postRequest("/finishedProduct/add",t.product).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyEmpData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/finishedProduct/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/finishedProduct/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.productsList=i,t.totalCount=a.data.total,t.emptyEmpData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyEmpData:function(){console.log("+++++_+++++_"),this.product={proName:"",productId:"",proNumber:"",clientName:"",note:"",clientId:""}}},computed:{routes:function(){return this.$store.state.routes}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0",padding:"0"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n      ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("添加")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.productsList,fit:"","highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{align:"left",label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.product?a("div",[e._v("\n        "+e._s(t.row.product.producteName)+"\n        ")]):a("div",[e._v("\n          暂无\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"proNumber",align:"left",label:"产品数量"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(null==t.row.note?"无":t.row.note)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.product,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"产品名称:",prop:"productId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择职位"},model:{value:e.product.productId,callback:function(t){e.$set(e.product,"productId",t)},expression:"product.productId"}},e._l(e.productes,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"客户:",prop:"clientId"}},[a("el-popover",{attrs:{placement:"right",title:"请选择公司",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.shops,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",size:"mini",clearable:""},on:{clear:e.clearChoose,blur:e.cancelChoos},model:{value:e.product.clientName,callback:function(t){e.$set(e.product,"clientName",t)},expression:"product.clientName"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"产品数量:",prop:"proNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品数量..."},model:{value:e.product.proNumber,callback:function(t){e.$set(e.product,"proNumber",t)},expression:"product.proNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注..."},model:{value:e.product.note,callback:function(t){e.$set(e.product,"note",t)},expression:"product.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("tvoH")},null,null);t.default=o.exports},"59MU":function(e,t){},"5xx1":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),n=a.n(i),s={data:function(){var e;return e={tempPlan:[],confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midConfirms:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]},n()(e,"advanceSearchViewVisible",!1),n()(e,"faangledoubleup","fa-angle-double-up"),n()(e,"faangledoubledown","fa-angle-double-down"),n()(e,"keyproductName",""),n()(e,"keyClientName",""),n()(e,"keyempName",""),e},mounted:function(){this.initData()},methods:{showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyData(),this.loadData())},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyData(),this.loadData()},handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.middleProduct.utilname=a.name)})},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var a="",i=e.plant;return this.positions.forEach(function(e,t,n){i.forEach(function(t,i,n){e.id===t&&(a+=e.name+" , ")})}),a},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){this.loadData()},keywordsChange:function(e){""===e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midProgressRecieve/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200===e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midProgressRecieve/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){e.tableLoading=!1,a&&200===a.status&&(t.midConfirms=a.data.data,t.totalCount=a.data.total)})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticClass:"send-head"},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticClass:"send-head-left-btn",attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}}),e._v(" "),a("el-button",{staticClass:"send-head-right-btn",attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:e.showAdvanceSearchView},slot:"reference"},[a("i",{staticClass:"fa fa-lg send-head-left-btn",class:[e.advanceSearchViewVisible?e.faangledoubleup:e.faangledoubledown]}),e._v("高级搜索\n          ")])],1)]),e._v(" "),a("el-main",{staticClass:"send-main"},[a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticClass:"send-main-div"},[a("el-row",[a("el-col",{attrs:{span:8}},[e._v("\n              产品:\n              "),a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品名称。。。"},model:{value:e.keyproductName,callback:function(t){e.keyproductName=t},expression:"keyproductName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n              客户:\n              "),a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"客户名。。。"},model:{value:e.keyClientName,callback:function(t){e.keyClientName=t},expression:"keyClientName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n              操作人:\n              "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"员工名。。。"},model:{value:e.keyempName,callback:function(t){e.keyempName=t},expression:"keyempName"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"flex-end"}},[a("el-col",{attrs:{span:5,offset:4}},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelSearch}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.searchData}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midConfirms,fit:"",border:"",onsort:""}},[a("el-table-column",{attrs:{align:"left",prop:"name",fixed:"",label:"名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"记录人",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.operator.name)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"记录时间",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"备注",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(null===t.row.notes?"无":""===t.row.notes?"无":t.row.notes)+"\n          ")]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("ElOK")},null,null);t.default=o.exports},"6+aJ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{value:new Date,infos:[{id:1,note:"明天下雨明天下雨明天下雨明天下雨明天下雨明天下雨明天下雨明天下雨明天下雨明天下雨明天下雨明天下雨明天下雨明天下雨"},{id:7,note:"今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨"},{id:6,note:"今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨"},{id:4,note:"今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨"},{id:5,note:"今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨"},{id:3,note:"今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨"},{id:2,note:"今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨今天下雨"}]}},methods:{}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"main-container"},[a("el-main",{staticClass:"main-main"},[a("div",{staticClass:"main-left"},[a("div",{staticClass:"main-left-ceil"},[e._v("最近操作记录")]),e._v(" "),a("div",{staticClass:"main-left-floor"},[a("div",{staticClass:"floor-left"},[a("Calendar",{staticStyle:{width:"100%",height:"400px"},attrs:{selection:e.value},on:{selectionChange:function(t){e.newDate=t}}})],1),e._v(" "),a("div",{staticClass:"floor-right"},[e._v("会议记录")])])]),e._v(" "),a("div",{staticClass:"main-right"},[a("div",{staticClass:"main-right-ceil"},[a("div",{staticStyle:{height:"100%",width:"100%"}},[a("div",[e._v("\n            通知\n          ")]),e._v(" "),a("div",e._l(e.infos,function(t){return a("div",{key:t.id},[t.note?a("div",{staticClass:"infor-itmes"},[e._v(e._s(t.note))]):e._e()])}),0)])]),e._v(" "),a("div",{staticClass:"main-right-floor"},[a("div",{staticClass:"dirty"},[e._v("\n\n          值日消息\n        ")]),e._v(" "),a("div",{staticClass:"dirty-ifor"},[e._v("\n          小洁。。小灰。。大黄\n        ")])])])])],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("C//e")},"data-v-180cc824",null);t.default=s.exports},"67fi":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("4K/P"),n=a("dnay"),s=a("v2zK"),l=a("Kzbj"),o=a("ptqw"),r={data:function(){return{activeName:"product"}},methods:{detials:function(e){this.$router.replace({path:e.path})}},components:{Products:i.default,specs:n.default,color:s.default,step:l.default,gress:o.default},computed:{stepOpt:function(){var e={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(t){"/empbase"===t.path&&(e=t)}),console.log(e.id);var t=[];return this.$store.state.routes.forEach(function(a){a.parentId===e.id&&t.push(a)}),console.log(t),t||[]}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{display:"flex","flex-direction":"column","font-size":"14px"}},[a("div",{staticStyle:{"margin-left":"20px","line-height":"30px",height:"30px","text-align":"start","padding-left":"20px","border-left":"4px solid red","font-weight":"700"}},[e._v("\n       人事管理\n     ")]),e._v(" "),a("el-main",{staticClass:"product-base"},e._l(e.stepOpt,function(t){return a("div",{key:t.id,staticClass:"product-item",on:{click:function(a){return e.detials(t)}}},[a("div",{staticClass:"item-left"},[a("div",{staticStyle:{margin:"60px 0","font-size":"16px"}},[a("span",{staticClass:"fa fa-product-hunt",staticStyle:{display:"block"}}),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v(e._s(t.name))])])]),e._v(" "),a("div",{staticClass:"item-right"})])}),0)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(r,c,!1,function(e){a("Q9bC")},null,null);t.default=d.exports},"6HRJ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("c/Tr"),s=a.n(i),l=a("bOdI"),o=a.n(l),r=a("zL8q"),c=a("4b6G"),d=(a("3L9A"),{components:{ZtCascader:a("FYbY").default,ZtDialog:c.default},data:function(){var e;return e={rules:{productNo:[{required:!0,message:"必选:产品",trigger:"blur"}],quantity:[{required:!0,message:"必填:数量",trigger:"blur"}],colorId:[{required:!0,message:"必选:颜色",trigger:"blur"}],specsId:[{required:!0,message:"必选:规格",trigger:"blur"}]},shoplist:[],shopchildren:[],CurrentSalesId:0,dialogsendTitle:"",sendOptions:[{value:"自提",label:"自提"},{value:"送货上门",label:"送货上门"},{value:"其他(备注)",label:"其他(备注)"}],sendDetail:{id:0,planNumber:"",note:"",expectLevel:"",salePlanId:""},dialogSendVisible:!1,isbatch:!1,showDialog:!1,recordStr:[],typeItems:[{value:1,name:"新订单"},{value:2,name:"进行中"},{value:3,name:"完成"},{value:4,name:"撤销"},{value:5,name:"汇总"}],tap:1,options:[{value:1,label:"普通"},{value:2,label:"急需"},{value:3,label:"加急"}],options2:[{value:1,label:"普通"},{value:2,label:"急需"},{value:3,label:"加急"}],conName:"选择公司",selectedStep:{},lastPlanDetail:{startNo:"J00000001",endNo:"J00000100"},myDialog:{height:"800px"},lastPlanmarketPlanDetails:[{startNo:"J00000001",endNo:"J00000100"},{startNo:"K00000001",endNo:"K00000100"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,types:2,midProduct:[],plans:[],plansList:[],clients:[],units:[],dialogTitle:"",currentPage:1,currentDetailPage:1,totalDatailPage:-1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,detail:{id:0,clientId:[],productNo:"",notes:"",quantity:"",proId:"",specsId:"",colorId:"",shopId:"",shopchildId:""},currentAllClients:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{value:"id",label:"name",children:"child",expandTrigger:"click"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择产品",selectMaterial:{},selectedM:{},filterText:"",crrentSelectShop:{},isCurrentShop:!0,isprarent:!1,sugestParentstartNo:"",sugestParentEndNo:"",sugestSelfEndNumbers:"",sugestSelfNumbers:"",currentParentShop:{},currentShop:{}},o()(e,"lastPlanDetail",{startNo:"",endNo:""}),o()(e,"noClient",[]),o()(e,"serialNuberDeleted",[]),o()(e,"serialNuberUpdate",[]),o()(e,"serialNuberList",[]),o()(e,"specslist",[]),o()(e,"colorlist",[]),o()(e,"selectPreStep",{}),o()(e,"selectSteps",[]),o()(e,"activePanel","1"),o()(e,"manageStatus","1"),o()(e,"plandetaillist",[]),o()(e,"showDetaillist",!1),o()(e,"showPlan",!0),o()(e,"detailPage",1),o()(e,"currentPlanId",""),o()(e,"advanceSearchViewVisible",!1),o()(e,"faangledoubleup","fa-angle-double-up"),o()(e,"faangledoubledown","fa-angle-double-down"),o()(e,"keyproductName",""),o()(e,"keyClientName",""),o()(e,"keyempName",""),o()(e,"startDate",""),o()(e,"endDate",""),o()(e,"dialogRecordVisible",!1),o()(e,"showOrHidePop2",!1),o()(e,"clientNamelist",[]),o()(e,"checked",!0),o()(e,"expectLevel",""),o()(e,"detailIDs",""),o()(e,"productionPlans",[]),e},mounted:function(){this.initData()},filters:{filterContent:function(e){return e.length?e.map(function(e){return e.label}).join("/"):""}},methods:{deliverySendRecord:function(e,t){this.$router.replace({path:"/productionsend"})},deliveryRequest:function(e,t){var a=this;this.dialogsendTitle="发货请求",this.sendDetail.salePlanId=t.id,this.CurrentSalesId=t.id,t.resendId?this.getRequest("/shippingrequestdetails/findById?id="+t.resendId).then(function(e){if(e&&200===e.status){var t=e.data.root.shipdetail;a.sendDetail={id:t.id,planNumber:t.planNumber,expectLevel:t.expectLevel,note:t.note,salePlanId:t.salePlanId},a.dialogSendVisible=!0}else a.$message({title:"查询失败"})}):this.dialogSendVisible=!0},cancelSenddetail:function(){this.clearSendDetail(),this.dialogSendVisible=!1},revokeBeg:function(){var e=this;this.getRequest("/shippingrequestdetails/revokebeg?id="+this.sendDetail.id).then(function(t){t&&200===t.status&&t.data.success&&(e.cancelSenddetail(),e.loadData())})},clearSendDetail:function(){this.sendDetail={id:0,planNumber:"",note:"",expectLevel:"",salePlanId:""}},addSend:function(e){var t=this;console.log("fastsong");var a=this,i=_.cloneDeep(this.sendDetail);console.log(i),this.$refs[e].validate(function(e){if(!e)return!1;a.sendDetail.id?(t.tableLoading=!0,t.postRequest("/shippingrequestdetails/updatePlan",i).then(function(e){e&&200===e.status&&(a.dialogSendVisible=!1,a.loadPlans(),a.clearSendDetail())})):(t.tableLoading=!0,t.postRequest("/shippingrequestdetails/addPlan?salesPlanId="+a.CurrentSalesId,i).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success?(a.dialogSendVisible=!1,a.loadPlans(),a.clearSendDetail()):Object(r.Message)("添加失败")}))})},batchEdit:function(){var e=[];if(this.plansList.map(function(t,a){t.checked&&e.push(t.id)}),e.length){if(e=e.join(","),""===this.expectLevel)return this.$message({type:"info",message:"请选择等级!"}),!1;this.batchimp(e,this.expectLevel)}},batchimp:function(e,t){var a=this;this.getRequest("/sales/batchEdit?ids="+e+"&important="+t).then(function(e){if(!e||200!==e.status||!e.data.success)return a.$message({type:"info ",message:"修改失败！"}),!1;a.isbatch=!1,a.loadData()})},handleClientChange:function(e,t){console.log(t),this.noClient=t},chooseShop:function(e){e.checked=!e.checked},showDepTree2:function(){console.log("clickd"),this.showOrHidePop2=!this.showOrHidePop2},closeDialog:function(){this.showDialog=!1,this.emptyData(),this.loadData()},cancelRecord:function(){this.recordStr=[]},showSend:function(e){console.log(e),e.planString?this.recordStr=e.planString.split(";"):this.recordStr=[],this.dialogRecordVisible=!0},used:function(e){this.handleClick("","",e.value+"")},showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyData(),this.loadData())},cancelSearch:function(){this.keyproductName="",this.keyClientName="",this.keyempName="",this.advanceSearchViewVisible=!1,this.loadData()},getArray:function(e){var t=this,a=[];s()(e).forEach(function(e){if(a.push(e),e.child&&e.child.length>0){var i=t.getArray(e.child);a=a.concat(i)}});return a},handleClick:function(e,t,a){console.log(a);var i=void 0;switch(a&&""!==a?(i=a,this.activePanel=a,this.tap=2):i=this.activePanel,i){case"1":this.manageStatus="1";break;case"2":this.manageStatus="2";break;case"3":this.manageStatus="3";break;case"4":this.manageStatus="4";break;case"7":this.manageStatus=""}"2"===this.manageStatus?this.loadPlans():this.loadData()},cancelPlan:function(e){var t=this;this.$confirm("此操作将撤销该销售计划, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doCancel(e.id)}).catch(function(){})},showplanDetail:function(e){this.currentPlanId=e.id,this.showPlanDe()},showPlanDe:function(){var e=this;this.getRequest("/productionplandetails/findPlan?salesPlanId="+this.currentPlanId+"&page="+this.currentDetailPage+"&size=10").then(function(t){if(e.tableLoading=!1,t&&200===t.status&&t.data.success){if(e.plandetaillist=t.data.data||[],e.totalDatailPage=t.data.total,!e.plandetaillist.length)return e.$message({type:"info ",message:"未开始生产！"}),!1;e.showDetaillist=!0,e.showPlan=!1}})},doCancel:function(e){var t=this;this.tableLoading=!0,this.getRequest("/sales/annul?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&t.loadData()})},statusFormat:function(e){var t="";switch(e.status){case 1:t="新建";break;case 2:t="开始生产";break;case 3:t="生产完成";break;case 4:t="生产撤销"}return t},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},showMaterial:function(){console.log("showMaterial"),this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectMaterial.id>0){var a=this.selectMaterial.producteName+""+this.selectMaterial.specName+";";this.$confirm("您当前选择了"+a+"确认选择该产品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(){var e=this.selectMaterial;console.log(e),this.detail.productName=e.producteName,this.detail.proId=e.id,this.detail.specification="",this.specslist=e.specs||[],this.specslist.length&&(this.detail.specsId=this.specslist[0].id),this.colorlist=e.colors||[],this.colorlist.length&&(this.detail.colorId=this.colorlist[0].id),this.detail.productNo=e.proType,this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectMaterial={},this.selectedM={}},formatStatus:function(e,t){return 1==e.materialType?"已确认":"未确认"},selectType:function(e,t,a){console.log("changne"),this.types=e,2===e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(a,i,n){a.id===e&&t.detail&&(t.detail.unitId=a.unitId,t.detail.unitName=a.unitName,t.detail.name=a.name,t.detail.materialId=a.id,t.detail.specifications=a.specs)})},deleteDetail:function(e,t){console.log("delete");var a=this.marketPlanDetails.splice(e,1);"odd"===a[0].type&&(a[0].type="delete",this.currentDeleteData.push(a[0])),this.maxSid-=1},emptyDetail:function(){this.detail={sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",specifications:"",type:""}},initData:function(){var e=this,t=this;t.loadData(),console.log("销售initData"),this.getRequest("/productionplan/basedata").then(function(a){if(a&&200===a.status){var i=a.data;e.currentAllClients=i.root.clients,t.clients=t.toTree(i.root.clients),t.shoplist=t.clients,console.log(t.shoplist),t.midProduct=[],t.midProduct=t.materials.concat(t.midProduct);var n=[];i.root.products.forEach(function(e,t,a){n.push({id:e[0],producteName:e[1],specification:e[2],proType:e[3],mark:e[4],color:e[5]})}),t.products=n}})},currentSelectShop:function(e){console.log(e);var t=this;this.shoplist.length&&this.shoplist.forEach(function(a){a.value===e&&(t.shopchildren=a.children||[])})},keywordsChange:function(e){""===e&&this.loadData()},keywordsMaterialChange:function(e){""===e&&this.loadMaterial()},handleNodeClick:function(e){this.tableLoading=!0,this.crrentSelectShop=e,this.detail&&(this.detail.clientId=e.id,this.detail.clientName=e.name,this.detail.abbrName=e.abbreviation),this.showOrHidePop=!1,this.depTextColor="#606266"},showCurrentNo:function(){this.isprarent?this.isprarent=!1:this.isprarent=!0},changeNO:function(){this.isCurrentShop?(this.lastPlanDetail=this.currentShop,this.isCurrentShop=!1):(this.lastPlanDetail=this.currentParentShop,this.isCurrentShop=!0)},getCurrentPlans:function(){var e=this;void 0===this.crrentSelectShop.id?this.$message({type:"info",message:"请选择公司"}):void 0===this.detail.proId||""===this.detail.proId?this.$message({type:"info",message:"请选择产品"}):this.getRequest("/sales/getPlanDetails?clientId="+this.crrentSelectShop.id+"&productId="+this.detail.proId).then(function(t){if(e.tableLoading=!1,t&&200===t.status){var a=t.data;if(e.currentParentShop=a.root.parent,e.currentParentShop.length){var i=e.currentParentShop.length-1;e.currentParentShop=e.currentParentShop[i];var s=e.currentParentShop[i].endNo;e.sugestParentstartNo=e.sugestStartNo(s,1)}else e.sugestParentstartNo="00000001",e.currentParentShop={};if(""!==e.detail.quantity&&(e.sugestParentEndNo=e.sugestStartNo(e.currentParentShop[n].endNo,parseInt(e.detail.quantity)+1)),e.setStartSerialNo(e.sugestParentstartNo,e.sugestParentEndNo.endNo,"parent"),e.lastPlanDetail=e.currentParentShop,e.currentShop=a.root.self,e.currentShop.length){var l=e.currentShop.length-1;e.currentShop=e.currentShop[l];var o=e.currentShop[l].endNo;e.sugestSelfNumbers=e.sugestStartNo(o,1)}else e.sugestSelfNumbers="00000001",e.currentShop={}}})},setEndNumber:function(e){console.log(e);if(this.isCurrentShop)if(this.lastPlanDetail=this.currentShop,this.currentShop.length){var t=this.currentShop.length-1;this.sugestSelfEndNumbers=this.sugestStartNo(this.currentShop[t].endNo,parseInt(e)+1),this.marketPlanSerialNumber[0].startNo=this.sugestSelfNumbers,this.marketPlanSerialNumber[0].endNo=this.sugestSelfEndNumbers,this.marketPlanSerialNumber[0].note="",this.marketPlanSerialNumber[0].clientId=this.crrentSelectShop.id,this.marketPlanSerialNumber[0].productId=this.detail.proId}else{var a=this.sugestSelfNumbers;this.setCurrentEndData(a,e)}else if(this.lastPlanDetail=this.currentParentShop,this.currentParentShop.length){var i=this.currentParentShop.length-1;this.sugestParentEndNo=this.sugestStartNo(this.currentParentShop[i].endNo,parseInt(e)+1),this.marketPlanSerialNumber[0].startNo=this.sugestParentstartNo,this.marketPlanSerialNumber[0].endNo=this.sugestParentEndNo,this.marketPlanSerialNumber[0].note="",this.marketPlanSerialNumber[0].clientId=this.crrentSelectShop.id,this.marketPlanSerialNumber[0].productId=this.detail.proId}else{var n=this.currentParentShop;this.setCurrentEndData(n,e)}},setCurrentEndData:function(e,t){var a=e.length,i=parseInt(e)+parseInt(t),n=a-i.toString().length;if(n)for(var s=0;s<n;s++)i="0"+i;this.marketPlanSerialNumber[0].endNo=i},sugestStartNo:function(e,t){var a=function(e,t){if(t=t||!1,"string"==typeof e){var a=e.match(t?/[0-9]\d{1,}/g:/\d{1,}/g);return console.log(a),a.map(function(e){return e})}return[]},i=e.indexOf(a(e)[0]),n=e.substr(0,i),s=e.substr(i+a(e)[0].length,e.length-1),l=(a(e)[0].length,parseInt(a(e)[0])+t),o=l-l.toString().length;if(o)for(var r=0;r<o;r++)l+="0";return n+l+s},setStartSerialNo:function(e,t,a){this.marketPlanSerialNumber.length&&(this.marketPlanSerialNumber[0].startNo=e,this.marketPlanSerialNumber[0].endNo=t,this.marketPlanSerialNumber[0].note="")},clearChoose:function(){this.detail.clientId=0,this.detail.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(a,i){a.id===e&&t.detail&&(console.log(a.id),t.detail.unitName=a.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentDetailChange:function(e){this.currentDetailPage=e,console.log(this.currentPage),this.showPlanDe()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){console.log("add"),this.dialogTitle="郑铁公司销售单";this.marketPlanSerialNumber=[],this.detail.clientId=[],this.setShopNames(),this.showDialog=!0},searchData:function(){this.value5&&this.value5.length&&(this.startDate=this.formatDateTime(this.value5[0]),this.endDate=this.formatDateTime(this.value5[1]),console.log(this.startDate)),this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(e,t){console.log(t);var a=this;a.dialogTitle="编辑信息",a.detail={id:t.id,productNo:t.productName,quantity:t.expecNum,specsId:t.specsId,expectLevel:t.expectLevel,notes:t.note,proId:t.productId,colorId:t.colorId,editerId:t.editerId,createDate:t.createDate,clientId:[]},t.clientIds&&(a.detail.clientId=s()(t.clientIds.split(","),function(e){return parseInt(e)}),a.detail.shopId=a.detail.clientId[0],a.currentSelectShop(a.detail.shopId),a.detailIDs=a.detail.clientId[1]),this.getRequest("/sales/findProductById?salesPlanId="+t.id).then(function(e){if(e&&200===e.status&&e.data.success){var t=e.data.root.product;t&&(a.colorlist=t.colors||[],a.specslist=t.specs||[]),a.showDialog=!0}})},currentSelectChild:function(e){e&&(this.detail.shopchildId=e,console.log(e))},setShopNames:function(){if(this.noClient=[],this.detail.clientId&&this.detail.clientId.length)for(var e=0,t=this.currentAllClients.length;e<t;e++)for(var a=this.currentAllClients[e],i=0,n=this.detail.clientId.length;i<n;i++){this.detail.clientId[i];this.detail.clientId[i]===a.id&&this.noClient.push({label:a.name,value:a.id})}},add:function(e){var t=this,a=this,i=_.cloneDeep(this.detail);i.id||(i.clientId=[],this.detail.shopId&&this.detail.shopchildId&&(i.clientId.push(this.detail.shopId),i.clientId.push(this.detail.shopchildId))),i.pcCode=i.clientId.join(","),console.log("编辑"+i.clientId),i.clientId=i.clientId.pop(),this.$refs[e].validate(function(e){if(!e)return!1;i.id?(t.tableLoading=!0,console.log(a.plan),t.postRequest("/sales/update",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.showDialog=!1,a.loadData(),a.emptyData(),a.emptyDetail())})):(t.tableLoading=!0,console.log(i),t.postRequest("/sales/add",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.showDialog=!1,a.loadData(),a.emptyData(),a.emptyDetail())}))})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/product/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(a){if(e.tableLoading=!1,a&&200===a.status){var i=a.data.data;t.materialList=i,t.totalMaterialCount=a.data.total,t.dialogMaterialVisible=!0}})},cancelOpt:function(){this.showDialog=!1,this.loadData(),this.emptyData()},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/sales/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200===e.status){e.data;t.loadData()}})},clearDates:function(){this.startDate="",this.endDate=""},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/sales/find?page="+this.currentPage+"&size=10&status="+this.manageStatus+"&start="+this.startDate+"&end="+this.endDate+"&clientName="+this.keyClientName+"&productName="+this.keyproductName+"&empName="+this.keyempName).then(function(a){e.tableLoading=!1,a&&200===a.status&&a.data.success&&(console.log("dfanfasf"),t.plansList=t.preDataSale(a.data.data),console.log(t.plansList),t.totalCount=a.data.total,t.emptyData())})},emptyData:function(){this.detail={id:0,clientId:[],productNo:"",notes:"",quantity:"",proId:"",specsId:"",colorId:"",shopId:"",shopchildId:""},this.detailIDs=""},back:function(){this.showDetaillist?(this.showDetaillist=!1,this.showPlan=!0):(this.showDetaillist=!0,this.showPlan=!1)},loadPlans:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productionplandetails/findbypage?page="+this.currentPage+"&size=10&status="+this.manageStatus+"&productName="+this.keyproductName+"&empName="+this.keyempName+"&clientName="+this.keyClientName+"&startDate="+this.startDate+"&endDate="+this.endDate).then(function(a){if(t.tableLoading=!1,a&&200===a.status&&a.data.success){var i=a.data.data||[];t.productionPlans=i,t.totalCount=a.data.total}else e.$message({type:"infor",message:"查询失败"})})},preDataSale:function(e){var t=[];if(e.length)for(var a=0,i=e.length;a<i;a++){var n=e[a],s=(n[18],this.string2Arr(n[22])),l=this.string2Arr(n[10]),o=this.string2Arr(n[24]),r=this.string2Arr(n[26]);console.log("发货请求"+s),t.push({id:n[0],state:n[1],clientName:n[2],productName:n[3],empName:n[4],specName:n[5],createDate:n[6],expecNum:n[7],completeNum:n[8],sendNum:n[9],planString:l,note:n[11],colorName:n[12],parentName:n[13],clientIds:n[14],productId:n[15],colorId:n[16],specsId:n[17],expectLevel:n[18],shippingQuantity:n[19],resendNo:n[20],serialNumber:n[21],resendStr:s,editerId:n[23],shippingStr:o,resendId:n[25],produtRecordStr:r,upsDate:n[27],checked:!1,forOrder:!0,toChange:!1})}return t},string2Arr:function(e){return null===e||void 0==e||""===e?[]:e.split(";")},toTree:function(e){console.log("toTree");var t=[];if(!Array.isArray(e))return t;var a=[];e.forEach(function(e){a.push({value:e.id,label:e.name,parentId:e.parentClientId})});var i={};return a.forEach(function(e){i[e.value]=e}),a.forEach(function(e){var a=i[e.parentId];a?(a.children||(a.children=[])).push(e):t.push(e)}),t=this.getResult(t),console.log(t),t},getResult:function(e){var t=this;return e.map(function(e){delete e.parentId,e.children&&e.children.length&&t.getResult(e.children)}),e},showChanges:function(){this.plansList.map(function(e){return e.toChange=!e.toChange})}},computed:{routes:function(){return this.$store.state.routes}}}),u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start"}},[a("div",{staticStyle:{margin:"0",padding:"0"}},[a("el-tabs",{staticStyle:{"background-color":"#ffffff"},attrs:{type:"card","tab-position":"top"},on:{"tab-click":e.handleClick},model:{value:e.activePanel,callback:function(t){e.activePanel=t},expression:"activePanel"}},[a("el-tab-pane",{attrs:{label:"新订单",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"进行中",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"完成",name:"3"}})],1)],1),e._v(" "),a("div",{staticClass:"divce-mode"},[a("div",{staticStyle:{padding:"0",margin:"0",display:"flex","flex-direction":"row","justify-content":"space-between"}},[a("div",[a("el-button",{staticClass:"send-head-right-btn",attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:e.showAdvanceSearchView},slot:"reference"},[a("i",{staticClass:"fa fa-lg send-head-left-btn",class:[e.advanceSearchViewVisible?e.faangledoubleup:e.faangledoubledown]}),e._v("高级搜索\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.showChanges}},[e._v("批量选择")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.isbatch=!0}}},[e._v("批量修改")])],1),e._v(" "),a("div",{staticClass:"send-head-right-btn"},[e.showDetaillist?a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-back"},on:{click:e.back}},[e._v("返回")]):e._e()],1)]),e._v(" "),a("el-main",{staticClass:"send-main"},[a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticClass:"send-main-div"},[a("el-row",[a("el-col",{attrs:{span:8}},[e._v("\n                产品:\n                "),a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品名称。。。"},model:{value:e.keyproductName,callback:function(t){e.keyproductName=t},expression:"keyproductName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                客户:\n                "),a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"客户。。。"},model:{value:e.keyClientName,callback:function(t){e.keyClientName=t},expression:"keyClientName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                操作人:\n                "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"员工名。。。"},model:{value:e.keyempName,callback:function(t){e.keyempName=t},expression:"keyempName"}})],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",clearable:""},on:{clear:e.clearDates},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}})],1)],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showDetaillist,expression:"!showDetaillist"}]},["1"===e.activePanel||"3"===e.activePanel?a("div",[a("div",{staticClass:"flex-sales"},[1==e.activePanel?a("div",{staticClass:"item-sales",on:{click:e.addAndFlushData}},[a("div",{staticClass:"add"},[a("el-tooltip",{attrs:{effect:"light",content:"新建",placement:"top-start"}},[a("i",[e._v("+")])])],1)]):e._e(),e._v(" "),e._l(e.plansList,function(t,i){return a("div",{key:"p"+t.id,staticClass:"item-sales",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-sales-show"},[a("div",{staticClass:"compay-ifor "},[a("div",[a("div",[a("div",{staticStyle:{padding:"6px 0 0 5px"}},[e._v(e._s(t.serialNumber.substring(3)))]),e._v(" "),t.clientName?a("div",{staticClass:"plan-num-companyName"},[e._v("\n                          "+e._s(t.clientName)+"\n                        ")]):e._e(),e._v(" "),t.parentName?a("div",{staticStyle:{padding:"0 16px",color:"#B1B3B6","text-align":"right","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[e._v("\n                          ┈┈"+e._s(t.parentName)+"\n                        ")]):e._e()]),e._v(" "),t.productName?a("div",{staticStyle:{"text-align":"center","padding-top":"10px",color:"#B1B3B6"}},[e._v("\n                        "+e._s(t.productName)+"\n                      ")]):e._e()]),e._v(" "),a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.toChange,expression:"plandetail.toChange"}],staticStyle:{"padding-left":"10px"},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"plandetail.checked"}})],1),e._v(" "),a("div",{staticClass:"plan-num"},[a("div",{staticClass:"plan-num-left"},[a("div",{staticClass:"sale-mid-box"},[a("div",{staticClass:"sale-box-head"},[a("tooltip",{attrs:{content:"订单信息"}},[a("div",{staticClass:"fa fa-list",class:[1==t.forOrder?"forOrders":"forSend"],staticStyle:{width:"16px","margin-left":"10px"},on:{click:function(e){t.forOrder=!0}}})]),e._v(" "),a("tooltip",{attrs:{content:"物流信息"}},[a("div",{staticClass:"fa fa-send-o",class:[0==t.forOrder?"forOrders":"forSend"],staticStyle:{width:"16px","margin-left":"10px"},on:{click:function(e){t.forOrder=!1}}})])],1),e._v(" "),a("div",{staticClass:"sale-box-body",class:[1==t.forOrder?"forOrders":"forSend"]},[a("div",{staticClass:"sales-box"},[t.forOrder?a("div",{staticClass:"sales-order"},[a("div",{staticClass:"sales-box-face"},[a("div",{staticClass:"plan-num-detail",staticStyle:{color:"#000000"}},[a("span",{staticClass:"detail-text detail-left"},[e._v("总数:")]),e._v(" "),a("tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t.createDate?a("div",[e._v(" "+e._s(e._f("formatDateTime")(t.createDate))+"\n                                      ")]):e._e()]),e._v(" "),t.expecNum?a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(t.expecNum))]):e._e()])],1),e._v(" "),a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text detail-left"},[e._v("已下发:")]),e._v(" "),a("tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t.planString.length?a("div",e._l(t.planString,function(t,i){return a("div",{key:i},[e._v(e._s(t)+"\n                                        ")])}),0):a("div",[e._v("\n                                        未下发\n                                      ")])]),e._v(" "),a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(null==t.sendNum?0:t.sendNum))])])],1),e._v(" "),a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text detail-left"},[e._v("未下发:")]),e._v(" "),t.expecNum?a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(t.expecNum-t.sendNum))]):e._e()]),e._v(" "),t.shippingQuantity?a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("已发货:")]),e._v(" "),a("span",{staticClass:"detail-text send"},[e._v(e._s(t.shippingQuantity))])]):e._e(),e._v(" "),t.resendNo?a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("发货请求:")]),e._v(" "),a("tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},e._l(t.resendStr,function(t){return a("div",{key:t},[e._v(e._s(t))])}),0),e._v(" "),a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(t.resendNo))])])],1):e._e()]),e._v(" "),a("div",{staticStyle:{width:"280px","padding-left":"10px"}},[a("div",{staticClass:"plan-note-area"},[a("div",{attrs:{calss:"plan-note-area-head"}},[e._v("\n                                    备注：\n                                  ")]),e._v(" "),a("div",{staticClass:"plan-note"},[e._v("\n                                    "+e._s("null"===t.note?"暂无":""===t.note?"暂无":t.note)+"\n                                  ")])])])]):e._e(),e._v(" "),t.forOrder?e._e():a("div",{staticClass:"sales-delivery"},[a("div",{staticClass:"plan-num-detail-send",staticStyle:{color:"#000000"}},[a("span",{staticClass:"detail-text"},[e._v("总数:")]),e._v(" "),a("tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",[e._v(" "+e._s(e._f("formatDateTime")(t.createDate)))])]),e._v(" "),a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(t.expecNum))])])],1),e._v(" "),a("div",{staticClass:"plan-num-detail-send "},[a("span",{staticClass:"detail-text"},[e._v("已发货:")]),e._v(" "),a("tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t.shippingStr.length?a("div",e._l(t.shippingStr,function(t,i){return a("div",{key:i},[e._v(e._s(t)+"\n                                      ")])}),0):a("div",[e._v("\n                                      未发货\n                                    ")])]),e._v(" "),a("span",{staticClass:"detail-text send num-aline detail-right"},[e._v(e._s(t.shippingQuantity))])])],1),e._v(" "),a("div",{staticClass:"plan-num-detail-send "},[a("span",{staticClass:"detail-text"},[e._v("未发货:")]),e._v(" "),a("span",{staticClass:"detail-text send num-aline"},[e._v(e._s(t.expecNum-t.shippingQuantity))])])])])])]),e._v(" "),a("div",{staticClass:"tip-tab"},[!t.expectLevel||2!==t.expectLevel&&3!==t.expectLevel?e._e():a("div",{staticClass:"trapezoid"},[a("div",{staticClass:"part1",style:{borderBottomColor:2===t.expectLevel?"green":"red"}}),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                              请求时间： "+e._s(e._f("simpleFormatTime")(t.sendDate))+"\n                            ")]),e._v(" "),a("div",{staticClass:"part2",style:{backgroundColor:2===t.expectLevel?"green":"red"}},[e._v("\n                              "+e._s(2===t.expectLevel?"急需":"加急")+"\n                            ")])]),e._v(" "),a("div",{staticClass:"part3",style:{borderBottomColor:2===t.expectLevel?"green":"red"}})],1),e._v(" "),a("div",{staticStyle:{"flex-direction":"row",display:"flex","justify-content":"space-between",height:"18px","line-height":"20px",width:"auto"}},[a("div",[a("span",{staticStyle:{color:"#8c939d"}},[e._v(e._s(e._f("simpleFormatTime")(t.createDate)))])]),e._v(" "),a("div",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发货记录",placement:"top-start"}},[t.shippingQuantity?a("span",{staticClass:"fa fa-list",staticStyle:{padding:"2px",margin:"4px"},on:{click:function(a){return e.deliverySendRecord(i,t)}}}):e._e()]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发货请求",placement:"top-start"}},[a("span",{staticClass:"fa fa-send",staticStyle:{padding:"2px",margin:"4px",color:"#2fc5da"},on:{click:function(a){return e.deliveryRequest(i,t)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top-start"}},[a("span",{staticClass:"fa fa-edit",staticStyle:{padding:"2px",margin:"4px",color:"#2fc5da"},on:{click:function(a){return e.showEditEmpView(i,t)}}})]),e._v(" "),a("div",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[a("span",{staticClass:"fa fa-trash",staticStyle:{padding:"2px",margin:"4px",color:"#2fc5da"},on:{click:function(a){return e.cancelPlan(t)}}})])],1),e._v(" "),a("div",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top-start"}},[a("span",{staticClass:"fa fa-eye",staticStyle:{padding:"2px",margin:"4px"},attrs:{size:"mini"},on:{click:function(a){return e.showplanDetail(t)}}})])],1)],1)])])])])])])}),e._v(" "),0===e.plansList.length?a("div",{staticStyle:{"text-align":"center",width:"100%"}},[e._v("\n                暂无数据\n              ")]):e._e()],2),e._v(" "),a("div",{staticClass:"page-tool"},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)]):e._e(),e._v(" "),"2"===e.activePanel?a("div",[a("div",{staticClass:"flex-plan"},[e._l(e.productionPlans,function(t,i){return a("div",{key:t.id,staticClass:"item-sales",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-sales-show"},[a("div",[a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"start",width:"100%"}},[a("div",{staticClass:"pro-plan-head"},[a("div",{staticClass:"compay-ifor ",staticStyle:{"background-color":"#A9DC90"}},[a("div",{staticClass:"text-alight"},[t.planNo?a("div",{staticStyle:{"text-align":"left"}},[e._v("\n                              "+e._s(t.planNo)+"\n                            ")]):e._e(),e._v(" "),t&&t.salesPlan&&t.salesPlan.client?a("div",{staticClass:"plan-num-companyName"},[e._v("\n                              "+e._s(t.salesPlan.client.name)+"\n                            ")]):e._e(),e._v(" "),t.salesPlan&&t.salesPlan.client&&t.salesPlan.client.parentName?a("div",{staticClass:"abandon",staticStyle:{width:"140px",padding:"0 16px","text-align":"right","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[e._v("\n                              ┈┈"+e._s(t.salesPlan.client.parentName)+"\n                            ")]):e._e()]),e._v(" "),t.salesPlan&&t.salesPlan.product&&t.salesPlan.product.producteName?a("div",{staticClass:"text-alight abandon",staticStyle:{"text-align":"center","padding-top":"10px"}},[e._v("\n                            "+e._s(t.salesPlan.product.producteName)+"\n                          ")]):e._e(),e._v(" "),t.salesPlan&&t.salesPlan.editer&&t.salesPlan.editer.name?a("div",{staticClass:"abandon",staticStyle:{"text-align":"right","padding-right":"10px"}},[e._v("\n                            "+e._s(t.salesPlan.serialNumber.substring(3))+" "+e._s(t.salesPlan.editer.name)+"\n                          ")]):e._e(),e._v(" "),a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.toChange,expression:"plandetail.toChange"}],staticStyle:{"padding-left":"10px"},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"plandetail.checked"}})],1),e._v(" "),a("div",{staticClass:"plan-num"},[a("div",{staticClass:"plan-num-left"},[a("div",{staticClass:"plan-item-right"},[a("div",{staticStyle:{width:"140px",padding:"0 0 0 5px",height:"100px",display:"flex","flex-direction":"column","justify-content":"flex-end"}},[a("div",[a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text detail-left"},[e._v("本次计划:")]),e._v(" "),a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.actualQuantity))])]),e._v(" "),a("div",{staticClass:"plan-num-detail abandon"},[a("span",{staticClass:"detail-text"},[e._v("已生产:")]),e._v(" "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticStyle:{display:"flex","flex-direction":"column",width:"auto"}},[a("div",[e._v("\n                                            下发时间:"+e._s(e._f("formatDateTime")(t.createDate))+"\n                                          ")])])]),e._v(" "),a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(null==t.accomplishNO?0:t.accomplishNO))])])],1),e._v(" "),a("div",{staticClass:"plan-num-detail "},[a("span",{staticClass:"detail-text detail-left"},[e._v(" ")]),e._v(" "),a("span",{staticClass:"detail-text detail-right"})]),e._v(" "),a("hr",{staticStyle:{width:"86px"}}),e._v(" "),a("div",{staticClass:"plan-num-detail abandon"},[a("span",{staticClass:"detail-text detail-left"},[e._v("未生产:")]),e._v(" "),t.salesPlan?a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.actualQuantity-t.accomplishNO))]):e._e()])]),e._v(" "),t.recordStr?a("div",[e._v(e._s(t.recordStr))]):e._e()]),e._v(" "),a("div",{staticStyle:{width:"280px",height:"100px","flex-direction":"row",display:"flex","justify-content":"flex-start"}},[a("div",{staticStyle:{width:"100px",padding:"0 5px",display:"flex","flex-direction":"column","justify-content":"flex-end"}},[a("div",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-end"}},[a("div",{staticClass:"plan-num-detail abandon"},[a("span",{staticClass:"detail-text detail-left"},[e._v("已生产:")]),e._v(" "),a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.accomplishNO))])]),e._v(" "),a("div",{staticClass:"plan-num-detail abandon"},[a("span",{staticClass:"detail-text detail-left"},[e._v("已发货:")]),e._v(" "),a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(null==t.sendQuantity?0:t.sendQuantity))])]),e._v(" "),a("hr",{staticStyle:{width:"86px"}}),e._v(" "),a("div",{staticClass:"plan-num-detail abandon last-send"},[a("span",{staticClass:"detail-text detail-left"},[e._v("未发货:")]),e._v(" "),t.accomplishNO&&t.sendQuantity?a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.accomplishNO-t.sendQuantity))]):a("span",{staticClass:"detail-text detail-right"},[e._v("0")])])])]),e._v(" "),a("div",{staticStyle:{width:"180px",display:"flex","flex-direction":"column","justify-content":"flex-end"}},[a("div",[a("div",{staticClass:"plan-num-detail last-send abandon"},[a("span",{staticClass:"detail-text detail-left"},[e._v("需求总数:")]),e._v(" "),t.salesPlan?a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.salesPlan.quantity))]):e._e()]),e._v(" "),a("div",{staticClass:"plan-num-detail last-send abandon"},[a("span",{staticClass:"detail-text detail-left"},[e._v("计划总量:")]),e._v(" "),t.salesPlan?a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.salesPlan.nextQuantity))]):e._e()]),e._v(" "),a("div",{staticClass:"plan-num-detail last-send abandon"},[a("span",{staticClass:"detail-text detail-left"},[e._v("累计完成:")]),e._v(" "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                          发货记录：\n                                          "),t.produtRecordStr&&t.produtRecordStr.length?a("div",{staticStyle:{display:"flex","flex-direction":"column",width:"auto"}},e._l(t.produtRecordStr,function(t,i){return a("div",{key:i},[e._v("\n                                              "+e._s(t)+"\n                                            ")])}),0):e._e()]),e._v(" "),t.salesPlan?a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(t.salesPlan.endQuantity))]):e._e()])],1),e._v(" "),a("hr",{staticStyle:{width:"100px"}}),e._v(" "),a("div",{staticClass:"plan-num-detail abandon last-send"},[a("span",{staticClass:"detail-text "},[e._v("未生产量:")]),e._v(" "),t.salesPlan&&null!=t.salesPlan.nextQuantity&&null!=t.salesPlan.endQuantity?a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.salesPlan.nextQuantity-t.salesPlan.endQuantity))]):e._e()])])])])]),e._v(" "),a("div",{staticStyle:{width:"420px",display:"flex","flex-direction":"column","justify-content":"start",padding:"0 8px"}},[!t.expectLevel||3!==t.expectLevel&&2!==t.expectLevel?e._e():a("div",{staticClass:"trapezoid"},[a("div",{staticClass:"part1",style:{borderBottomColor:2===t.expectLevel?"green":"red"}}),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                    "+e._s(e._f("simpleFormatTime")(t.sendDate))+"\n                                  ")]),e._v(" "),a("div",{staticClass:"part2",style:{backgroundColor:2===t.expectLevel?"green":"red"}},[e._v("\n                                    "+e._s(2===t.expectLevel?"急需":"加急")+"\n                                  ")])]),e._v(" "),a("div",{staticClass:"part3",style:{borderBottomColor:2===t.expectLevel?"green":"red"}})],1),e._v(" "),a("div",{staticStyle:{"flex-direction":"row",display:"flex","justify-content":"flex-end",height:"18px","line-height":"20px",width:"auto"}},[a("div",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发货请求",placement:"top-start"}},[a("span",{staticClass:"fa fa-send-o",staticStyle:{padding:"2px",margin:"4px",color:"#2fc5da"},on:{click:function(a){return e.deliveryRequest(i,t)}}})])],1)])])])])])])])])])}),e._v(" "),0==e.productionPlans.length?a("div",{staticStyle:{"text-align":"center"}},[e._v("\n                暂无数据\n              ")]):e._e()],2),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)]):e._e()]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showDetaillist,expression:"showDetaillist"}]},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.plandetaillist,"highlight-current-row":"",fit:"",border:""}},[a("el-table-column",{attrs:{align:"left",label:"客户名"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.salesPlan.client?a("div",[e._v("\n                  "+e._s(t.row.salesPlan.client.name)+"\n                ")]):a("div",[e._v("\n                  无\n                ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.salesPlan.product.producteName)+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"计划量/完成量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.actualQuantity)+"/"+e._s(t.row.accomplishNO)+"枚\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:e.statusFormat,align:"left",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentDetailPage,layout:"prev, pager, next",total:e.totalDatailPage},on:{"current-change":e.currentDetailChange}})],1)],1)],1)],1)]),e._v(" "),a("zt-dialog",{attrs:{"is-show":e.showDialog,"height-num":"590","wid-num":"450","left-site":"400","zt-dialog-class":"myDialogStyle"},on:{"on-close":e.closeDialog}},[a("div",{staticClass:"zt-dialog-head",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"24px","box-sizing":"border-box","text-align":"left"}},[e._v("销售计划信息")]),e._v(" "),a("span",{staticClass:"colosBtn",on:{click:e.closeDialog}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"zt-dialog-main",attrs:{slot:"main"},slot:"main"},[a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{"text-align":"left"}}),e._v(" "),a("el-form",{ref:"addEmpForm",staticClass:"sale-form",attrs:{model:e.detail,rules:e.rules,size:"mini","label-width":"120px"}},[a("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"选择客户:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",filterable:"",clearable:"",placeholder:"请选择客户"},on:{change:e.currentSelectShop},model:{value:e.detail.shopId,callback:function(t){e.$set(e.detail,"shopId",t)},expression:"detail.shopId"}},e._l(e.shoplist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"作业区:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini","no-data-text":"无作业区",clearable:"",placeholder:"请选择作业区"},on:{change:e.currentSelectChild},model:{value:e.detailIDs,callback:function(t){e.detailIDs=t},expression:"detailIDs"}},e._l(e.shopchildren,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{background:"#fff"},attrs:{type:"number",placeholder:"原料数量(枚/kg)",size:"mini","refix-icon":"el-icon-edit",min:"0",step:"1000"},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"型号:",prop:"productNo"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"型号"},on:{focus:e.showMaterial},model:{value:e.detail.productNo,callback:function(t){e.$set(e.detail,"productNo",t)},expression:"detail.productNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规格:",prop:"specsId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择规格"},model:{value:e.detail.specsId,callback:function(t){e.$set(e.detail,"specsId",t)},expression:"detail.specsId"}},e._l(e.specslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"-5px"},attrs:{label:"颜色:",prop:"colorId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"--请选择色彩--"},model:{value:e.detail.colorId,callback:function(t){e.$set(e.detail,"colorId",t)},expression:"detail.colorId"}},e._l(e.colorlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("div",{staticStyle:{height:"10px","text-align":"center","line-height":"10px"}},[a("hr")]),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"-5px"},attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",rows:5,type:"textarea",placeholder:"备注。。。"},model:{value:e.detail.notes,callback:function(t){e.$set(e.detail,"notes",t)},expression:"detail.notes"}})],1),e._v(" "),a("div")],1)],1),e._v(" "),a("div",{staticClass:"zt-dialog-footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)])]),e._v(" "),a("zt-dialog",{attrs:{"is-show":e.isbatch,"height-num":"400","wid-num":"450","left-site":"400","zt-dialog-class":"myDialogStyle"},on:{"on-close":e.closeDialog}},[a("div",{staticClass:"zt-dialog-head",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"24px","box-sizing":"border-box","text-align":"left"}},[e._v("批量修改")]),e._v(" "),a("span",{staticClass:"colosBtn",on:{click:e.closeDialog}},[e._v("×")])]),e._v(" "),a("div",{staticClass:"zt-dialog-main",attrs:{slot:"main"},slot:"main"},[e.isbatch?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{"text-align":"left"}}),e._v(" "),a("div",{staticStyle:{height:"10px","text-align":"center","line-height":"10px"}}),e._v(" "),a("div",{staticStyle:{"font-size":"12px",width:"100%",display:"inline-flex","flex-direction":"row"}},[e._v("\n          等级:\n          "),a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",filterable:"",placeholder:"--请选择订单等级--"},model:{value:e.expectLevel,callback:function(t){e.expectLevel=t},expression:"expectLevel"}},e._l(e.options2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div")]):e._e(),e._v(" "),a("div",{staticClass:"zt-dialog-footer"},[a("el-button",{staticStyle:{"font-size":"12px"},on:{click:function(t){e.isbatch=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:e.batchEdit}},[e._v("确 定")])],1)])]),e._v(" "),a("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"650px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,"highlight-current-row":"",fit:"",border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{prop:"producteName",align:"left",fixed:"",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specName",align:"left",fixed:"",label:"规格"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proType",align:"left",fixed:"",label:"型号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"colorName",align:"left",fixed:"",label:"颜色"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"记录集","close-on-click-modal":!1,visible:e.dialogRecordVisible,width:"450px"},on:{"update:visible":function(t){e.dialogRecordVisible=t},close:function(t){return t.stopPropagation(),e.cancelRecord(t)}}},[e.dialogRecordVisible?a("div",{staticStyle:{width:"100%"}}):e._e(),e._v(" "),e.recordStr.length?a("div",e._l(e.recordStr,function(t){return a("div",{key:t,staticStyle:{padding:"0 16px"}},[a("span",[e._v(e._s(t))])])}),0):a("div",[e._v("暂无记录")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogRecordVisible=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("zt-dialog",{attrs:{"is-show":e.dialogSendVisible,"height-num":"260","wid-num":"450","left-site":"400"},on:{"on-close":e.cancelSenddetail}},[a("div",{staticClass:"zt-dialog-head",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"24px","box-sizing":"border-box","text-align":"left"}},[e._v("发货请求")]),e._v(" "),a("span",{staticClass:"colosBtn",on:{click:e.cancelSenddetail}},[e._v("×")])]),e._v(" "),a("div",{staticStyle:{"font-size":"12px"},attrs:{slot:"main"},slot:"main"},[a("el-form",{ref:"addSend",attrs:{model:e.sendDetail,size:"mini","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-form-item",{attrs:{label:"数量:"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",size:"mini",step:"1000",placeholder:"发货数量"},model:{value:e.sendDetail.planNumber,callback:function(t){e.$set(e.sendDetail,"planNumber",t)},expression:"sendDetail.planNumber"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"等级:"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.sendDetail.expectLevel,callback:function(t){e.$set(e.sendDetail,"expectLevel",t)},expression:"sendDetail.expectLevel"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"textarea",size:"mini",placeholder:"备注。。"},model:{value:e.sendDetail.note,callback:function(t){e.$set(e.sendDetail,"note",t)},expression:"sendDetail.note"}})],1)],1)],1)]),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelSenddetail}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.revokeBeg}},[e._v("撤销")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addSend("addSend")}}},[e._v("发送请求")])],1)],1)])],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(e){a("NKC0")},"data-v-354870cd",null);t.default=p.exports},"6mMO":function(e,t){},"7QVd":function(e,t){},"7vo2":function(e,t){},"8mpM":function(e,t){},"97ZH":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{activeIndex:"1",activeIndex2:"1"}},methods:{handleSelect:function(e,t){console.log(e,t)}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"center","align-items":"center"}},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[e._v("处理中心")]),e._v(" "),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[e._v("我的工作台")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-1"}},[e._v("选项1")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-2"}},[e._v("选项2")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-3"}},[e._v("选项3")]),e._v(" "),a("el-submenu",{attrs:{index:"2-4"}},[a("template",{slot:"title"},[e._v("选项4")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-4-1"}},[e._v("选项1")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-4-2"}},[e._v("选项2")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-4-3"}},[e._v("选项3")])],2)],2),e._v(" "),a("el-menu-item",{attrs:{index:"3",disabled:""}},[e._v("消息中心")]),e._v(" "),a("el-menu-item",{attrs:{index:"4"}},[a("a",{attrs:{href:"https://www.ele.me",target:"_blank"}},[e._v("订单管理")])])],1)],1)])},staticRenderFns:[]},s=a("VU/8")(i,n,!1,null,null,null);t.default=s.exports},"9Mpo":function(e,t){},ANaZ:function(e,t){},"Ave/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),s={data:function(){return{showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},defaultData:{label:"plateNumber",isLeaf:"leaf",children:"children"},depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{business:[{required:!0,message:"必填:事由",trigger:"blur"}],carNo:[{required:!0,message:"必选:车辆",trigger:"blur"}]},carRequests:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],carRequest:{carNo:"",business:"",preStartDate:"",duration:"",preEndDate:"",notes:""},assigned:{carNo:"",note:"",requestId:""},dialogFormVisible:!1,dialogAlotVisible:!1,currentRowData:{},currentIndex:"",pickerOptions1:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},mounted:function(){this.initData();var e=this;this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var a=t.data;console.log(a),e.cars=a.root.cars}})},methods:{cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},searchEmp:function(){this.loadData()},formatStatus:function(e,t){return"UN_MANAGED"==e.requestStatus?"未分配":"MANAGED"==e.requestStatus?"已分配":"REFUSE"==e.requestStatus?"已拒绝":"已完成"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},showAllotTree:function(){this.showHidePop=!this.showHidePop},handleAskClick:function(e){this.assigned.carNo=e.plateNumber,this.showHidePop=!1,this.depTextColor="#606266"},handleNodeClick:function(e){this.carRequest.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.carRequest=t,this.carRequest.preStartDate=this.formatDate(t.preStartDate),this.carRequest.preEndDate=this.formatDate(t.preEndDate),this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,delete this.carRequest.emp,delete this.carRequest.vcif,this.dialogFormVisible=!0},showAllotionView:function(e){console.log(e),this.dialogTitle="分配车辆",this.carRequest=e,this.dialogAlotVisible=!0},allocate:function(e){var t=this;this.dialogAlotVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(a.assigned),t.assigned.requestId=t.carRequest.id,t.postRequest("/vehicleAllot/add",t.assigned).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogAlotVisible=!1,a.loadData(),a.emptyAltData()}})})},denied:function(e){var t=this;this.dialogAlotVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(a.assigned),t.assigned.requestId=t.carRequest.id,t.postRequest("/vehicleAllot/refuse",t.assigned).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogAlotVisible=!1,a.loadData(),a.emptyAltData()}})})},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.carRequest.id?(t.tableLoading=!0,console.log(t.carRequest),t.postRequest("/askedvehicle/addask",t.carRequest).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.carRequest),t.postRequest("/askedvehicle/addask",t.carRequest).then(function(e){(a.tableLoading=!1,e&&200==e.status)&&(e.data.success&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData()))}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.plateNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/askedvehicle/deletask?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/askedvehicle/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.carRequests=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.carRequest={carNo:"",business:"",preStartDate:"",preEndDate:"",duration:"",notes:""}},emptyAltData:function(){this.assigned={carNo:"",note:"",requestId:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n  \n        ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.carRequest,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"可选车辆:",prop:"carNo"}},[a("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"manual"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRequest.carNo)+"\n            ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用车时长:",prop:"duration"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"预计用车多少天..."},model:{value:e.carRequest.duration,callback:function(t){e.$set(e.carRequest,"duration",t)},expression:"carRequest.duration"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"申请事由:",prop:"business"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"出差事项..."},model:{value:e.carRequest.business,callback:function(t){e.$set(e.carRequest,"business",t)},expression:"carRequest.business"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出行时间:",prop:"preStartDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date","picker-options":e.pickerOptions1,placeholder:"出行时间"},model:{value:e.carRequest.preStartDate,callback:function(t){e.$set(e.carRequest,"preStartDate",t)},expression:"carRequest.preStartDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"返回时间:",prop:"preEndDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date","picker-options":e.pickerOptions1,placeholder:"返回时间"},model:{value:e.carRequest.preEndDate,callback:function(t){e.$set(e.carRequest,"preEndDate",t)},expression:"carRequest.preEndDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRequest.notes,callback:function(t){e.$set(e.carRequest,"notes",t)},expression:"carRequest.notes"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogAlotVisible,width:"500px"},on:{"update:visible":function(t){e.dialogAlotVisible=t},close:e.emptyAltData}},[a("div",{staticStyle:{width:"100%"}},[e.dialogAlotVisible?a("el-form",{ref:"addNewRecord",attrs:{model:e.assigned,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",rows:"5",cols:"33",placeholder:"备注..."},model:{value:e.assigned.note,callback:function(t){e.$set(e.assigned,"note",t)},expression:"assigned.note"}})],1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAlotVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.denied("addNewRecord")}}},[e._v("拒绝申请")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.allocate("addNewRecord")}}},[e._v("同意申请")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carRequests,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"车牌号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.vcif.plateNumber))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"preStartDate",width:"120",align:"left",label:"预计出行时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.preStartDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"preEndDate",width:"120",align:"left",label:"预计返回时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.preEndDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"duration",align:"left",label:"持续时间",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"business",align:"left",label:"事由",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",width:"220",align:"left",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",width:"220",align:"left",label:"执行人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"empName",width:"220",align:"left",label:"申请人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"requestStatus",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return["UN_MANAGED"==t.row.requestStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showAllotionView(t.row)}}},[e._v("分配车辆\n        ")]):e._e(),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("ev96")},null,null);t.default=o.exports},BMxp:function(e,t){},BiC4:function(e,t,a){"use strict";(function(e,t){var i,n=a("OvRC"),s=a.n(n),l=a("mvHQ"),o=a.n(l),r=a("C4MV"),c=a.n(r),d=a("pFYg"),u=a.n(d);!function(i){if("object"===("undefined"==typeof exports?"undefined":u()(exports))&&void 0!==t)t.exports=i();else if("function"==typeof define&&a("nErl"))define([],i);else{("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).SockJS=i()}}(function(){return function e(t,a,n){function s(o,r){if(!a[o]){if(!t[o]){if(!r&&("function"==typeof i&&i))return i(o,!0);if(l)return l(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=a[o]={exports:{}};t[o][0].call(d.exports,function(e){var a=t[o][1][e];return s(a||e)},d,d.exports,e,t,a,n)}return a[o].exports}for(var l="function"==typeof i&&i,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,a,i){(function(e){var i=t("./transport-list");a.exports=t("./main")(i),"_sockjs_onload"in e&&setTimeout(e._sockjs_onload,1)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":14,"./transport-list":16}],2:[function(e,t,a){var i=e("inherits"),n=e("./event");function s(){n.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}i(s,n),t.exports=s},{"./event":4,inherits:56}],3:[function(e,t,a){var i=e("inherits"),n=e("./eventtarget");function s(){n.call(this)}i(s,n),s.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},s.prototype.once=function(e,t){var a=this,i=!1;this.on(e,function n(){a.removeListener(e,n),i||(i=!0,t.apply(this,arguments))})},s.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var a=arguments.length,i=new Array(a-1),n=1;n<a;n++)i[n-1]=arguments[n];for(var s=0;s<t.length;s++)t[s].apply(this,i)}},s.prototype.on=s.prototype.addListener=n.prototype.addEventListener,s.prototype.removeListener=n.prototype.removeEventListener,t.exports.EventEmitter=s},{"./eventtarget":5,inherits:56}],4:[function(e,t,a){function i(e){this.type=e}i.prototype.initEvent=function(e,t,a){return this.type=e,this.bubbles=t,this.cancelable=a,this.timeStamp=+new Date,this},i.prototype.stopPropagation=function(){},i.prototype.preventDefault=function(){},i.CAPTURING_PHASE=1,i.AT_TARGET=2,i.BUBBLING_PHASE=3,t.exports=i},{}],5:[function(e,t,a){function i(){this._listeners={}}i.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var a=this._listeners[e];-1===a.indexOf(t)&&(a=a.concat([t])),this._listeners[e]=a},i.prototype.removeEventListener=function(e,t){var a=this._listeners[e];if(a){var i=a.indexOf(t);-1===i||(a.length>1?this._listeners[e]=a.slice(0,i).concat(a.slice(i+1)):delete this._listeners[e])}},i.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,a=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,a),t in this._listeners)for(var i=this._listeners[t],n=0;n<i.length;n++)i[n].apply(this,a)},t.exports=i},{}],6:[function(e,t,a){var i=e("inherits"),n=e("./event");function s(e){n.call(this),this.initEvent("message",!1,!1),this.data=e}i(s,n),t.exports=s},{"./event":4,inherits:56}],7:[function(e,t,a){var i=e("json3"),n=e("./utils/iframe");function s(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}s.prototype._transportClose=function(e,t){n.postMessage("c",i.stringify([e,t]))},s.prototype._transportMessage=function(e){n.postMessage("t",e)},s.prototype._send=function(e){this._transport.send(e)},s.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},t.exports=s},{"./utils/iframe":47,json3:57}],8:[function(e,t,a){(function(a){var i=e("./utils/url"),n=e("./utils/event"),s=e("json3"),l=e("./facade"),o=e("./info-iframe-receiver"),r=e("./utils/iframe"),c=e("./location"),d=function(){};"production"!==a.env.NODE_ENV&&(d=e("debug")("sockjs-client:iframe-bootstrap")),t.exports=function(e,t){var a,u={};t.forEach(function(e){e.facadeTransport&&(u[e.facadeTransport.transportName]=e.facadeTransport)}),u[o.transportName]=o,e.bootstrap_iframe=function(){var t;r.currentWindowId=c.hash.slice(1);n.attachEvent("message",function(n){if(n.source===parent&&(void 0===a&&(a=n.origin),n.origin===a)){var o;try{o=s.parse(n.data)}catch(e){return void d("bad json",n.data)}if(o.windowId===r.currentWindowId)switch(o.type){case"s":var p;try{p=s.parse(o.data)}catch(e){d("bad json",o.data);break}var h=p[0],f=p[1],m=p[2],g=p[3];if(d(h,f,m,g),h!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+h+'", the iframe: "'+e.version+'".');if(!i.isOriginEqual(m,c.href)||!i.isOriginEqual(g,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+m+", "+g+")");t=new l(new u[f](m,g));break;case"m":t._send(o.data);break;case"c":t&&t._close(),t=null}}}),r.postMessage("s")}}}).call(this,{env:{}})},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:54,json3:57}],9:[function(e,t,a){(function(a){var i=e("events").EventEmitter,n=e("inherits"),s=e("json3"),l=e("./utils/object"),o=function(){};function r(e,t){i.call(this);var a=this,n=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var i,r;if(200===e){if(r=+new Date-n,t)try{i=s.parse(t)}catch(e){o("bad json",t)}l.isObject(i)||(i={})}a.emit("finish",i,r),a.removeAllListeners()})}"production"!==a.env.NODE_ENV&&(o=e("debug")("sockjs-client:info-ajax")),n(r,i),r.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=r}).call(this,{env:{}})},{"./utils/object":49,debug:54,events:3,inherits:56,json3:57}],10:[function(e,t,a){var i=e("inherits"),n=e("events").EventEmitter,s=e("json3"),l=e("./transport/sender/xhr-local"),o=e("./info-ajax");function r(e){var t=this;n.call(this),this.ir=new o(e,l),this.ir.once("finish",function(e,a){t.ir=null,t.emit("message",s.stringify([e,a]))})}i(r,n),r.transportName="iframe-info-receiver",r.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},t.exports=r},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:56,json3:57}],11:[function(t,a,i){(function(e,i){var n=t("events").EventEmitter,s=t("inherits"),l=t("json3"),o=t("./utils/event"),r=t("./transport/iframe"),c=t("./info-iframe-receiver"),d=function(){};function u(e,t){var a=this;n.call(this);var s=function(){var i=a.ifr=new r(c.transportName,t,e);i.once("message",function(e){if(e){var t;try{t=l.parse(e)}catch(t){return d("bad json",e),a.emit("finish"),void a.close()}var i=t[0],n=t[1];a.emit("finish",i,n)}a.close()}),i.once("close",function(){a.emit("finish"),a.close()})};i.document.body?s():o.attachEvent("load",s)}"production"!==e.env.NODE_ENV&&(d=t("debug")("sockjs-client:info-iframe")),s(u,n),u.enabled=function(){return r.enabled()},u.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},a.exports=u}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:54,events:3,inherits:56,json3:57}],12:[function(e,t,a){(function(a){var i=e("events").EventEmitter,n=e("inherits"),s=e("./utils/url"),l=e("./transport/sender/xdr"),o=e("./transport/sender/xhr-cors"),r=e("./transport/sender/xhr-local"),c=e("./transport/sender/xhr-fake"),d=e("./info-iframe"),u=e("./info-ajax"),p=function(){};function h(e,t){p(e);var a=this;i.call(this),setTimeout(function(){a.doXhr(e,t)},0)}"production"!==a.env.NODE_ENV&&(p=e("debug")("sockjs-client:info-receiver")),n(h,i),h._getReceiver=function(e,t,a){return a.sameOrigin?new u(t,r):o.enabled?new u(t,o):l.enabled&&a.sameScheme?new u(t,l):d.enabled()?new d(e,t):new u(t,c)},h.prototype.doXhr=function(e,t){var a=this,i=s.addPath(e,"/info");p("doXhr",i),this.xo=h._getReceiver(e,i,t),this.timeoutRef=setTimeout(function(){p("timeout"),a._cleanup(!1),a.emit("finish")},h.timeout),this.xo.once("finish",function(e,t){p("finish",e,t),a._cleanup(!0),a.emit("finish",e,t)})},h.prototype._cleanup=function(e){p("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},h.prototype.close=function(){p("close"),this.removeAllListeners(),this._cleanup(!1)},h.timeout=8e3,t.exports=h}).call(this,{env:{}})},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:54,events:3,inherits:56}],13:[function(t,a,i){(function(e){a.exports=e.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(t,a,i){(function(e,i){t("./shims");var n,s=t("url-parse"),l=t("inherits"),o=t("json3"),r=t("./utils/random"),c=t("./utils/escape"),d=t("./utils/url"),u=t("./utils/event"),p=t("./utils/transport"),h=t("./utils/object"),f=t("./utils/browser"),m=t("./utils/log"),g=t("./event/event"),v=t("./event/eventtarget"),b=t("./location"),y=t("./event/close"),x=t("./event/trans-message"),_=t("./info-receiver"),w=function(){};function k(e,t,a){if(!(this instanceof k))return new k(e,t,a);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");v.call(this),this.readyState=k.CONNECTING,this.extensions="",this.protocol="",(a=a||{}).protocols_whitelist&&m.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=a.transports,this._transportOptions=a.transportOptions||{};var i=a.sessionId||8;if("function"==typeof i)this._generateSessionId=i;else{if("number"!=typeof i)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return r.string(i)}}this._server=a.server||r.numberString(1e3);var n=new s(e);if(!n.host||!n.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(n.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==n.protocol&&"https:"!==n.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+n.protocol+"' is not allowed.");var l="https:"===n.protocol;if("https"===b.protocol&&!l)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var o=t.sort();o.forEach(function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<o.length-1&&e===o[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")});var c=d.getOrigin(b.href);this._origin=c?c.toLowerCase():null,n.set("pathname",n.pathname.replace(/\/+$/,"")),this.url=n.href,w("using url",this.url),this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:d.isOriginEqual(this.url,b.href),sameScheme:d.isSchemeEqual(this.url,b.href)},this._ir=new _(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function S(e){return 1e3===e||e>=3e3&&e<=4999}"production"!==e.env.NODE_ENV&&(w=t("debug")("sockjs-client:main")),l(k,v),k.prototype.close=function(e,t){if(e&&!S(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==k.CLOSING&&this.readyState!==k.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},k.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===k.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===k.OPEN&&this._transport.send(c.quote(e))},k.version=t("./version"),k.CONNECTING=0,k.OPEN=1,k.CLOSING=2,k.CLOSED=3,k.prototype._receiveInfo=function(e,t){if(w("_receiveInfo",t),this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=h.extend(e,this._urlInfo),w("info",e);var a=n.filterToEnabled(this._transportsWhitelist,e);this._transports=a.main,w(this._transports.length+" enabled transports"),this._connect()}else this._close(1002,"Cannot connect to server")},k.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(w("attempt",e.transportName),e.needBody&&(!i.document.body||void 0!==i.document.readyState&&"complete"!==i.document.readyState&&"interactive"!==i.document.readyState))return w("waiting for body"),this._transports.unshift(e),void u.attachEvent("load",this._connect.bind(this));var t=this._rto*e.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t),w("using timeout",t);var a=d.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),n=this._transportOptions[e.transportName];w("transport url",a);var s=new e(a,this._transUrl,n);return s.on("message",this._transportMessage.bind(this)),s.once("close",this._transportClose.bind(this)),s.transportName=e.transportName,void(this._transport=s)}this._close(2e3,"All transports failed",!1)},k.prototype._transportTimeout=function(){w("_transportTimeout"),this.readyState===k.CONNECTING&&this._transportClose(2007,"Transport timed out")},k.prototype._transportMessage=function(e){w("_transportMessage",e);var t,a=this,i=e.slice(0,1),n=e.slice(1);switch(i){case"o":return void this._open();case"h":return this.dispatchEvent(new g("heartbeat")),void w("heartbeat",this.transport)}if(n)try{t=o.parse(n)}catch(e){w("bad json",n)}if(void 0!==t)switch(i){case"a":Array.isArray(t)&&t.forEach(function(e){w("message",a.transport,e),a.dispatchEvent(new x(e))});break;case"m":w("message",this.transport,t),this.dispatchEvent(new x(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}else w("empty payload",n)},k.prototype._transportClose=function(e,t){w("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),S(e)||2e3===e||this.readyState!==k.CONNECTING?this._close(e,t):this._connect()},k.prototype._open=function(){w("_open",this._transport.transportName,this.readyState),this.readyState===k.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=k.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new g("open")),w("connected",this.transport)):this._close(1006,"Server lost session")},k.prototype._close=function(e,t,a){w("_close",this.transport,e,t,a,this.readyState);var i=!1;if(this._ir&&(i=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===k.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=k.CLOSING,setTimeout(function(){this.readyState=k.CLOSED,i&&this.dispatchEvent(new g("error"));var n=new y("close");n.wasClean=a||!1,n.code=e||1e3,n.reason=t,this.dispatchEvent(n),this.onmessage=this.onclose=this.onerror=null,w("disconnected")}.bind(this),0)},k.prototype.countRTO=function(e){return e>100?4*e:300+e},a.exports=function(e){return n=p(e),t("./iframe-bootstrap")(k,e),k}}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:54,inherits:56,json3:57,"url-parse":61}],15:[function(e,t,a){var i,n=Array.prototype,s=Object.prototype,l=Function.prototype,o=String.prototype,r=n.slice,d=s.toString,p=function(e){return"[object Function]"===s.toString.call(e)},h=function(e){return"[object String]"===d.call(e)},f=c.a&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();i=f?function(e,t,a,i){!i&&t in e||c()(e,t,{configurable:!0,enumerable:!1,writable:!0,value:a})}:function(e,t,a,i){!i&&t in e||(e[t]=a)};var m=function(e,t,a){for(var n in t)s.hasOwnProperty.call(t,n)&&i(e,n,t[n],a)},g=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function v(){}m(l,{bind:function(e){var t=this;if(!p(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var a=r.call(arguments,1),i=Math.max(0,t.length-a.length),n=[],s=0;s<i;s++)n.push("$"+s);var l=Function("binder","return function ("+n.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof l){var i=t.apply(this,a.concat(r.call(arguments)));return Object(i)===i?i:this}return t.apply(e,a.concat(r.call(arguments)))});return t.prototype&&(v.prototype=t.prototype,l.prototype=new v,v.prototype=null),l}}),m(Array,{isArray:function(e){return"[object Array]"===d.call(e)}});var b,y,x,_=Object("a"),w="a"!==_[0]||!(0 in _);m(n,{forEach:function(e){var t=g(this),a=w&&h(this)?this.split(""):t,i=arguments[1],n=-1,s=a.length>>>0;if(!p(e))throw new TypeError;for(;++n<s;)n in a&&e.call(i,a[n],n,t)}},(b=n.forEach,y=!0,x=!0,b&&(b.call("foo",function(e,t,a){"object"!==(void 0===a?"undefined":u()(a))&&(y=!1)}),b.call([1],function(){x="string"==typeof this},"x")),!(b&&y&&x)));var k=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);m(n,{indexOf:function(e){var t=w&&h(this)?this.split(""):g(this),a=t.length>>>0;if(!a)return-1;var i,n,s=0;for(arguments.length>1&&(i=arguments[1],(n=+i)!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))),s=n),s=s>=0?s:Math.max(0,a+s);s<a;s++)if(s in t&&t[s]===e)return s;return-1}},k);var S,D=o.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(S=void 0===/()??/.exec("")[1],o.split=function(e,t){var a=this;if(void 0===e&&0===t)return[];if("[object RegExp]"!==d.call(e))return D.call(this,e,t);var i,s,l,o,r=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),u=0;for(e=new RegExp(e.source,c+"g"),a+="",S||(i=new RegExp("^"+e.source+"$(?!\\s)",c)),t=void 0===t?-1>>>0:t>>>0;(s=e.exec(a))&&!((l=s.index+s[0].length)>u&&(r.push(a.slice(u,s.index)),!S&&s.length>1&&s[0].replace(i,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(s[e]=void 0)}),s.length>1&&s.index<a.length&&n.push.apply(r,s.slice(1)),o=s[0].length,u=l,r.length>=t));)e.lastIndex===s.index&&e.lastIndex++;return u===a.length?!o&&e.test("")||r.push(""):r.push(a.slice(u)),r.length>t?r.slice(0,t):r}):"0".split(void 0,0).length&&(o.split=function(e,t){return void 0===e&&0===t?[]:D.call(this,e,t)});var C=o.substr,N="".substr&&"b"!=="0b".substr(-1);m(o,{substr:function(e,t){return C.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},N)},{}],16:[function(e,t,a){t.exports=[e("./transport/websocket"),e("./transport/xhr-streaming"),e("./transport/xdr-streaming"),e("./transport/eventsource"),e("./transport/lib/iframe-wrap")(e("./transport/eventsource")),e("./transport/htmlfile"),e("./transport/lib/iframe-wrap")(e("./transport/htmlfile")),e("./transport/xhr-polling"),e("./transport/xdr-polling"),e("./transport/lib/iframe-wrap")(e("./transport/xhr-polling")),e("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(t,a,i){(function(e,i){var n=t("events").EventEmitter,s=t("inherits"),l=t("../../utils/event"),o=t("../../utils/url"),r=i.XMLHttpRequest,c=function(){};function d(e,t,a,i){c(e,t);var s=this;n.call(this),setTimeout(function(){s._start(e,t,a,i)},0)}"production"!==e.env.NODE_ENV&&(c=t("debug")("sockjs-client:browser:xhr")),s(d,n),d.prototype._start=function(e,t,a,i){var n=this;try{this.xhr=new r}catch(e){}if(!this.xhr)return c("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();t=o.addQuery(t,"t="+ +new Date),this.unloadRef=l.unloadAdd(function(){c("unload cleanup"),n._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){c("xhr timeout"),n.emit("finish",0,""),n._cleanup(!1)})}catch(e){return c("exception",e),this.emit("finish",0,""),void this._cleanup(!1)}if(i&&i.noCredentials||!d.supportsCORS||(c("withCredentials"),this.xhr.withCredentials="true"),i&&i.headers)for(var s in i.headers)this.xhr.setRequestHeader(s,i.headers[s]);this.xhr.onreadystatechange=function(){if(n.xhr){var e,t,a=n.xhr;switch(c("readyState",a.readyState),a.readyState){case 3:try{t=a.status,e=a.responseText}catch(e){}c("status",t),1223===t&&(t=204),200===t&&e&&e.length>0&&(c("chunk"),n.emit("chunk",t,e));break;case 4:t=a.status,c("status",t),1223===t&&(t=204),12005!==t&&12029!==t||(t=0),c("finish",t,a.responseText),n.emit("finish",t,a.responseText),n._cleanup(!1)}}};try{n.xhr.send(a)}catch(e){n.emit("finish",0,""),n._cleanup(!1)}},d.prototype._cleanup=function(e){if(c("cleanup"),this.xhr){if(this.removeAllListeners(),l.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},d.prototype.close=function(){c("close"),this._cleanup(!0)},d.enabled=!!r;var u=["Active"].concat("Object").join("X");!d.enabled&&u in i&&(c("overriding xmlhttprequest"),r=function(){try{return new i[u]("Microsoft.XMLHTTP")}catch(e){return null}},d.enabled=!!new r);var p=!1;try{p="withCredentials"in new r}catch(e){}d.supportsCORS=p,a.exports=d}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:54,events:3,inherits:56}],18:[function(t,a,i){(function(e){a.exports=e.EventSource}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(t,a,i){(function(e){var t=e.WebSocket||e.MozWebSocket;a.exports=t?function(e){return new t(e)}:void 0}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,a){var i=e("inherits"),n=e("./lib/ajax-based"),s=e("./receiver/eventsource"),l=e("./sender/xhr-cors"),o=e("eventsource");function r(e){if(!r.enabled())throw new Error("Transport created when disabled");n.call(this,e,"/eventsource",s,l)}i(r,n),r.enabled=function(){return!!o},r.transportName="eventsource",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:56}],21:[function(e,t,a){var i=e("inherits"),n=e("./receiver/htmlfile"),s=e("./sender/xhr-local"),l=e("./lib/ajax-based");function o(e){if(!n.enabled)throw new Error("Transport created when disabled");l.call(this,e,"/htmlfile",n,s)}i(o,l),o.enabled=function(e){return n.enabled&&e.sameOrigin},o.transportName="htmlfile",o.roundTrips=2,t.exports=o},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:56}],22:[function(e,t,a){(function(a){var i=e("inherits"),n=e("json3"),s=e("events").EventEmitter,l=e("../version"),o=e("../utils/url"),r=e("../utils/iframe"),c=e("../utils/event"),d=e("../utils/random"),u=function(){};function p(e,t,a){if(!p.enabled())throw new Error("Transport created when disabled");s.call(this);var i=this;this.origin=o.getOrigin(a),this.baseUrl=a,this.transUrl=t,this.transport=e,this.windowId=d.string(8);var n=o.addPath(a,"/iframe.html")+"#"+this.windowId;u(e,t,n),this.iframeObj=r.createIframe(n,function(e){u("err callback"),i.emit("close",1006,"Unable to load an iframe ("+e+")"),i.close()}),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}"production"!==a.env.NODE_ENV&&(u=e("debug")("sockjs-client:transport:iframe")),i(p,s),p.prototype.close=function(){if(u("close"),this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},p.prototype._message=function(e){if(u("message",e.data),o.isOriginEqual(e.origin,this.origin)){var t;try{t=n.parse(e.data)}catch(t){return void u("bad json",e.data)}if(t.windowId===this.windowId)switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",n.stringify([l,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var a;try{a=n.parse(t.data)}catch(e){return void u("bad json",t.data)}this.emit("close",a[0],a[1]),this.close()}else u("mismatched window id",t.windowId,this.windowId)}else u("not same origin",e.origin,this.origin)},p.prototype.postMessage=function(e,t){u("postMessage",e,t),this.iframeObj.post(n.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},p.prototype.send=function(e){u("send",e),this.postMessage("m",e)},p.enabled=function(){return r.iframeEnabled},p.transportName="iframe",p.roundTrips=2,t.exports=p}).call(this,{env:{}})},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:54,events:3,inherits:56,json3:57}],23:[function(t,a,i){(function(e){var i=t("inherits"),n=t("./lib/sender-receiver"),s=t("./receiver/jsonp"),l=t("./sender/jsonp");function o(e){if(!o.enabled())throw new Error("Transport created when disabled");n.call(this,e,"/jsonp",l,s)}i(o,n),o.enabled=function(){return!!e.document},o.transportName="jsonp-polling",o.roundTrips=1,o.needBody=!0,a.exports=o}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:56}],24:[function(e,t,a){(function(a){var i=e("inherits"),n=e("../../utils/url"),s=e("./sender-receiver"),l=function(){};function o(e,t,a,i){s.call(this,e,t,function(e){return function(t,a,i){l("create ajax sender",t,a);var s={};"string"==typeof a&&(s.headers={"Content-type":"text/plain"});var o=n.addPath(t,"/xhr_send"),r=new e("POST",o,a,s);return r.once("finish",function(e){if(l("finish",e),r=null,200!==e&&204!==e)return i(new Error("http status "+e));i()}),function(){l("abort"),r.close(),r=null;var e=new Error("Aborted");e.code=1e3,i(e)}}}(i),a,i)}"production"!==a.env.NODE_ENV&&(l=e("debug")("sockjs-client:ajax-based")),i(o,s),t.exports=o}).call(this,{env:{}})},{"../../utils/url":52,"./sender-receiver":28,debug:54,inherits:56}],25:[function(e,t,a){(function(a){var i=e("inherits"),n=e("events").EventEmitter,s=function(){};function l(e,t){s(e),n.call(this),this.sendBuffer=[],this.sender=t,this.url=e}"production"!==a.env.NODE_ENV&&(s=e("debug")("sockjs-client:buffered-sender")),i(l,n),l.prototype.send=function(e){s("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},l.prototype.sendScheduleWait=function(){s("sendScheduleWait");var e,t=this;this.sendStop=function(){s("sendStop"),t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){s("timeout"),t.sendStop=null,t.sendSchedule()},25)},l.prototype.sendSchedule=function(){s("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(s("error",t),e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}},l.prototype._cleanup=function(){s("_cleanup"),this.removeAllListeners()},l.prototype.close=function(){s("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},t.exports=l}).call(this,{env:{}})},{debug:54,events:3,inherits:56}],26:[function(t,a,i){(function(e){var i=t("inherits"),n=t("../iframe"),s=t("../../utils/object");a.exports=function(t){function a(e,a){n.call(this,t.transportName,e,a)}return i(a,n),a.enabled=function(a,i){if(!e.document)return!1;var l=s.extend({},i);return l.sameOrigin=!0,t.enabled(l)&&n.enabled()},a.transportName="iframe-"+t.transportName,a.needBody=!0,a.roundTrips=n.roundTrips+t.roundTrips-1,a.facadeTransport=t,a}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/object":49,"../iframe":22,inherits:56}],27:[function(e,t,a){(function(a){var i=e("inherits"),n=e("events").EventEmitter,s=function(){};function l(e,t,a){s(t),n.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=a,this._scheduleReceiver()}"production"!==a.env.NODE_ENV&&(s=e("debug")("sockjs-client:polling")),i(l,n),l.prototype._scheduleReceiver=function(){s("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(t){s("message",t),e.emit("message",t)}),t.once("close",function(a,i){s("close",a,i,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||("network"===i?e._scheduleReceiver():(e.emit("close",a||1006,i),e.removeAllListeners()))})},l.prototype.abort=function(){s("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},t.exports=l}).call(this,{env:{}})},{debug:54,events:3,inherits:56}],28:[function(e,t,a){(function(a){var i=e("inherits"),n=e("../../utils/url"),s=e("./buffered-sender"),l=e("./polling"),o=function(){};function r(e,t,a,i,r){var c=n.addPath(e,t);o(c);var d=this;s.call(this,e,a),this.poll=new l(i,c,r),this.poll.on("message",function(e){o("poll message",e),d.emit("message",e)}),this.poll.once("close",function(e,t){o("poll close",e,t),d.poll=null,d.emit("close",e,t),d.close()})}"production"!==a.env.NODE_ENV&&(o=e("debug")("sockjs-client:sender-receiver")),i(r,s),r.prototype.close=function(){s.prototype.close.call(this),o("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},t.exports=r}).call(this,{env:{}})},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:54,inherits:56}],29:[function(e,t,a){(function(a){var i=e("inherits"),n=e("events").EventEmitter,s=e("eventsource"),l=function(){};function o(e){l(e),n.call(this);var t=this,a=this.es=new s(e);a.onmessage=function(e){l("message",e.data),t.emit("message",decodeURI(e.data))},a.onerror=function(e){l("error",a.readyState,e);var i=2!==a.readyState?"network":"permanent";t._cleanup(),t._close(i)}}"production"!==a.env.NODE_ENV&&(l=e("debug")("sockjs-client:receiver:eventsource")),i(o,n),o.prototype.abort=function(){l("abort"),this._cleanup(),this._close("user")},o.prototype._cleanup=function(){l("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},o.prototype._close=function(e){l("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},t.exports=o}).call(this,{env:{}})},{debug:54,events:3,eventsource:18,inherits:56}],30:[function(t,a,i){(function(e,i){var n=t("inherits"),s=t("../../utils/iframe"),l=t("../../utils/url"),o=t("events").EventEmitter,r=t("../../utils/random"),c=function(){};function d(e){c(e),o.call(this);var t=this;s.polluteGlobalNamespace(),this.id="a"+r.string(6),e=l.addQuery(e,"c="+decodeURIComponent(s.WPrefix+"."+this.id)),c("using htmlfile",d.htmlfileEnabled);var a=d.htmlfileEnabled?s.createHtmlfile:s.createIframe;i[s.WPrefix][this.id]={start:function(){c("start"),t.iframeObj.loaded()},message:function(e){c("message",e),t.emit("message",e)},stop:function(){c("stop"),t._cleanup(),t._close("network")}},this.iframeObj=a(e,function(){c("callback"),t._cleanup(),t._close("permanent")})}"production"!==e.env.NODE_ENV&&(c=t("debug")("sockjs-client:receiver:htmlfile")),n(d,o),d.prototype.abort=function(){c("abort"),this._cleanup(),this._close("user")},d.prototype._cleanup=function(){c("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete i[s.WPrefix][this.id]},d.prototype._close=function(e){c("_close",e),this.emit("close",null,e),this.removeAllListeners()},d.htmlfileEnabled=!1;var u=["Active"].concat("Object").join("X");if(u in i)try{d.htmlfileEnabled=!!new i[u]("htmlfile")}catch(e){}d.enabled=d.htmlfileEnabled||s.iframeEnabled,a.exports=d}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:54,events:3,inherits:56}],31:[function(t,a,i){(function(e,i){var n=t("../../utils/iframe"),s=t("../../utils/random"),l=t("../../utils/browser"),o=t("../../utils/url"),r=t("inherits"),c=t("events").EventEmitter,d=function(){};function u(e){d(e);var t=this;c.call(this),n.polluteGlobalNamespace(),this.id="a"+s.string(6);var a=o.addQuery(e,"c="+encodeURIComponent(n.WPrefix+"."+this.id));i[n.WPrefix][this.id]=this._callback.bind(this),this._createScript(a),this.timeoutId=setTimeout(function(){d("timeout"),t._abort(new Error("JSONP script loaded abnormally (timeout)"))},u.timeout)}"production"!==e.env.NODE_ENV&&(d=t("debug")("sockjs-client:receiver:jsonp")),r(u,c),u.prototype.abort=function(){if(d("abort"),i[n.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},u.timeout=35e3,u.scriptErrorTimeout=1e3,u.prototype._callback=function(e){d("_callback",e),this._cleanup(),this.aborting||(e&&(d("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},u.prototype._abort=function(e){d("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},u.prototype._cleanup=function(){if(d("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete i[n.WPrefix][this.id]},u.prototype._scriptError=function(){d("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},u.scriptErrorTimeout))},u.prototype._createScript=function(e){d("_createScript",e);var t,a=this,n=this.script=i.document.createElement("script");if(n.id="a"+s.string(8),n.src=e,n.type="text/javascript",n.charset="UTF-8",n.onerror=this._scriptError.bind(this),n.onload=function(){d("onload"),a._abort(new Error("JSONP script loaded abnormally (onload)"))},n.onreadystatechange=function(){if(d("onreadystatechange",n.readyState),/loaded|closed/.test(n.readyState)){if(n&&n.htmlFor&&n.onclick){a.loadedOkay=!0;try{n.onclick()}catch(e){}}n&&a._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===n.async&&i.document.attachEvent)if(l.isOpera())(t=this.script2=i.document.createElement("script")).text="try{var a = document.getElementById('"+n.id+"'); if(a)a.onerror();}catch(x){};",n.async=t.async=!1;else{try{n.htmlFor=n.id,n.event="onclick"}catch(e){}n.async=!0}void 0!==n.async&&(n.async=!0);var o=i.document.getElementsByTagName("head")[0];o.insertBefore(n,o.firstChild),t&&o.insertBefore(t,o.firstChild)},a.exports=u}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:54,events:3,inherits:56}],32:[function(e,t,a){(function(a){var i=e("inherits"),n=e("events").EventEmitter,s=function(){};function l(e,t){s(e),n.call(this);var a=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,t){s("finish",e,t),a._chunkHandler(e,t),a.xo=null;var i=200===e?"network":"permanent";s("close",i),a.emit("close",null,i),a._cleanup()})}"production"!==a.env.NODE_ENV&&(s=e("debug")("sockjs-client:receiver:xhr")),i(l,n),l.prototype._chunkHandler=function(e,t){if(s("_chunkHandler",e),200===e&&t)for(var a=-1;;this.bufferPosition+=a+1){var i=t.slice(this.bufferPosition);if(-1===(a=i.indexOf("\n")))break;var n=i.slice(0,a);n&&(s("message",n),this.emit("message",n))}},l.prototype._cleanup=function(){s("_cleanup"),this.removeAllListeners()},l.prototype.abort=function(){s("abort"),this.xo&&(this.xo.close(),s("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},t.exports=l}).call(this,{env:{}})},{debug:54,events:3,inherits:56}],33:[function(t,a,i){(function(e,i){var n,s,l=t("../../utils/random"),o=t("../../utils/url"),r=function(){};"production"!==e.env.NODE_ENV&&(r=t("debug")("sockjs-client:sender:jsonp")),a.exports=function(e,t,a){r(e,t),n||(r("createForm"),(n=i.document.createElement("form")).style.display="none",n.style.position="absolute",n.method="POST",n.enctype="application/x-www-form-urlencoded",n.acceptCharset="UTF-8",(s=i.document.createElement("textarea")).name="d",n.appendChild(s),i.document.body.appendChild(n));var c="a"+l.string(8);n.target=c,n.action=o.addQuery(o.addPath(e,"/jsonp_send"),"i="+c);var d=function(e){r("createIframe",e);try{return i.document.createElement('<iframe name="'+e+'">')}catch(a){var t=i.document.createElement("iframe");return t.name=e,t}}(c);d.id=c,d.style.display="none",n.appendChild(d);try{s.value=t}catch(e){}n.submit();var u=function(e){r("completed",c,e),d.onerror&&(d.onreadystatechange=d.onerror=d.onload=null,setTimeout(function(){r("cleaning up",c),d.parentNode.removeChild(d),d=null},500),s.value="",a(e))};return d.onerror=function(){r("onerror",c),u()},d.onload=function(){r("onload",c),u()},d.onreadystatechange=function(e){r("onreadystatechange",c,d.readyState,e),"complete"===d.readyState&&u()},function(){r("aborted",c),u(new Error("Aborted"))}}}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:54}],34:[function(t,a,i){(function(e,i){var n=t("events").EventEmitter,s=t("inherits"),l=t("../../utils/event"),o=t("../../utils/browser"),r=t("../../utils/url"),c=function(){};function d(e,t,a){c(e,t);var i=this;n.call(this),setTimeout(function(){i._start(e,t,a)},0)}"production"!==e.env.NODE_ENV&&(c=t("debug")("sockjs-client:sender:xdr")),s(d,n),d.prototype._start=function(e,t,a){c("_start");var n=this,s=new i.XDomainRequest;t=r.addQuery(t,"t="+ +new Date),s.onerror=function(){c("onerror"),n._error()},s.ontimeout=function(){c("ontimeout"),n._error()},s.onprogress=function(){c("progress",s.responseText),n.emit("chunk",200,s.responseText)},s.onload=function(){c("load"),n.emit("finish",200,s.responseText),n._cleanup(!1)},this.xdr=s,this.unloadRef=l.unloadAdd(function(){n._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(a)}catch(e){this._error()}},d.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},d.prototype._cleanup=function(e){if(c("cleanup",e),this.xdr){if(this.removeAllListeners(),l.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},d.prototype.close=function(){c("close"),this._cleanup(!0)},d.enabled=!(!i.XDomainRequest||!o.hasDomain()),a.exports=d}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:54,events:3,inherits:56}],35:[function(e,t,a){var i=e("inherits"),n=e("../driver/xhr");function s(e,t,a,i){n.call(this,e,t,a,i)}i(s,n),s.enabled=n.enabled&&n.supportsCORS,t.exports=s},{"../driver/xhr":17,inherits:56}],36:[function(e,t,a){var i=e("events").EventEmitter;function n(){var e=this;i.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},n.timeout)}e("inherits")(n,i),n.prototype.close=function(){clearTimeout(this.to)},n.timeout=2e3,t.exports=n},{events:3,inherits:56}],37:[function(e,t,a){var i=e("inherits"),n=e("../driver/xhr");function s(e,t,a){n.call(this,e,t,a,{noCredentials:!0})}i(s,n),s.enabled=n.enabled,t.exports=s},{"../driver/xhr":17,inherits:56}],38:[function(e,t,a){(function(a){var i=e("../utils/event"),n=e("../utils/url"),s=e("inherits"),l=e("events").EventEmitter,o=e("./driver/websocket"),r=function(){};function c(e,t,a){if(!c.enabled())throw new Error("Transport created when disabled");l.call(this),r("constructor",e);var s=this,d=n.addPath(e,"/websocket");d="https"===d.slice(0,5)?"wss"+d.slice(5):"ws"+d.slice(4),this.url=d,this.ws=new o(this.url,[],a),this.ws.onmessage=function(e){r("message event",e.data),s.emit("message",e.data)},this.unloadRef=i.unloadAdd(function(){r("unload"),s.ws.close()}),this.ws.onclose=function(e){r("close event",e.code,e.reason),s.emit("close",e.code,e.reason),s._cleanup()},this.ws.onerror=function(e){r("error event",e),s.emit("close",1006,"WebSocket connection broken"),s._cleanup()}}"production"!==a.env.NODE_ENV&&(r=e("debug")("sockjs-client:websocket")),s(c,l),c.prototype.send=function(e){var t="["+e+"]";r("send",t),this.ws.send(t)},c.prototype.close=function(){r("close");var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){r("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),i.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return r("enabled"),!!o},c.transportName="websocket",c.roundTrips=2,t.exports=c}).call(this,{env:{}})},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:54,events:3,inherits:56}],39:[function(e,t,a){var i=e("inherits"),n=e("./lib/ajax-based"),s=e("./xdr-streaming"),l=e("./receiver/xhr"),o=e("./sender/xdr");function r(e){if(!o.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr",l,o)}i(r,n),r.enabled=s.enabled,r.transportName="xdr-polling",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:56}],40:[function(e,t,a){var i=e("inherits"),n=e("./lib/ajax-based"),s=e("./receiver/xhr"),l=e("./sender/xdr");function o(e){if(!l.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr_streaming",s,l)}i(o,n),o.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(l.enabled&&e.sameScheme)},o.transportName="xdr-streaming",o.roundTrips=2,t.exports=o},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:56}],41:[function(e,t,a){var i=e("inherits"),n=e("./lib/ajax-based"),s=e("./receiver/xhr"),l=e("./sender/xhr-cors"),o=e("./sender/xhr-local");function r(e){if(!o.enabled&&!l.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr",s,l)}i(r,n),r.enabled=function(e){return!e.nullOrigin&&(!(!o.enabled||!e.sameOrigin)||l.enabled)},r.transportName="xhr-polling",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:56}],42:[function(t,a,i){(function(e){var i=t("inherits"),n=t("./lib/ajax-based"),s=t("./receiver/xhr"),l=t("./sender/xhr-cors"),o=t("./sender/xhr-local"),r=t("../utils/browser");function c(e){if(!o.enabled&&!l.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr_streaming",s,l)}i(c,n),c.enabled=function(e){return!e.nullOrigin&&(!r.isOpera()&&l.enabled)},c.transportName="xhr-streaming",c.roundTrips=2,c.needBody=!!e.document,a.exports=c}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:56}],43:[function(t,a,i){(function(e){e.crypto&&e.crypto.getRandomValues?a.exports.randomBytes=function(t){var a=new Uint8Array(t);return e.crypto.getRandomValues(a),a}:a.exports.randomBytes=function(e){for(var t=new Array(e),a=0;a<e;a++)t[a]=Math.floor(256*Math.random());return t}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(t,a,i){(function(e){a.exports={isOpera:function(){return e.navigator&&/opera/i.test(e.navigator.userAgent)},isKonqueror:function(){return e.navigator&&/konqueror/i.test(e.navigator.userAgent)},hasDomain:function(){if(!e.document)return!0;try{return!!e.document.domain}catch(e){return!1}}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,a){var i,n=e("json3"),s=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;t.exports={quote:function(e){var t=n.stringify(e);return s.lastIndex=0,s.test(t)?(i||(i=function(e){var t,a={},i=[];for(t=0;t<65536;t++)i.push(String.fromCharCode(t));return e.lastIndex=0,i.join("").replace(e,function(e){return a[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,a}(s)),t.replace(s,function(e){return i[e]})):t}}},{json3:57}],46:[function(t,a,i){(function(e){var i=t("./random"),n={},s=!1,l=e.chrome&&e.chrome.app&&e.chrome.app.runtime;a.exports={attachEvent:function(t,a){void 0!==e.addEventListener?e.addEventListener(t,a,!1):e.document&&e.attachEvent&&(e.document.attachEvent("on"+t,a),e.attachEvent("on"+t,a))},detachEvent:function(t,a){void 0!==e.addEventListener?e.removeEventListener(t,a,!1):e.document&&e.detachEvent&&(e.document.detachEvent("on"+t,a),e.detachEvent("on"+t,a))},unloadAdd:function(e){if(l)return null;var t=i.string(8);return n[t]=e,s&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in n&&delete n[e]},triggerUnloadCallbacks:function(){for(var e in n)n[e](),delete n[e]}};l||a.exports.attachEvent("unload",function(){s||(s=!0,a.exports.triggerUnloadCallbacks())})}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./random":50}],47:[function(t,a,i){(function(e,i){var n=t("./event"),s=t("json3"),l=t("./browser"),o=function(){};"production"!==e.env.NODE_ENV&&(o=t("debug")("sockjs-client:utils:iframe")),a.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){a.exports.WPrefix in i||(i[a.exports.WPrefix]={})},postMessage:function(e,t){i.parent!==i?i.parent.postMessage(s.stringify({windowId:a.exports.currentWindowId,type:e,data:t||""}),"*"):o("Cannot postMessage, no parent window.",e,t)},createIframe:function(e,t){var a,s,l=i.document.createElement("iframe"),r=function(){o("unattach"),clearTimeout(a);try{l.onload=null}catch(e){}l.onerror=null},c=function(){o("cleanup"),l&&(r(),setTimeout(function(){l&&l.parentNode.removeChild(l),l=null},0),n.unloadDel(s))},d=function(e){o("onerror",e),l&&(c(),t(e))};return l.src=e,l.style.display="none",l.style.position="absolute",l.onerror=function(){d("onerror")},l.onload=function(){o("onload"),clearTimeout(a),a=setTimeout(function(){d("onload timeout")},2e3)},i.document.body.appendChild(l),a=setTimeout(function(){d("timeout")},15e3),s=n.unloadAdd(c),{post:function(e,t){o("post",e,t);try{setTimeout(function(){l&&l.contentWindow&&l.contentWindow.postMessage(e,t)},0)}catch(e){}},cleanup:c,loaded:r}},createHtmlfile:function(e,t){var s,l,r,c=["Active"].concat("Object").join("X"),d=new i[c]("htmlfile"),u=function(){clearTimeout(s),r.onerror=null},p=function(){d&&(u(),n.unloadDel(l),r.parentNode.removeChild(r),r=d=null,CollectGarbage())},h=function(e){o("onerror",e),d&&(p(),t(e))};d.open(),d.write('<html><script>document.domain="'+i.document.domain+'";<\/script></html>'),d.close(),d.parentWindow[a.exports.WPrefix]=i[a.exports.WPrefix];var f=d.createElement("div");return d.body.appendChild(f),r=d.createElement("iframe"),f.appendChild(r),r.src=e,r.onerror=function(){h("onerror")},s=setTimeout(function(){h("timeout")},15e3),l=n.unloadAdd(p),{post:function(e,t){try{setTimeout(function(){r&&r.contentWindow&&r.contentWindow.postMessage(e,t)},0)}catch(e){}},cleanup:p,loaded:u}}},a.exports.iframeEnabled=!1,i.document&&(a.exports.iframeEnabled=("function"==typeof i.postMessage||"object"===u()(i.postMessage))&&!l.isKonqueror())}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browser":44,"./event":46,debug:54,json3:57}],48:[function(t,a,i){(function(e){var t={};["log","debug","warn"].forEach(function(a){var i;try{i=e.console&&e.console[a]&&e.console[a].apply}catch(e){}t[a]=i?function(){return e.console[a].apply(e.console,arguments)}:"log"===a?function(){}:t.log}),a.exports=t}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,a){t.exports={isObject:function(e){var t=void 0===e?"undefined":u()(e);return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,a,i=1,n=arguments.length;i<n;i++)for(a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}}},{}],50:[function(e,t,a){var i=e("crypto");t.exports={string:function(e){for(var t="abcdefghijklmnopqrstuvwxyz012345".length,a=i.randomBytes(e),n=[],s=0;s<e;s++)n.push("abcdefghijklmnopqrstuvwxyz012345".substr(a[s]%t,1));return n.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},{crypto:43}],51:[function(e,t,a){(function(a){var i=function(){};"production"!==a.env.NODE_ENV&&(i=e("debug")("sockjs-client:utils:transport")),t.exports=function(e){return{filterToEnabled:function(t,a){var n={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach(function(e){e&&("websocket"!==e.transportName||!1!==a.websocket?t.length&&-1===t.indexOf(e.transportName)?i("not in whitelist",e.transportName):e.enabled(a)?(i("enabled",e.transportName),n.main.push(e),e.facadeTransport&&n.facade.push(e.facadeTransport)):i("disabled",e.transportName):i("disabled from server","websocket"))}),n}}}}).call(this,{env:{}})},{debug:54}],52:[function(e,t,a){(function(a){var i=e("url-parse"),n=function(){};"production"!==a.env.NODE_ENV&&(n=e("debug")("sockjs-client:utils:url")),t.exports={getOrigin:function(e){if(!e)return null;var t=new i(e);if("file:"===t.protocol)return null;var a=t.port;return a||(a="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+a},isOriginEqual:function(e,t){var a=this.getOrigin(e)===this.getOrigin(t);return n("same",e,t,a),a},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var a=e.split("?");return a[0]+t+(a[1]?"?"+a[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}}).call(this,{env:{}})},{debug:54,"url-parse":61}],53:[function(e,t,a){t.exports="1.1.2"},{}],54:[function(e,t,a){(function(i){function n(){try{return a.storage.debug}catch(e){}if(void 0!==i&&"env"in i)return i.env.DEBUG}(a=t.exports=e("./debug")).log=function(){return"object"===("undefined"==typeof console?"undefined":u()(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},a.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+a.humanize(this.diff),!t)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var n=0,s=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(s=++n)}),e.splice(s,0,i)},a.save=function(e){try{null==e?a.storage.removeItem("debug"):a.storage.debug=e}catch(e){}},a.load=n,a.useColors=function(){if("undefined"!=typeof window&&window&&void 0!==window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},a.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],a.formatters.j=function(e){try{return o()(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},a.enable(n())}).call(this,{env:{}})},{"./debug":55}],55:[function(e,t,a){var i;function n(e){function t(){if(t.enabled){var e=t,n=+new Date,s=n-(i||n);e.diff=s,e.prev=i,e.curr=n,i=n;for(var l=new Array(arguments.length),o=0;o<l.length;o++)l[o]=arguments[o];l[0]=a.coerce(l[0]),"string"!=typeof l[0]&&l.unshift("%O");var r=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,function(t,i){if("%%"===t)return t;r++;var n=a.formatters[i];if("function"==typeof n){var s=l[r];t=n.call(e,s),l.splice(r,1),r--}return t}),a.formatArgs.call(e,l),(t.log||a.log||console.log.bind(console)).apply(e,l)}}return t.namespace=e,t.enabled=a.enabled(e),t.useColors=a.useColors(),t.color=function(e){var t,i=0;for(t in e)i=(i<<5)-i+e.charCodeAt(t),i|=0;return a.colors[Math.abs(i)%a.colors.length]}(e),"function"==typeof a.init&&a.init(t),t}(a=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},a.disable=function(){a.enable("")},a.enable=function(e){a.save(e);for(var t=(e||"").split(/[\s,]+/),i=t.length,n=0;n<i;n++)t[n]&&("-"===(e=t[n].replace(/\*/g,".*?"))[0]?a.skips.push(new RegExp("^"+e.substr(1)+"$")):a.names.push(new RegExp("^"+e+"$")))},a.enabled=function(e){var t,i;for(t=0,i=a.skips.length;t<i;t++)if(a.skips[t].test(e))return!1;for(t=0,i=a.names.length;t<i;t++)if(a.names[t].test(e))return!0;return!1},a.humanize=e("ms"),a.names=[],a.skips=[],a.formatters={}},{ms:58}],56:[function(e,t,a){"function"==typeof s.a?t.exports=function(e,t){e.super_=t,e.prototype=s()(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}},{}],57:[function(t,a,i){(function(e){(function(){var t={function:!0,object:!0},n=t[void 0===i?"undefined":u()(i)]&&i&&!i.nodeType&&i,s=t["undefined"==typeof window?"undefined":u()(window)]&&window||this,l=n&&t[void 0===a?"undefined":u()(a)]&&a&&!a.nodeType&&"object"==(void 0===e?"undefined":u()(e))&&e;function o(e,a){e||(e=s.Object()),a||(a=s.Object());var i=e.Number||s.Number,n=e.String||s.String,l=e.Object||s.Object,r=e.Date||s.Date,c=e.SyntaxError||s.SyntaxError,d=e.TypeError||s.TypeError,p=e.Math||s.Math,h=e.JSON||s.JSON;"object"==(void 0===h?"undefined":u()(h))&&h&&(a.stringify=h.stringify,a.parse=h.parse);var f,m,g,v=l.prototype,b=v.toString,y=new r(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(e){}function x(e){if(x[e]!==g)return x[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=x("json-stringify")&&x("json-parse");else{var s,l='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var o=a.stringify,c="function"==typeof o&&y;if(c){(s=function(){return 1}).toJSON=s;try{c="0"===o(0)&&"0"===o(new i)&&'""'==o(new n)&&o(b)===g&&o(g)===g&&o()===g&&"1"===o(s)&&"[1]"==o([s])&&"[null]"==o([g])&&"null"==o(null)&&"[null,null,null]"==o([g,b,null])&&o({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==l&&"1"===o(null,s)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new r(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new r(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new r(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new r(-1))}catch(e){c=!1}}t=c}if("json-parse"==e){var d=a.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){var u=5==(s=d(l)).a.length&&1===s.a[0];if(u){try{u=!d('"\t"')}catch(e){}if(u)try{u=1!==d("01")}catch(e){}if(u)try{u=1!==d("1.")}catch(e){}}}}catch(e){u=!1}t=u}}return x[e]=!!t}if(!x("json")){var _=x("bug-string-char-index");if(!y)var w=p.floor,k=[0,31,59,90,120,151,181,212,243,273,304,334],S=function(e,t){return k[t]+365*(e-1970)+w((e-1969+(t=+(t>1)))/4)-w((e-1901+t)/100)+w((e-1601+t)/400)};if((f=v.hasOwnProperty)||(f=function(e){var t,a={};return(a.__proto__=null,a.__proto__={toString:1},a).toString!=b?f=function(e){var t=this.__proto__,a=e in(this.__proto__=null,this);return this.__proto__=t,a}:(t=a.constructor,f=function(e){var a=(this.constructor||t).prototype;return e in this&&!(e in a&&this[e]===a[e])}),a=null,f.call(this,e)}),m=function(e,a){var i,n,s,l=0;for(s in(i=function(){this.valueOf=0}).prototype.valueOf=0,n=new i)f.call(n,s)&&l++;return i=n=null,l?m=2==l?function(e,t){var a,i={},n="[object Function]"==b.call(e);for(a in e)n&&"prototype"==a||f.call(i,a)||!(i[a]=1)||!f.call(e,a)||t(a)}:function(e,t){var a,i,n="[object Function]"==b.call(e);for(a in e)n&&"prototype"==a||!f.call(e,a)||(i="constructor"===a)||t(a);(i||f.call(e,a="constructor"))&&t(a)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,a){var i,s,l="[object Function]"==b.call(e),o=!l&&"function"!=typeof e.constructor&&t[u()(e.hasOwnProperty)]&&e.hasOwnProperty||f;for(i in e)l&&"prototype"==i||!o.call(e,i)||a(i);for(s=n.length;i=n[--s];o.call(e,i)&&a(i));}),m(e,a)},!x("json-stringify")){var D={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},C=function(e,t){return("000000"+(t||0)).slice(-e)},N=function(e){for(var t='"',a=0,i=e.length,n=!_||i>10,s=n&&(_?e.split(""):e);a<i;a++){var l=e.charCodeAt(a);switch(l){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=D[l];break;default:if(l<32){t+="\\u00"+C(2,l.toString(16));break}t+=n?s[a]:e.charAt(a)}}return t+'"'};a.stringify=function(e,a,i){var n,s,l,o;if(t[void 0===a?"undefined":u()(a)]&&a)if("[object Function]"==(o=b.call(a)))s=a;else if("[object Array]"==o){l={};for(var r,c=0,p=a.length;c<p;r=a[c++],("[object String]"==(o=b.call(r))||"[object Number]"==o)&&(l[r]=1));}if(i)if("[object Number]"==(o=b.call(i))){if((i-=i%1)>0)for(n="",i>10&&(i=10);n.length<i;n+=" ");}else"[object String]"==o&&(n=i.length<=10?i:i.slice(0,10));return function e(t,a,i,n,s,l,o){var r,c,p,h,v,y,x,_,k,D,P,I,V,R,E,T;try{r=a[t]}catch(e){}if("object"==(void 0===r?"undefined":u()(r))&&r)if("[object Date]"!=(c=b.call(r))||f.call(r,"toJSON"))"function"==typeof r.toJSON&&("[object Number]"!=c&&"[object String]"!=c&&"[object Array]"!=c||f.call(r,"toJSON"))&&(r=r.toJSON(t));else if(r>-1/0&&r<1/0){if(S){for(v=w(r/864e5),p=w(v/365.2425)+1970-1;S(p+1,0)<=v;p++);for(h=w((v-S(p,0))/30.42);S(p,h+1)<=v;h++);v=1+v-S(p,h),x=w((y=(r%864e5+864e5)%864e5)/36e5)%24,_=w(y/6e4)%60,k=w(y/1e3)%60,D=y%1e3}else p=r.getUTCFullYear(),h=r.getUTCMonth(),v=r.getUTCDate(),x=r.getUTCHours(),_=r.getUTCMinutes(),k=r.getUTCSeconds(),D=r.getUTCMilliseconds();r=(p<=0||p>=1e4?(p<0?"-":"+")+C(6,p<0?-p:p):C(4,p))+"-"+C(2,h+1)+"-"+C(2,v)+"T"+C(2,x)+":"+C(2,_)+":"+C(2,k)+"."+C(3,D)+"Z"}else r=null;if(i&&(r=i.call(a,t,r)),null===r)return"null";if("[object Boolean]"==(c=b.call(r)))return""+r;if("[object Number]"==c)return r>-1/0&&r<1/0?""+r:"null";if("[object String]"==c)return N(""+r);if("object"==(void 0===r?"undefined":u()(r))){for(R=o.length;R--;)if(o[R]===r)throw d();if(o.push(r),P=[],E=l,l+=s,"[object Array]"==c){for(V=0,R=r.length;V<R;V++)I=e(V,r,i,n,s,l,o),P.push(I===g?"null":I);T=P.length?s?"[\n"+l+P.join(",\n"+l)+"\n"+E+"]":"["+P.join(",")+"]":"[]"}else m(n||r,function(t){var a=e(t,r,i,n,s,l,o);a!==g&&P.push(N(t)+":"+(s?" ":"")+a)}),T=P.length?s?"{\n"+l+P.join(",\n"+l)+"\n"+E+"}":"{"+P.join(",")+"}":"{}";return o.pop(),T}}("",((r={})[""]=e,r),s,l,n,"",[])}}if(!x("json-parse")){var P,I,V=n.fromCharCode,R={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},E=function(){throw P=I=null,c()},T=function(){for(var e,t,a,i,n,s=I,l=s.length;P<l;)switch(n=s.charCodeAt(P)){case 9:case 10:case 13:case 32:P++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=_?s.charAt(P):s[P],P++,e;case 34:for(e="@",P++;P<l;)if((n=s.charCodeAt(P))<32)E();else if(92==n)switch(n=s.charCodeAt(++P)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=R[n],P++;break;case 117:for(t=++P,a=P+4;P<a;P++)(n=s.charCodeAt(P))>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70||E();e+=V("0x"+s.slice(t,P));break;default:E()}else{if(34==n)break;for(n=s.charCodeAt(P),t=P;n>=32&&92!=n&&34!=n;)n=s.charCodeAt(++P);e+=s.slice(t,P)}if(34==s.charCodeAt(P))return P++,e;E();default:if(t=P,45==n&&(i=!0,n=s.charCodeAt(++P)),n>=48&&n<=57){for(48==n&&((n=s.charCodeAt(P+1))>=48&&n<=57)&&E(),i=!1;P<l&&((n=s.charCodeAt(P))>=48&&n<=57);P++);if(46==s.charCodeAt(P)){for(a=++P;a<l&&((n=s.charCodeAt(a))>=48&&n<=57);a++);a==P&&E(),P=a}if(101==(n=s.charCodeAt(P))||69==n){for(43!=(n=s.charCodeAt(++P))&&45!=n||P++,a=P;a<l&&((n=s.charCodeAt(a))>=48&&n<=57);a++);a==P&&E(),P=a}return+s.slice(t,P)}if(i&&E(),"true"==s.slice(P,P+4))return P+=4,!0;if("false"==s.slice(P,P+5))return P+=5,!1;if("null"==s.slice(P,P+4))return P+=4,null;E()}return"$"},L=function(e,t,a){var i=M(e,t,a);i===g?delete e[t]:e[t]=i},M=function(e,t,a){var i,n=e[t];if("object"==(void 0===n?"undefined":u()(n))&&n)if("[object Array]"==b.call(n))for(i=n.length;i--;)L(n,i,a);else m(n,function(e){L(n,e,a)});return a.call(e,t,n)};a.parse=function(e,t){var a,i;return P=0,I=""+e,a=function e(t){var a,i;if("$"==t&&E(),"string"==typeof t){if("@"==(_?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(a=[];"]"!=(t=T());i||(i=!0))i&&(","==t?"]"==(t=T())&&E():E()),","==t&&E(),a.push(e(t));return a}if("{"==t){for(a={};"}"!=(t=T());i||(i=!0))i&&(","==t?"}"==(t=T())&&E():E()),","!=t&&"string"==typeof t&&"@"==(_?t.charAt(0):t[0])&&":"==T()||E(),a[t.slice(1)]=e(T());return a}E()}return t}(T()),"$"!=T()&&E(),P=I=null,t&&"[object Function]"==b.call(t)?M(((i={})[""]=a,i),"",t):a}}}return a.runInContext=o,a}if(!l||l.global!==l&&l.window!==l&&l.self!==l||(s=l),n)o(s,n);else{var r=s.JSON,c=s.JSON3,d=!1,p=o(s,s.JSON3={noConflict:function(){return d||(d=!0,s.JSON=r,s.JSON3=c,r=c=null),p}});s.JSON={parse:p.parse,stringify:p.stringify}}}).call(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(e,t,a){var i=1e3,n=60*i,s=60*n,l=24*s,r=365.25*l;function c(e,t,a){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+a:Math.ceil(e/t)+" "+a+"s"}t.exports=function(e,t){t=t||{};var a,d=void 0===e?"undefined":u()(e);if("string"===d&&e.length>0)return function(e){if((e=String(e)).length>1e4)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*r;case"days":case"day":case"d":return a*l;case"hours":case"hour":case"hrs":case"hr":case"h":return a*s;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===d&&!1===isNaN(e))return t.long?c(a=e,l,"day")||c(a,s,"hour")||c(a,n,"minute")||c(a,i,"second")||a+" ms":function(e){if(e>=l)return Math.round(e/l)+"d";if(e>=s)return Math.round(e/s)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=i)return Math.round(e/i)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+o()(e))}},{}],59:[function(e,t,a){var i=Object.prototype.hasOwnProperty;a.stringify=function(e,t){t=t||"";var a=[];for(var n in"string"!=typeof t&&(t="?"),e)i.call(e,n)&&a.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return a.length?t+a.join("&"):""},a.parse=function(e){for(var t,a=/([^=?&]+)=?([^&]*)/g,i={};t=a.exec(e);i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return i}},{}],60:[function(e,t,a){t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],61:[function(e,t,a){var i=e("requires-port"),n=e("./lolcation"),s=e("querystringify"),l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,o=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]];function r(e){var t=l.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function c(e,t,a){if(!(this instanceof c))return new c(e,t,a);var l,d,p,h,f,m,g=o.slice(),v=void 0===t?"undefined":u()(t),b=this,y=0;for("object"!==v&&"string"!==v&&(a=t,t=null),a&&"function"!=typeof a&&(a=s.parse),t=n(t),l=!(d=r(e||"")).protocol&&!d.slashes,b.slashes=d.slashes||l&&t.slashes,b.protocol=d.protocol||t.protocol||"",e=d.rest,d.slashes||(g[2]=[/(.*)/,"pathname"]);y<g.length;y++)p=(h=g[y])[0],m=h[1],p!=p?b[m]=e:"string"==typeof p?~(f=e.indexOf(p))&&("number"==typeof h[2]?(b[m]=e.slice(0,f),e=e.slice(f+h[2])):(b[m]=e.slice(f),e=e.slice(0,f))):(f=p.exec(e))&&(b[m]=f[1],e=e.slice(0,f.index)),b[m]=b[m]||l&&h[3]&&t[m]||"",h[4]&&(b[m]=b[m].toLowerCase());a&&(b.query=a(b.query)),l&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){for(var a=(t||"/").split("/").slice(0,-1).concat(e.split("/")),i=a.length,n=a[i-1],s=!1,l=0;i--;)"."===a[i]?a.splice(i,1):".."===a[i]?(a.splice(i,1),l++):l&&(0===i&&(s=!0),a.splice(i,1),l--);return s&&a.unshift(""),"."!==n&&".."!==n||a.push(""),a.join("/")}(b.pathname,t.pathname)),i(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(h=b.auth.split(":"),b.username=h[0]||"",b.password=h[1]||""),b.origin=b.protocol&&b.host&&"file:"!==b.protocol?b.protocol+"//"+b.host:"null",b.href=b.toString()}c.prototype.set=function(e,t,a){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(a||s.parse)(t)),n[e]=t;break;case"port":n[e]=t,i(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!a;break;case"pathname":n.pathname=t.length&&"/"!==t.charAt(0)?"/"+t:t;break;default:n[e]=t}for(var l=0;l<o.length;l++){var r=o[l];r[4]&&(n[r[1]]=n[r[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},c.prototype.toString=function(e){e&&"function"==typeof e||(e=s.stringify);var t,a=this,i=a.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var n=i+(a.slashes?"//":"");return a.username&&(n+=a.username,a.password&&(n+=":"+a.password),n+="@"),n+=a.host+a.pathname,(t="object"===u()(a.query)?e(a.query):a.query)&&(n+="?"!==t.charAt(0)?"?"+t:t),a.hash&&(n+=a.hash),n},c.extractProtocol=r,c.location=n,c.qs=s,t.exports=c},{"./lolcation":62,querystringify:59,"requires-port":60}],62:[function(t,a,i){(function(e){var i,n=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s={hash:1,query:1};a.exports=function(a){a=a||e.location||{},i=i||t("./");var l,o={},r=void 0===a?"undefined":u()(a);if("blob:"===a.protocol)o=new i(unescape(a.pathname),{});else if("string"===r)for(l in o=new i(a,{}),s)delete o[l];else if("object"===r){for(l in a)l in s||(o[l]=a[l]);void 0===o.slashes&&(o.slashes=n.test(a.href))}return o}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":61}]},{},[1])(1)})}).call(t,a("DuR2"),a("f1Eh")(e))},"C//e":function(e,t){},DiZX:function(e,t){},ECOc:function(e,t){},ElOK:function(e,t){},EoRp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("TjZE"),n=a("Va7D"),s={data:function(){return{activeName:"material"}},methods:{detials:function(e){this.$router.replace({path:e.path})},handleClick:function(e,t){console.log(e,t)}},components:{mp:i.default,mps:n.default},computed:{stepOpt:function(){var e={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(t){"/buyallproduct"===t.path&&(e=t)}),console.log(e.id);var t=[];return this.$store.state.routes.forEach(function(a){a.parentId===e.id&&t.push(a)}),console.log(t),t||[]}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{display:"flex","flex-direction":"column","font-size":"14px"}},[a("div",{staticStyle:{"margin-left":"20px","line-height":"30px",height:"30px","text-align":"start","padding-left":"20px","border-left":"4px solid red","font-weight":"700"}},[e._v("\n          采购管理\n        ")]),e._v(" "),a("el-main",{staticClass:"product-base"},e._l(e.stepOpt,function(t){return a("div",{key:t.id,staticClass:"product-item",on:{click:function(a){return e.detials(t)}}},[a("div",{staticClass:"item-left"},[a("div",{staticStyle:{margin:"60px 0","font-size":"16px"}},[a("span",{staticClass:"fa fa-product-hunt",staticStyle:{display:"block"}}),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v(e._s(t.name))])])]),e._v(" "),a("div",{staticClass:"item-right"})])}),0)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("BMxp")},null,null);t.default=o.exports},FYbY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"ztCascader",props:{organization:{type:Array,default:function(){return[]}},hint:{type:String,default:"--请选择--"},value:{required:!1},placeholder:{type:String,default:"搜索"},customStyle:{type:Object,default:function(){}}},data:function(){return{organizationNavs:[],currParent:null,currOrganization:this.organization,content:[],result:[],visible:!1,cur:"",searchVal:"",inputValue:null,multipleSwitch:!1}},watch:{value:function(e){this.inputValue=e},inputValue:function(e){this.$emit("input",e)}},created:function(){this.currOrganization=this.organization,this.inputValue=this.value},computed:{filterSearch:function(){var e=this.searchVal;return e?this.currOrganization.filter(function(t){return-1!==t.value.indexOf(e)||-1!==t.label.indexOf(e)}):this.currOrganization.slice(0)},selectedItems:function(){this.cur="",this.content=[];var e=[];if(Array.isArray(this.inputValue))e=this.inputValue;else{if(null===this.inputValue)return[];e.push(this.inputValue)}this.currOrganization=this.organization;var t={};function a(e,i){for(var n=0;n<e.length;n++){var s=e[n];if(s&&s.value){if(s.value===i){t={parentNode:e,node:e[n]};break}s.children&&s.children.length&&a(s.children,i)}}return t}this.organizationNavs=[];for(var i=0;i<e.length;i++){var n=a(this.currOrganization,e[i]),s=n.node;s&&(s.children&&s.children.length?(this.organizationNavs.push({value:s.value,label:s.label,children:s.children,parentNode:n.parentNode}),this.currOrganization=s.children):(this.currOrganization=n.parentNode,this.cur=s.value),this.content.push({value:s.value,label:s.label}))}return this.content}},methods:{toggleChild:function(){this.visible?this.hide():this.show()},show:function(){this.visible=!0,document.addEventListener("click",this.closeOnDocumentClick,!1)},hide:function(){this.visible=!1,document.removeEventListener("click",this.closeOnDocumentClick,!1)},closeOnDocumentClick:function(e){this.$el.contains(e.target)||this.hide()},showChild:function(e){var t=this.organizationNavs,a=this.currOrganization;if(this.searchVal="",e.children&&e.children.length)t.push({value:e.value,label:e.label,children:e.children,parentNode:a}),this.content.push({value:e.value,label:e.label}),this.organizationNavs=t,this.currOrganization=e.children,this.multipleSwitch=!0;else if(-1===this.content.indexOf(e)){if(this.cur&&this.content.pop(),this.content.push({value:e.value,label:e.label}),this.cur=e.value,this.visible=!1,1===this.content.length)return void(this.inputValue=this.content[0].value);this.multipleSwitch=!1}this.inputValue=this.content.map(function(e){return e.value})},changeNav:function(e,t){var a=this.organizationNavs,i=this.content;this.currOrganization=e.parentNode,0===t?(this.content=[],this.organizationNavs=[]):(this.organizationNavs=a.splice(0,t),this.content=i.splice(0,t)),this.cur="",this.multipleSwitch=!0,this.inputValue=this.content.map(function(e){return e.value})}},filters:{filterContent:function(e){return e.length?e.map(function(e){return e.label}).join("/"):""}},beforeDestroy:function(){this.hide()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.organization.length?a("div",{staticClass:"ms-organization-wrap",style:e.customStyle},[a("div",{staticClass:"ms-organization-title",on:{click:e.toggleChild}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.selectedItems.length||e.multipleSwitch,expression:"!selectedItems.length || multipleSwitch"}]},[e._v(e._s(e.hint))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.selectedItems.length>0&&!e.multipleSwitch,expression:"(selectedItems.length >0 && !multipleSwitch)"}]},[e._v(e._s(e._f("filterContent")(e.selectedItems)))]),e._v(" "),a("i",{staticClass:"ion-chevron-down ms-organization-icon"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"ms-organization-body",style:e.customStyle},[a("div",{staticClass:"ms-organization-search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchVal,expression:"searchVal"}],attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.searchVal},on:{input:function(t){t.target.composing||(e.searchVal=t.target.value)}}})]),e._v(" "),e.organizationNavs.length?a("div",{staticClass:"ms-organization-router"},[a("span",[e._v("已选择:")]),e._v(" "),e._l(e.organizationNavs,function(t,i){return a("a",{key:t.value,on:{click:function(a){return a.preventDefault(),a.stopPropagation(),e.changeNav(t,i)}}},[e._v(e._s(t.label)),e.organizationNavs.length-1!==i?a("span",[e._v(">")]):e._e()])})],2):e._e(),e._v(" "),a("div",{staticClass:"ms-organization-content"},[e.filterSearch.length?a("ul",{staticClass:"ms-organization-options"},e._l(e.filterSearch,function(t,i){return a("li",{key:t.value,class:{active:t.value===e.cur},on:{click:function(a){return a.stopPropagation(),e.showChild(t)}}},[a("div",[e._v(e._s(t.label))])])}),0):a("ul",{staticClass:"ms-organization-options"},[e._m(0)])])])]):e._e()},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("div",[this._v("没有匹配项")])])}]};var s=a("VU/8")(i,n,!1,function(e){a("YCX3")},null,null);t.default=s.exports},GTJ4:function(e,t){},GVqr:function(e,t){(function(){var e,a,i,n,s={}.hasOwnProperty,l=[].slice;e={LF:"\n",NULL:"\0"},i=function(){var t;function a(e,t,a){this.command=e,this.headers=null!=t?t:{},this.body=null!=a?a:""}return a.prototype.toString=function(){var t,i,n,l,o;for(i in t=[this.command],(n=!1===this.headers["content-length"])&&delete this.headers["content-length"],o=this.headers)s.call(o,i)&&(l=o[i],t.push(i+":"+l));return this.body&&!n&&t.push("content-length:"+a.sizeOfUTF8(this.body)),t.push(e.LF+this.body),t.join(e.LF)},a.sizeOfUTF8=function(e){return e?encodeURI(e).match(/%..|./g).length:0},t=function(t){var i,n,s,l,o,r,c,d,u,p,h,f,m,g,v,b,y;for(l=t.search(RegExp(""+e.LF+e.LF)),s=(o=t.substring(0,l).split(e.LF)).shift(),r={},f=function(e){return e.replace(/^\s+|\s+$/g,"")},m=0,v=(b=o.reverse()).length;m<v;m++)d=(p=b[m]).indexOf(":"),r[f(p.substring(0,d))]=f(p.substring(d+1));if(i="",h=l+2,r["content-length"])u=parseInt(r["content-length"]),i=(""+t).substring(h,h+u);else for(n=null,c=g=h,y=t.length;(h<=y?g<y:g>y)&&(n=t.charAt(c))!==e.NULL;c=h<=y?++g:--g)i+=n;return new a(s,r,i)},a.unmarshall=function(a){var i,n,s,l;return n=a.split(RegExp(""+e.NULL+e.LF+"*")),(l={frames:[],partial:""}).frames=function(){var e,a,s,l;for(l=[],e=0,a=(s=n.slice(0,-1)).length;e<a;e++)i=s[e],l.push(t(i));return l}(),(s=n.slice(-1)[0])===e.LF||-1!==s.search(RegExp(""+e.NULL+e.LF+"*$"))?l.frames.push(t(s)):l.partial=s,l},a.marshall=function(t,i,n){return new a(t,i,n).toString()+e.NULL},a}(),a=function(){var t;function a(e){this.ws=e,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={},this.partialData=""}return a.prototype.debug=function(e){var t;return"undefined"!=typeof window&&null!==window&&null!=(t=window.console)?t.log(e):void 0},t=function(){return Date.now?Date.now():(new Date).valueOf},a.prototype._transmit=function(e,t,a){var n;for(n=i.marshall(e,t,a),"function"==typeof this.debug&&this.debug(">>> "+n);;){if(!(n.length>this.maxWebSocketFrameSize))return this.ws.send(n);this.ws.send(n.substring(0,this.maxWebSocketFrameSize)),n=n.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+n.length)}},a.prototype._setupHeartbeat=function(a){var i,s,l,o,r,c,d;if((r=a.version)===n.VERSIONS.V1_1||r===n.VERSIONS.V1_2)return s=(c=function(){var e,t,i,n;for(n=[],e=0,t=(i=a["heart-beat"].split(",")).length;e<t;e++)o=i[e],n.push(parseInt(o));return n}())[0],i=c[1],0!==this.heartbeat.outgoing&&0!==i&&(l=Math.max(this.heartbeat.outgoing,i),"function"==typeof this.debug&&this.debug("send PING every "+l+"ms"),this.pinger=n.setInterval(l,(d=this,function(){return d.ws.send(e.LF),"function"==typeof d.debug?d.debug(">>> PING"):void 0}))),0!==this.heartbeat.incoming&&0!==s?(l=Math.max(this.heartbeat.incoming,s),"function"==typeof this.debug&&this.debug("check PONG every "+l+"ms"),this.ponger=n.setInterval(l,function(e){return function(){var a;if((a=t()-e.serverActivity)>2*l)return"function"==typeof e.debug&&e.debug("did not receive server activity for the last "+a+"ms"),e.ws.close()}}(this))):void 0},a.prototype._parseConnect=function(){var e,t,a,i;switch(i={},(e=1<=arguments.length?l.call(arguments,0):[]).length){case 2:i=e[0],t=e[1];break;case 3:e[1]instanceof Function?(i=e[0],t=e[1],a=e[2]):(i.login=e[0],i.passcode=e[1],t=e[2]);break;case 4:i.login=e[0],i.passcode=e[1],t=e[2],a=e[3];break;default:i.login=e[0],i.passcode=e[1],t=e[2],a=e[3],i.host=e[4]}return[i,t,a]},a.prototype.connect=function(){var a,s,o,r,c;return a=1<=arguments.length?l.call(arguments,0):[],r=this._parseConnect.apply(this,a),o=r[0],this.connectCallback=r[1],s=r[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=(c=this,function(a){var n,l,o,r,d,u,p,h,f,m,g,v,b;if(r="undefined"!=typeof ArrayBuffer&&a.data instanceof ArrayBuffer?(n=new Uint8Array(a.data),"function"==typeof c.debug&&c.debug("--- got data length: "+n.length),function(){var e,t,a;for(a=[],e=0,t=n.length;e<t;e++)l=n[e],a.push(String.fromCharCode(l));return a}().join("")):a.data,c.serverActivity=t(),r!==e.LF){for("function"==typeof c.debug&&c.debug("<<< "+r),f=i.unmarshall(c.partialData+r),c.partialData=f.partial,b=[],m=0,g=(v=f.frames).length;m<g;m++)switch((d=v[m]).command){case"CONNECTED":"function"==typeof c.debug&&c.debug("connected to server "+d.headers.server),c.connected=!0,c._setupHeartbeat(d.headers),b.push("function"==typeof c.connectCallback?c.connectCallback(d):void 0);break;case"MESSAGE":h=d.headers.subscription,(p=c.subscriptions[h]||c.onreceive)?(o=c,u=d.headers["message-id"],d.ack=function(e){return null==e&&(e={}),o.ack(u,h,e)},d.nack=function(e){return null==e&&(e={}),o.nack(u,h,e)},b.push(p(d))):b.push("function"==typeof c.debug?c.debug("Unhandled received MESSAGE: "+d):void 0);break;case"RECEIPT":b.push("function"==typeof c.onreceipt?c.onreceipt(d):void 0);break;case"ERROR":b.push("function"==typeof s?s(d):void 0);break;default:b.push("function"==typeof c.debug?c.debug("Unhandled frame: "+d):void 0)}return b}"function"==typeof c.debug&&c.debug("<<< PONG")}),this.ws.onclose=function(e){return function(){var t;return t="Whoops! Lost connection to "+e.ws.url,"function"==typeof e.debug&&e.debug(t),e._cleanUp(),"function"==typeof s?s(t):void 0}}(this),this.ws.onopen=function(e){return function(){return"function"==typeof e.debug&&e.debug("Web Socket Opened..."),o["accept-version"]=n.VERSIONS.supportedVersions(),o["heart-beat"]=[e.heartbeat.outgoing,e.heartbeat.incoming].join(","),e._transmit("CONNECT",o)}}(this)},a.prototype.disconnect=function(e,t){return null==t&&(t={}),this._transmit("DISCONNECT",t),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof e?e():void 0},a.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&n.clearInterval(this.pinger),this.ponger)return n.clearInterval(this.ponger)},a.prototype.send=function(e,t,a){return null==t&&(t={}),null==a&&(a=""),t.destination=e,this._transmit("SEND",t,a)},a.prototype.subscribe=function(e,t,a){var i;return null==a&&(a={}),a.id||(a.id="sub-"+this.counter++),a.destination=e,this.subscriptions[a.id]=t,this._transmit("SUBSCRIBE",a),i=this,{id:a.id,unsubscribe:function(){return i.unsubscribe(a.id)}}},a.prototype.unsubscribe=function(e){return delete this.subscriptions[e],this._transmit("UNSUBSCRIBE",{id:e})},a.prototype.begin=function(e){var t,a;return a=e||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:a}),t=this,{id:a,commit:function(){return t.commit(a)},abort:function(){return t.abort(a)}}},a.prototype.commit=function(e){return this._transmit("COMMIT",{transaction:e})},a.prototype.abort=function(e){return this._transmit("ABORT",{transaction:e})},a.prototype.ack=function(e,t,a){return null==a&&(a={}),a["message-id"]=e,a.subscription=t,this._transmit("ACK",a)},a.prototype.nack=function(e,t,a){return null==a&&(a={}),a["message-id"]=e,a.subscription=t,this._transmit("NACK",a)},a}(),n={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(e,t){var i;return null==t&&(t=["v10.stomp","v11.stomp"]),i=new(n.WebSocketClass||WebSocket)(e,t),new a(i)},over:function(e){return new a(e)},Frame:i},void 0!==t&&null!==t&&(t.Stomp=n),"undefined"!=typeof window&&null!==window?(n.setInterval=function(e,t){return window.setInterval(t,e)},n.clearInterval=function(e){return window.clearInterval(e)},window.Stomp=n):t||(self.Stomp=n)}).call(this)},"Gpj+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{"text-align":"left","padding-left":"0px"}},[a("el-button",{attrs:{type:"success",size:"mini",plain:"",icon:"el-icon-success"},on:{click:e.allRead}},[e._v("全部标为已读")]),e._v(" "),e.isAdmin?a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){e.dialogVisible=!0}}},[a("i",{staticClass:"fa fa-send",staticStyle:{"margin-right":"15px"}}),e._v("发送系统通知\n      ")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.loadSalaryCfg}})],1),e._v(" "),a("el-main",{staticStyle:{padding:"0px"}},[a("el-collapse",{staticStyle:{width:"90%"},attrs:{accordion:""},on:{change:e.handleChange},model:{value:e.mid,callback:function(t){e.mid=t},expression:"mid"}},e._l(e.sysmsgs,function(t,i){return a("el-collapse-item",{key:i,attrs:{name:t.msgContent.id}},[a("template",{slot:"title"},[a("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center"}},[a("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",width:"25px",height:"25px"}},[1==t.msgState?a("div",{staticStyle:{width:"8px",height:"8px","background-color":"#ea0206","border-radius":"8px"}}):e._e()]),e._v(" "),a("span",{staticStyle:{width:"600px","text-align":"left"}},[e._v(e._s(t.msgContent.title))]),e._v(" "),3==t.msgState?a("span",{staticStyle:{"text-align":"left"}},[e._v("已撤销")]):e._e(),e._v(" "),a("el-tag",[e._v(e._s(e._f("formatDateTime")(t.msgContent.createDate)))])],1)]),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center","border-style":"solid","border-width":"1px","border-color":"#409eff","border-radius":"5px",padding:"4px 0px 4px 8px","box-sizing":"border-box",height:"100%"}},[e._v("\n            "+e._s(t.msgContent.message)+"\n          ")])],2)}),1),e._v(" "),0==e.sysmsgs.length?a("div",{staticStyle:{color:"#ea0206","font-size":"18px","text-align":"center"}},[e._v("暂无通知")]):e._e()],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],attrs:{title:"发送系统通知",visible:e.dialogVisible,"close-on-click-modal":!1,width:"45%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:3}},[e._v("\n          通知标题:\n        ")]),e._v(" "),a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:3}},[e._v("\n          通知内容:\n        ")]),e._v(" "),a("el-col",{attrs:{span:21}},[a("el-input",{attrs:{type:"textarea",size:"mini",autosize:{minRows:5,maxRows:10},placeholder:"请输入通知内容..."},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px","padding-right":"10px"}},[a("el-col",{attrs:{offset:5}},[a("el-button",{attrs:{type:"default",size:"mini"},on:{click:e.cancelSend}},[e._v("取消\n          ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sendNFMsg}},[a("i",{staticClass:"fa fa-send",staticStyle:{"margin-right":"15px"}}),e._v("发送\n          ")])],1)],1)],1)],1)],1)},staticRenderFns:[]},n=a("VU/8")({data:function(){return{dialogVisible:!1,dialogLoading:!1,title:"",message:"",mid:-1,sysmsgs:[]}},mounted:function(){this.initSysMsgs()},computed:{isAdmin:function(){var e=!1;return this.$store.state.user.roles.forEach(function(t){"ROLE_admin"===t.name&&(e=!0)}),e}},methods:{handleChange:function(e){""!==e&&this.postRequest("/chat/markread",{flag:this.mid}).then(function(e){e&&e.status})},initSysMsgs:function(){var e=this;this.getRequest("/chat/sysmsgs").then(function(t){e.sysmsgs=t.data.data;var a=!1;e.sysmsgs.forEach(function(e){1==e.msgState&&(a=!0)}),e.$store.commit("toggleNFDot",a)})},loadSalaryCfg:function(){this.initSysMsgs()},allRead:function(){var e=this;this.postRequest("/chat/markread",{flag:-1}).then(function(t){t&&200==t.status&&(e.$store.commit("toggleNFDot",!1),e.initSysMsgs())})},sendNFMsg:function(){this.dialogLoading=!0;var e=this;this.postRequest("/chat/nf",{message:this.message,title:this.title}).then(function(t){e.dialogLoading=!1,t&&200==t.status&&200==t.data.status&&(e.initSysMsgs(),e.cancelSend(),e.$store.state.stomp.send("/ws/nf",{},""))})},cancelSend:function(){this.dialogVisible=!1,this.title="",this.message=""}}},i,!1,null,null,null);t.default=n.exports},GqWn:function(e,t){},HGcV:function(e,t){},HXmC:function(e,t){},IJNK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{activeName:"midProduct"}},methods:{detials:function(e){this.$router.replace({path:e.path})}},components:{},computed:{stepOpt:function(){var e={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(t){"/storebase"===t.path&&(e=t)}),console.log(e.id);var t=[];return this.$store.state.routes.forEach(function(a){a.parentId===e.id&&t.push(a)}),console.log(t),t||[]}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{display:"flex","flex-direction":"column","font-size":"14px"}},[a("div",{staticStyle:{"margin-left":"20px","line-height":"30px",height:"30px","text-align":"start","padding-left":"20px","border-left":"4px solid red","font-weight":"700"}},[e._v("\n        仓库管理\n      ")]),e._v(" "),a("el-main",{staticClass:"product-base"},e._l(e.stepOpt,function(t){return a("div",{key:t.id,staticClass:"product-item",on:{click:function(a){return e.detials(t)}}},[a("div",{staticClass:"item-left"},[a("div",{staticStyle:{margin:"60px 0","font-size":"16px"}},[a("span",{staticClass:"fa fa-product-hunt",staticStyle:{display:"block"}}),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v(e._s(t.name))])])]),e._v(" "),a("div",{staticClass:"item-right"})])}),0)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("GTJ4")},null,null);t.default=s.exports},IeT4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{loading:!1,keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:中文名",trigger:"blur"}]},units:[],unitName:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,unit:{id:0,name:"",code:""},deps:[]}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""===e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},searchEmp:function(){this.loadDatas()},showEditDataView:function(e,t){this.unit=t,this.unitName=t.name},addAndFlush:function(){var e=this;""!==this.unitName.trim()&&(this.unit.name=this.unitName,this.unit.id?(this.tableLoading=!0,console.log(this.unit),this.postRequest("/clientType/update",this.unit).then(function(t){e.tableLoading=!1,t&&200===t.status&&t.data.success?(e.loadDatas(),e.emptyData()):e.emptyData()})):(this.tableLoading=!0,console.log(e.unit),this.postRequest("/clientType/add",this.unit).then(function(t){e.tableLoading=!1,t&&200===t.status&&t.data.success?(e.dialogFormVisible=!1,e.loadDatas(),e.emptyData()):e.emptyData()})))},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/clientType/delete?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&t.loadDatas()})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/clientType/findAll").then(function(a){e.tableLoading=!1,a&&200===a.status&&(t.units=a.data.data,t.totalCount=a.data.total,t.emptyData())})},emptyData:function(){console.log("+++++_+++++_"),this.unitName="",this.unit={id:0,name:"",code:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticClass:"product-use-header"},[a("div",{staticClass:"product-header-right"},[a("span",{staticStyle:{"margin-left":"5px"}},[e._v("客户流派")])])]),e._v(" "),a("el-main",{staticStyle:{padding:"0 20px"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"text-align":"left"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入流派名称...",size:"mini"},model:{value:e.unitName,callback:function(t){e.unitName=t},expression:"unitName"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:e.addAndFlush}},[e._v("添加流派")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.units,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"流派名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"fa fa-edit",staticStyle:{padding:"3px 4px 3px 4px",color:"#ffffff","background-color":"#85ce61",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditDataView(t.$index,t.row)}}}),e._v(" "),a("el-button",{staticClass:"fa fa-trash",staticStyle:{padding:"3px 4px 3px 4px",color:"#ffffff",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}})]}}])})],1)],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("hFft")},null,null);t.default=s.exports},"Ior+":function(e,t){},JrsW:function(e,t){},KKSI:function(e,t){},KNe0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),n=a.n(i),s=a("zL8q"),l={data:function(){var e;return e={outRecive:{quantity:"",note:"",materialId:""},dialogInTitle:"采购数量",dialogFormInVisible:!1,activeName:"material",confirmDialogTitle:"采购确认单",tempPlan:[],materialsReceives:[],confirms:{},nowMaterial:{quantity:"",notes:"",complete:""},newMaterial:{name:"",specifications:"",quantity:"",unitName:"",notes:""},tableLoading:!1,confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",RecordKeywords:"",confirmKewords:""},n()(e,"tableLoading",!1),n()(e,"advanceSearchViewVisible",!1),n()(e,"rules",{materialName:[{required:!0,message:"必填:原料名称",trigger:"blur"}],quantity:[{required:!0,message:"必填:数量",trigger:"blur"},{validator:function(e,t,a){/^\d+$/.test(t)?a():a("数字格式错误!")},message:"数字格式错误",trigger:"blur"}],clientId:[{required:!0,message:"必选:公司",trigger:"change"}],unitId:[{required:!0,message:"必选:单位",trigger:"change"}]}),n()(e,"materials",[]),n()(e,"defaultProps",{label:"name",isLeaf:"leaf",children:"child"}),n()(e,"dialogTitle",""),n()(e,"currentPage",1),n()(e,"confirmCurrentPage",1),n()(e,"currentReceivePage",1),n()(e,"formLabelWidth","120px"),n()(e,"totalCount",-1),n()(e,"receiveTotalCount",-1),n()(e,"confirmTotalCount",-1),n()(e,"material",{materialName:"",unitId:"",specs:""}),n()(e,"clients",[]),n()(e,"units",[]),n()(e,"dialogTableVisible",!1),n()(e,"dialogFormVisible",!1),n()(e,"currentIndex",""),n()(e,"matriallist",[]),e},mounted:function(){this.initData()},methods:{selfbuy:function(e){this.outRecive.materialId=e.id,this.dialogFormInVisible=!0},handleCurrentChange:function(e){console.log(e),this.newMaterial=e},tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.buyStatus?"warning-row":"success-row"},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},clearNewMaterial:function(){this.newMaterial={name:"",specifications:"",quantity:"",unitName:"",notes:"",id:0},this.nowMaterial={quantity:"",notes:"",complete:""},this.confirmDialogTitle="采购确认单"},showBuyConfirm:function(e,t){var a=this;this.clearNewMaterial(),a.tableLoading=!0,this.confirmDialogTitle=t.materialName+this.confirmDialogTitle,this.getRequest("/rowMaterialBuyPlanDetail/buyPlanDetail?materailId="+t.id).then(function(e){if(a.tableLoading=!1,e&&200==e.status){var t=e.data.root.matriallist,i=[];t.length&&t.forEach(function(e,t,a){i.push({name:e[0],specifications:e[1],quantity:e[2],confirmStatus:e[3],unitName:e[4],createDate:e[5],planSerialNumber:e[6],note:e[7],id:e[8]})}),a.matriallist=i,a.confirmFormVisible=!0}})},searchRecordData:function(){this.loadReceivedData()},searchConfirmData:function(){this.loadConfirmData()},cancelConfirm:function(e){var t=this;this.getRequest("/rowPruchaseVerify/withdraw?id="+e.id).then(function(e){if(e&&200==e.status){e.data;t.loadConfirmData()}})},cancelRecordData:function(e){var t=this;this.getRequest("/materialInReceiveRecord/withdraw?id="+e.id).then(function(e){if(e&&200==e.status){e.data;t.loadReceivedData()}})},planConfirm:function(e){var t=this,a=this;return console.log(a.newMaterial.id),console.log(a.nowMaterial.complete),0==a.newMaterial.id?(a.$message({type:"info",message:"请选择采购计划！"}),!1):""==a.nowMaterial.complete?(a.$message({type:"info",message:"请选择是否完成！"}),!1):""==this.nowMaterial.quantity||0==this.nowMaterial.quantity?(a.$message({type:"info",message:"请填入实收数量！"}),!1):void this.$confirm("当前选择的是,"+this.newMaterial.name+"入库数量为："+this.nowMaterial.quantity+" 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$refs[e].validate(function(e){e&&a.getRequest("/rowPruchaseVerify/add?purchasePlanDetailId="+a.newMaterial.id+"&buyType=2&confirmStatus="+a.nowMaterial.complete+"&quantity="+a.nowMaterial.quantity+"&notes="+a.nowMaterial.notes).then(function(e){if(e&&200==e.status){e.data;a.confirmFormVisible=!1}})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},selectChange:function(e){var t=this;console.log(e),this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.material.specifiCations=a.name)})},cancelChoos:function(){console.log(this.pName),this.material.supplier=this.pName,this.material.clientId=this.pId},initData:function(){var e=this;e.loadData(),this.getRequest("/material/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients}})},keywordsChange:function(e){""==e&&this.loadData()},recordKeywordsChange:function(e){""==e&&this.searchRecordData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushData:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},popConfirm:function(e){var t=this;this.$prompt("请输入出库数量","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number",inputValidator:function(a){if(console.log(a),parseInt(a)>parseInt(e.quantity))return t.$message({type:"info",message:"数量过大"}),!1},inputErrorMessage:"非法输入！"}).then(function(a){var i=a.value;t.getRequest("/material/receive?id="+e.id+"&quantity="+i).then(function(e){if(e&&200==e.status){e.data;t.loadData(),t.$message({type:"success",message:"出库成功!"})}})}).catch(function(){t.$message({type:"info",message:"取消输入"})})},searchData:function(){this.loadData()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.material=t,this.material.createDate=t.createDate,delete this.material.unit,this.dialogFormVisible=!0},addData:function(e){var t=this;this.dialogFormVisible=!0;var a=this;if(0==this.material.unitId||""==this.material.unitId)return s.Message.error({message:"请选择单位！"}),!1;this.$refs[e].validate(function(e){if(!e)return!1;t.material.id?(t.tableLoading=!0,console.log(t.material),t.postRequest("/material/update",t.material).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.material),t.material.quantity=0,t.postRequest("/material/add",t.material).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},addInData:function(e){var t=this,a=this;if(""==this.outRecive.quantity)return s.Message.error({message:"请输入数量"}),!1;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(a.outRecive),t.getRequest("/materialInReceiveRecord/add?id="+t.outRecive.materialId+"&quaity="+t.outRecive.quantity+"&notes="+t.outRecive.note).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormInVisible=!1,a.loadData(),a.emptyInData()}})})},emptyInData:function(){this.outRecive={quaity:"",materailId:"",note:""}},cancelOptIn:function(){this.dialogFormInVisible=!1,this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/material/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this;this.tableLoading=!0,this.getRequest("/material/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var a=t.data.data;e.materials=a,e.totalCount=t.data.total,e.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.material={materialName:"",standard:"",specs:"",materialNo:"",unitId:"",specifiCations:"",notes:"",quantity:""}}},computed:{routes:function(){}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("\n              搜索\n            ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("添加原料")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addDataForm",attrs:{model:e.material,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"原料名称:",prop:"materialName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"原料名称..."},model:{value:e.material.materialName,callback:function(t){e.$set(e.material,"materialName",t)},expression:"material.materialName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"原料规格:",prop:"specs"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"规格..."},model:{value:e.material.specs,callback:function(t){e.$set(e.material,"specs",t)},expression:"material.specs"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位:",prop:"unitId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择单位"},on:{change:e.selectChange},model:{value:e.material.unitId,callback:function(t){e.$set(e.material,"unitId",t)},expression:"material.unitId"}},e._l(e.units,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addDataForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogInTitle,"close-on-click-modal":!1,visible:e.dialogFormInVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormInVisible=t},close:e.cancelOptIn}},[e.dialogFormInVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addInData",attrs:{model:e.outRecive,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"采购数量..."},model:{value:e.outRecive.quantity,callback:function(t){e.$set(e.outRecive,"quantity",t)},expression:"outRecive.quantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注..."},model:{value:e.outRecive.note,callback:function(t){e.$set(e.outRecive,"note",t)},expression:"outRecive.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormInVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addInData("addInData")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.confirmDialogTitle,"close-on-click-modal":!1,visible:e.confirmFormVisible,width:"650px"},on:{"update:visible":function(t){e.confirmFormVisible=t},close:e.cancelOpt}},[e.confirmFormVisible?a("div",{staticStyle:{width:"100%"},attrs:{height:"200"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.matriallist,border:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"planSerialNumber",align:"left",fixed:"",label:"采购编号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"下单时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e._f("formatDate")(t.row.createDate))+"\n                ")]}}],null,!1,2821067331)}),e._v(" "),a("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n                ")]}}],null,!1,3134996586)}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注",width:"240"}})],1),e._v(" "),e.newMaterial.name?a("div",{staticStyle:{padding:"16px","text-align":"left",border:"1px solid gainsboro"}},[e._v("\n              当前选择：\n\n              "),a("div",{staticStyle:{display:"flex","justify-content":"space-around",padding:"5px"}},[a("div",[e._v("\n                  名称:"+e._s(e.newMaterial.name)+"\n                ")]),e._v(" "),a("div",[e._v("\n                  规格:"+e._s(e.newMaterial.specifications)+"\n                ")]),e._v(" "),a("div",[e._v("\n                  数量:"+e._s(e.newMaterial.quantity)+" "+e._s(e.newMaterial.unitName)+"\n                ")]),e._v(" "),a("div",[e._v("\n                  备注:"+e._s(e.newMaterial.note)+"\n                ")])])]):e._e(),e._v(" "),a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-form",{ref:"newconfirmForm",attrs:{model:e.nowMaterial,rules:e.rules,size:"sam","label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"收货数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"当次实际收货数量"},model:{value:e.nowMaterial.quantity,callback:function(t){e.$set(e.nowMaterial,"quantity",t)},expression:"nowMaterial.quantity"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注"},model:{value:e.nowMaterial.notes,callback:function(t){e.$set(e.nowMaterial,"notes",t)},expression:"nowMaterial.notes"}})],1)],1)])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("div",[a("el-form-item",{attrs:{label:"完成:"}},[a("el-radio-group",{model:{value:e.nowMaterial.complete,callback:function(t){e.$set(e.nowMaterial,"complete",t)},expression:"nowMaterial.complete"}},[a("el-radio",{attrs:{label:2}},[e._v("完成")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:1}},[e._v("未完成")])],1)],1)],1)])],1)],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.confirmFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.planConfirm("newconfirmForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materials,"highlight-current-row":"",border:"",fit:"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"materialName",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specs",align:"left",fixed:"",label:"原料规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"原料数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.quantity)+e._s(t.row.unit.name)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",fixed:"",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px","margin-left":"2px"},attrs:{size:"mini"},on:{click:function(a){return e.popConfirm(t.row)}}},[e._v("出库\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.selfbuy(t.row)}}},[e._v("厂部自购\n                ")]),e._v(" "),t.row.buyStatus?a("el-badge",{attrs:{value:"new"}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showBuyConfirm(t.$index,t.row)}}},[e._v("采购确认\n                  ")])],1):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(l,o,!1,function(e){a("w/O8")},null,null);t.default=r.exports},KhUb:function(e,t){},Kzbj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),s={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{workstepName:[{required:!0,message:"必填:工序名称",trigger:"blur"}]},steps:[],dialogTitle:"",currentPage:1,totalCount:-1,step:{workstepName:"",intro:""},unit:{name:""},currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{searchEmp:function(){this.loadData()},initData:function(){this.loadData()},keywordsChange:function(e){""===e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.step=t,delete this.step.noteMaker,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.dialogFormVisible=!0},addAndFlushEmp:function(){var e=this;this.step.id?(this.tableLoading=!0,console.log(this.step),this.postRequest("/workStep/stepAdd",this.step).then(function(t){e.tableLoading=!1,t&&200===t.status&&t.data.success&&(e.loadData(),e.emptyData())})):(this.tableLoading=!0,console.log(e.step),this.postRequest("/workStep/stepAdd",this.step).then(function(t){e.tableLoading=!1,t&&200===t.status&&t.data.success&&(e.loadData(),e.emptyData())}))},deleteData:function(e){var t=this;this.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/workStep/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/workStep/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.steps=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.step={workstepName:"",intro:""}}},computed:{stepOpt:function(){var e={add:!1,update:!1,del:!1},t={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(e){"/workStep"===e.path&&(t=e)}),console.log(t.id);var a=[];return this.$store.state.routes.forEach(function(e){e.parentId===t.id&&a.push(e)}),console.log(a),a&&a.forEach(function(t,a,i){switch(t.path){case"update":e.update=!0;break;case"del":e.del=!0;break;case"add":e.add=!0}}),e}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticClass:"product-spec-header"},[a("div",{staticClass:"product-spec-header-left"},[a("div",{staticStyle:{"margin-left":"20px","margin-top":"10px"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n            ")])],1)]),e._v(" "),a("div",{staticClass:"product-spec-header-right"})]),e._v(" "),a("el-main",{staticStyle:{margin:"0 20px"}},[e.stepOpt.add?a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"flex-start","text-align":"left"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入步骤...",size:"mini"},model:{value:e.step.workstepName,callback:function(t){e.$set(e.step,"workstepName",t)},expression:"step.workstepName"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:e.addAndFlushEmp}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1):e._e(),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.steps,fit:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"workstepName",align:"left",fixed:"",label:"工序名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"intro",width:"220",align:"left",label:"介绍"}}),e._v(" "),e.stepOpt.opt?a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.stepOpt.update?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n              ")]):e._e(),e._v(" "),e.stepOpt.del?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n              ")]):e._e()]}}],null,!1,3010208971)}):e._e()],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("59MU")},null,null);t.default=o.exports},LrNQ:function(e,t){},LwTo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:中文名",trigger:"blur"}]},units:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,unit:{name:"",code:""},deps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""==e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},addAndFlushEmp:function(){this.dialogTitle="添加单位",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadDatas()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.unit=t,delete this.unit.sysMenu,delete this.unit.users,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.unit.id?(t.tableLoading=!0,console.log(t.unit),t.postRequest("/sysunit/addAndUpdate",t.unit).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadDatas(),a.emptyData())})):(t.tableLoading=!0,console.log(a.unit),t.postRequest("/sysunit/addAndUpdate",t.unit).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadDatas(),a.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/sysunit/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadDatas()}})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/sysunit/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.units=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.unit={name:"",code:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n     ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.unit,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"单位名称"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"缩写:",prop:"code"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"单位英文名..."},model:{value:e.unit.code,callback:function(t){e.$set(e.unit,"code",t)},expression:"unit.code"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.units,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"单位名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",align:"left",fixed:"",label:"英文缩写",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n         ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n         ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("+Ip0")},null,null);t.default=s.exports},N594:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},n,!1,function(e){a("ZEO7")},null,null).exports,l=a("/ocq"),o=a("xJsL"),r=a("lO7g"),c=(a("6+aJ"),a("fER9")),d=a("qYX3"),u=a("67fi"),p=a("2tLV"),h=a("VeYG"),f=a("gxTg"),m=a("eTb0"),g=a("lGFz"),v=a("0Wrx"),b=a("mOMX"),y=a("4K/P"),x=a("v2zK"),_=a("Ave/"),w=a("hR2O"),k=a("Kzbj"),S=a("kBn+"),D=a("IeT4"),C=a("XXh3"),N=a("OSVN"),P=a("T5Y6"),I=a("pQHM"),V=a("VDSS"),R=a("4d3/"),E=a("d0NV"),T=a("Uct3"),L=a("LwTo"),M=a("WaId"),z=a("dnay"),O=a("ORdc"),q=a("O9uO"),$=a("3L9A"),F=a("giJI"),j=a("6HRJ"),A=a("XoE2"),B=a("IJNK"),U=a("Nzev"),H=a("0wq/"),Q=a("UZTo"),W=a("ev2I"),J=a("axNP"),K=a("ePtJ"),G=a("KNe0"),Z=a("Pycp"),X=a("thLP"),Y=a("TjZE"),ee=a("Va7D"),te=a("5xx1"),ae=a("EoRp"),ie=a("pyQK"),ne=a("97ZH");i.default.use(l.a);var se=new l.a({routes:[{path:"/",name:"Login",component:o.default,hidden:!0},{path:"/error",name:"page404",component:X.default},{path:"/home",name:"主页",code:"home",component:r.default,hidden:!0,meta:{requireAuth:!0},children:[{path:"/emp",name:"员工",component:d.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/empbase",name:"人事管理",component:u.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productBase",name:"产品管理",component:b.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productcolor",name:"产品颜色",component:x.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productspec",name:"产品规格",component:z.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/product",name:"产品详情",component:y.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/chat",name:"消息",component:P.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/sysRole",name:"角色",component:I.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/saleBase",name:"销售",component:M.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/saleBase",name:"销售",component:M.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/sales",name:"销售",component:j.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/orders",name:"销售",component:O.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productionplan",name:"生产计划",component:q.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productionsend",name:"发货管理",component:$.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productionManager",name:"生产进度",component:F.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/users",name:"用户",component:V.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/sysUnit",name:"单位管理",component:L.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/department",name:"部门",component:c.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/carRecord",name:"行车记录",component:g.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/carRepair",name:"车辆维护",component:v.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/position",name:"职位",component:m.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/askRequest",name:"用车申请",component:_.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/askBack",name:"分配车辆",component:w.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/workStep",name:"工序步骤",component:k.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productUse",name:"产品用途",component:A.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/company",name:"客户",component:S.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/companyType",name:"客户流派",component:D.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/companyBase",name:"客户管理",component:C.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/companyConcat",name:"客户管理",component:N.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/buyPlan",name:"采购计划",component:Y.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/buymidPlan",name:"采购计划",component:ee.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/planBase",name:"计划管理",component:f.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/buyallproduct",name:"生产计划",component:ae.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/buyallplanBase",name:"采购计划",component:ie.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/planmidreceive",name:"物料周转",component:te.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productsFinished",name:"成品库存",component:R.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/materialbase",name:"仓库",component:T.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/rowmaterial",name:"原料库",component:G.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/rowmaterialin",name:"入库记录",component:Z.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/materialout",name:"出库记录",component:J.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/materialoutconfirm",name:"原料采购确认",component:K.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/storebase",name:"仓库",component:B.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productmidBase",name:"半成品库",component:E.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productconfir",name:"采购确认",component:U.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productmid",name:"半成品库",component:H.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productmidinrecord",name:"入库记录",component:Q.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productmidoutrecod",name:"出库记录",component:W.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/carBase",name:"车辆管理",component:p.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/testmenu",name:"测试",component:ne.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/car",name:"车辆管理",component:h.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}}]},{path:"**",redirect:"/error"}]}),le=a("zL8q"),oe=a.n(le),re=(a("tvR6"),a("mvHQ")),ce=a.n(re),de=a("ifoU"),ue=a.n(de),pe=a("NYxO");a("BiC4"),a("GVqr");i.default.use(pe.a);var he=new pe.a.Store({state:{user:{name:null==window.localStorage.getItem("user")?"未登录":JSON.parse(window.localStorage.getItem("user")).name,userface:null==window.localStorage.getItem("user")?"":JSON.parse(window.localStorage.getItem("user")).userface,username:null==window.localStorage.getItem("user")?"":JSON.parse(window.localStorage.getItem("user")).username,roles:null==window.localStorage.getItem("user")?"":JSON.parse(window.localStorage.getItem("user")).roles},routes:[],msgList:[],isDotMap:new ue.a,currentFriend:{},stomp:null,nfDot:!1},mutations:{initMenu:function(e,t){e.routes=t,console.log(t)},login:function(e,t){e.user=t,window.localStorage.setItem("user",ce()(t))},logout:function(e){window.localStorage.removeItem("user"),e.routes=[]},toggleNFDot:function(e,t){e.nfDot=t},updateMsgList:function(e,t){e.msgList=t},updateCurrentFriend:function(e,t){e.currentFriend=t},addValue2DotMap:function(e,t){e.isDotMap.set(t,"您有未读消息")},removeValueDotMap:function(e,t){e.isDotMap.delete(t)}},actions:{connect:function(e){console.log(e+"9999"),e.state.stomp=Stomp.over(new SockJS("/ws/endpointChat")),console.log(e.state.stomp),e.state.stomp.connect({},function(t){e.state.stomp.subscribe("/user/queue/chat",function(t){var a=JSON.parse(t.body);console.log(a);var i=window.localStorage.getItem(e.state.user.username+"#"+a.from);if(null==i)(i=[]).push(a),window.localStorage.setItem(e.state.user.username+"#"+a.from,ce()(i));else{var n=JSON.parse(i);n.push(a),window.localStorage.setItem(e.state.user.username+"#"+a.from,ce()(n))}a.from!=e.state.currentFriend.username&&e.commit("addValue2DotMap","isDot#"+e.state.user.username+"#"+a.from);var s=window.localStorage.getItem(e.state.user.username+"#"+e.state.currentFriend.username);null==s?e.commit("updateMsgList",[]):e.commit("updateMsgList",JSON.parse(s))}),e.state.stomp.subscribe("/topic/nf",function(t){e.commit("toggleNFDot",!0)})},function(e){})}}}),fe=(a("e0XP"),a("VsUZ")),me=a("oAV5");function ge(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();return i<10&&(i="0"+i),n<10&&(n="0"+n),a+"-"+i+"-"+n}function ve(e){var t,a=new Date(e),i=a.valueOf(),n=a.getFullYear(),s=a.getMonth()+1,l=a.getDate(),o=(a.getHours(),a.getMinutes(),a.getSeconds(),new Date);return(t=o.valueOf()-i)<=6e4?"刚刚":6e4<t&&t<=36e5?Math.round(t/6e4)+"分钟前":36e5<t&&t<=864e5?Math.round(t/36e5)+"小时前":864e5<t&&t<=1296e6?Math.round(t/864e5)+"天前":(t>1296e6&&o.getFullYear(),n+"-"+s+"-"+l)}i.default.filter("formatDate",ge),i.default.prototype.formatDate=ge,i.default.filter("simpleFormatTime",ve),i.default.prototype.simpleFormatTime=ve,i.default.filter("formatDateTime",function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),s=t.getHours(),l=t.getMinutes();return i<10&&(i="0"+i),n<10&&(n="0"+n),a+"-"+i+"-"+n+" "+s+":"+l}),i.default.directive("dialogDrag",{bind:function(e,t,a,i){var n=e.querySelector(".el-dialog__header"),s=e.querySelector(".el-dialog");n.style.cssText+=";cursor:move;",s.style.cssText+=";top:0px;";var l=window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]};n.onmousedown=function(e){var t=e.clientX-n.offsetLeft,a=e.clientY-n.offsetTop,i=document.body.clientWidth,o=document.documentElement.clientHeight,r=s.offsetWidth,c=s.offsetHeight,d=s.offsetLeft,u=i-s.offsetLeft-r,p=s.offsetTop,h=o-s.offsetTop-c,f=l(s,"left"),m=l(s,"top");f.includes("%")?(f=+document.body.clientWidth*(+f.replace(/\%/g,"")/100),m=+document.body.clientHeight*(+m.replace(/\%/g,"")/100)):(f=+f.replace(/\px/g,""),m=+m.replace(/\px/g,"")),document.onmousemove=function(e){var i=e.clientX-t,n=e.clientY-a;-i>d?i=-d:i>u&&(i=u),-n>p?n=-p:n>h&&(n=h),s.style.cssText+=";left:"+(i+f)+"px;top:"+(n+m)+"px;"},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}});var be=a("NwKb"),ye=a.n(be),xe=(a("M4fF"),a("4b6G")),_e=(a("ZHXk"),a("oGZU")),we=a.n(_e),ke=(a("0OYy"),a("ZphK"),a("37t0"),a("b79p"),a("q1nB")),Se=a.n(ke),De=a("b3L9"),Ce=a.n(De);a("7QVd");i.default.use(Ce.a),i.default.use(Se.a),i.default.use(xe.default),i.default.use(we.a),i.default.prototype.getRequest=fe.c,i.default.prototype.postRequest=fe.e,i.default.prototype.deleteRequest=fe.a,i.default.prototype.putRequest=fe.f,i.default.prototype.jsonToString=fe.d,i.default.prototype.isNotNullORBlank=me.b,i.default.prototype.formatDateTime=fe.b,i.default.prototype.uploadFileRequest=fe.h,i.default.prototype.toTreeData=fe.g,i.default.prototype.uploadImgToBase64=me.c,i.default.config.productionTip=!1,i.default.use(oe.a),i.default.use(ye.a);var Ne=[];se.beforeEach(function(e,t,a){if(console.log("beforeEach"),"Login"!==e.name){"未登录"===he.state.user.name?e.meta.requireAuth||null==e.name?a({path:"/",query:{redirect:e.path}}):a():("/chat"===e.path&&he.commit("updateMsgList",[]),console.log("toto"+e),0===e.matched.length?a("/home"):a());for(var i=-1,n=0;n<Ne.length;n++)if(Ne[n].name===e.name){i=n;break}-1!==i?Ne.splice(i+1,Ne.length-i-1):"登录"!=e.name&&Ne.push({name:e.name,path:e.fullPath}),e.meta.routeList=Ne,Object(me.a)(se,he)}else a()}),i.default.directive("enterNumber",{inserted:function(e){e.addEventListener("keypress",function(e){var t="number"==typeof(e=e||window.event).charCode?e.charCode:e.keyCode;!/\d/.test(String.fromCharCode(t))&&t>9&&!e.ctrlKey&&(e.preventDefault?e.preventDefault():e.returnValue=!1)})}}),new i.default({el:"#app",router:se,store:he,components:{App:s},template:"<App/>"})},NKC0:function(e,t){},Nzev:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{tempPlan:[],confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midConfirms:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){console.log("嘿嘿哈！"),this.initData()},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.middleProduct.utilname=a.name)})},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var a="",i=e.plant;return this.positions.forEach(function(e,t,n){i.forEach(function(t,i,n){e.id==t&&(a+=e.name+" , ")})}),a},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){var e=this;e.loadData(),this.getRequest("/middleProduct/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients,e.products=a.root.products}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midPruchaseVerify/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midPruchaseVerify/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.midConfirms=i,t.totalCount=a.data.total}})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midConfirms,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"name",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"serialNumber",fixed:"",label:"计划单编号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"计划采购数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"实收数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.practicalQuantity)+" "+e._s(t.row.unitName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"记录人",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.employee.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"下发时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDateTime")(t.row.planDate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelRecordData(t.row)}}},[e._v("撤销\n          ")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("wd3D")},null,null);t.default=s.exports},O9uO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=a("mvHQ"),s=a.n(n),l=a("c/Tr"),o=a.n(l),r=a("bOdI"),c=a.n(r),d=a("zL8q"),u=a("4b6G"),p=(a("FYbY"),{components:{ZtDialog:u.default},data:function(){var e;return e={dialogSendVisible:!1,sendDetail:{id:0,planNumber:"",note:"",expectLevel:"",salePlanId:""},currentShopIndex:-1,lockList:[],dialoglockVisible:!1,dialoglockTitle:"选择产品",selectedlock:{},selectLockObj:{},isAddPlan:!0,conName:"选择公司",noClient:[],tabsIndex:0,headTabs:[{id:2,index:0,name:"新建",newData:3},{id:3,index:1,name:"生产中",newData:3},{id:4,index:2,name:"存档"}],tap:1,specslist:[],forSale:!0,activeName:["1"],lastPlanDetail:{startNo:"J00000001",endNo:"J00000100"},lastPlanproductionPlanDetails:[{startNo:"J00000001",endNo:"J00000100"},{startNo:"K00000001",endNo:"K00000100"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],productionPlanList:[{createDate:new Date,planNo:"p0021111",details:[{salesPlan:{client:{name:"小黑"},specification:{name:"300mm"},color:{name:"黄色"},quantity:1e3},accomplishNO:500,actualQuantity:300,planString:"第一次下发，500",note:"紧急任务",serialNumbers:[{endNo:"500",startNo:"001",note:"备注"}]}]}],clients:[],units:[],selectsales:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{id:0,notes:"",productionPlanNo:"",productionPlanDetails:""},detail:{id:0,actualQuantity:"",salesPlanId:"",note:"",salesPlan:{},serialNumbers:[],type:"new",status:1,productionPlanSerialNumber:"",productionPlanId:0},planDetail:{quantity:"",notes:"",serialList:[],productName:"",specName:"",expCount:"",currentClientIds:[],abbr:"",colorName:"",actualQuantity:"",mark:"",note:"",salesPlanId:"",clientId:"",productId:"",id:"",createDate:"",productionPlanId:"",status:3,type:"update",expectLevel:"",resendId:"",resendNo:"",resendStr:"",employeeId:"",checkStatus:""},serialNumbers:[],serialEdit:[],radio:"1",colorlist:[],salse:{degree:"重要",expCount:"1000000",colorName:"黄色",specName:"750mm",currentClientIds:[],note:"关关雎鸠，在河之洲，窈窕淑女，君子好逑，求之不得",empName:"小黑",notPlanCount:"",productName:"18s"}},c()(e,"serialNumbers",[]),c()(e,"serialNumber",{sid:0,id:0,startNo:"",endNo:"",note:"",productId:0,clientId:0,type:"new"}),c()(e,"dd",{id:0,actualQuantity:"7000",salesPlanId:7,note:"阿萨德",salesPlan:{id:7,colorName:"黄",expCount:1e3,note:"阿斯顿发",empName:"张三",productName:"11s",specName:"650mm",expectLevel:null,parentName:"延长石油股份有限公司",planString:null,sendNum:0,productId:3,currentClientIds:[7]},serialNumbers:[],type:"new",status:2,productionPlanSerialNumber:"[]",productionPlanId:0}),c()(e,"productionPlanDetails",[]),c()(e,"dialogFormVisible",!1),c()(e,"currentRowData",{}),c()(e,"currentIndex",""),c()(e,"depTextColor",""),c()(e,"showOrHidePop",!1),c()(e,"showHidePop",!1),c()(e,"defaultProps",{label:"name",isLeaf:"leaf",children:"child"}),c()(e,"maxSid",0),c()(e,"currentDeleteData",[]),c()(e,"materials",[]),c()(e,"materialList",[]),c()(e,"products",[]),c()(e,"dialogMaterialVisible",!1),c()(e,"dialogMaterialTitle","请选择销售计划"),c()(e,"selectSalePlan",{}),c()(e,"selectedM",{}),c()(e,"filterText",""),c()(e,"lastPlanDetail",""),c()(e,"crrentSelectShop",{}),c()(e,"isCurrentShop",!0),c()(e,"isprarent",!1),c()(e,"sugestParentstartNo",""),c()(e,"sugestParentEndNo",""),c()(e,"sugestSelfEndNumbers",""),c()(e,"sugestSelfNumbers",""),c()(e,"currentParentShop",{}),c()(e,"currentParentShops",[]),c()(e,"currentShop",{}),c()(e,"currentShops",[]),c()(e,"serialNuberDeleted",[]),c()(e,"serialNuberUpdate",[]),c()(e,"serialNuberList",[]),c()(e,"serialNuberOld",[]),c()(e,"serialNuberNew",[]),c()(e,"planDetails",[]),c()(e,"dialogPlanVisible",!1),c()(e,"dialogPlanTitle","生产计划"),c()(e,"currntPlanRow",{}),c()(e,"codeLen",1),c()(e,"isEdite",!0),c()(e,"currentSalePlan",{}),c()(e,"selectedStep",{}),c()(e,"manageStatus",1),c()(e,"activePanel","0"),c()(e,"currentAllClients",[]),c()(e,"advanceSearchViewVisible",!1),c()(e,"faangledoubleup","fa-angle-double-up"),c()(e,"faangledoubledown","fa-angle-double-down"),c()(e,"keyproductName",""),c()(e,"keyClientName",""),c()(e,"keyempName",""),c()(e,"startDate",""),c()(e,"endDate",""),c()(e,"options",[{value:1,label:"正常"},{value:2,label:"紧急"},{value:3,label:"加急"}]),c()(e,"selectedMore2",[]),c()(e,"currStructure",[]),c()(e,"structure",[]),c()(e,"CurrentSalesId",""),c()(e,"todayPlan",{plan:{createDate:new Date}}),e},mounted:function(){this.initData()},methods:(i={checkState:function(e){var t=this;2!==e.checkStatus&&this.getRequest("/productionplandetails/checkState/"+e.id).then(function(e){e&&200===e.status&&e.data.success&&t.loadData()})},cancelSenddetail:function(){this.clearSendDetail(),this.dialogSendVisible=!1},revokeBeg:function(){var e=this;this.getRequest("/shippingrequestdetails/revokePlanBeg?id="+this.sendDetail.id).then(function(t){t&&200===t.status&&t.data.success&&(e.cancelSenddetail(),e.loadData())})},clearSendDetail:function(){this.sendDetail={id:0,planNumber:"",note:"",expectLevel:"",salePlanId:""}},addSend:function(e){var t=this;console.log("fastsong");var a=this,i=_.cloneDeep(this.sendDetail);console.log(i),this.$refs[e].validate(function(e){if(!e)return!1;a.sendDetail.id?(t.tableLoading=!0,t.postRequest("/shippingrequestdetails/updatePlan",i).then(function(e){e&&200===e.status&&(a.dialogSendVisible=!1,a.loadData(),a.clearSendDetail())})):(t.tableLoading=!0,t.postRequest("/shippingrequestdetails/addPlan?salesPlanId="+a.CurrentSalesId,i).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success?(a.dialogSendVisible=!1,a.loadData(),a.clearSendDetail()):Object(d.Message)("添加失败")}))})},deliveryRequest:function(e,t){var a=this;this.sendDetail.salePlanId=t.id,this.CurrentSalesId=t.id,t.resendId?this.getRequest("/shippingrequestdetails/findById?id="+t.resendId).then(function(e){if(e&&200===e.status){var t=e.data.root.shipdetail;a.sendDetail={id:t.id,planNumber:t.planNumber,expectLevel:t.expectLevel,note:t.note,salePlanId:t.salePlanId},a.dialogSendVisible=!0}else a.$message({title:"查询失败"})}):this.dialogSendVisible=!0},handleClientChange:function(e,t){this.noClient=t},showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyData(),this.loadData())},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyData(),this.keyproductName="",this.keyClientName="",this.keyempName="",this.loadData()},clearPlanDates:function(){this.startDate="",this.endDate=""},handleClick:function(e,t,a){console.log(e),console.log(t);var i=t+"";switch(this.tabsIndex=t,i){case"0":this.manageStatus=1;break;case"1":this.manageStatus=2;break;case"2":this.manageStatus=3}this.loadMaterial(),this.loadData(),console.log("matters")},useCurrentNo:function(e){this.serialNumbers[0]&&(this.serialNumbers[0].startNo=this.sugestStartNo(e.endNo,1),this.serialNumbers[0].note="",this.serialNumbers[0].clientId=this.crrentSelectShop.id,this.serialNumbers[0].productId=this.detail.proId,this.detail.actualQuantity&&(this.serialNumbers[0].endNo=this.sugestStartNo(this.sugestStartNo(e.endNo,1),this.detail.actualQuantity)))},plandetailStatus:function(e){var t="";switch(e.status){case 1:t="新建";break;case 2:t="开始生产";break;case 3:t="生产完成";break;case 4:t="生产撤销"}return t},codeLenSet:function(e){console.log(e),this.codeLen=e,this.serialNumber.startNo&&""!==this.serialNumber.startNo&&(this.serialNumber.startNo=this.sugestStartNo(this.serialNumber.startNo,1)),this.serialNumber.endNo&&""!==this.serialNumber.endNo&&(this.serialNumber.endNo=this.sugestStartNo(this.serialNumber.endNo,1))},cancelPlanOpt:function(){this.dialogFormVisible=!1,this.plan={notes:"",productionPlanNo:"",productionPlanDetails:""},this.selectSalePlan={},this.loadData()},editePlan:function(e,t){this.dialogTitle="修改计划单";this.plan=t;var a=_.cloneDeep(t).details;a.forEach(function(e){delete e.salesPlan});var i=jsonToString(a);this.plan.productionPlanDetails=i,this.dialogPlanVisible=!0},addPlan:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.plan.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/productionplan/update",t.plan).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&(t.dialogPlanVisible=!1,t.loadData(),t.emptyData(),t.emptyDetail(),t.clearSerialNumbers())})):(t.tableLoading=!0,console.log(t.plan),t.postRequest("/productionplan/add",t.plan).then(function(e){t.tableLoading=!1,e&&200===e.status&&(t.dialogPlanVisible=!1,t.loadData(),t.emptyData(),t.emptyDetail(),t.clearSerialNumbers())}))})},clearSerialNumbers:function(){this.marketPlanSerialNumber=[],this.serialEdit=[],this.currentShopIndex=-1,this.marketPlanSerialNumber.push({sid:0,id:0,startNo:"",endNo:"",type:"new",note:""})},addNumberList:function(){if(""!==this.serialNumber.startNo&&""!==this.serialNumber.endNo)try{var e=this.serialEdit.length,t=!1;if(this.serialNumber.sid){for(var a=0;a<e;a++)if(this.serialNumber.sid===this.serialEdit[a].sid){this.serialEdit.splice(a,1,this.serialNumber),t=!0;break}t||this.serialEdit.push(this.serialNumber)}else this.serialNumber.sid=this.getMaxSid(this.serialEdit),this.serialNumber.clientId=this.salse.currentClientIds.pop(),this.serialNumber.productId=this.salse.productId,this.serialEdit.push(this.serialNumber);this.clearNos()}catch(e){e.toString()}else Object(d.Message)("请输入编号:")},getMaxSid:function(e){var t=0;return e.forEach(function(e){t=e.sid>t?e.sid:t}),t+1},clearNos:function(){this.serialNumber={sid:0,id:0,note:"",startNo:"",endNo:"",clientId:0,productId:0,type:"new"}},deletSerialNo:function(e){var t=this.serialEdit.splice(e,1);""===t[0].endNo||""===t[0].startNo||"new"===t[0].type||(t[0].type="delete",this.serialNuberDeleted.push(t[0])),console.log(t)},editSerialNo:function(e){this.serialNumber=this.serialEdit[e],console.log(this.serialNumber)},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showMaterial:function(){this.loadMaterial()},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectSalePlan=e,console.log(this.selectSalePlan)},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectLockObj.id>0){var a=this.selectLockObj.producteName;this.$confirm("您当前选择了"+a+"确认选择该产品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setlockData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(){console.log(e+"=*-*="),this.currentSalePlan=this.selectSalePlan;var e=this.selectSalePlan;this.getCurrentPlans(),this.dialogMaterialVisible=!1},cancelChoose:function(){console.log("选择框关闭"),this.selectSalePlan={},this.selectedM={}},formatStatus:function(e){return 1===e.materialType?"已确认":"未确认"}},c()(i,"clearSerialNumbers",function(){this.serialNumbers=[],this.selectsales=[],this.detail.serialNumbers=[]}),c()(i,"editeDetail",function(e,t){console.log("詳情："+e),e.salesPlan&&(this.currentSalePlan=e.salesPlan,this.selectSalePlan=e.salesPlan);var a=e.salesPlan.quantity-e.salesPlan.nextQuantity;this.salse={id:e.salesPlan.id,colorName:e.salesPlan.color.name,expCount:e.salesPlan.quantity,notPlanCount:a<0?"超额"+a:a,note:e.salesPlan.notes,empName:e.salesPlan.editer.name,productName:e.salesPlan.product.producteName,specName:e.salesPlan.specification.name,expectLevel:e.salesPlan.expectLevel,parentName:e.salesPlan.parentName,planString:e.salesPlan.planString,sendNum:e.salesPlan.sendNum,productId:e.salesPlan.client.parentName,currentClientIds:[]},e.salesPlan.pcCode&&(this.salse.currentClientIds=o()(e.salesPlan.pcCode.split(","),function(e){return parseInt(e)}));var i,n=e.salesPlan.quantity;n||(n=0);for(var s=this.salse.currentClientIds[this.salse.currentClientIds.length-1],l=0,r=this.currentAllClients.length;l<r;l++)this.currentAllClients[l].id===s&&(i=this.currentAllClients[l]);this.setShopNames();var c="";i&&(c=i.abbreviation),this.serialEdit=e.serialNumbers,this.serialEdit.length&&this.serialEdit.forEach(function(e){e.type="old"}),console.log("planStatus"+e.salesPlan.planStatus),this.planDetail={productName:this.salse.productName,specName:this.salse.specName,expCount:n,currentClientIds:this.salse.currentClientIds,abbr:c,colorName:this.salse.colorName,actualQuantity:e.actualQuantity,mark:e.mark,note:"null"===e.note?"":e.note,salesPlanId:e.salesPlan.id,clientId:e.salesPlan.client.id,productId:e.salesPlan.product.id,id:e.id,createDate:e.createDate,productionPlanId:t.id,status:e.salesPlan.planStatus,type:"update",expectLevel:e.expectLevel,resendId:null==e.resendId?0:e.resendId,resendNo:e.resendNo,resendStr:null==e.resendStr?"":e.resendStr,employeeId:e.employeeId,checkStatus:e.checkStatus},this.serialNuberOld=_.cloneDeep(this.serialNumbers),this.getCurrentPlans(),this.dialogFormVisible=!0}),c()(i,"deleteDetail",function(e,t){var a=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.detailDelete(t.id)}).catch(function(){})}),c()(i,"detailDelete",function(e){this.tableLoading=!0;var t=this;this.getRequest("/productionplandetails/deletmark?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&t.loadData()})}),c()(i,"emptyDetail",function(){this.detail={id:0,actualQuantity:"",salesPlanId:"",note:"",salesPlan:{},serialNumbers:[],type:"new",status:3,productNo:"",specifications:"",productionPlanId:0},this.selectedStep={},this.serialEdit=[],this.selectSteps=[]}),c()(i,"initData",function(){var e=this,t=this;t.handleClick("",0,""),this.getRequest("/productionplan/basedata").then(function(a){if(a&&200===a.status){var i=a.data;e.currentAllClients=i.root.clients,t.clients=t.toTree(i.root.clients),console.log("lientArrs:"+t.clients),t.midProduct=t.materials.concat(t.midProduct);var n=[];i.root.products.forEach(function(e){n.push({id:e[0],producteName:e[1],specification:e[2],proType:e[3],mark:e[4],color:e[5]})}),t.products=n}})}),c()(i,"keywordsChange",function(e){""===e&&this.loadData()}),c()(i,"keywordsMaterialChange",function(e){""===e&&this.loadMaterial()}),c()(i,"showCurrentNo",function(){this.isprarent?this.isprarent=!1:this.isprarent=!0}),c()(i,"showDetails",function(e){console.log("show"),this.planDetails=[],this.currntPlanRow=e;var t=e.details||[],a=[];t.length&&(t.forEach(function(e){e.enabled&&a.push(e)}),this.planDetails=a),this.detail.productionPlanId=e.id,this.plan.id=e.id}),c()(i,"getCurrentPlans",function(){var e=this;if(this.currentSalePlan&&this.currentSalePlan.currentClientIds&&this.currentSalePlan.currentClientIds.length>0){var t=this.currentSalePlan.currentClientIds.pop();this.currentSalePlan.productId;this.getRequest("/productionplan/getPlanDetails?clientId="+t+"&productId="+e.selectSalePlan.productId).then(function(t){if(e.tableLoading=!1,t&&200===t.status&&t.data.success){var a=t.data.root,i=a.parent||[];if(i.length){e.currentParentShop=i[0],e.currentParentShops=[];for(var n=0,s=i.length;n<s;n++)n<3&&e.currentParentShops.push(i[n])}else{var l=e.sugestStartNo("1",1);e.currentParentShop={startNo:"00000001",endNo:"00000001",note:""},e.setStartSerialNo(l,e.sugestParentEndNo.endNo,"parent")}var o=a.self||[];if(o.length){e.currentShop=o[0],e.currentShops=[];for(var r=0,c=o.length;r<c;r++)r<3&&e.currentShops.push(o[r])}else e.sugestSelfNumbers=e.sugestStartNo("1",1),e.currentShop={startNo:"00000001",endNo:"00000001",note:""}}})}}),c()(i,"setEndNumber",function(e){console.log(e);if(this.serialNumbers.length){var t=this.serialNumbers[0];this.setbyShop(t,e)}else this.setCurrentEndData(this.createCoded(1,this.codeLen),e,0)}),c()(i,"setbyShop",function(e,t){e.startNo&&(this.serialNumber.startNo=this.sugestStartNo(e.endNo,2),this.serialNumber.endNo=this.sugestStartNo(e.endNo,parseInt(t)+1))}),c()(i,"createCoded",function(e,t){for(var a=e,i=0;i<t;i++)a="0"+a;return a}),c()(i,"setbyStartNo",function(){console.log("setbyStartNo"),this.serialNumber.startNo=this.sugestStartNo(this.serialNumber.startNo,1),this.planDetail.actualQuantity&&(this.serialNumber.endNo=this.sugestStartNo(this.serialNumber.startNo,this.planDetail.actualQuantity))}),c()(i,"setbyEndNo",function(){this.serialNumber.endNo=this.sugestStartNo(this.serialNumber.endNo,1)}),c()(i,"setCurrentEndData",function(e,t,a){var i=this.sugestStartNo(e,t);this.serialNumber.endNo=i,this.serialNumber.startNo=e}),c()(i,"sugestStartNo",function(e,t){var a=function(e,t){if(t=t||!1,"string"==typeof e){var a=e.match(t?/[0-9]\d{1,}/g:/\d{1,}/g);return console.log(a),a.map(function(e){return e})}return[]},i=e.indexOf(a(e)[0]),n=e.substr(0,i),s=e.substr(i+a(e)[0].length,e.length-1),l=parseInt(a(e)[0])+parseInt(t)-1,o=l.toString().length,r=this.codeLen-o-n.length-s.length;if(r)for(var c=0;c<r;c++)l="0"+l;var d=n+l+s;return d.length>this.codeLen&&this.$message({type:"info",message:"长度超过设置的编码长度"}),d}),c()(i,"setStartSerialNo",function(e,t,a){this.serialNumbers.length&&(this.serialNumbers[0].startNo=e,this.serialNumbers[0].endNo=""!==t?t:"",this.serialNumbers[0].note="")}),c()(i,"clearChoose",function(){this.detail.clientId=0,this.detail.clientName=""}),c()(i,"showDepTree",function(){this.showHidePop=!this.showHidePop}),c()(i,"selectChange",function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(a,i){a.id===e&&(console.log(a.id),t.detail.unitName=a.name)})}),c()(i,"currentChange",function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()}),c()(i,"currentMaterialChange",function(e){this.currentMaterialPage=e,this.loadMaterial()}),c()(i,"addAndFlushData",function(){var e=this,t=this;this.$confirm("是否·建生产计划?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.addNewPlan()}).catch(function(){e.$message({type:"info",message:"已取消"})})}),c()(i,"addNewPlan",function(){var e=this;this.plan.id=0,e.plan.note="",e.tableLoading=!0,console.log(e.plan),e.postRequest("/productionplan/add",e.plan).then(function(t){e.tableLoading=!1,t&&200===t.status&&(e.dialogPlanVisible=!1,e.loadData(),e.emptyData(),e.emptyDetail())})}),c()(i,"depAddDetail",function(){console.log(this.$store.user);var e=this.$store._modules.root.state.user.username;console.log("newSalePlan"+e),this.isAddPlan=!1,this.dialogTitle="郑铁公司生产计划单",this.serialNumbers=[],this.plan.id=0,this.salse={id:0,colorName:"",expCount:"",note:"",empName:e,productName:"",specName:"",expectLevel:"",parentName:"",planString:"",sendNum:"",productId:"",currentClientIds:[]},this.planDetail={quantity:"",notes:"",serialList:[],productName:"",specName:"",expCount:"",currentClientIds:[],abbr:"",colorName:"",actualQuantity:"",mark:"",note:"",salesPlanId:"",clientId:"",productId:"",id:"",createDate:"",productionPlanId:"",status:3,type:"update",expectLevel:"",resendId:"",resendNo:"",resendStr:"",employeeId:"",checkStatus:""},this.setShopNames(),this.dialogFormVisible=!0}),c()(i,"addNewDetail",function(e){console.log(e),this.dialogTitle="郑铁公司生产计划单";this.serialNumbers=[],this.plan.id=0;var t=e.expecNum-e.sendNum;this.salse={id:e.id,colorName:e.colorName,expCount:e.expecNum,note:e.note,notPlanCount:t<0?"超额"+t:t,empName:e.empName,productName:e.productName,specName:e.specName,expectLevel:e.expectLevel,parentName:e.parentName,planString:e.planString,sendNum:e.sendNum,productId:e.productId},e.clientIds&&(this.salse.currentClientIds=o()(e.clientIds.split(","),function(e){return parseInt(e)})),this.setShopNames();var a=e.expecNum-e.completeNum;a||(a=0);for(var i=void 0,n=this.salse.currentClientIds.pop(),s=0,l=this.currentAllClients.length;s<l;s++)this.currentAllClients[s].id===n&&(i=this.currentAllClients[s]);var r="";i&&(r=i.abbreviation);var c=0;if(e.clientIds.length){var d=e.clientIds.split(",");c=d[d.length-1]}this.planDetail={productName:e.productName,specName:e.specName,expCount:a,colorName:e.colorName,status:2,abbr:r,type:"new",salesPlanId:e.id,productId:e.productId,clientId:c},this.isEdite=!0,this.dialogFormVisible=!0}),c()(i,"addSeeDetail",function(e){console.log(e),this.dialogTitle="郑铁公司生产计划单";this.serialNumbers=[],this.plan.id=0,this.salse={id:e.salesPlan.id,colorName:e.salesPlan.colorName,expCount:e.salesPlan.expecNum,note:e.salesPlan.note,empName:e.salesPlan.empName,productName:e.salesPlan.productName,specName:e.salesPlan.specName,expectLevel:e.salesPlan.expectLevel,parentName:e.salesPlan.parentName,planString:e.salesPlan.planString,sendNum:e.salesPlan.sendNum,productId:e.salesPlan.productId,currentClientIds:""},e.salesPlan.pcCode&&(this.salse.currentClientIds=o()(e.salesPlan.pcCode.split(","),function(e){return parseInt(e)}));for(var t=this.salse.currentClientIds.pop(),a=0,i=this.currentAllClients.length;a<i;a++)this.currentAllClients[a].id===t&&this.currentAllClients[a];this.isEdite=!0,this.dialogFormVisible=!0}),c()(i,"setShopNames",function(){if(this.noClient=[],this.salse.currentClientIds&&this.salse.currentClientIds.length)for(var e=0,t=this.currentAllClients.length;e<t;e++)for(var a=this.currentAllClients[e],i=0,n=this.salse.currentClientIds.length;i<n;i++){this.salse.currentClientIds[i];this.salse.currentClientIds[i]===a.id&&this.noClient.push({label:a.name,value:a.id})}}),c()(i,"searchData",function(){this.value5&&this.value5.length&&(this.startDate=this.formatDateTime(this.value5[0]),this.endDate=this.formatDateTime(this.value5[1]),console.log(this.startDate)),this.handleClick()}),c()(i,"searchMaterialData",function(){this.loadMaterial()}),c()(i,"add",function(e){console.log("isAddPlan"+this.isAddPlan),this.isAddPlan?this.addAndUpdate(e):(console.log("hashehe"),this.createPlansAndSales(e))}),c()(i,"createPlansAndSales",function(e){var t=this,a=this;if(console.log("addbox！！！！"),!this.planDetail.actualQuantity||!this.planDetail.expCount)return Object(d.Message)("请输入数量！"),!1;this.planDetail.id=0,this.planDetail.resendNo=0,this.planDetail.salesPlanId=0,this.planDetail.pcCode=this.planDetail.currentClientIds.join(","),this.planDetail.currentClientIds.length&&(this.planDetail.clientId=this.planDetail.currentClientIds[this.planDetail.currentClientIds.length-1]),this.planDetail.productionPlanSerialNumber=this.jsonToString(this.serialEdit),console.log(this.planDetail),this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,a.postRequest("/productionplandetails/addSalesAndplan",a.planDetail).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogFormVisible=!1,a.loadData(),a.loadMaterial(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers())})})}),c()(i,"addAndUpdate",function(e){var t=this,a=this;return console.log("addbox！！！！"),this.planDetail.actualQuantity?""===this.salse.id?(Object(d.Message)("请选择销售计划"),!1):(this.planDetail.productionPlanSerialNumber=this.jsonToString(this.serialEdit),console.log(this.planDetail),void this.$refs[e].validate(function(e){if(!e)return!1;t.planDetail.id?(a.tableLoading=!0,a.postRequest("/productionplandetails/update",a.planDetail).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogFormVisible=!1,a.loadData(),a.loadMaterial(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers())})):(t.tableLoading=!0,a.postRequest("/productionplandetails/add",a.planDetail).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogFormVisible=!1,a.loadData(),a.loadMaterial(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers())}))})):(Object(d.Message)("请输入数量！"),!1)}),c()(i,"cancelOpt",function(){this.dialogFormVisible=!1,this.clearChoose(),this.isEdite=!0,this.currentSalePlan={},this.clearSerialNumbers(),this.emptyDetail(),this.handleClick("",0,""),console.log("o(*￣︶￣*)o")}),c()(i,"deleteData",function(e){var t=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})}),c()(i,"doDelete",function(e){this.tableLoading=!0;var t=this;this.getRequest("/productionplan/deletmark?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&t.loadData()})}),c()(i,"loadData",function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productionplandetails/findbypage?page="+this.currentPage+"&size=10&status="+this.manageStatus+"&productName="+this.keyproductName+"&empName="+this.keyempName+"&clientName="+this.keyClientName+"&startDate="+this.startDate+"&endDate="+this.endDate).then(function(a){if(t.tableLoading=!1,a&&200===a.status&&a.data.success){var i=a.data.data||[];t.productionPlanList=t.preForData(i),t.totalCount=a.data.total}else e.$message({type:"infor",message:"查询失败"})})}),c()(i,"loadMaterial",function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/sales/findfornoplan?page="+this.currentMaterialPage+"&size=10&status="+this.manageStatus+"&start="+this.startDate+"&end="+this.endDate+"&clientName="+this.keyClientName+"&productName="+this.keyproductName+"&empName="+this.keyempName).then(function(a){e.tableLoading=!1,a&&200===a.status&&(t.materialList=t.preMattrialData(a.data.data),t.totalMaterialCount=a.data.total,t.forSale=!0)})}),c()(i,"preMattrialData",function(e){var t=[];if(e.length)for(var a=0,i=e.length;a<i;a++){var n=e[a],s=(n[18],this.string2Arr(n[22])),l=this.string2Arr(n[10]),o=this.string2Arr(n[24]),r=this.string2Arr(n[26]);t.push({id:n[0],state:n[1],clientName:n[2],productName:n[3],empName:n[4],specName:n[5],createDate:n[6],expecNum:n[7],completeNum:n[8],sendNum:n[9],planString:l,note:n[11],colorName:n[12],parentName:n[13],clientIds:n[14],productId:n[15],colorId:n[16],specsId:n[17],expectLevel:n[18],shippingQuantity:n[19],resendNo:n[20],serialNumber:n[21],resendStr:s,editerId:n[23],shippingStr:o,resendId:n[25],produtRecordStr:r,upsDate:n[27],checked:!1,forOrder:!0,toChange:!1})}return t}),c()(i,"string2Arr",function(e){return null==e||void 0===e||""===e?[]:e.split(";")}),c()(i,"emptyData",function(){this.productionPlanDetails=[],this.plan={id:0,notes:"",productionPlanNo:"",productionPlanDetails:""},this.currntPlanRow&&(this.plan.id=this.currntPlanRow.id)}),c()(i,"preForData",function(e){var t=[];if(e&&e.length)for(var a=0,i=e.length;a<i;a++){var n=e[a];n.planString&&salesPlan.planString?n.planString=n.salesPlan.planString.split(";"):n.planString=[],n.salesPlan&&n.salesPlan.shippingStr?n.shippingStr=n.salesPlan.shippingStr.split(";"):n.shippingStr=[],n.salesPlan&&n.salesPlan.produtRecordStr&&(n.produtRecordStr=n.salesPlan.produtRecordStr.split(";")),t.push(n)}return console.log(t),t}),c()(i,"getNowSerialNumbers",function(){for(var e=0,t=this.detail.serialNumbers.length;e<t;e++)for(var a=0,i=this.serialNuberOld.length;a<i;a++){if(e===a)s()(this.serialNuberOld[a])===s()(this.detail.serialNumbers[e])&&this.serialNuberOld[a].id===this.detail.serialNumbers[e].id||(this.detail.serialNumbers[e].type="update",this.serialNuberUpdate.push(this.detail.serialNumbers[e]))}if(this.detail.serialNumbers.length>this.serialNuberOld.length)for(var n=this.serialNuberOld.length;n<this.detail.serialNumbers.length;n++)this.detail.serialNumbers[n].type="new",this.serialNuberNew.push(this.detail.serialNumbers[n]);if(this.detail.serialNumbers.length<this.serialNuberOld.length)for(var l=this.detail.serialNumbers.length;l<this.serialNuberOld.length;l++)this.serialNuberOld[l].type="delete",this.serialNuberDeleted.push(this.serialNuberOld[l]);return this.serialNuberUpdate.concat(this.serialNuberDeleted,this.serialNuberNew)}),c()(i,"choosCompay",function(e,t){var a=this;this.currentShopIndex=t,console.log("item"+e);var i=e.value;i&&this.getRequest("/productionplan/getPlanDetails?clientId="+i).then(function(e){a.tableLoading=!1,console.log(e),e&&200===e.status&&(a.serialNumbers=e.data.root.clientList)})}),c()(i,"toTree",function(e){console.log("toTree");var t=[];if(!Array.isArray(e))return t;var a=[];e.forEach(function(e){a.push({value:e.id,label:e.name,parentId:e.parentClientId})});var i={};return a.forEach(function(e){i[e.value]=e}),a.forEach(function(e){var a=i[e.parentId];a?(a.children||(a.children=[])).push(e):t.push(e)}),t=this.getResult(t),console.log(t),t}),c()(i,"getResult",function(e){var t=this;return e.map(function(e){delete e.parentId,e.children&&e.children.length&&t.getResult(e.children)}),e}),c()(i,"showLock",function(e){console.log("showMaterial"),this.loadLocks()}),c()(i,"loadLocks",function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/product/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(a){if(e.tableLoading=!1,a&&200===a.status){var i=a.data.data;t.lockList=i,t.totalMaterialCount=a.data.total,t.dialoglockVisible=!0}})}),c()(i,"showLockRow",function(e){console.log("click"+e),this.selectedlock=this.lockList.indexOf(e),this.selectLockObj=e,console.log(this.selectMaterial)}),c()(i,"chooslocks",function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectLockObj.id>0){var a=this.selectLockObj.producteName;this.$confirm("您当前选择了"+a+"确认选择该产品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setlockData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})}),c()(i,"noteChange",function(e){e&&(this.salse.note=e)}),c()(i,"setlockData",function(){console.log("setlockData");var e=this.selectLockObj;console.log(e),this.planDetail.productName=e.producteName,this.planDetail.productId=e.id,this.planDetail.proId=e.id,this.planDetail.specification="",this.specslist=e.specs||[],this.specslist.length&&(this.planDetail.specId=this.specslist[0].id,this.planDetail.specName=this.specslist[0].id,this.salse.specName=this.specslist[0].name),this.colorlist=e.colors||[],this.colorlist.length&&(this.planDetail.colorId=this.colorlist[0].id,this.planDetail.colorName=this.colorlist[0].id,this.salse.colorName=this.colorlist[0].name),this.planDetail.productNo=e.proType,this.salse.productName=e.producteName,this.dialoglockVisible=!1}),c()(i,"cancellock",function(){this.selectLockObj={},this.selectedlock={}}),c()(i,"setSalesSpec",function(e){console.log(e),this.filteName(this.specslist,e,"spec")}),c()(i,"setSalesColor",function(e){console.log(e),this.filteName(this.colorlist,e,"color")}),c()(i,"filteName",function(e,t,a){if(e&&e.length)for(var i=0,n=e.length;i<n;i++)t===e[i].id&&("spec"===a?this.salse.specName=e[i].name:"color"===a&&(this.salse.colorName=e[i].name))}),c()(i,"plandetailCount",function(e){e&&(this.salse.expCount=e,this.setEndNumber(e))}),i),computed:{routes:function(){return this.$store.state.routes},user:function(){return this.$store.state.user}}}),h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start"}},[a("div",{staticClass:"zt-tab"},e._l(e.headTabs,function(t,i){return a("div",{key:t.id,staticClass:"zt-tab-item ",class:e.tabsIndex===i?"bg-click":"",attrs:{name:"0"},on:{click:function(a){return e.handleClick(a,t.index)}}},[a("el-badge",{staticClass:"el-dropdown-link",attrs:{value:t.newData}},[a("span",[e._v(e._s(t.name))])])],1)}),0),e._v(" "),a("el-container",{staticClass:"divce-mode"},[a("el-header",{staticStyle:{padding:"0",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:e.showAdvanceSearchView},slot:"reference"},[a("i",{staticClass:"fa fa-lg",class:[e.advanceSearchViewVisible?e.faangledoubleup:e.faangledoubledown],staticStyle:{"margin-right":"5px"}}),e._v("高级搜索\n          ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}})]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0","padding-top":"0"}},[a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticStyle:{"margin-bottom":"10px",border:"1px","border-radius":"5px","border-style":"solid",padding:"5px 0px 5px 0px","box-sizing":"border-box","border-color":"#20a0ff"}},[a("div",{staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",clearable:""},on:{clear:e.clearPlanDates},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[e._v("\n                产品:\n                "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品名称。。。"},model:{value:e.keyproductName,callback:function(t){e.keyproductName=t},expression:"keyproductName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                客户:\n                "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"客户名。。。"},model:{value:e.keyClientName,callback:function(t){e.keyClientName=t},expression:"keyClientName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                操作人:\n                "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"员工名。。。"},model:{value:e.keyempName,callback:function(t){e.keyempName=t},expression:"keyempName"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"flex-end"}},[a("el-col",{attrs:{span:5,offset:4}},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelSearch}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.searchData}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),a("div",[e.productionPlanList&&e.materialList?a("div",{staticClass:"flex-plan"},[0==e.tabsIndex?a("div",{staticClass:"item-sales"},[a("div",{staticClass:"sales-add-new"},[a("el-tooltip",{attrs:{content:"添加新计划"}},[a("span",{staticStyle:{display:"block",cursor:"pointer"},on:{click:function(t){return e.depAddDetail(e.plan)}}},[e._v("+\n                              ")])])],1)]):e._e(),e._v(" "),0==e.tabsIndex?e._l(e.materialList,function(t,i){return a("div",{key:"s"+t.id,staticClass:"item-sales",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-sales-show abandon"},[a("el-badge",{staticClass:"item",attrs:{value:"new"}},[a("div",{staticClass:"compay-ifor"},[a("div",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"text-alight"},[a("div",[e._v(e._s(t.serialNumber.substring(3)))]),e._v(" "),a("div",{staticClass:"plan-num-companyName",staticStyle:{color:"black"}},[e._v("\n                            "+e._s(t.clientName)+"\n                          ")]),e._v(" "),a("div",{staticStyle:{width:"140px",padding:"0px 16px",color:"rgb(46, 46, 47)","text-align":"right","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[e._v("\n                            ┈┈"+e._s(t.parentName)+"\n                          ")])]),e._v(" "),a("div",{staticClass:"text-alight",staticStyle:{"text-align":"center","padding-top":"10px"}},[e._v("\n                          "+e._s(t.productName)+"\n                        ")]),e._v(" "),t.empName?a("div",{staticStyle:{"text-align":"right","padding-right":"10px"}},[e._v("\n                          "+e._s(t.empName)+"\n                        ")]):e._e()]),e._v(" "),a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.toChange,expression:"plandetail.toChange"}],staticStyle:{"padding-left":"10px"},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"plandetail.checked"}})],1)]),e._v(" "),a("div",{staticClass:"plan-num"},[a("div",{staticClass:"plan-num-left"},[a("div",{staticClass:"plan-item-right"},[a("div",{staticStyle:{width:"140px"}},[a("div",{staticStyle:{padding:"30px 0 0 4px","font-size":"12px"}},[a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("总数:")]),e._v(" "),a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.expecNum))])]),e._v(" "),a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("已下发:")]),e._v(" "),a("tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},e._l(t.planString,function(t,i){return a("div",{key:"send"+i},[e._v(e._s(t))])}),0),e._v(" "),a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(t.sendNum))])])],1),e._v(" "),a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("未下发:")]),e._v(" "),a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.expecNum-t.sendNum<0?t.expecNum-t.sendNum+"(超出)":t.expecNum-t.sendNum))])]),e._v(" "),t.shippingQuantity?a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("已发货:")]),e._v(" "),a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.shippingQuantity))])]):e._e(),e._v(" "),t.resendNo?a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("发货请求:")]),e._v(" "),a("tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},e._l(t.resendStr,function(t,i){return a("div",{key:"w"+i},[e._v(e._s(t))])}),0),e._v(" "),a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(t.resendNo))])])],1):e._e()])]),e._v(" "),a("div",{staticClass:"plan-note-ol"},[a("div",{staticClass:"note-textarea"},[a("div",{staticClass:"note-head"},[e._v("备注:")]),e._v(" "),a("div",{staticClass:"plan-note"},[e._v("\n                              "+e._s(null==t.note?"暂无备注":"null"==t.note?"暂无备注":t.note)+"\n                            ")])])])]),e._v(" "),a("div",{staticStyle:{width:"420px",display:"flex","flex-direction":"column","justify-content":"start",padding:"0 8px"}},[!t.expectLevel||2!==t.expectLevel&&3!==t.expectLevel?e._e():a("div",{staticClass:"trapezoid"},[a("div",{staticClass:"part1",style:{borderBottomColor:2===t.expectLevel?"green":"red"}}),e._v(" "),a("el-tooltip",[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                           请求时间:"+e._s(e._f("simpleFormatTime")(t.sendDate))+"\n                            ")])]),e._v(" "),a("div",{staticClass:"part2",style:{backgroundColor:2===t.expectLevel?"green":"red"}},[e._v("\n                            "+e._s(2===t.expectLevel?"急需":"加急")+"\n                          ")]),e._v(" "),a("div",{staticClass:"part3",style:{borderBottomColor:2===t.expectLevel?"green":"red"}})],1),e._v(" "),a("div",{staticStyle:{"flex-direction":"row",display:"flex","justify-content":"flex-end",height:"18px","line-height":"20px",width:"auto"}},[a("div",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下发计划",placement:"top-start"}},[a("span",{staticClass:"fa fa-send",staticStyle:{padding:"2px",margin:"4px",color:"#2fc5da"},on:{click:function(a){return e.addNewDetail(t,e.plan)}}})])],1)])])])])],1)])}):e._e(),e._v(" "),e._l(e.productionPlanList,function(t,i){return a("div",{staticClass:"item-sales",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-sales-show abandon",on:{click:function(a){return e.checkState(t)}}},[a("div",[a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"start",width:"100%"}},[a("div",{staticClass:"pro-plan-head"},[a("div",{staticClass:"compay-ifor ",staticStyle:{"background-color":"#A9DC90"}},[a("div",{staticClass:"text-alight"},[t.planNo?a("div",{staticClass:"default-color",staticStyle:{"text-align":"left"},on:{dblclick:function(e){},click:function(e){}}},[e._v("\n                            "+e._s(t.planNo)+"\n                          ")]):e._e(),e._v(" "),t&&t.salesPlan&&t.salesPlan.client?a("div",{staticClass:"plan-num-companyName default-color"},[e._v("\n                            "+e._s(t.salesPlan.client.name)+"\n                          ")]):e._e(),e._v(" "),t.salesPlan&&t.salesPlan.client&&t.salesPlan.client.parentName?a("div",{staticStyle:{width:"140px",padding:"0 16px","text-align":"right","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[e._v("\n                            ┈┈"+e._s(t.salesPlan.client.parentName)+"\n                          ")]):e._e()]),e._v(" "),t.salesPlan&&t.salesPlan.product&&t.salesPlan.product.producteName?a("div",{staticClass:"text-alight",staticStyle:{"text-align":"center","padding-top":"10px"}},[e._v("\n                          "+e._s(t.salesPlan.product.producteName)+"\n                        ")]):e._e(),e._v(" "),t.salesPlan&&t.salesPlan.editer&&t.salesPlan.editer.name?a("div",{staticStyle:{"text-align":"right","padding-right":"10px"}},[a("span",[e._v(e._s(t.salesPlan.serialNumber.substring(3))+"\n                              "+e._s(t.salesPlan.editer.name))])]):e._e(),e._v(" "),a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.toChange,expression:"plandetail.toChange"}],staticStyle:{"padding-left":"10px"},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"plandetail.checked"}})],1),e._v(" "),a("div",{staticClass:"plan-num"},[a("div",{staticClass:"plan-num-left"},[a("div",{staticClass:"plan-item-right"},[a("div",{staticClass:"pan-right",staticStyle:{width:"140px",height:"100px"}},[a("div",{},[a("div",{staticClass:"plan-num-detail default-color"},[a("span",{staticClass:"detail-text"},[e._v("本次计划:")]),e._v(" "),a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.actualQuantity))])]),e._v(" "),a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("已生产:")]),e._v(" "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticStyle:{display:"flex","flex-direction":"column",width:"auto"}},[a("div",[e._v("\n                                          下发时间:"+e._s(e._f("formatDateTime")(t.createDate))+"\n                                        ")])])]),e._v(" "),a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(t.accomplishNO))])])],1),e._v(" "),a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v(" ")])]),e._v(" "),a("hr",{staticStyle:{width:"86px"}}),e._v(" "),a("div",{staticClass:"plan-num-detail abandon"},[a("span",{staticClass:"detail-text"},[e._v("未生产:")]),e._v(" "),t.salesPlan?a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.actualQuantity-t.accomplishNO))]):e._e()])]),e._v(" "),t.recordStr?a("div",[e._v(e._s(t.recordStr))]):e._e()]),e._v(" "),0==e.tabsIndex?a("div",{staticClass:"plan-note-ol"},[a("div",{staticClass:"note-textarea"},[a("div",{staticClass:"note-head"},[e._v("备注:")]),e._v(" "),a("div",{staticClass:"plan-note"},[e._v("\n                                  "+e._s(null==t.note?"暂无备注":"null"==t.note?"暂无备注":t.note)+"\n                                ")])])]):a("div",{staticStyle:{width:"280px","flex-direction":"row",display:"flex","justify-content":"flex-start"}},[a("div",{staticClass:"pan-right",staticStyle:{width:"100px"}},[a("div",{staticStyle:{padding:"20px 0 0 0","font-size":"12px"}},[a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("已生产:")]),e._v(" "),a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.accomplishNO))])]),e._v(" "),a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("已发货:")]),e._v(" "),a("el-tooltip",[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                        发货记录：\n                                        "),t.shippingStr&&t.shippingStr.length?a("div",{staticStyle:{display:"flex","flex-direction":"column",width:"auto"}},e._l(t.shippingStr,function(t,i){return a("div",{key:i},[e._v("\n                                            "+e._s(t)+"\n                                          ")])}),0):e._e()]),e._v(" "),a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(null==t.sendQuantity?0:t.sendQuantity))])])],1),e._v(" "),a("hr",{staticStyle:{width:"86px"}}),e._v(" "),a("div",{staticClass:"plan-num-detail abandon"},[a("span",{staticClass:"detail-text"},[e._v("未发货:")]),e._v(" "),t.accomplishNO&&t.sendQuantity?a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.accomplishNO-t.sendQuantity))]):a("span",{staticClass:"detail-text detail-right"},[e._v("0")])])])]),e._v(" "),a("div",{staticClass:"pan-right",staticStyle:{width:"180px"}},[a("div",[a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("需求总数:")]),e._v(" "),t.salesPlan?a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.salesPlan.quantity))]):e._e()]),e._v(" "),a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("计划总量:")]),e._v(" "),a("el-tooltip",[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                        下发计划记录：\n                                        "),a("div",{staticStyle:{display:"flex","flex-direction":"column",width:"auto"}},e._l(t.planString,function(t,i){return a("div",{key:i},[e._v("\n                                            "+e._s(t)+"\n                                          ")])}),0)]),e._v(" "),t.salesPlan?a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.salesPlan.nextQuantity))]):e._e()])],1),e._v(" "),a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("累计完成:")]),e._v(" "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                        完成记录：\n                                        "),t.produtRecordStr&&t.produtRecordStr.length?a("div",{staticStyle:{display:"flex","flex-direction":"column",width:"auto"}},e._l(t.produtRecordStr,function(t,i){return a("div",{key:i},[e._v("\n                                            "+e._s(t)+"\n                                          ")])}),0):e._e()]),e._v(" "),t.salesPlan?a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(t.salesPlan.endQuantity))]):e._e()])],1),e._v(" "),a("hr",{staticStyle:{width:"100px"}}),e._v(" "),a("div",{staticClass:"plan-num-detail abandon"},[a("span",{staticClass:"detail-text "},[e._v("未生产量:")]),e._v(" "),t.salesPlan&&null!=t.salesPlan.nextQuantity&&null!=t.salesPlan.endQuantity?a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.salesPlan.nextQuantity-t.salesPlan.endQuantity))]):e._e()])])])])]),e._v(" "),a("div",{staticStyle:{width:"420px",display:"flex","flex-direction":"column","justify-content":"start",padding:"0 8px"}},[!t.expectLevel||3!==t.expectLevel&&2!==t.expectLevel?e._e():a("div",{staticClass:"trapezoid"},[a("div",{staticClass:"part1",style:{borderBottomColor:2===t.expectLevel?"green":"red"}}),e._v(" "),a("el-tooltip",[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                   请求时间:"+e._s(e._f("simpleFormatTime")(t.sendDate))+"\n                                ")]),e._v(" "),a("div",{staticClass:"part2",style:{backgroundColor:2===t.expectLevel?"green":"red"}},[e._v("\n                                "+e._s(2===t.expectLevel?"急需":"加急")+"\n                              ")])]),e._v(" "),a("div",{staticClass:"part3",style:{borderBottomColor:2===t.expectLevel?"green":"red"}})],1),e._v(" "),a("div",{staticStyle:{"flex-direction":"row",display:"flex","justify-content":"space-between",height:"18px","line-height":"20px",width:"auto"}},[a("div",{staticStyle:{"text-align":"left"}},[0===e.tabsIndex&&2!==t.checkStatus?a("span",{staticClass:"trunk-start"},[e._v("新建~！！！")]):e._e(),e._v(" "),a("span",[e._v(e._s(e._f("simpleFormatTime")(t.createDate)))])]),e._v(" "),a("div",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发货请求",placement:"top-start"}},[a("span",{staticClass:"fa fa-send-o",staticStyle:{padding:"2px",margin:"4px",color:"#2fc5da"},on:{click:function(a){return e.deliveryRequest(i,t)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top-start"}},[a("span",{staticClass:"fa fa-pencil",staticStyle:{padding:"2px",margin:"4px",color:"#2fc5da"},on:{click:function(a){return e.editeDetail(t,i)}}})])],1)])])])])])])])])])})],2):a("div",{staticStyle:{"text-align":"center"}},[e._v("\n            暂无数据\n          ")]),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)])],1)],1)],1),e._v(" "),a("el-form",{ref:"addPlanForm",attrs:{model:e.plan,rules:e.rules,size:"mini","label-width":"90px"}},[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogPlanTitle,"close-on-click-modal":!1,visible:e.dialogPlanVisible,width:"750px"},on:{"update:visible":function(t){e.dialogPlanVisible=t},close:e.cancelPlanOpt}},[e.dialogPlanVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{width:"100%",height:"auto"}},[a("el-row",[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"600px",background:"#fff"},attrs:{placeholder:"生产计划备注...","prefix-icon":"el-icon-edit",type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:e.plan.notes,callback:function(t){e.$set(e.plan,"notes",t)},expression:"plan.notes"}})],1)],1)],1)]):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogPlanVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addPlan("addPlanForm")}}},[e._v("确 定")])],1)])],1),e._v(" "),a("el-form",{ref:"addDetailForm",attrs:{model:e.plan,rules:e.rules,size:"mini","label-width":"90px"}},[a("zt-dialog",{attrs:{"height-num":"590","wid-num":"920","left-site":"200","is-show":e.dialogFormVisible,"zt-dialog-class":"zt-sale-detail"}},[a("div",{staticClass:"zt-header-detail",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"60px","font-weight":"600","font-size":"20px","box-sizing":"border-box","text-align":"left"}},[e._v("生产计划")]),e._v(" "),a("span",{staticStyle:{"margin-left":"10px","line-height":"60px","font-size":"14px","box-sizing":"border-box","text-align":"left"}},[e._v("编号x-0018945-v")]),e._v(" "),a("span",{staticClass:"colosBtn",on:{click:e.cancelOpt}},[e._v("×")])]),e._v(" "),a("div",{staticStyle:{height:"100%",width:"100%",display:"flex","flex-direction":"column","justify-content":"start"},attrs:{slot:"main"},slot:"main"},[a("div",{staticStyle:{height:"100%",width:"100%",padding:"0px 30px 10px 30px","font-size":"12px",display:"flex","flex-direction":"row","justify-content":"start"}},[a("div",{staticClass:"productio-detail"},[a("div",{staticClass:"detail-head"},[e._v("销售详情：")]),e._v(" "),a("Cascader",{attrs:{data:e.clients,trigger:"hover",disabled:!0,"change-on-select":"","not-found-text":e.conName,size:"small"},model:{value:e.salse.currentClientIds,callback:function(t){e.$set(e.salse,"currentClientIds",t)},expression:"salse.currentClientIds"}},[a("div",{staticStyle:{"font-size":"12px",width:"100%","min-height":"60px",display:"inline-flex","flex-direction":"row","justify-content":"space-between"}},[a("div",{staticClass:"company-head-item head-item-left"},[a("div",[a("span",{staticClass:"a-single",attrs:{href:"javascript:void(0)"}},[e._v("选择客户:")])]),e._v(" "),a("div",[a("span",{staticClass:"a-single",attrs:{href:"javascript:void(0)"}},[e._v("作业区:")])])]),e._v(" "),a("div",{staticClass:"company-head-item head-item-right"},e._l(e.noClient,function(t){return a("div",{key:t.value,staticClass:"item-lable"},[e._v(" "+e._s(t.label)+"\n                  ")])}),0)])]),e._v(" "),a("div",{staticClass:"plan-item"},[a("div",[e._v("\n                产品:\n              ")]),e._v(" "),a("div",[e._v("\n                "+e._s(e.salse.productName)+"\n              ")])]),e._v(" "),a("div",{staticClass:"plan-item"},[a("div",[e._v("\n                数量:\n              ")]),e._v(" "),a("div",[e._v("\n                "+e._s(e.salse.expCount)+"\n              ")])]),e._v(" "),a("div",{staticClass:"plan-item"},[a("div",[e._v("\n                未下发数:\n              ")]),e._v(" "),a("div",[e._v("\n                "+e._s(e.salse.notPlanCount)+"\n              ")])]),e._v(" "),a("div",{staticClass:"plan-item"},[a("div",[e._v("\n                规格:\n              ")]),e._v(" "),a("div",[e._v("\n                "+e._s(e.salse.specName)+"\n              ")])]),e._v(" "),a("div",{staticClass:"plan-item"},[a("div",[e._v("\n                颜色:\n              ")]),e._v(" "),a("div",[e._v("\n                "+e._s(e.salse.colorName)+"\n              ")])]),e._v(" "),a("div",{staticClass:"plan-item"},[a("div",[e._v("\n                备注:\n              ")]),e._v(" "),a("div",{staticStyle:{height:"144px","text-align":"left"}},[e._v("\n                "+e._s(e.salse.note)+"\n              ")])]),e._v(" "),a("div",{staticStyle:{width:"100%","padding-right":"10px","text-align":"right"}},[a("span",[e._v(" 下单人:"+e._s(null==e.salse.empName?"毛主管":e.salse.empName))])])],1),e._v(" "),a("div",{staticClass:"productio-detail"},[a("div",{staticClass:"detail-head"},[e._v("生产详情：")]),e._v(" "),a("div",{staticClass:"detail-head-item"},[a("Cascader",{attrs:{data:e.clients,trigger:"hover","change-on-select":"",disabled:e.isAddPlan,"not-found-text":e.conName,size:"small"},on:{"on-change":e.handleClientChange},model:{value:e.planDetail.currentClientIds,callback:function(t){e.$set(e.planDetail,"currentClientIds",t)},expression:"planDetail.currentClientIds"}},[a("div",{staticStyle:{"font-size":"12px",width:"100%","min-height":"60px",display:"inline-flex","flex-direction":"row","justify-content":"space-between"}},[a("div",{staticClass:"company-head-item head-item-left"},[a("div",[a("a",{staticClass:"a-single",attrs:{href:"javascript:void(0)"}},[e._v("选择客户:")])]),e._v(" "),a("div",[a("a",{staticClass:"a-single",attrs:{href:"javascript:void(0)"}},[e._v("作业区:")])])])])]),e._v(" "),a("div",{staticClass:"company-head-item head-item-right"},e._l(e.noClient,function(t,i){return a("div",{key:t.value,staticClass:"item-lable",class:[i==e.currentShopIndex?"company-checked":""],on:{click:function(a){return e.choosCompay(t,i)}}},[e._v(" "+e._s(t.label)+"\n                ")])}),0)],1),e._v(" "),a("div",{staticClass:"item-right"},[a("div",[e._v("\n                产品:\n              ")]),e._v(" "),a("div",[a("el-input",{staticClass:"left-input",attrs:{size:"mini",disabled:e.isAddPlan},on:{focus:e.showLock},model:{value:e.planDetail.productName,callback:function(t){e.$set(e.planDetail,"productName",t)},expression:"planDetail.productName"}})],1)]),e._v(" "),a("div",{staticClass:"item-right"},[a("div",[e._v("\n                数量:\n              ")]),e._v(" "),a("div",[a("el-input",{staticClass:"left-input",attrs:{size:"mini",type:"number",step:1e3,disabled:e.isAddPlan,min:"0"},on:{change:e.plandetailCount},model:{value:e.planDetail.expCount,callback:function(t){e.$set(e.planDetail,"expCount",t)},expression:"planDetail.expCount"}})],1)]),e._v(" "),a("div",{staticClass:"plan-client-item"},[a("div",{},[a("div",[e._v("\n                  规格:\n                ")]),e._v(" "),a("div",[a("el-select",{attrs:{disabled:e.isAddPlan,size:"mini",placeholder:"请选择规格"},on:{change:e.setSalesSpec},model:{value:e.planDetail.specName,callback:function(t){e.$set(e.planDetail,"specName",t)},expression:"planDetail.specName"}},e._l(e.specslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)]),e._v(" "),a("div",[a("div",[e._v("\n                  站名:\n                ")]),e._v(" "),a("div",[a("el-input",{staticClass:"left-input",attrs:{size:"mini",disabled:e.isAddPlan},model:{value:e.planDetail.abbr,callback:function(t){e.$set(e.planDetail,"abbr",t)},expression:"planDetail.abbr"}})],1)])]),e._v(" "),a("div",{staticClass:"plan-client-item"},[a("div",[a("div",[e._v("\n                  颜色:\n                ")]),e._v(" "),a("div",[a("el-select",{attrs:{disabled:e.isAddPlan,size:"mini",placeholder:"请选择规格"},on:{change:e.setSalesColor},model:{value:e.planDetail.colorName,callback:function(t){e.$set(e.planDetail,"colorName",t)},expression:"planDetail.colorName"}},e._l(e.colorlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)]),e._v(" "),a("div",[a("div",[e._v("\n                  标记:\n                ")]),e._v(" "),a("div",[a("el-input",{staticClass:"left-input",attrs:{size:"mini"},model:{value:e.planDetail.mark,callback:function(t){e.$set(e.planDetail,"mark",t)},expression:"planDetail.mark"}})],1)])]),e._v(" "),a("div",{staticClass:"item-right"},[a("div",[e._v("\n                实际数量:\n              ")]),e._v(" "),a("div",{staticStyle:{display:"inline-flex","flex-direction":"row","justify-content":"space-around"}},[a("el-input",{attrs:{type:"number",placeholder:"本次实际数量","prefix-icon":"el-icon-edit",step:"1000",size:"mini",min:"0"},on:{change:e.setEndNumber},model:{value:e.planDetail.actualQuantity,callback:function(t){e.$set(e.planDetail,"actualQuantity",t)},expression:"planDetail.actualQuantity"}}),e._v(" "),a("el-input-number",{attrs:{size:"mini",min:7,max:100,label:"设置编码长度"},on:{change:e.codeLenSet},model:{value:e.codeLen,callback:function(t){e.codeLen=t},expression:"codeLen"}})],1)]),e._v(" "),a("div",{staticClass:"item-right"},[a("div",[e._v("是否完成:")]),e._v(" "),a("div",{staticClass:"plan-complete"},[a("el-radio-group",{staticClass:"product-input-btn-class",model:{value:e.planDetail.status,callback:function(t){e.$set(e.planDetail,"status",t)},expression:"planDetail.status"}},[a("el-radio",{attrs:{label:2}},[e._v("未完成")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:3}},[e._v("完成")])],1)],1)]),e._v(" "),a("div",{staticClass:"item-right item-textarea"},[a("div",{staticStyle:{width:"60px","text-align":"right"}},[e._v("\n                备注:\n              ")]),e._v(" "),a("div",[a("el-input",{staticStyle:{width:"220px"},attrs:{"prefix-icon":"el-icon-edit",type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"注意事项1。2。3。"},on:{change:e.noteChange},model:{value:e.planDetail.note,callback:function(t){e.$set(e.planDetail,"note",t)},expression:"planDetail.note"}})],1)])]),e._v(" "),a("div",{staticClass:"productio-detail"},[a("div",{staticStyle:{width:"100%",padding:"16px","text-align":"left"}},[e._v(" 编码详情:")]),e._v(" "),a("div",{staticStyle:{width:"100%",height:"200px"}},[a("div",{staticClass:"item-right"},[e._v(" 公司最近3次编码（参考值）")]),e._v(" "),e.serialNumbers.length?a("div",e._l(e.serialNumbers,function(t){return a("div",{key:t.id,staticClass:"item-right numbers-show"},[e._v("\n                  "+e._s(e._f("formatDate")(t.createDate))+"       \n                  "+e._s(t.startNo)+"-"+e._s(t.endNo)+"\n                ")])}),0):a("div",[e._v("\n                暂无\n              ")])]),e._v(" "),a("div",{staticClass:"item-right"},[a("div",[a("span",[e._v("编码:")])]),e._v(" "),a("div",{staticStyle:{width:"100%",display:"inline-flex","flex-direction":"row","justify-content":"start"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini",placeholder:"起始编码..."},on:{change:e.setbyStartNo},model:{value:e.serialNumber.startNo,callback:function(t){e.$set(e.serialNumber,"startNo",t)},expression:"serialNumber.startNo"}}),e._v("\n                -\n                "),a("el-input",{staticStyle:{width:"50%"},attrs:{size:"mini",placeholder:"结束编码"},on:{change:e.setbyEndNo},model:{value:e.serialNumber.endNo,callback:function(t){e.$set(e.serialNumber,"endNo",t)},expression:"serialNumber.endNo"}})],1)]),e._v(" "),a("div",{staticClass:"plan-item-add"},[a("span",{staticClass:"plan-item-add-btn",on:{click:e.addNumberList}},[e._v(" 添加 ")])]),e._v(" "),e._l(e.serialEdit,function(t,i){return a("div",{key:t.id,staticClass:"item-right numbers-show"},[a("span",{staticClass:"text-overflow"},[e._v("    "+e._s(t.startNo)+"-"+e._s(t.endNo)+";")]),e._v(" "),a("span",[e._v("  \n              ")]),e._v(" "),a("span",{staticClass:"fa fa-pencil item-span-icon",staticStyle:{cursor:"pointer","padding-left":"10px"},on:{click:function(t){return e.editSerialNo(i)}}}),e._v(" "),a("span",{staticClass:"fa fa-trash item-span-icon",staticStyle:{"padding-left":"20px",cursor:"pointer"},on:{click:function(t){return e.deletSerialNo(i)}}})])})],2)]),e._v(" "),a("div",{staticClass:"zt-dialog-detail"},[a("div",{staticStyle:{width:"200px"}},[a("el-button",{staticStyle:{"font-size":"12px"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticStyle:{"font-size":"12px"},attrs:{type:"primary"},on:{click:function(t){return e.add("addDetailForm")}}},[e._v("确 定")])],1)])])]),e._v(" "),a("div",{staticStyle:{width:"100%",display:"flex","flex-direction":"row","justify-content":"center","align-items":"center"}},[a("el-menu")],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"1000px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelChoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0",padding:"0"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedlock,callback:function(t){e.selectedlock=t},expression:"selectedlock"}},[e._v(" ")])]}}],null,!1,990601224)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"客户名",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.client.name)+"\n          ")]}}],null,!1,1367953005)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量/完成数量/下发数"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?a("div"):e._e(),e._v("\n            "+e._s(t.row.quantity)+"/"+e._s(t.row.endQuantity)+"/"+e._s(t.row.nextQuantity)+"枚\n          ")]}}],null,!1,915365711)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"产品名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.product.producteName?a("div",[e._v("\n              "+e._s(t.row.product.producteName)+"\n            ")]):a("div",[e._v("暂无")])]}}],null,!1,2074959251)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"规格",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.specification.name)+"\n          ")]}}],null,!1,2888749193)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+"枚")]}}],null,!1,3875320087)}),e._v(" "),a("el-table-column",{attrs:{prop:"productNo",align:"left",label:"型号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooslocks()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialoglockTitle,"close-on-click-modal":!1,visible:e.dialoglockVisible,width:"650px"},on:{"update:visible":function(t){e.dialoglockVisible=t},close:e.cancellock}},[e.dialoglockVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.lockList,fit:"",border:""},on:{"row-click":e.showLockRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedlock,callback:function(t){e.selectedlock=t},expression:"selectedlock"}},[e._v(" ")])]}}],null,!1,990601224)}),e._v(" "),a("el-table-column",{attrs:{prop:"producteName",align:"left",fixed:"",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specName",align:"left",fixed:"",label:"规格"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proType",align:"left",fixed:"",label:"型号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"colorName",align:"left",fixed:"",label:"颜色"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialoglockVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("zt-dialog",{attrs:{"is-show":e.dialogSendVisible,"height-num":"260","wid-num":"450","left-site":"400"},on:{"on-close":e.cancelSenddetail}},[a("div",{staticClass:"zt-dialog-head",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"24px","box-sizing":"border-box","text-align":"left"}},[e._v("发货请求")]),e._v(" "),a("span",{staticClass:"colosBtn",on:{click:e.cancelSenddetail}},[e._v("×")])]),e._v(" "),a("div",{staticStyle:{"font-size":"12px"},attrs:{slot:"main"},slot:"main"},[a("el-form",{ref:"addSend",attrs:{model:e.sendDetail,size:"mini","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-form-item",{attrs:{label:"数量:"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",size:"mini",step:"1000",placeholder:"发货数量"},model:{value:e.sendDetail.planNumber,callback:function(t){e.$set(e.sendDetail,"planNumber",t)},expression:"sendDetail.planNumber"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"等级:"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.sendDetail.expectLevel,callback:function(t){e.$set(e.sendDetail,"expectLevel",t)},expression:"sendDetail.expectLevel"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",type:"textarea",size:"mini",placeholder:"备注。。"},model:{value:e.sendDetail.note,callback:function(t){e.$set(e.sendDetail,"note",t)},expression:"sendDetail.note"}})],1)],1)],1)]),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelSenddetail}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.revokeBeg}},[e._v("撤销")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addSend("addSend")}}},[e._v("发送请求")])],1)],1)])],1)},staticRenderFns:[]};var f=a("VU/8")(p,h,!1,function(e){a("r702")},"data-v-1f4ce1bc",null);t.default=f.exports},ORdc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("c/Tr"),n=a.n(i),s=a("bOdI"),l=a.n(s),o=a("zL8q"),r={data:function(){var e;return e={typeItems:[{value:1,name:"新建"},{value:2,name:"完成"},{value:3,name:"撤销"},{value:"",name:"汇总"}],tap:1,pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keyMaterialwords:"",dialogMaterialVisible:!1,dialogMaterialTitle:"产品",ordersList:[],keywords:"",totalCount:-1,currentPage:1,currentItemPage:1,totalItemCount:-1,tableLoading:!1,manageStatus:"1",defaultProps:{value:"id",label:"name",children:"child"},products:[],clients:[],levels:[{id:1,label:"紧急"},{id:2,label:"加急"},{id:3,label:"备货"},{id:4,label:"正常"},{id:5,label:"特殊"}],colorlist:[],specslist:[],dialogFormVisible:!1,salse:{id:0,clientId:[],clientName:"",quantity:"",note:"",expectLevel:"",productName:"",proId:"",specification:"",mark:"",productNo:"",specsId:"",colorId:"",progressId:0},selectMaterial:{},selectedM:{},currentMaterialPage:1,dialogOrdersTitle:"添加订单",dialogordersVisible:!1,order:{id:0,contractName:"",contractNumber:"",orderNo:"",hasContract:1,empId:"",cliId:"",qualityDeposit:"",tax:"",totalMoney:"",signContractDate:"",state:"",notes:"",clientArr:""},emps:[],salesItem:{},orderItem:{id:0,sid:0,productNo:"",unitPrice:"",totalMoney:"",address:"",remarks:"",resourcesNumber:"",productionPlanDetailsIds:""},dialogUnsalesTitle:"销售计划",dialogUnSaleVisible:!1,keyItemwords:"",selectSales:{},selectedSales:{},orderitems:[],maxId:0,items:[],deItem:[]},l()(e,"manageStatus","1"),l()(e,"advanceSearchViewVisible",!1),l()(e,"faangledoubleup","fa-angle-double-up"),l()(e,"faangledoubledown","fa-angle-double-down"),l()(e,"keyproductName",""),l()(e,"keyClientName",""),l()(e,"keyempName",""),l()(e,"startDate",""),l()(e,"endDate",""),e},computed:{totalCountItem:function(){if(this.orderItem.unitPrice&&this.orderItem.productNo)return this.orderItem.totalMoney=this.orderItem.unitPrice*this.orderItem.productNo,this.orderItem.totalMoney}},mounted:function(){this.initData()},methods:{showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyData(),this.loadData())},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyData(),this.loadData()},chooseSales:function(){this.loadSalse()},chooseUnSale:function(){this.orderItem.productNo=this.selectSales.salesPlan.quantity,this.dialogUnSaleVisible=!1},addSalesItem:function(){var e=this;if(""===this.orderItem.productNo||0===this.orderItem.productNo)return Object(o.Message)("请输入数量！"),!1;if(!this.selectSales.id)return Object(o.Message)("请选择销售计划！"),!1;var t=!1;if(this.items&&this.items.length)for(var a=this.items.length-1;a>=0;a--){var i=e.items[a];i.productionPlanDetailsIds===this.selectSales.id&&(i.productNo=e.orderItem.productNo,i.totalMoney=e.orderItem.totalMoney,i.unitPrice=e.orderItem.unitPrice,"ood"===i.tap&&(i.tap="update"),t=!0)}t||(this.orderItem.productionPlanDetailsIds=this.selectSales.id,this.orderItem.tap="new",this.maxId++,this.orderItem.resourcesNumber=this.maxId,this.orderItem.sid=this.maxId,this.items.push(this.orderItem)),this.order.totalMoney=0,this.items.map(function(t){e.order.totalMoney+=t.totalMoney}),this.clearItem()},clearOderAddloadDate:function(){this.clearItem(),this.clearOder(),this.items=[],this.loadmyData()},clearItem:function(){this.orderItem={id:0,sid:0,productNo:"",unitPrice:"",totalMoney:"",address:"",remarks:"",resourcesNumber:"",productionPlanDetailsIds:""},this.selectSales={},this.selectedSales={}},clearOder:function(){this.order={id:0,contractName:"",contractNumber:"",orderNo:"",hasContract:1,empId:"",cliId:"",qualityDeposit:"",tax:"",totalMoney:"",signContractDate:"",state:"",notes:"",clientArr:""},this.maxId=0},deleteItem:function(e,t){if("new"!==t.tap&&this.deItem.push(t),this.items.splice(e,1),this.items&&this.items.length)for(var a=this.items.length-1;a>=0;a--)this.items[a].resourcesNumber=a+1,this.items[a].sid=a+1},editeItem:function(e,t){console.log("row"+t),this.orderItem=t,this.selectSales.id=t.productionPlanDetailsIds},editOder:function(e,t){console.log(t),this.order.id=t.id,this.order.contractName=t.contractName,this.order.contractNumber=t.contractNumber,this.order.orderNo=t.orderNo,this.order.hasContract=t.hasContract?1:0,this.order.empId=t.empId,this.order.qualityDeposit=t.qualityDeposit,this.order.tax=t.tax,this.order.totalMoney=t.totalMoney,this.order.signContractDate=t.signContractDate,this.order.state=t.orderStatus,this.order.notes=t.notes,this.order.clientArr=t.clientArr,this.order.cliId=t.clientArr.split(",").map(function(e){return parseInt(e)});var a=[];this.dialogOrdersTitle="修改订单",t.salesOrderDetails&&t.salesOrderDetails.length&&(a=t.salesOrderDetails.map(function(e,t,a){return{tap:"ood",sid:t+1,productNo:e.productNo,unitPrice:e.unitPrice,totalMoney:e.totalMoney,address:e.address,remarks:e.remarks,resourcesNumber:e.resourcesNumber,productionPlanDetailsIds:e.productionPlanDetails.id}}),this.maxId=t.salesOrderDetails.length),this.items=a,this.dialogordersVisible=!0},used:function(e){this.handleClick("","",e.value+"")},handleClick:function(e,t,a){console.log(a);var i=void 0;switch(a&&""!==a?(i=a,this.activePanel=a):i=this.activePanel,this.tap=2,i){case"1":this.manageStatus="1";break;case"2":this.manageStatus="2";break;case"3":this.manageStatus="3";break;case"4":this.manageStatus="4";break;case"7":this.manageStatus=""}this.loadmyData()},addOrder:function(e){var t=this,a=this;if(!this.items.length)return Object(o.Message)("详情不能为空@#"),!1;var i=_.cloneDeep(this.order);i.clientArr=i.cliId.join(","),i.cliId=i.cliId.pop();var n=this.items.concat(this.deItem);i.orderDetails=this.jsonToString(n),this.$refs[e].validate(function(e){if(!e)return!1;i.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/orders/update",i).then(function(e){a.tableLoading=!1,e||200===e.status||e.data.success||a.errorInfo(),a.dialogordersVisible=!1})):t.postRequest("/orders/add",i).then(function(e){a.tableLoading=!1,e||200===e.status||e.data.success||a.errorInfo(),a.dialogordersVisible=!1})})},errorInfo:function(){this.$message({message:"保存失败！",type:"warning"})},delOder:function(e){var t=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){Object(o.Message)("取消")})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/orders/delete?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success?t.loadmyData():Object(o.Message)("删除失败！")})},Contact:function(){this.dialogOrdersTitle="添加订单",this.dialogordersVisible=!0},cancelchoose:function(){console.log("选择框关闭"),this.selectMaterial={},this.selectedM={}},searchMaterialData:function(){this.loadMaterial()},searchItemData:function(){this.loadSalse()},currentChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){this.currentPage=e,console.log(this.currentPage),this.loadmyData()}),currentItemChange:function(){this.currentItemPage=currentChange,console.log(this.currentItemPage),this.loadSalse()},keywordsItemChange:function(){this.loadSalse()},currentSelectShop:function(e){console.log(e+"客户"),this.salse.clientId=n()(e)},currentSelectCliets:function(e){this.order.cliId=n()(e)},chooseMaterial:function(){var e=this;console.log("选择了！6666");var t=this;if(this.selectMaterial.id>0){var a=this.selectMaterial.producteName+""+this.selectMaterial.specName+";";this.$confirm("您当前选择了"+a+"确认选择该产品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(){var e=this.selectMaterial;console.log(e),this.salse.productName=e.producteName,this.salse.proId=e.id,this.salse.specification="",this.specslist=e.specs||[],this.colorlist=e.colors||[],this.salse.productNo=e.proType,this.dialogMaterialVisible=!1},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},showitemRow:function(e){this.selectedSales=this.orderitems.indexOf(e),this.selectSales=e,console.log(this.selectSales)},showMaterial:function(){this.loadMaterial()},keywordsMaterialChange:function(){""===val&&this.loadMaterial()},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/product/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(a){e.tableLoading=!1,a&&200===a.status&&a.data.success?(t.materialList=a.data.data,t.totalMaterialCount=a.data.total,t.dialogMaterialVisible=!0):Object(o.Message)("查询失败！")})},newSalePlan:function(){this.dialogTitle="郑铁公司销售单";this.dialogFormVisible=!0},addSales:function(e){var t=this;this.dialogFormVisible=!0;var a=this,i=_.cloneDeep(this.salse);i.pcCode=i.clientId.join(","),i.clientId=i.clientId.pop(),this.$refs[e].validate(function(e){if(!e)return!1;i.id?(t.tableLoading=!0,console.log(a.plan),t.postRequest("/sales/update",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogFormVisible=!1,a.loadmyData(),a.emptyData())})):(t.tableLoading=!0,0!==i.clientId&&""!==i.clientId||(i.clientId=0),console.log(i),t.postRequest("/sales/add",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success&&(a.dialogFormVisible=!1,a.loadmyData(),a.emptyData())}))})},cancelSales:function(){this.dialogFormVisible=!1,this.loadmyData(),this.emptyData()},emptyData:function(){this.colorlist=[],this.specslist=[],this.salse={id:0,clientId:"",clientName:"",quantity:"",note:"",productName:"",proId:"",specification:"",mark:"",productNo:"",specsId:"",colorId:"",progressId:0}},initData:function(){var e=this;this.loadmyData(),this.getRequest("/productionplan/basedata").then(function(t){if(t&&200===t.status){var a=t.data;e.clients=e.toTree(a.root.clients),e.emps=a.root.emps,console.log(e.clients);var i=[];a.root.products.forEach(function(e){i.push({id:e[0],producteName:e[1],specification:e[2],proType:e[3],mark:e[4],color:e[5]})}),e.products=i}})},searchData:function(){console.log(this.value5),this.value5&&this.value5.length&&(this.startDate=this.formatDateTime(this.value5[0]),this.endDate=this.formatDateTime(this.value5[1]),console.log(this.startDate)),this.loadmyData()},loadmyData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/orders/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords+"&status="+this.manageStatus+"&empName="+this.keyempName+"&productName="+this.keyproductName+"&clientName="+this.keyClientName+"&start="+this.startDate+"&end="+this.endDate).then(function(a){e.tableLoading=!1,a&&200===a.status&&a.data.success&&(t.ordersList=a.data.data,console.log(t.ordersList),t.totalCount=a.data.total,t.emptyData())})},loadSalse:function(){var e=this,t=this,a="";if(this.tableLoading=!0,this.order.cliId&&this.order.cliId.length&&(a=this.order.cliId[this.order.cliId.length-1]),""===a)return Object(o.Message)("请选择客户@--！"),!1;this.getRequest("/productionplandetails/findForOrder?page="+this.currentItemPage+"&size=10&clientId="+a).then(function(a){e.tableLoading=!1,a&&200===a.status&&a.data.success?(t.orderitems=a.data.data,t.totalItemCount=a.data.total,t.dialogUnSaleVisible=!0):Object(o.Message)("查询错误！")})},toTree:function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.child});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.parentClientId];i?(i.child||(i.child=[])).push(e):t.push(e)}),console.log(t),t}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("div",{staticStyle:{"text-align":"center"}},[a("strong",[e._v("销售计划")])]),e._v(" "),a("div",{staticStyle:{"text-align":"left","margin-left":"20px"}},[a("div",{staticClass:"fa fa-window-restore",class:{stamp:1===e.tap},staticStyle:{cursor:"pointer"},on:{click:function(t){e.tap=1}}},[e._v("分类\n          ")]),e._v(" "),a("div",{staticClass:"fa fa-list-ul",class:{stamp:2===e.tap},staticStyle:{"margin-left":"30px",cursor:"pointer"},on:{click:function(t){e.tap=2}}},[e._v("\n            列表展示\n          ")])])]),e._v(" "),2===e.tap?a("el-container",{staticClass:"divce-mode"},[a("el-header",{staticClass:"send-head"},[a("div",{staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n            ")]),e._v(" "),a("el-button",{staticClass:"send-head-right-btn",attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:e.showAdvanceSearchView},slot:"reference"},[a("i",{staticClass:"fa fa-lg",class:[e.advanceSearchViewVisible?e.faangledoubleup:e.faangledoubledown],staticStyle:{"margin-right":"5px"}}),e._v("高级搜索\n            ")])],1),e._v(" "),a("div",{staticClass:"send-head-right-btn"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.Contact}},[e._v("新建订单")])],1)]),e._v(" "),a("el-main",{staticClass:"send-main"},[a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticClass:"send-main-div"},[a("el-row",[a("el-col",{attrs:{span:8}},[e._v("\n                  产品:\n                  "),a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品名称。。。"},model:{value:e.keyproductName,callback:function(t){e.keyproductName=t},expression:"keyproductName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                  客户:"),a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"客户名。。。"},model:{value:e.keyClientName,callback:function(t){e.keyClientName=t},expression:"keyClientName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                  操作人:\n                  "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"员工名。。。"},model:{value:e.keyempName,callback:function(t){e.keyempName=t},expression:"keyempName"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"flex-end"}},[a("el-col",{attrs:{span:5,offset:4}},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelSearch}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.searchData}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%","font-size":"12px"},attrs:{data:e.ordersList,border:"",fit:""}},[a("el-table-column",{attrs:{align:"left",fixed:"",label:"订单编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.orderNo?a("div",[e._v("\n                    "+e._s(t.row.orderNo)+"\n                  ")]):a("div",[e._v("\n                    无\n                  ")])]}}],null,!1,4186002289)}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"合同编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.contractNumber?a("div",[e._v("\n                    "+e._s(t.row.contractNumber)+"\n                  ")]):a("div",[e._v("\n                    无\n                  ")])]}}],null,!1,3824425361)}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"客户"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.cliente?a("div",[e._v("\n                    "+e._s(t.row.cliente.name)+"\n                  ")]):a("div",[e._v("\n                    无\n                  ")])]}}],null,!1,2727918552)}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"负责人"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.employee?a("div",[e._v("\n                    "+e._s(t.row.employee.name)+"\n                  ")]):a("div",[e._v("\n                    无\n                  ")])]}}],null,!1,1536617496)}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n                ")]}}],null,!1,3229454806)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",fixed:"right",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"编辑"}},[a("span",{staticClass:"fa fa-pencil",staticStyle:{padding:"3px 4px 3px 4px",margin:"2px",color:"#2fc5da"},on:{click:function(a){return e.editOder(t.$index,t.row)}}})]),e._v(" "),a("el-tooltip",{attrs:{content:"删除"}},[a("span",{staticClass:"fa fa-trash",staticStyle:{padding:"3px 4px 3px 4px",margin:"2px",color:"red"},on:{click:function(a){return e.delOder(t.row)}}})])]}}],null,!1,2759317190)})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":7,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)],1)],1):a("el-container",{staticClass:"product-model-base"},e._l(e.typeItems,function(t){return a("div",{key:t.value,staticClass:"product-model-item",on:{click:function(a){return e.used(t)}}},[a("span",{staticClass:"fa fa-bomb"}),e._v(" "),a("span",[e._v(e._s(t.name))])])}),0)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n            ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{prop:"producteName",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specName",align:"left",fixed:"",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proType",align:"left",fixed:"",label:"型号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"colorName",align:"left",fixed:"",label:"颜色",width:"120"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogOrdersTitle,"close-on-click-modal":!1,visible:e.dialogordersVisible,width:"960px"},on:{"update:visible":function(t){e.dialogordersVisible=t},close:e.clearOderAddloadDate}},[e.dialogordersVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addOrderForm",attrs:{model:e.order,size:"mini","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("div",{staticStyle:{"background-color":"rgb(175, 218, 136)","padding-top":"10px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户:",prop:"cliId"}},[a("el-cascader",{staticStyle:{width:"200px"},attrs:{placeholder:"--选择客户--",options:e.clients,props:e.defaultProps,filterable:"","show-all-levels":!1,"change-on-select":"",clearable:""},on:{change:e.currentSelectCliets},model:{value:e.order.cliId,callback:function(t){e.$set(e.order,"cliId",t)},expression:"order.cliId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"负责人:",prop:"empId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"——请选负责人——"},model:{value:e.order.empId,callback:function(t){e.$set(e.order,"empId",t)},expression:"order.empId"}},e._l(e.emps,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单编号:",prop:"orderNo"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",disabled:"",placeholder:"订单编号"},model:{value:e.order.orderNo,callback:function(t){e.$set(e.order,"orderNo",t)},expression:"order.orderNo"}})],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"background-color":"rgb(175, 218, 136)"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"税收:",prop:"tax"}},[a("el-input",{ref:"taxt",staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"增值税收",size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.order.tax,callback:function(t){e.$set(e.order,"tax",t)},expression:"order.tax"}},[a("el-button",{attrs:{slot:"append"},slot:"append"},[e._v("%")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"总价格:",prop:"totalMoney"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number",min:"0","prefix-icon":"el-icon-edit",size:"mini",disabled:"",step:"100",placeholder:"总价格。。。"},model:{value:e.order.totalMoney,callback:function(t){e.$set(e.order,"totalMoney",t)},expression:"order.totalMoney"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"有合同:",prop:"hasContract"}},[a("el-radio-group",{model:{value:e.order.hasContract,callback:function(t){e.$set(e.order,"hasContract",t)},expression:"order.hasContract"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)],1)],1),e._v(" "),e.order.hasContract?a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"质保金:",prop:"qualityDeposit"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"标记"},model:{value:e.order.qualityDeposit,callback:function(t){e.$set(e.order,"qualityDeposit",t)},expression:"order.qualityDeposit"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同名称:",prop:"contractName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"合同名称。。。"},model:{value:e.order.contractName,callback:function(t){e.$set(e.order,"contractName",t)},expression:"order.contractName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同编号:",prop:"contractNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"合同编号。。。"},model:{value:e.order.contractNumber,callback:function(t){e.$set(e.order,"contractNumber",t)},expression:"order.contractNumber"}})],1)],1)],1):e._e(),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.order.notes,callback:function(t){e.$set(e.order,"notes",t)},expression:"order.notes"}})],1)],1)],1),e._v(" "),a("div")],1)]),e._v(" "),a("div",[a("el-row",[a("el-col",{staticStyle:{"text-align":"start"}},[a("el-button",{staticStyle:{padding:"6px 4px",margin:"5px"},attrs:{type:"primary"},on:{click:e.chooseSales}},[e._v("选择生产计划")]),e._v(" "),e.selectSales.salesPlan&&e.selectSales.salesPlan.client?a("div",[a("span",{staticStyle:{margin:"10px",display:"block"}},[e._v("\n                "+e._s(e.selectSales.salesPlan.client.name)+"\n                 "+e._s(e.selectSales.salesPlan.product.producteName)+"\n                  |"+e._s(e.selectSales.salesPlan.specification.name)+"\n                 |"+e._s(e.selectSales.salesPlan.color.name)+"\n                 需求数量:\n                 "+e._s(e.selectSales.salesPlan.quantity)+";\n                       下发人:\n                "+e._s(e.selectSales.salesPlan.editer.name)+"\n                ")])]):e._e()],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"数量:",prop:"productNo"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",min:"0",step:"1000",placeholder:"数量。。。"},model:{value:e.orderItem.productNo,callback:function(t){e.$set(e.orderItem,"productNo",t)},expression:"orderItem.productNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单价:",prop:"unitPrice"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"text",placeholder:"单价。。。"},model:{value:e.orderItem.unitPrice,callback:function(t){e.$set(e.orderItem,"unitPrice",t)},expression:"orderItem.unitPrice"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"start"},attrs:{span:8}},[a("span",[e._v("总价:"+e._s(e.totalCountItem)+"\n                  ")])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"地址:",prop:"address"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"text",placeholder:"地址。。。"},model:{value:e.orderItem.address,callback:function(t){e.$set(e.orderItem,"address",t)},expression:"orderItem.address"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"备注:",prop:"remarks"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"text",placeholder:"备注。。。"},model:{value:e.orderItem.remarks,callback:function(t){e.$set(e.orderItem,"remarks",t)},expression:"orderItem.remarks"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"text-align":"start"}},[a("el-button",{staticStyle:{padding:"6px 4px",margin:"5px"},attrs:{type:"primary"},on:{click:e.addSalesItem}},[e._v("添加")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.items,fit:"",border:""}},[a("el-table-column",{attrs:{align:"left",type:"index",fixed:"",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productNo",align:"left",fixed:"",label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unitPrice",align:"left",fixed:"",label:"单价"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalMoney",align:"left",label:"总价"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"编辑"}},[a("span",{staticClass:"fa fa-pencil",staticStyle:{padding:"3px 4px 3px 4px",margin:"2px",color:"#2fc5da"},on:{click:function(a){return e.editeItem(t.$index,t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"删除"},[a("span",{staticClass:"fa fa-trash",staticStyle:{padding:"3px 4px 3px 4px",margin:"2px",color:"#2fc5da"},on:{click:function(a){return e.deleteItem(t.$index,t.row)}}})])]}}],null,!1,4060147889)})],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogordersVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrder("addOrderForm")}}},[e._v("确 定")])],1)]),e._v(" "),e.dialogFormVisible?a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelSales}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addSaleForm",attrs:{model:e.salse,size:"mini","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("div",{staticStyle:{"background-color":"bisque"}},[a("div",{staticStyle:{"text-align":"left"}},[e._v("\n                客户信息\n              ")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"客户:",prop:"clientId"}},[a("el-cascader",{attrs:{placeholder:"--选择客户--",options:e.clients,props:e.defaultProps,filterable:"","show-all-levels":!1,"change-on-select":""},on:{change:e.currentSelectShop}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"订单等级:",prop:"expectLevel"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"--请选择--"},model:{value:e.salse.expectLevel,callback:function(t){e.$set(e.salse,"expectLevel",t)},expression:"salse.expectLevel"}},e._l(e.levels,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"background-color":"rgb(175, 218, 136)"}},[a("div",{staticStyle:{"text-align":"left"}},[e._v("\n                产品信息\n              ")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"名称:",prop:"productName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品名称。。。"},on:{focus:e.showMaterial},model:{value:e.salse.productName,callback:function(t){e.$set(e.salse,"productName",t)},expression:"salse.productName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"型号:",prop:"productNo"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"型号"},model:{value:e.salse.productNo,callback:function(t){e.$set(e.salse,"productNo",t)},expression:"salse.productNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"标记:",prop:"mark"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"标记"},model:{value:e.salse.mark,callback:function(t){e.$set(e.salse,"mark",t)},expression:"salse.mark"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"规格:",prop:"specsId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择规格"},model:{value:e.salse.specsId,callback:function(t){e.$set(e.salse,"specsId",t)},expression:"salse.specsId"}},e._l(e.specslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"颜色:",prop:"colorId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"--请选择色彩--"},model:{value:e.salse.colorId,callback:function(t){e.$set(e.salse,"colorId",t)},expression:"salse.colorId"}},e._l(e.colorlist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.salse.quantity,callback:function(t){e.$set(e.salse,"quantity",t)},expression:"salse.quantity"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注。。。"},model:{value:e.salse.notes,callback:function(t){e.$set(e.salse,"notes",t)},expression:"salse.notes"}})],1)],1)],1),e._v(" "),a("div")],1)])])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addSales("addSaleForm")}}},[e._v("确 定")])],1)]):e._e(),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogUnsalesTitle,"close-on-click-modal":!1,visible:e.dialogUnSaleVisible,width:"980px"},on:{"update:visible":function(t){e.dialogUnSaleVisible=t},close:e.cancelchoose}},[e.dialogUnSaleVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0",padding:"0"},attrs:{placeholder:"输入客户名搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsItemChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchItemData(t)}},model:{value:e.keyItemwords,callback:function(t){e.keyItemwords=t},expression:"keyItemwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchItemData}},[e._v("搜索\n            ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderitems,fit:"",border:""},on:{"row-click":e.showitemRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedSales,callback:function(t){e.selectedSales=t},expression:"selectedSales"}},[e._v(" ")])]}}],null,!1,696068747)}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.planNo)+"\n            ")]}}],null,!1,129001903)}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"客户名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.salesPlan.client.name)+"\n            ")]}}],null,!1,711260696)}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.salesPlan.specification.name)+"\n            ")]}}],null,!1,4001854844)}),e._v(" "),a("el-table-column",{attrs:{prop:"productNo",align:"left",fixed:"",label:"型号"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"颜色",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.salesPlan.color.name)+"\n            ")]}}],null,!1,774168604)}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"需求数量/生产完成数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.actualQuantity)+"\n              /"+e._s(t.row.accomplishNO)+"\n            ")]}}],null,!1,639510932)}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"下发时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("formatDate")(t.row.createDate))+"\n\n            ")]}}],null,!1,3131448689)})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentItemPage,layout:"prev, pager, next",total:e.totalItemCount},on:{"current-change":e.currentItemChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogUnSaleVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseUnSale()}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(r,c,!1,function(e){a("6mMO")},null,null);t.default=d.exports},OSVN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:中文名",trigger:"blur"}]},units:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,unit:{id:0,name:"",phone:"",post:"",note:""},deps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""==e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},addAndFlushConcat:function(){this.dialogTitle="添加联系人",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadDatas()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.unit=t,delete this.unit.sysMenu,delete this.unit.users,this.dialogFormVisible=!0},addData:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.unit.id?(t.tableLoading=!0,console.log(t.unit),t.postRequest("/clientConcat/update",t.unit).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success&&(a.dialogFormVisible=!1,a.loadDatas(),a.emptyData())})):(t.tableLoading=!0,console.log(a.unit),t.postRequest("/clientConcat/add",t.unit).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success&&(a.dialogFormVisible=!1,a.loadDatas(),a.emptyData())}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/clientConcat/delete?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&t.loadDatas()})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/clientConcat/findByPage?queryName="+this.keywords+"&page="+this.currentPage+"&size=10").then(function(a){e.tableLoading=!1,a&&200===a.status&&a.data.success&&(t.units=a.data.data,t.totalCount=a.data.total,t.emptyData())})},emptyData:function(){console.log("+++++_+++++_"),this.unit={id:0,name:"",phone:"",post:"",note:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{padding:"0 20px"}},[a("div",{staticStyle:{"border-left":"4px solid red","margin-left":"5px","text-align":"left"}},[a("strong",{staticStyle:{"margin-left":"10px"}},[e._v("联系人管理")])]),e._v(" "),a("div",{staticClass:"contact-use-header"},[a("div",{staticClass:"contact-header-right"},[a("el-input",{staticStyle:{width:"300px",margin:"0",padding:"0"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n          ")])],1),e._v(" "),a("div",{staticClass:"product-header-left"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushConcat}},[e._v("添加")])],1)])]),e._v(" "),a("el-main",{staticStyle:{padding:"0 20px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.units,fit:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",align:"left",fixed:"",label:"电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"post",align:"left",fixed:"",label:"岗位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",fixed:"",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n              ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n              ")])]}}])})],1)],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addDataForm",attrs:{model:e.unit,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"姓名"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"电话"},model:{value:e.unit.phone,callback:function(t){e.$set(e.unit,"phone",t)},expression:"unit.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"岗位:",prop:"post"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"岗位"},model:{value:e.unit.post,callback:function(t){e.$set(e.unit,"post",t)},expression:"unit.post"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.unit.note,callback:function(t){e.$set(e.unit,"note",t)},expression:"unit.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addDataForm")}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("DiZX")},null,null);t.default=s.exports},PvfL:function(e,t){},Pycp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("zL8q");var i={data:function(){return{outRecive:{quantity:"",note:"",materialId:""},dialogInTitle:"采购数量",dialogFormInVisible:!1,activeName:"material",confirmDialogTitle:"采购确认单",tempPlan:[],materialsReceives:[],confirms:{},nowMaterial:{quantity:"",notes:"",complete:""},confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",RecordKeywords:"",confirmKewords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{materialName:[{required:!0,message:"必填:原料名称",trigger:"blur"}],quantity:[{required:!0,message:"必填:数量",trigger:"blur"},{validator:function(e,t,a){/^\d+$/.test(t)?a():a("数字格式错误!")},message:"数字格式错误",trigger:"blur"}],clientId:[{required:!0,message:"必选:公司",trigger:"change"}],unitId:[{required:!0,message:"必选:单位",trigger:"change"}]},materials:[],defaultProps:{label:"name",isLeaf:"leaf",children:"child"},dialogTitle:"",currentPage:1,confirmCurrentPage:1,currentReceivePage:1,formLabelWidth:"120px",totalCount:-1,receiveTotalCount:-1,material:{materialName:"",unitId:"",specs:""},clients:[],units:[],dialogTableVisible:!1,dialogFormVisible:!1,currentIndex:"",matriallist:[]}},mounted:function(){this.initData()},methods:{formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},searchRecordData:function(){this.loadReceivedData()},doDelete:function(e){var t=this;this.getRequest("/materialInReceiveRecord/withdraw?id="+e.id).then(function(e){if(e&&200==e.status){e.data;t.loadReceivedData()}})},initData:function(){this.loadReceivedData()},keywordsChange:function(e){""==e&&this.loadReceivedData()},recordKeywordsChange:function(e){""==e&&this.searchRecordData()},currentReceiveChange:function(e){this.currentReceivePage=e,console.log(this.currentReceivePage),this.loadReceivedData()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.material=t,this.material.createDate=t.createDate,delete this.material.unit,this.dialogFormVisible=!0},cancelOptIn:function(){this.dialogFormInVisible=!1,this.loadReceivedData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadReceivedData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e)}).catch(function(){})},loadReceivedData:function(){var e=this;this.tableLoading=!0,this.getRequest("/materialInReceiveRecord/findbypage?page="+this.currentReceivePage+"&size=10&queryName="+this.RecordKeywords).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var a=t.data.data;e.materialsReceives=a,e.receiveTotalCount=t.data.total}})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.recordKeywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchRecordData(t)}},model:{value:e.RecordKeywords,callback:function(t){e.RecordKeywords=t},expression:"RecordKeywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchRecordData}},[e._v("搜索\n    ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialsReceives,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.materail.materialName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"operatorName",label:"记录人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.operator.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDate")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelRecordData(t.row)}}},[e._v("撤销\n          ")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentReceivePage,layout:"prev, pager, next",total:e.receiveTotalCount},on:{"current-change":e.currentReceiveChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("Ior+")},null,null);t.default=s.exports},Q9bC:function(e,t){},Qzxs:function(e,t){},SZkD:function(e,t){},T5Y6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("ngyR"),n=a("Gpj+"),s={data:function(){return{activeName:"notification"}},methods:{handleClick:function(e,t){console.log(e,t)}},components:{fc:i.default,nf:n.default}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"系统通知",name:"notification"}},[a("nf")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"好友聊天",name:"chat"}},[a("fc")],1)],1)],1)},staticRenderFns:[]},o=a("VU/8")(s,l,!1,null,null,null);t.default=o.exports},TjZE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),n=a.n(i),s=a("mvHQ"),l=a.n(s),o=a("zL8q"),r={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],plans:[],clients:[],units:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{materialType:"",notes:"",serialNumber:"",clientId:"",clientName:""},detail:{sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",type:"",specifications:""},details:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择原材料",selectMaterial:{},selectedM:{},filterText:""}},mounted:function(){this.initData()},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectMaterial.id>0){var a=this.selectMaterial.materialName+""+this.selectMaterial.specs+";";this.$confirm("您当前选择了"+a+"确认选择该原料吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(e){var t=e.selectMaterial;e.detail.unitId=t.unitId,e.detail.unitName=t.unit.name,e.detail.name=t.materialName,e.detail.materialId=t.id,e.detail.specifications=t.specs,this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectMaterial={},this.selectedM={}},formatStatus:function(e,t){return 1==e.materialType?"已确认":"未确认"},selectType:function(e,t,a){console.log("changne"),this.types=e,2==e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(a,i,n){a.id==e&&(t.detail.unitId=a.unitId,t.detail.unitName=a.unitName,t.detail.name=a.name,t.detail.materialId=a.id,t.detail.specifications=a.specs)})},addBox:function(){var e=this;if(console.log("asdfadsfasdfasd"),""==this.detail.quantity||void 0==this.detail.quantity)return Object(o.Message)("请输入数量"),!1;if(""==this.detail.name||void 0==this.detail.name)return Object(o.Message)("请选择物料"),!1;if(""==this.detail.sid)if(this.details.length>0){var t=!1;this.details.forEach(function(a,i,n){a.materialId==e.detail.materialId&&a.mtype==e.types&&(t=!0,a.quantity=parseFloat(e.detail.quantity)+parseFloat(a.quantity))}),t||(this.maxSid+=1,this.detail.sid=this.maxSid,this.detail.type="new",this.detail.mtype=this.types,this.details.push(this.detail))}else this.detail.sid=1,this.detail.type="new",this.detail.mtype=this.types,this.maxSid+=1,this.details.push(this.detail);else if(this.details.length)for(var a=0,i=this.details.length;a<i;a++){var n=this.details[a];"odd"===n.type?(this.detail.type="update",n.sid==this.detail.sid&&(this.details.splice(a,1),this.details.push(this.detail))):n.sid==this.detail.sid&&(this.details.splice(a,1),this.details.push(this.detail))}this.emptyDetail()},editeDetail:function(e,t){this.detail=t},deleteDetail:function(e,t){console.log("delete");var a=this.details.splice(e,1);"odd"===a[0].type&&(a[0].type="delete",this.currentDeleteData.push(a[0])),this.maxSid-=1},emptyDetail:function(){this.detail={sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",specifications:"",type:""}},initData:function(){var e=this;e.loadData(),this.getRequest("/rowBuyPlan/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients;var i=[];a.root.materials.forEach(function(e,t,a){var n=e[0],s=e[1],l=e[2];i.push({name:n,unitId:s,id:l,unitName:e[3],specs:e[4],mtype:1})}),e.materials=i,e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var n=[];a.root.products.forEach(function(e,t,a){n.push({name:e[0],unitId:e[1],id:e[2],unitName:e[3],specs:e[4],mtype:2})}),e.products=n}})},keywordsChange:function(e){""==e&&this.loadData()},keywordsMaterialChange:function(e){""==e&&this.loadMaterial()},handleNodeClick:function(e){this.plan.clientId=e.id,this.plan.clientName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.plan.clientId=0,this.plan.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(a,i){a.id==e&&(console.log(a.id),t.detail.unitName=a.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){this.dialogTitle="郑铁公司采购单";var e=this;this.getRequest("/rowBuyPlan/getSerialNumber").then(function(t){if(e.tableLoading=!1,t&&200==t.status){var a=t.data;e.plan.serialNumber=a.root.serialNumber,e.dialogFormVisible=!0}})},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(e,t){console.log(t);this.dialogTitle="编辑信息",this.plan=t,this.plan.createDate=t.createDate;var a=_.cloneDeep(t);void 0!=a.detail&&(a.detail.forEach(function(e,t,a){e.type="odd",e.sid=t+1}),this.details=a.detail,this.maxSid=a.detail.length),this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this,i=_.cloneDeep(this.plan);if(0==this.details.length)return this.$message({type:"info",message:"详情不能为空！"}),!1;var s=[],o=this.details.concat(this.currentDeleteData),r=l()(o,function(e,t){if("object"===(void 0===t?"undefined":n()(t))&&null!==t){if(-1!==s.indexOf(t))return;s.push(t)}return t});s=null,i.detail=r,this.$refs[e].validate(function(e){if(!e)return!1;t.validateplanNo();t.plan.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/rowBuyPlan/update",i).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail())})):(t.tableLoading=!0,0==t.plan.clientId||""==t.plan.clientId?(t.plan.clientId=0,i.materialType=1):i.materialType=2,console.log(i),t.postRequest("/rowBuyPlan/addnew",i).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail()}}))})},validateplanNo:function(){return!0},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.serialNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/rowBuyPlan/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/rowBuyPlan/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.plans=i,t.totalCount=a.data.total,t.emptyData()}})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/material/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.materialList=i,t.totalMaterialCount=a.data.total,t.dialogMaterialVisible=!0}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.details=[],this.plan={materialType:"",notes:"",serialNumber:"",clientId:0,clientName:""}}},computed:{routes:function(){return this.$store.state.routes}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("\n        添加\n      ")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.plan,rules:e.rules,size:"small","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编号:",prop:"serialNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"计划编号"},model:{value:e.plan.serialNumber,callback:function(t){e.$set(e.plan,"serialNumber",t)},expression:"plan.serialNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"供货商:",prop:"clientId"}},[a("el-popover",{attrs:{placement:"right",title:"供货商",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{attrs:{data:e.clients,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{ref:"tree2",staticStyle:{width:"200px",height:"28px",display:"inline-flex","justify-content":"space-between","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference","filter-node-method":e.filterNode},on:{click:e.showDepTree},slot:"reference"},[a("div",[e._v(e._s(e.plan.clientName))]),e._v(" "),a("div",{staticClass:"el-icon-circle-close",staticStyle:{color:"#606266"},on:{click:e.clearChoose}})])],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.plan.notes,callback:function(t){e.$set(e.plan,"notes",t)},expression:"plan.notes"}})],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"left",border:"1px solid #eeeeee"}},[e._v("\n          购买详情:\n        ")]),e._v(" "),a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"名称"},on:{focus:e.showMaterial},model:{value:e.detail.name,callback:function(t){e.$set(e.detail,"name",t)},expression:"detail.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"规格:",prop:"specifications"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",disabled:!0,size:"mini",placeholder:"规格。。"},model:{value:e.detail.specifications,callback:function(t){e.$set(e.detail,"specifications",t)},expression:"detail.specifications"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"append",disabled:!0,placeholder:"单位"},on:{change:e.selectChange},slot:"append",model:{value:e.detail.unitId,callback:function(t){e.$set(e.detail,"unitId",t)},expression:"detail.unitId"}},e._l(e.units,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.detail.notes,callback:function(t){e.$set(e.detail,"notes",t)},expression:"detail.notes"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addBox}},[e._v("添加")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.details,border:"",height:"200"}},[a("el-table-column",{attrs:{prop:"sid",align:"left",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+e._s(t.row.unitName))]}}],null,!1,3476428609)}),e._v(" "),a("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.editeDetail(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteDetail(t.$index,t.row)}}},[e._v("删除\n                ")])]}}],null,!1,987709478)})],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{prop:"materialName",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specs",align:"left",fixed:"",label:"原料规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"单位",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.unit.name)+"\n          ")]}}],null,!1,2595393714)})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.plans,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.detail,function(t,i){return a("el-form",{key:t.id,staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",[a("span",[e._v(e._s(i+1))])]),e._v(" "),a("el-form-item",{attrs:{label:"名称:"}},[a("span",[e._v(e._s(t.name)+";")])]),e._v(" "),a("el-form-item",{attrs:{label:"规格:"}},[a("span",[e._v(e._s(t.specifications)+" ;")])]),e._v(" "),a("el-form-item",{attrs:{label:"数量:"}},[a("span",[e._v(e._s(t.quantity)+" "+e._s(t.units.name)+";")])]),e._v(" "),a("el-form-item",{attrs:{label:"状态:"}},[a("span",[e._v(e._s(1==t.confirmStatus?"未确认":"已收货"))])]),e._v(" "),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[e._v(e._s(t.notes))])])],1)})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serialNumber",align:"left",label:"编号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clientName",width:"120",align:"left",label:"公司名称"}}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"left",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"confirmStatus",width:"80",align:"left",formatter:e.formatStatus,label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(r,c,!1,function(e){a("tSXe")},null,null);t.default=d.exports},UZTo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{tempPlan:[],confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midRecords:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){this.initData()},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.middleProduct.utilname=a.name)})},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var a="",i=e.plant;return this.positions.forEach(function(e,t,n){i.forEach(function(t,i,n){e.id==t&&(a+=e.name+" , ")})}),a},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){var e=this;e.loadData(),this.getRequest("/middleProduct/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients,e.products=a.root.products}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midProductInRecieving/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midProductInRecieving/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.midRecords=i,t.totalCount=a.data.total}})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midRecords,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"入库时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"规格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.midproduct.standard)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"left",label:"原料数量",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.operator.name)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelRecordData(t.row)}}},[e._v("撤销\n          ")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("JrsW")},null,null);t.default=s.exports},Uct3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{activeName:"midProduct"}},methods:{detials:function(e){this.$router.replace({path:e.path})}},components:{},computed:{stepOpt:function(){var e={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(t){"/materialbase"===t.path&&(e=t)}),console.log(e.id);var t=[];return this.$store.state.routes.forEach(function(a){a.parentId===e.id&&t.push(a)}),console.log(t),t||[]}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{display:"flex","flex-direction":"column","font-size":"14px"}},[a("div",{staticStyle:{"margin-left":"20px","line-height":"30px",height:"30px","text-align":"start","padding-left":"20px","border-left":"4px solid red","font-weight":"700"}},[e._v("\n      原料库管理\n    ")]),e._v(" "),a("el-main",{staticClass:"product-base"},e._l(e.stepOpt,function(t){return a("div",{key:t.id,staticClass:"product-item",on:{click:function(a){return e.detials(t)}}},[a("div",{staticClass:"item-left"},[a("div",{staticStyle:{margin:"60px 0","font-size":"16px"}},[a("span",{staticClass:"fa fa-product-hunt",staticStyle:{display:"block"}}),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v(e._s(t.name))])])]),e._v(" "),a("div",{staticClass:"item-right"})])}),0)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("WR6u")},null,null);t.default=s.exports},UnK0:function(e,t){},VDSS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{username:[{required:!0,message:"必填:姓名",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"},{validator:function(e,t,a){/^1[3|4|5|7|8][0-9]\d{8}$/.test(t)?a():a("电话号码格式错误!")},message:"电话号码错误",trigger:"blur"}],password:[{required:!0,message:"必填:密码",trigger:"blur"}],roles:[{required:!0,message:"必选:角色",trigger:"change"}],empId:[{required:!0,message:"必选:员工",trigger:"change"}]},roles:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,user:{username:"",phone:""},users:[],deps:[],emps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{formatSex:function(e,t){return"1"==e.gender?"男":"2"==e.gender?"女":"未知"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.user.departmentName=e.name,this.user.departmentId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadData(),this.getRequest("/users/basicdata").then(function(t){if(t&&200==t.status){var a=t.data;e.emps=a.root.emps,e.roles=a.root.roles}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加用户",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadData()},showEditEmpView:function(e,t){this.dialogTitle="编辑用户",console.log(t),console.log(e),this.user=t,this.currentIndex=e,this.user.username=t.username,this.user.empId=t.empId,this.user.empName=t.empName;var a=[];t.roles.forEach(function(e){a.push(e.id)}),this.user.roles=a,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.user.id?(t.tableLoading=!0,console.log(t.user),t.postRequest("/users/update",t.user).then(function(e){a.tableLoading=!1,e&&200==e.status&&(console.log(e),a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.user),console.log("添加"),t.postRequest("/users/addAndUpdate",t.user).then(function(e){if(a.tableLoading=!1,console.log(e),e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteEmp:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/users/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/users/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.users=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.user={username:"",phone:"",password:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过姓名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n    ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.user,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"昵称:",prop:"username"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入昵称"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-phone",size:"mini",placeholder:"电话号码..."},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码:",prop:"password"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"密码..."},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"员工:",prop:"empId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择员工"},model:{value:e.user.empId,callback:function(t){e.$set(e.user,"empId",t)},expression:"user.empId"}},e._l(e.emps,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"角色:",prop:"roles"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",multiple:"",size:"mini",placeholder:"请选择角色"},model:{value:e.user.roles,callback:function(t){e.$set(e.user,"roles",t)},expression:"user.roles"}},e._l(e.roles,function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}),1)],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",align:"left",fixed:"",label:"昵称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",align:"left",fixed:"",label:"电话",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteEmp(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("/V9a")},null,null);t.default=s.exports},Va7D:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("zL8q"),n=(a("VsUZ"),{data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],plans:[],clients:[],units:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{materialType:"",notes:"",serialNumber:"",clientId:"",clientName:""},detail:{sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",type:"",specifications:""},details:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择原材料",selectMaterial:{},selectedM:{}}},mounted:function(){this.initData()},methods:{showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectMaterial.id>0){var a=this.selectMaterial.name+""+this.selectMaterial.standard+";";this.$confirm("您当前选择了"+a+"确认选择该原料吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(e){var t=e.selectMaterial;e.detail.unitId=t.unitId,e.detail.unitName=t.unit.name,e.detail.name=t.name,e.detail.materialId=t.id,e.detail.specifications=t.standard,this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectMaterial={},this.selectedM={}},formatStatus:function(e,t){return 1===e.materialType?"已确认":"未确认"},selectType:function(e,t,a){console.log("changne"),this.types=e,2===e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(a,i,n){a.id===e&&(t.detail.unitId=a.unitId,t.detail.unitName=a.unitName,t.detail.name=a.name,t.detail.materialId=a.id,t.detail.specifications=a.specs)})},addBox:function(){var e=this;if(console.log("asdfadsfasdfasd"),""==this.detail.quantity||void 0==this.detail.quantity)return Object(i.Message)("请输入数量"),!1;if(""==this.detail.name||void 0==this.detail.name)return Object(i.Message)("请选择物料"),!1;if(""===this.detail.sid)if(this.details.length>0){var t=!1;this.details.forEach(function(a,i,n){a.materialId===e.detail.materialId&&a.mtype==e.types&&(t=!0,a.quantity=parseFloat(e.detail.quantity)+parseFloat(a.quantity))}),t||(this.maxSid+=1,this.detail.sid=this.maxSid,this.detail.type="new",this.detail.mtype=this.types,this.details.push(this.detail))}else this.detail.sid=1,this.detail.type="new",this.detail.mtype=this.types,this.maxSid+=1,this.details.push(this.detail);else if(this.details.length)for(var a=0,n=this.details.length;a<n;a++){var s=this.details[a];"odd"===s.type?(this.detail.type="update",s.sid==this.detail.sid&&(this.details.splice(a,1),this.details.push(this.detail))):s.sid==this.detail.sid&&(this.details.splice(a,1),this.details.push(this.detail))}this.emptyDetail()},editeDetail:function(e,t){this.detail=t},deleteDetail:function(e,t){console.log("delete");var a=this.details.splice(e,1);"odd"===a[0].type&&(a[0].type="delete",this.currentDeleteData.push(a[0])),this.maxSid-=1},emptyDetail:function(){this.detail={sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",specifications:"",type:""}},initData:function(){var e=this;e.loadData(),this.getRequest("/midBuyPlan/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients;var i=[];a.root.materials.forEach(function(e,t,a){var n=e[0],s=e[1],l=e[2];i.push({name:n,unitId:s,id:l,unitName:e[3],specs:e[4],mtype:1})}),e.materials=i,e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var n=[];a.root.products.forEach(function(e,t,a){n.push({name:e[0],unitId:e[1],id:e[2],unitName:e[3],specs:e[4],mtype:2})}),e.products=n}})},keywordsChange:function(e){""==e&&this.loadData()},keywordsMaterialChange:function(e){""==e&&this.loadMaterial()},handleNodeClick:function(e){this.plan.clientId=e.id,this.plan.clientName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.plan.clientId=0,this.plan.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(a,i){a.id==e&&(console.log(a.id),t.detail.unitName=a.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){this.dialogTitle="郑铁公司采购单";var e=this;this.getRequest("/midBuyPlan/getSerialNumber").then(function(t){if(e.tableLoading=!1,t&&200==t.status){var a=t.data;e.plan.serialNumber=a.root.serialNumber,e.dialogFormVisible=!0}})},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(e,t){console.log(t);this.dialogTitle="编辑信息",this.plan=t,this.plan.createDate=t.createDate;var a=_.cloneDeep(t);void 0!=a.detail&&(a.detail.forEach(function(e,t,a){e.type="odd",e.sid=t+1}),this.details=a.detail,this.maxSid=a.detail.length),this.dialogFormVisible=!0},add:function(e){var t=this,a=this,i=_.cloneDeep(this.plan);if(0==this.details.length)return this.$message({type:"info",message:"详情不能为空！"}),!1;var n=this.details.concat(this.currentDeleteData),s=this.jsonToString(n);i.detail=s,this.$refs[e].validate(function(e){if(!e)return!1;t.validateplanNo();t.plan.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/midBuyPlan/update",i).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail())})):(t.tableLoading=!0,0==t.plan.clientId||""==t.plan.clientId?(t.plan.clientId=0,i.materialType=1):i.materialType=2,console.log(i),t.postRequest("/midBuyPlan/addnew",i).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail()}}))})},validateplanNo:function(){return!0},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.serialNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midBuyPlan/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midBuyPlan/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.plans=i,t.totalCount=a.data.total,t.emptyData()}})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/middleProduct/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.materialList=i,t.totalMaterialCount=a.data.total,t.dialogMaterialVisible=!0}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.details=[],this.plan={materialType:"",notes:"",serialNumber:"",clientId:0,clientName:""}}},computed:{}}),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("\n        添加\n      ")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.plan,rules:e.rules,size:"small","label-width":"90px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编号:",prop:"serialNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"计划编号"},model:{value:e.plan.serialNumber,callback:function(t){e.$set(e.plan,"serialNumber",t)},expression:"plan.serialNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"供货商:",prop:"clientId"}},[a("el-popover",{attrs:{placement:"right",title:"供货商",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.clients,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"28px",display:"inline-flex","justify-content":"space-between","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[a("div",[e._v(e._s(e.plan.clientName))]),e._v(" "),a("div",{staticClass:"el-icon-circle-close",staticStyle:{color:"#606266"},on:{click:e.clearChoose}})])],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.plan.notes,callback:function(t){e.$set(e.plan,"notes",t)},expression:"plan.notes"}})],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"left",border:"1px solid #eeeeee"}},[e._v("\n          购买详情:\n        ")]),e._v(" "),a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"名称"},on:{focus:e.showMaterial},model:{value:e.detail.name,callback:function(t){e.$set(e.detail,"name",t)},expression:"detail.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"规格:",prop:"specifications"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",disabled:!0,size:"mini",placeholder:"规格。。"},model:{value:e.detail.specifications,callback:function(t){e.$set(e.detail,"specifications",t)},expression:"detail.specifications"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[a("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"append",disabled:!0,placeholder:"单位"},on:{change:e.selectChange},slot:"append",model:{value:e.detail.unitId,callback:function(t){e.$set(e.detail,"unitId",t)},expression:"detail.unitId"}},e._l(e.units,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.detail.notes,callback:function(t){e.$set(e.detail,"notes",t)},expression:"detail.notes"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addBox}},[e._v("添加")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.details,border:"",height:"200"}},[a("el-table-column",{attrs:{prop:"sid",align:"left",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+e._s(t.row.unitName))]}}],null,!1,3476428609)}),e._v(" "),a("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.editeDetail(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteDetail(t.$index,t.row)}}},[e._v("删除\n                ")])]}}],null,!1,987709478)})],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"standard",align:"left",fixed:"",label:"原料规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"单位",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.unit.name)+"\n          ")]}}],null,!1,2595393714)})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.plans,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.detail,function(t,i){return a("el-form",{key:t.id,staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",[a("span",[e._v(e._s(i+1))])]),e._v(" "),a("el-form-item",{attrs:{label:"名称:"}},[a("span",[e._v(e._s(t.name)+";")])]),e._v(" "),a("el-form-item",{attrs:{label:"规格:"}},[a("span",[e._v(e._s(t.specifications)+" ;")])]),e._v(" "),a("el-form-item",{attrs:{label:"数量:"}},[a("span",[e._v(e._s(t.quantity)+" "+e._s(t.units.name)+";")])]),e._v(" "),a("el-form-item",{attrs:{label:"状态:"}},[a("span",[e._v(e._s(1==t.confirmStatus?"未确认":"已收货"))])]),e._v(" "),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[e._v(e._s(t.notes))])])],1)})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serialNumber",align:"left",label:"编号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clientName",width:"120",align:"left",label:"公司名称"}}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"left",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"confirmStatus",width:"80",align:"left",formatter:e.formatStatus,label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(n,s,!1,function(e){a("SZkD")},null,null);t.default=l.exports},VdJP:function(e,t){},VeYG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),s={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{plateNumber:[{required:!0,message:"必填:车牌",trigger:"blur"}],buyedDate:[{required:!0,message:"必填:购车时间",trigger:"blur"}],manufacturer:[{required:!0,message:"必选:生产厂家",trigger:"blur"}],vehicleType:[{required:!0,message:"必填:车辆型号",trigger:"blur"}]},cars:[],dialogTitle:"",currentPage:1,totalCount:-1,car:{plateNumber:"",buyedDate:"",carryingNumber:"",manufacturer:"",maintenanceMile:"",vehicleType:"",carStatus:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{formatStatus:function(e,t){return"USED"==e.carStatus?"使用中":"REPAIR"==e.carStatus?"修理中":"FREE"==e.carStatus?"空闲":"报废"},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadEmps()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.car=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.car.buyedDate=this.formatDate(t.buyedDate),delete this.car.noteMaker,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.validateCarNo();t.car.id?(t.tableLoading=!0,console.log(t.car),t.postRequest("/vehicle/addupvf",t.car).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.car),t.postRequest("/vehicle/addupvf",t.car).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},validateCarNo:function(){return!0},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.plateNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehicle/deletvf?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehicle/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.cars=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.car={plateNumber:"",carStatus:"",buyedDate:"",manufacturer:"",maintenanceMile:"",carryingNumber:"",vehicleType:""}}},computed:{}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n    \n          ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.car,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"车牌:",prop:"plateNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入车牌号。。"},model:{value:e.car.plateNumber,callback:function(t){e.$set(e.car,"plateNumber",t)},expression:"car.plateNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生产厂家:",prop:"manufacturer"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"生产厂家"},model:{value:e.car.manufacturer,callback:function(t){e.$set(e.car,"manufacturer",t)},expression:"car.manufacturer"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车辆型号:",prop:"vehicleType"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"车辆型号"},model:{value:e.car.vehicleType,callback:function(t){e.$set(e.car,"vehicleType",t)},expression:"car.vehicleType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"购买日期:",prop:"buyedDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"购买日期"},model:{value:e.car.buyedDate,callback:function(t){e.$set(e.car,"buyedDate",t)},expression:"car.buyedDate"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cars,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plateNumber",align:"left",fixed:"",label:"车牌",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"carStatus",width:"120",align:"left",formatter:e.formatStatus,label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"left",label:"购车时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.buyedDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"manufacturer",width:"220",align:"left",label:"生产厂家"}}),e._v(" "),a("el-table-column",{attrs:{prop:"vehicleType",width:"160",align:"left",label:"车型号"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n          ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("LrNQ")},null,null);t.default=o.exports},VsUZ:function(e,t,a){"use strict";a.d(t,"e",function(){return d}),a.d(t,"h",function(){return u}),a.d(t,"f",function(){return p}),a.d(t,"a",function(){return h}),a.d(t,"c",function(){return f}),a.d(t,"d",function(){return m}),a.d(t,"g",function(){return g}),a.d(t,"b",function(){return v});var i=a("pFYg"),n=a.n(i),s=a("mvHQ"),l=a.n(s),o=a("mtWM"),r=a.n(o),c=a("zL8q");a.n(c);r.a.interceptors.request.use(function(e){return e},function(e){c.Message.error({message:"请求超时!"})}),r.a.interceptors.response.use(function(e){if(!e.status||200!==e.status||500!==e.data.status)return e.data.msg&&c.Message.success({message:e.data.msg}),e;c.Message.error({message:e.data.msg})},function(e){504===e.response.status||404===e.response.status?c.Message.error({message:"服务器未连接⊙﹏⊙∥"}):403===e.response.status?c.Message.error({message:"权限不足,请联系管理员!"}):401===e.response.status?c.Message.error({message:e.response.data.msg}):e.response.data.msg?c.Message.error({message:e.response.data.msg}):c.Message.error({message:"未知错误!"})});var d=function(e,t){return r()({method:"post",url:""+e,data:t,transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded;;charset=UTF-8"}})},u=function(e,t){return r()({method:"post",url:""+e,data:t,headers:{"Content-Type":"multipart/form-data"}})},p=function(e,t){return r()({method:"put",url:""+e,data:t,transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},h=function(e){return r()({method:"delete",url:""+e})},f=function(e){return r()({method:"get",url:""+e})},m=function(e){var t=[],a=l()(e,function(e,a){if("object"===(void 0===a?"undefined":n()(a))&&null!==a){if(-1!==t.indexOf(a))return;t.push(a)}return a});return t=null,a},g=function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.child});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.parentClientId];i&&"btn"!=e.component?(i.child||(i.child=[])).push(e):t.push(e)}),t},v=function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),s=t.getHours(),l=t.getMinutes();return i<10&&(i="0"+i),n<10&&(n="0"+n),a+"-"+i+"-"+n+" "+s+":"+l}},WR6u:function(e,t){},WaId:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{activeName:"plan",typeItems:[]}},methods:{detials:function(e){this.$router.replace({path:e.path})}},components:{},computed:{stepOpt:function(){var e={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(t){"/saleBase"===t.path&&(e=t)}),console.log(e.id);var t=[];return this.$store.state.routes.forEach(function(a){a.parentId===e.id&&t.push(a)}),console.log(t),t||[]}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{display:"flex","flex-direction":"column","font-size":"14px"}},[a("div",{staticStyle:{"margin-left":"20px","line-height":"30px",height:"30px","text-align":"start","padding-left":"20px","border-left":"4px solid red","font-weight":"700"}},[e._v("\n      销售管理\n    ")]),e._v(" "),a("el-main",{staticClass:"product-base"},e._l(e.stepOpt,function(t){return a("div",{key:t.id,staticClass:"product-item",on:{click:function(a){return e.detials(t)}}},[a("div",{staticClass:"item-left"},[a("div",{staticStyle:{margin:"60px 0","font-size":"16px"}},[a("span",{staticClass:"fa fa-product-hunt",staticStyle:{display:"block"}}),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v(e._s(t.name))])])]),e._v(" "),a("div",{staticClass:"item-right"})])}),0)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("HXmC")},null,null);t.default=s.exports},XXh3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("kBn+"),n=a("IeT4"),s={data:function(){return{dialogFormVisible:!1,activeName:"product",typelist:[],tap:1}},methods:{detials:function(e){this.$router.replace({path:e.path})},andCode:function(){this.dialogFormVisible=!0},getBaseData:function(){var e=this;e.getRequest("/client/baseData").then(function(t){if(t&&200===t.status&&t.data.success){(t.data.root.typelist||[]).forEach(function(e){dets.push({id:e[0],num:e[1],name:e[2]})}),e.typelist=[]}})}},mounted:function(){this.getBaseData()},components:{compny:i.default,type:n.default},computed:{stepOpt:function(){var e={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(t){"/companyBase"===t.path&&(e=t)}),console.log(e.id);var t=[];return this.$store.state.routes.forEach(function(a){a.parentId===e.id&&t.push(a)}),console.log(t),t||[]}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[2===e.tap?a("el-container",{staticStyle:{display:"flex","flex-direction":"column","font-size":"14px"}},[a("div",{staticStyle:{"margin-left":"20px","line-height":"30px",height:"30px","text-align":"start","padding-left":"20px","border-left":"4px solid red","font-weight":"700"}},[e._v("\n       客户管理  "),a("span",{staticStyle:{cursor:"pointer","font-weight":"400",color:"blueviolet","margin-left":"20px"},on:{click:e.andCode}},[e._v("添加客户流派")])]),e._v(" "),a("el-main",{staticClass:"product-base"},e._l(e.stepOpt,function(t){return a("div",{key:t.id,staticClass:"product-item",on:{click:function(a){return e.detials(t)}}},[a("div",{staticClass:"item-left"},[a("div",{staticStyle:{margin:"60px 0","font-size":"16px"}},[a("span",{staticClass:"fa fa-product-hunt",staticStyle:{display:"block"}}),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v(e._s(t.name))])])]),e._v(" "),a("div",{staticClass:"item-right"})])}),0)],1):a("el-container",{staticClass:"product-model-base"},e._l(e.depItems,function(t){return a("div",{key:t.id,staticClass:"product-model-item",on:{click:function(a){return e.used(t)}}},[a("span",{staticClass:"fa fa-bomb"}),e._v(" "),a("span",[e._v(e._s(t.name))]),e._v(" "),a("span",[e._v("（"+e._s(t.num)+"）")])])}),0)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("Qzxs")},null,null);t.default=o.exports},XoE2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:中文名",trigger:"blur"}]},units:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,unit:{name:"",code:""},deps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""===e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},searchEmp:function(){this.loadDatas()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),this.unit=t,this.dialogFormVisible=!0},addAndFlush:function(e){var t=this;if(console.log(this.unit.name),""===this.unit.name)return!1;this.unit.id?(this.tableLoading=!0,console.log(this.unit),this.postRequest("/productuse/add",this.unit).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&(t.loadDatas(),t.emptyData())})):(this.tableLoading=!0,console.log(t.unit),this.postRequest("/productuse/add",this.unit).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&(t.dialogFormVisible=!1,t.loadDatas(),t.emptyData())}))},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productuse/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200===e.status){e.data;t.loadDatas()}})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productuse/findAll").then(function(a){e.tableLoading=!1,a&&200===a.status&&(t.units=a.data.data,t.totalCount=a.data.total,t.emptyData())})},emptyData:function(){console.log("+++++_+++++_"),this.unit={name:"",code:""}}},computed:{stepOpt:function(){var e={add:!1,update:!1,del:!1},t={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(e){"/productuse"===e.path&&(t=e)}),console.log(t.id);var a=[];return this.$store.state.routes.forEach(function(e){e.parentId===t.id&&a.push(e)}),console.log(a),a&&a.forEach(function(t,a,i){switch(t.path){case"update":e.update=!0;break;case"del":e.del=!0;break;case"add":e.add=!0}}),e}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticClass:"product-use-header"},[a("div",{staticClass:"product-header-right"},[a("span",{staticStyle:{"margin-left":"5px"}},[e._v("产品用途")])]),e._v(" "),a("div",{staticClass:"product-header-left"})]),e._v(" "),a("el-main",{staticStyle:{padding:"0 20px"}},[e.stepOpt.add?a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"flex-start","text-align":"left"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入用途...",size:"mini"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:e.addAndFlush}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1):e._e(),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.units,fit:"",border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"用途"}}),e._v(" "),e.stepOpt.opt?a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.stepOpt.update?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n              ")]):e._e(),e._v(" "),e.stepOpt.del?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n              ")]):e._e()]}}],null,!1,3197737763)}):e._e()],1)],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addForm",attrs:{model:e.unit,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"用途:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"用途"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addForm")}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("quiV")},null,null);t.default=s.exports},YCX3:function(e,t){},ZEO7:function(e,t){},ZphK:function(e,t){},agNU:function(e,t){},axNP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{tempPlan:[],depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midRecords:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){this.initData(),console.log("fiand")},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.middleProduct.utilname=a.name)})},selectType:function(e){this.middleProduct.selectType=e},initData:function(){console.log("pop"),this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/materialOutReceiveRecord/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,console.log("find"),this.getRequest("/materialOutReceiveRecord/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.midRecords=i,t.totalCount=a.data.total}})}},computed:{routes:function(){}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midRecords,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"出库时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDate")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.materail.materialName)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"规格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.materail.specs)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"left",label:"原料数量",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.operator.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelRecordData(t.row)}}},[e._v("撤销 \n          ")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("e4Wq")},null,null);t.default=s.exports},b79p:function(e,t){},cSB1:function(e,t){},d0NV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{}},methods:{seedetials:function(e){this.$router.replace({path:e.path})}},components:{},computed:{stepOpt:function(){var e={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(t){"/productmidBase"===t.path&&(e=t)}),console.log(e.id);var t=[];return this.$store.state.routes.forEach(function(a){a.parentId===e.id&&t.push(a)}),console.log(t),t||[]}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{display:"flex","flex-direction":"column","font-size":"14px"}},[a("div",{staticStyle:{"margin-left":"20px","line-height":"30px",height:"30px","text-align":"start","padding-left":"20px","border-left":"4px solid red","font-weight":"700"}},[e._v("\n        仓库管理\n      ")]),e._v(" "),a("el-main",{staticClass:"product-base"},e._l(e.stepOpt,function(t){return a("div",{key:t.id,staticClass:"product-item",on:{click:function(a){return e.seedetials(t)}}},[a("div",{staticClass:"item-left"},[a("div",{staticStyle:{margin:"60px 0","font-size":"16px"}},[a("span",{staticClass:"fa fa-product-hunt",staticStyle:{display:"block"}}),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v(e._s(t.name))])])]),e._v(" "),a("div",{staticClass:"item-right"})])}),0)],1)],1)},staticRenderFns:[]},s=a("VU/8")(i,n,!1,null,null,null);t.default=s.exports},dnay:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:中文名",trigger:"blur"}]},units:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,unit:{name:"",code:""},deps:[],dialogTableVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""===e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},searchEmp:function(){this.loadDatas()},showEditDataView:function(e,t){this.unit=t},addAndFlushEmp:function(e){var t=this;""!==this.unit.name.trim()&&(this.unit.id?(this.tableLoading=!0,console.log(this.unit),this.postRequest("/specification/create",this.unit).then(function(e){t.tableLoading=!1,e&&200===e.status&&(t.loadDatas(),t.emptyData())})):(this.tableLoading=!0,console.log(t.unit),this.postRequest("/specification/create",this.unit).then(function(e){t.tableLoading=!1,e&&200===e.status&&(t.loadDatas(),t.emptyData())})))},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/specification/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadDatas()}})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/specification/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.units=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.unit={name:"",code:""}}},computed:{specOpt:function(){var e={add:!1,update:!1,del:!1,opt:!1};return this.$store.state.routes.forEach(function(t){switch(t.path){case"addstep":e.add=!0;break;case"updatestep":e.update=!0;break;case"deletestep":e.del=!0}}),Number(e.update)+Number(e.del)>=1&&(e.opt=!0),e}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索 ")])],1),e._v(" "),a("el-main",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("div",{staticStyle:{"text-align":"left"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入规格...",size:"mini"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.units,fit:"",border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n            ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n            ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("wjDs")},null,null);t.default=s.exports},e0XP:function(e,t){},e4Wq:function(e,t){},ePtJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),n=a.n(i),s=(a("zL8q"),{data:function(){var e;return e={outRecive:{quantity:"",note:"",materialId:""},dialogInTitle:"采购数量",dialogFormInVisible:!1,activeName:"material",confirmDialogTitle:"采购确认单",tempPlan:[],materialsReceives:[],confirms:[],nowMaterial:{quantity:"",notes:"",complete:""},newMaterial:{name:"",specifications:"",quantity:"",unitName:"",notes:""},tableLoading:!1,confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",RecordKeywords:"",confirmKewords:""},n()(e,"tableLoading",!1),n()(e,"advanceSearchViewVisible",!1),n()(e,"rules",{materialName:[{required:!0,message:"必填:原料名称",trigger:"blur"}],quantity:[{required:!0,message:"必填:数量",trigger:"blur"},{validator:function(e,t,a){/^\d+$/.test(t)?a():a("数字格式错误!")},message:"数字格式错误",trigger:"blur"}],clientId:[{required:!0,message:"必选:公司",trigger:"change"}],unitId:[{required:!0,message:"必选:单位",trigger:"change"}]}),n()(e,"materials",[]),n()(e,"defaultProps",{label:"name",isLeaf:"leaf",children:"child"}),n()(e,"dialogTitle",""),n()(e,"currentPage",1),n()(e,"confirmCurrentPage",1),n()(e,"formLabelWidth","120px"),n()(e,"totalCount",-1),n()(e,"receiveTotalCount",-1),n()(e,"confirmTotalCount",-1),n()(e,"material",{materialName:"",unitId:"",specs:""}),n()(e,"clients",[]),n()(e,"units",[]),n()(e,"dialogTableVisible",!1),n()(e,"dialogFormVisible",!1),n()(e,"currentIndex",""),n()(e,"matriallist",[]),e},mounted:function(){this.initData()},methods:{formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},searchConfirmData:function(){this.loadConfirmData()},doDelete:function(e){var t=this;this.getRequest("/rowPruchaseVerify/withdraw?id="+e.id).then(function(e){if(e&&200==e.status){e.data;t.loadConfirmData()}})},handleNodeClick:function(e){this.material.supplier=e.name,this.material.clientId=e.id,this.pName=e.name,this.pId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.material.supplier="",this.material.clientId=""},cancelChoos:function(){console.log(this.pName),this.material.supplier=this.pName,this.material.clientId=this.pId},initData:function(){this.loadConfirmData()},confirmKeywordsChange:function(e){""==e&&this.searchConfirmData()},currentConfirmChange:function(e){this.confirmCurrentPage=e,console.log(this.confirmCurrentPage),this.loadConfirmData()},cancelOptIn:function(){this.dialogFormInVisible=!1,this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},cancelConfirm:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e)}).catch(function(){})},loadConfirmData:function(){var e=this;this.tableLoading=!0,this.getRequest("/rowPruchaseVerify/findbypage?page="+this.confirmCurrentPage+"&size=10&queryName="+this.confirmKewords).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var a=t.data.data;e.confirms=a,e.confirmTotalCount=t.data.total}})},emptyData:function(){console.log("+++++_+++++_"),this.material={materialName:"",standard:"",specs:"",materialNo:"",unitId:"",specifiCations:"",notes:"",quantity:""}}},computed:{routes:function(){}}}),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"min-width":"600px"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.confirmKeywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchConfirmData(t)}},model:{value:e.confirmKewords,callback:function(t){e.confirmKewords=t},expression:"confirmKewords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchConfirmData}},[e._v("搜索\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.confirms,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serialNumber",align:"left",fixed:"",label:"采购单编号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"下发时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("formatDateTime")(t.row.planDate))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"确认时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"left",label:"原料数量",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"practicalQuantity",align:"left",label:"确认数量",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelConfirm(t.row)}}},[e._v("撤销\n                ")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.confirmCurrentPage,layout:"prev, pager, next",total:e.confirmTotalCount},on:{"current-change":e.currentConfirmChange}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("ECOc")},null,null);t.default=o.exports},eTb0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),s={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:名称",trigger:"blur"}]},positions:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,position:{name:"",specification:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加职位",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.position=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,delete this.position.deNumber,this.dialogFormVisible=!0},addData:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.position.id?(t.tableLoading=!0,console.log(t.position),t.postRequest("/position/posAdd",t.position).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.position),t.postRequest("/position/posAdd",t.position).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/position/deletPro?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/position/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.positions=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){this.position={name:"",describes:""}}},computed:{}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过职位名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加职位")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addForm",attrs:{model:e.position,rules:e.rules,size:"sam","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入职位名称"},model:{value:e.position.name,callback:function(t){e.$set(e.position,"name",t)},expression:"position.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述:",prop:"specification"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"职位描述..."},model:{value:e.position.specification,callback:function(t){e.$set(e.position,"specification",t)},expression:"position.specification"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.positions}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"specification",align:"left",fixed:"",label:"描述",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("GqWn")},null,null);t.default=o.exports},ev2I:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{tempPlan:[],confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midRecords:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){this.initData()},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(a,i){console.log(a.id),a.id==e&&(t.middleProduct.utilname=a.name)})},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var a="",i=e.plant;return this.positions.forEach(function(e,t,n){i.forEach(function(t,i,n){e.id==t&&(a+=e.name+" , ")})}),a},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){var e=this;e.loadData(),this.getRequest("/middleProduct/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.units=a.root.units,e.clients=a.root.clients,e.products=a.root.products}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midProductOutRecieving/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midProductOutRecieving/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){e.tableLoading=!1,a&&200==a.status&&(t.midRecords=a.data.data||[],t.totalCount=a.data.total)})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midRecords,fit:"",border:""}},[a("el-table-column",{attrs:{align:"left",fixed:"",label:"下发时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.midproduct.standard)+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"quantity",align:"left",label:"原料数量"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.operator.name)+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.cancelRecordData(t.row)}}},[e._v("撤销\n              ")]):e._e()],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("qwhi")},null,null);t.default=s.exports},ev96:function(e,t){},fER9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),s={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:名称",trigger:"blur"}]},departs:[{name:"",describes:""}],dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,depart:{name:"",phone:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlush:function(){this.dialogTitle="添加部门",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadData()},showEditView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.depart=t,this.depart.name=t.name,this.depart.describes=t.describes,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,delete this.depart.deNumber,this.dialogFormVisible=!0},addData:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.depart.id?(t.tableLoading=!0,console.log(t.depart),t.postRequest("/depart/depAdd",t.depart).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.depart),t.postRequest("/depart/depAdd",t.depart).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},deleteEmp:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/depart/deletDep?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/depart/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.departs=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){this.depart={name:"",describes:""}}},computed:{}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过部门名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n  \n      ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlush}},[e._v("添加部门")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addForm",attrs:{model:e.depart,rules:e.rules,size:"sam","label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入部门名称"},model:{value:e.depart.name,callback:function(t){e.$set(e.depart,"name",t)},expression:"depart.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述:",prop:"describes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"部门描述..."},model:{value:e.depart.describes,callback:function(t){e.$set(e.depart,"describes",t)},expression:"depart.describes"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.departs}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditView(t.$index,t.row)}}},[e._v("编辑\n      ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteEmp(t.row)}}},[e._v("删除\n      ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("HGcV")},null,null);t.default=o.exports},giJI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("pFYg"),n=a.n(i),s=a("mvHQ"),l=a.n(s),o=a("bOdI"),r=a.n(o),c=a("zL8q"),d={data:function(){var e,t;return t={stateList:[{label:"运输中",value:1},{label:"已到达",value:2},{label:"已签收",value:3}],dialogVisitTitle:"回访记录",dialogVisitVisible:!1,currentVePage:1,totalVeCount:-1,plansRecord:[],sendView:!1,rulesSend:{clientId:[{required:!0,message:"必须选:物流公司",trigger:"blur"}],planNumber:[{required:!0,message:"必填：数量",trigger:"blur"}]},serviceCodes:[{value:"送货回单",label:"送货回单"},{value:"自提",label:"自提"}],dialogSendTitle:"发货",dialogSendVisible:!1,confirmData:{id:0,shippingRequestDetailsId:0,clientId:[],dispatchBillNo:"",boxs:"",consignee:"",consigneePhone:"",address:"",consigner:"",consignerPhone:"",remarks:"",cargoName:"",freights:"",shortHaulMoney:"",freightDetails:"",collFreight:"",collFreightBig:"",serviceCode:"自提",receipt:"",totalMoney:"",stype:"现金",planNumber:""},payCode:[{value:"微信",label:"微信"},{value:"支付宝",label:"支付宝"},{value:"银行卡",label:"银行卡"},{value:"现金",label:"现金"},{value:"其他（备注）",label:"其他（备注）"}],tap:1,typeItems:[{value:0,name:"新订单"},{value:1,name:"新建"},{value:2,name:"生产中"},{value:3,name:"生产完成"},{value:4,name:"撤销"},{value:5,name:"汇总"}],activePanel:"0",onhover:!0,mainProduct:!1,detailProduct:!1,showheader:!1,materialPlanList:[],isEdited:!0,positions:[{id:"注塑車間",name:"注塑車間"},{id:"激光車間",name:"激光車間"},{id:"裝配車間",name:"裝配車間"},{id:"加工車間",name:"加工車間"}],activeNames:"1",planProgress:[],lastPlanproductionPlanDetails:[{startNo:"J00000001",endNo:"J00000100"},{startNo:"K00000001",endNo:"K00000100"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",visit:{id:0,note:"",billId:"",billstatus:""},tableLoading:!1,advanceSearchViewVisible:!1,types:2,midProduct:[],plans:[],clients:[],units:[],selectPlans:{mark:"",actualQuantity:"",note:"",serialNumbers:[],salesPlan:(e={color:{name:""},abbr:"",specification:{name:""},quantity:"",productName:"",client:{name:"",parentName:""}},r()(e,"color",{name:""}),r()(e,"product",{preprosess:[]}),e)},dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{id:0,note:"",planDetailsId:"",progressId:""},detail:{id:0,actualQuantity:"",salesPlanId:"",notes:"",salesPlan:{},serialNumbers:[],type:"new",status:3,productNo:"",specifications:"",productionPlanId:0},serialNumbers:[],serialNumber:{sid:1,id:0,startNo:"",endNo:"",note:"",clientId:0,productId:0,type:"new"},productionPlanDetails:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,clientProps:{value:"id",label:"name",children:"child",checkStrictly:!0},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择生产计划",selectSalePlan:{},selectedM:{},filterText:"",crrentSelectShop:{},isCurrentShop:!0,isprarent:!1,sugestParentstartNo:"",sugestParentEndNo:"",sugestSelfEndNumbers:"",sugestSelfNumbers:"",currentParentShop:{},currentShop:{},lastPlanDetail:{startNo:"",endNo:""},serialNuberDeleted:[],serialNuberUpdate:[],serialNuberList:[],planDetails:[],dialogPlanVisible:!1,dialogPlanTitle:"生产进度",currntPlanRow:{},codeLen:1,dialogProgressVisible:!1,dialogProgressTitle:"",selectedStep:{},selectSteps:[],stepRecords:[],progresses:[],stepLength:0,stepIndex:0,stepRecord:{plant:"",qualifiedNo:0,junkedNo:0,unitsId:"",notes:""},stepRecordEdited:{plant:"",qualifiedNo:0,junkedNo:0,unitsId:"",notes:""},stepShow:!1,currentManatger:{},maxQuantity:0,dialogRecordEditeVisible:!1,dialogRecordEditesTitle:"编辑详情",manageStatus:1,detailsList:[]},r()(t,"advanceSearchViewVisible",!1),r()(t,"faangledoubleup","fa-angle-double-up"),r()(t,"faangledoubledown","fa-angle-double-down"),r()(t,"keyproductName",""),r()(t,"keyClientName",""),r()(t,"keyempName",""),r()(t,"startDate",""),r()(t,"endDate",""),t},mounted:function(){this.initData()},methods:{editRowEvent:function(e,t){console.log("index"+e),console.log("row"+t),0!=t.id&&(this.visit.id=t.id,this.visit.billstatus=t.billstatus,this.visit.note=t.note,this.visit.billId=t.billId,this.visit.createDate=t.createDate),t.show=!0},currentVeChange:function(e){this.currentVePage=e,console.log(this.currentVePage),this.loadData()},visitChange:function(e,t){console.log(t),this.confirmData.clientId=t.clientId,this.confirmData.cargoName=t.cargoName,this.confirmData.planNumber=t.planNumber,this.confirmData.address=t.address,this.confirmData.consignee=t.consignee,this.confirmData.consigneePhone=t.consigneePhone,this.confirmData.stype=t.stype,this.confirmData.serviceCode=t.serviceCode,this.confirmData.receipt=t.receipt,this.confirmData.shortHaulMoney=t.shortHaulMoney,this.confirmData.freightDetails=t.freightDetails,this.confirmData.consigner=t.consigner,this.confirmData.consignerPhone=t.consignerPhone,this.confirmData.collFreight=t.collFreight,this.confirmData.collFreightBig=t.collFreightBig,this.confirmData.dispatchBillNo=t.dispatchBillNo,this.confirmData.freights=t.freights,this.confirmData.boxs=t.boxs,this.confirmData.remarks=t.remarks,this.confirmData.id=t.id,this.dialogSendVisible=!0},saveRowEvent:function(e){var t=this;if(e.show){if(null===e.billstatus||""===e.billstatus)return Object(c.Message)("请选择状态！"),!1;this.visit.billstatus=e.billstatus,this.visit.note=e.note,e.id?(this.createDate=e.createDate,this.visit.id=e.id,this.tableLoading=!0,this.postRequest("/returnvisit/add",this.visit).then(function(a){t.tableLoading=!1,a&&200===a.status&&a.data.success&&(e.show=!1,t.loadRecord())})):(this.tableLoading=!0,this.postRequest("/returnvisit/add",this.visit).then(function(a){t.tableLoading=!1,a&&200===a.status&&a.data.success?(e.show=!1,t.loadRecord()):Object(c.Message)("添加失败")}))}},handleEdit:function(e,t){},loadRecord:function(){var e=this;console.log("sendnadsfnalsdfasdlmnflkasdmfa;l++++99999");var t=this;this.getUrl="/returnvisit/findByBillId/"+this.currentPhoneRecord.id,this.getRequest(this.getUrl).then(function(a){e.tableLoading=!1,a&&200===a.status&&a.data.success&&(console.log(t.detailsList),t.detailsList=a.data.data||[],t.detailsList.push({billstatus:1,note:"",createDate:new Date,show:!0,billId:0,id:0}),t.detailsList.map(function(e){e.show=!1}),t.dialogVisitVisible=!0)})},returnVisit:function(e){this.visit.billId=e.id,this.visit.billstatus=e.shipingStatus;e.id;this.currentPhoneRecord=e,this.tableLoading=!0;var t=this.formatDateTime(new Date);console.log(t),this.loadRecord()},backMange:function(){this.sendView=!1},showSendDetail:function(e){var t=this,a=this;this.getRequest("/shippingBill/findformanage?page="+this.currentVePage+"&size=10&productManageId="+e.id).then(function(e){e&&200===e.status&&e.data.success?a.plansRecord=e.data.data||[]:a.$message({message:"错误！",type:"errow"}),t.sendView=!0})},clearManageDates:function(){this.startDate="",this.endDate=""},used:function(e){this.handleClick("","",e.value+"")},showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyData(),this.loadData())},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyData(),this.loadData()},handleClick:function(e,t,a){var i=void 0;a&&""!==a?(i=a,this.activePanel=a,this.tap=2):i=this.activePanel;var n=!1;switch(i){case"0":n=!0;break;case"1":this.manageStatus=1;break;case"2":this.manageStatus=2;break;case"3":this.manageStatus=3;break;case"4":this.manageStatus=4;break;case"5":this.manageStatus=""}n?(this.mainProduct=!1,this.loadMaterial()):(this.mainProduct=!0,this.loadData())},back:function(){"0"===this.activePanel?(this.mainProduct=!1,this.detailProduct=!1):(this.mainProduct=!0,this.detailProduct=!1)},showSteps:function(e){this.planProgress=e.progress},canceldetails:function(){this.dialogRecordEditeVisible=!1,this.stepRecordEdited={plant:"",qualifiedNo:0,junkedNo:0,unitsId:"",notes:""}},recordDetailConfirm:function(e,t){var a=this,i=this,n=t.planDetails.salesPlan.client.name;this.$confirm("确认"+n+"的生产计划已完成?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("完成"),i.comfirmProgress(t)}).catch(function(){a.$message({type:"info",message:"已取消"})})},comfirmProgress:function(e){var t=this;t.getRequest("/productmanage/end?id="+e.id).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&(t.loadData(),t.emptyData())})},editDetails:function(e){console.log(e),this.stepRecordEdited=e,this.maxQuantity=this.currntPlanRow.planDetails.actualQuantity,this.dialogRecordEditeVisible=!0},editeConfirm:function(e){var t=this;console.log(e);var a={manageId:this.plan.id,manageDetailId:this.stepRecordEdited.id,quantity:this.stepRecordEdited.qualifiedNo,junkedNo:this.stepRecordEdited.junkedNo,plant:this.stepRecordEdited.plant,notes:this.stepRecordEdited.notes};t.postRequest("/pmDetails/update",a).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success&&(t.dialogRecordEditeVisible=!1,t.loadData(),t.emptyData())})},deleteDetails:function(){},addSteps:function(){var e=this;if(this.progresses){for(var t=_.cloneDeep(this.progresses),a=[],i=t.length-1;i>=0;i--){var n=t[i],s=void 0===n.inform.plant||void 0===n.inform.qualifiedNo||void 0===n.inform.junkedNo||0===n.inform.qualifiedNo;if(console.log("**___**"+s),s)!0,t.splice(i,1);else{var l={plant:n.inform.plant,qualifiedNo:n.inform.qualifiedNo,junkedNo:n.inform.junkedNo,notes:n.inform.notes,productProcessId:n.id,unitsId:e.currentManatger.planDetails.salesPlan.product.sysUnitId};a.push(l)}}a=this.jsonToString(a);var o={manageId:this.currentManagerId,manageDetails:a};e.postRequest("/pmDetails/add",o).then(function(t){e.tableLoading=!1,t&&200===t.status&&t.data.success&&(e.dialogProgressVisible=!1,e.loadData(),e.emptyData())})}},preStep:function(){0===this.stepIndex?this.stepIndex=this.stepLength-1:this.stepIndex--,(void 0!==this.progresses[this.stepIndex].inform.plant||void 0!==this.progresses[this.stepIndex].inform.qualifiedNo||void 0!==this.progresses[this.stepIndex].inform.junkedNo||void 0!==this.progresses[this.stepIndex].inform.notes)&&(this.stepRecord=this.progresses[this.stepIndex].inform)},nextStep:function(e){""!==this.progresses[this.stepIndex].inform.plant||""!==this.progresses[this.stepIndex].inform.qualifiedNo||""!==this.progresses[this.stepIndex].inform.junkedNo||this.progresses[this.stepIndex].inform.notes;this.progresses[this.stepIndex].inform=this.stepRecord,this.progresses[this.stepIndex].showData=!0,this.stepRecord={plant:"",qualifiedNo:0,junkedNo:0,unitsId:"",notes:""},this.stepIndex===this.stepLength-1?this.stepIndex=0:this.stepIndex++,(""!==this.progresses[this.stepIndex].inform.plant||""!==this.progresses[this.stepIndex].inform.qualifiedNo||0!==this.progresses[this.stepIndex].inform.junkedNo||""!==this.progresses[this.stepIndex].inform.notes)&&(this.stepRecord=this.progresses[this.stepIndex].inform)},setCurrent:function(){console.log("open"),void 0!==this.$refs.multipleTable&&this.$refs.multipleTable.setCurrentRow(this.selectedStep)},handleSelectionChange:function(e){this.selectedStep=e,this.plan.progressId=e.id,console.log("第2次")},clickRow:function(e,t){this.$refs.multipleTable.clearSelection(),this.$refs.multipleTable.toggleRowSelection(e),this.selectedStep=e,this.plan.progressId=e.id,console.log("第3次")},cancelsetpOpt:function(){this.progresses=[]},confirm:function(e,t){},addRecord:function(e,t){var a=this,i=this;null!==t.progressId?this.getRequest("/productpreprocess/findbyid?id="+t.progressId).then(function(e){if(a.tableLoading=!1,e&&200===e.status){console.log(e);var n=e.data.t;i.progresses=n.process,i.progresses.forEach(function(e){e.inform={plant:"",qualifiedNo:0,junkedNo:0,unitsId:"",notes:""}}),i.currentManagerId=t.id,i.currentManatger=t,i.maxQuantity=t.planDetails.actualQuantity,i.stepLength=i.progresses.length,a.dialogProgressTitle="添加生产记录",a.dialogProgressVisible=!0}}):this.$message({type:"info",message:"请为该计划选择工序！"})},codeLenSet:function(e){console.log(e),this.codeLen=e},cancelPlanOpt:function(){this.dialogFormVisible=!1,this.plan={id:0,note:"",planDetailsId:"",progressId:""}},addManager:function(){var e=this;return 0===this.plan.planDetailsId?(this.$message({type:"warning",message:"请选择生产计划!!"}),!1):""===this.plan.progressId?(this.$message({type:"warning",message:"请选择工序!!"}),!1):void(e.plan.id?(e.tableLoading=!0,console.log(e.plan),e.postRequest("/productmanage/update",e.plan).then(function(t){e.tableLoading=!1,t&&200===t.status&&(e.dialogFormVisible=!1,e.loadMaterial(),e.emptyData())})):(e.tableLoading=!0,console.log(e.plan),e.postRequest("/productmanage/add",e.plan).then(function(t){e.tableLoading=!1,t&&200===t.status&&(e.dialogFormVisible=!1,e.loadMaterial(),e.emptyData())})))},serialNumberAdd:function(){var e=0;if(this.serialNumbers.length){var t=0;this.serialNumbers.forEach(function(e,a,i){t=e.sid>t?e.sid:t}),e=t+1}else e=1;this.serialNumbers.push({sid:e,id:0,startNo:"",endNo:"",clientId:0,productId:0,type:"new"})},deletSerialNo:function(e){var t=this.serialNumbers.splice(e,1);""===t[0].endNo||""===t[0].startNo||"new"===t[0].type||(t[0].type="delete",this.serialNuberDeleted.push(t[0])),console.log(t)},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectSalePlan=e,console.log(this.selectSalePlan)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectSalePlan.id>0){var a=this.selectSalePlan.salesPlan.client.name+"，     产品："+this.selectSalePlan.salesPlan.product.producteName+";";this.$confirm("您当前选择 ：客户"+a+" 确认选择该销售计划吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},cancelchoose:function(){console.log("选择框关闭"),this.selectSalePlan={},this.selectedM={}},formatStatus:function(e,t){return 1===e.materialType?"已确认":"未确认"},selectType:function(e,t,a){console.log("changne"),this.types=e,2===e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(a,i,n){a.id===e&&(t.detail.unitId=a.unitId,t.detail.unitName=a.unitName,t.detail.name=a.name,t.detail.materialId=a.id,t.detail.specifications=a.specs)})},clearSerialNumbers:function(){this.serialNumbers=[],this.selectPlans={},this.serialNumbers.push({sid:1,id:0,startNo:"",endNo:"",type:"new",note:""})},deleteDetail:function(e,t){var a=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.detailDelete(t.id)}).catch(function(){})},detailDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productionplandetails/deletmark?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},initData:function(){var e=this;e.loadMaterial(),this.getRequest("/productionplan/basedata").then(function(t){if(t&&200==t.status){var a=t.data;e.clients=e.toTree(t.data.root.clients),e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var i=[];a.root.products.forEach(function(e,t,a){i.push({id:e[0],producteName:e[1],specification:e[2],proType:e[3],mark:e[4],color:e[5]})}),e.products=i}})},keywordsChange:function(e){""===e&&this.loadData()},keywordsMaterialChange:function(e){""===e&&this.loadMaterial()},handleNodeClick:function(e){this.tableLoading=!0,this.crrentSelectShop=e,this.detail.clientId=e.id,this.detail.clientName=e.name,this.detail.abbrName=e.abbreviation,this.showOrHidePop=!1,this.depTextColor="#606266",this.getCurrentPlans()},showCurrentNo:function(){this.isprarent?this.isprarent=!1:this.isprarent=!0},showDetails:function(e){if(this.currntPlanRow=e,this.planDetails=e.details||[],!this.planDetails.length)return this.$message({type:"info",message:"无生产记录！"}),!1;this.plan.id=e.id,this.mainProduct=!1,this.detailProduct=!0},changeNO:function(){this.isCurrentShop?(this.lastPlanDetail=this.currentShop,this.isCurrentShop=!1):(this.lastPlanDetail=this.currentParentShop,this.isCurrentShop=!0)},getCurrentPlans:function(){var e=this;this.getRequest("/productionplan/getPlanDetails?clientId="+e.selectSalePlan.client.id+"&productId="+e.selectSalePlan.product.id).then(function(t){if(e.tableLoading=!1,t&&200===t.status){var a=t.data;if(e.currentParentShop=a.root.parent||[],e.currentParentShop.length){var i=e.currentParentShop.length-1;e.currentParentShop=e.currentParentShop[i];var n=e.currentParentShop[i].endNo;e.sugestParentstartNo=e.sugestStartNo(n,1)}else e.sugestParentstartNo="00000001",e.currentParentShop={},e.setStartSerialNo(e.sugestParentstartNo,e.sugestParentEndNo.endNo,"parent");if(e.currentShop=a.root.self||[],e.currentShop.length){var s=e.currentShop.length-1;e.currentShop=e.currentShop[s];var l=e.currentShop[s].endNo;e.sugestSelfNumbers=e.sugestStartNo(l,1)}else e.sugestSelfNumbers="00000001",e.currentShop={}}})},setEndNumber:function(e){console.log(e);if(this.isCurrentShop)if(this.lastPlanDetail=this.currentShop,this.currentShop.length){var t=this.currentShop.length-1;this.sugestSelfEndNumbers=this.sugestStartNo(this.currentShop[t].endNo,parseInt(e)+1),this.sugestSelfEndNumbers&&(this.serialNumbers[0].startNo=this.sugestSelfNumbers,this.serialNumbers[0].endNo=this.sugestSelfEndNumbers,this.serialNumbers[0].note="",this.serialNumbers[0].clientId=this.crrentSelectShop.id,this.serialNumbers[0].productId=this.detail.proId)}else{var a=this.sugestSelfNumbers;this.setCurrentEndData(a,e)}else if(this.lastPlanDetail=this.currentParentShop,this.currentParentShop.length){var i=this.currentParentShop.length-1;this.sugestParentEndNo=this.sugestStartNo(this.currentParentShop[i].endNo,parseInt(e)+1),this.sugestParentEndNo&&(this.serialNumbers[0].startNo=this.sugestParentstartNo,this.serialNumbers[0].endNo=this.sugestParentEndNo,this.serialNumbers[0].note="",this.serialNumbers[0].clientId=this.crrentSelectShop.id,this.serialNumbers[0].productId=this.detail.proId)}else{var n=this.currentParentShop;this.setCurrentEndData(n,e)}},setbyStartNo:function(e){console.log(e),e.length>this.codeLen&&Object(c.Message)("编码错误!"),this.detail.actualQuantity&&this.setCurrentEndData(e,this.detail.actualQuantity)},setCurrentEndData:function(e,t){e.toString().length;var a=parseInt(e)+parseInt(t),i=a.toString().length,n=this.codeLen-i;if(n)for(var s=0;s<n;s++)a="0"+a;this.serialNumbers[0].endNo=a},sugestStartNo:function(e,t){var a=function(e,t){if(t=t||!1,"string"==typeof e){var a=e.match(t?/[0-9]\d{1,}/g:/\d{1,}/g);return console.log(a),a.map(function(e){return e})}return[]},i=e.indexOf(a(e)[0]),n=e.substr(0,i),s=e.substr(i+a(e)[0].length,e.length-1),l=parseInt(a(e)[0])+t,o=l-l.toString().length;if(o)for(var r=0;r<o;r++)l+="0";return n+l+s},setStartSerialNo:function(e,t,a){this.serialNumbers.length&&(this.serialNumbers[0].startNo=e,this.serialNumbers[0].endNo=t||"",this.serialNumbers[0].note="")},clearChoose:function(){this.detail.clientId=0,this.detail.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(a,i){a.id===e&&(console.log(a.id),t.detail.unitName=a.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(e,t){this.dialogTitle="郑铁公司生产计划单",this.plan.id=0,this.selectPlans=t,this.setDetailData(),this.dialogFormVisible=!0},setDetailData:function(){var e=this.selectPlans;console.log(e+"=*-*="),this.selectSteps=e.salesPlan.product.preprosess,this.plan.planDetailsId=this.selectPlans.id,this.getManage()},addNewDetail:function(e){this.dialogTitle="郑铁公司生产计划单";this.serialNumbers=[],this.detail.productionPlanId=e.id,this.plan.id=0,this.serialNumbers.push(this.serialNumber),this.dialogFormVisible=!0},searchData:function(){this.value5&&this.value5.length&&(this.startDate=this.formatDateTime(this.value5[0]),this.endDate=this.formatDateTime(this.value5[1]),console.log(this.startDate)),this.loadData()},searchMaterialData:function(){this.loadMaterial()},add:function(e){var t=this,a=this;if(console.log("addbox！！！！"),""===this.detail.actualQuantity||void 0===this.detail.actualQuantity)return Object(c.Message)("请输入数量！"),!1;if(""===this.detail.salesPlanId)return Object(c.Message)("请选择销售计划"),!1;this.detail.serialNumbers=this.serialNumbers,this.productionPlanDetails.push(this.detail);var i=_.cloneDeep(this.plan),s=[],o=_.cloneDeep(this.productionPlanDetails);o.forEach(function(e){delete e.salesPlan});var r=l()(o,function(e,t){if("object"===(void 0===t?"undefined":n()(t))&&null!==t){if(-1!==s.indexOf(t))return;s.push(t)}return t});s=null,i.productionPlanDetails=r,this.$refs[e].validate(function(e){if(!e)return!1;t.plan.id?(t.tableLoading=!0,t.postRequest("/productionplan/update",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail())})):(t.tableLoading=!0,console.log(i),t.postRequest("/productionplan/add",i).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData(),a.emptyDetail(),a.clearSerialNumbers(),a.showDetails(a.currntPlanRow))}))})},cancelOpt:function(){var e;this.dialogFormVisible=!1,this.selectPlans={mark:"",actualQuantity:"",note:"",serialNumbers:[],salesPlan:(e={color:{name:""},abbr:"",specification:{name:""},quantity:"",productName:"",client:{name:"",parentName:""}},r()(e,"color",{name:""}),r()(e,"product",{preprosess:[]}),e)},console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productionplan/deletmark?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&t.loadData()})},loadData:function(){var e=this,t=this;console.log(this.startDate),this.tableLoading=!0,this.getRequest("/productmanage/findbypage?page="+this.currentPage+"&size=10&status="+this.manageStatus+"&productName="+this.keyproductName+"&empName="+this.keyempName+"&clientName="+this.keyClientName+"&start="+this.startDate+"&endDate="+this.endDate).then(function(a){if(e.tableLoading=!1,a&&200===a.status&&a.data.success){var i=a.data.data;t.plans=t.preData(i)||[],t.totalCount=a.data.total,t.emptyData()}})},cancelvisit:function(){this.visit={note:"",id:0,billId:"",billstatus:""}},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productionplan/findByPlan?page="+this.currentMaterialPage+"&size=10&productName="+this.keyproductName+"&empName="+this.keyempName+"&clientName="+this.keyClientName+"&start="+this.startDate+"&endDate="+this.endDate).then(function(a){e.tableLoading=!1,a&&200===a.status&&(t.materialPlanList=a.data.data,console.log(t.materialList),t.totalMaterialCount=a.data.total)})},mangeStatus:function(e){var t="";switch(e.mangeStatus){case 1:t="未生产";break;case 2:t="生产中";break;case 3:t="生产完成";break;case 4:t="撤销生产"}return t},emptyData:function(){this.plan={id:0,notes:"",planDetailsId:"",progressId:""}},preData:function(e){return e.forEach(function(e){var t=e.planDetails.actualQuantity,a=e.planDetails.accomplishNO/t;a=Math.round(1e4*a)/100,console.log(a),e.gres=a,a>80&&a<100?e.color="gold":a>=100&&(e.mangeStatus=3,e.gres=100);var i=e.mangeStatus;if(null!==i)switch(i){case 1:e.bgcolor="bisque";break;case 2:e.bgcolor="lightyellow";break;case 3:e.bgcolor="palegoldenrod";break;case 4:e.status="exception",e.bgcolor="#eeeeee"}e.onhover=!1}),e},deletSendRecord:function(e){var t=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDeletSendRecord(e.id)}).catch(function(){})},doDeletSendRecord:function(e){var t=this;this.getRequest("/returnvisit/delete?id="+e).then(function(e){t.tableLoading=!1,e&&200===e.status&&e.data.success?t.loadRecord():t.$message({type:"info",message:"删除失败！"})})},getManage:function(){var e=this;this.$nextTick(function(){console.log(e.selectSteps),0!==e.selectSteps.length&&(setTimeout(function(){e.$refs.multipleTable.toggleRowSelection(e.selectSteps[0],!0),e.plan.progressId=e.selectSteps[0].id},0),console.log("第一次"))})},delivery:function(e){console.log(e),this.dialogSendTitle="发货确认",this.confirmData.cargoName=e.planDetails.salesPlan.productName,this.confirmData.shippingRequestDetailsId=e.id,this.dialogSendVisible=!0},confirmAdd:function(e){var t=this,a=this,i=_.cloneDeep(this.confirmData);i.clientId=i.clientId.pop(),this.$refs[e].validate(function(e){if(!e)return!1;i.id?(t.tableLoading=!0,console.log(a.plan),t.postRequest("/shippingBill/add",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&(a.dialogSendVisible=!1,a.loadData(),a.cancelSend())})):(t.tableLoading=!0,t.postRequest("/shippingBill/add",i).then(function(e){a.tableLoading=!1,e&&200===e.status&&e.data.success?(a.dialogSendVisible=!1,a.loadData(),a.cancelSend()):Object(c.Message)("添加失败")}))})},cancelSend:function(){this.confirmData={id:0,shippingRequestDetailsId:0,clientId:[],dispatchBillNo:"",boxs:"",consignee:"",consigneePhone:"",address:"",consigner:"",consignerPhone:"",remarks:"",cargoName:"",freights:"",shortHaulMoney:"",freightDetails:"",collFreight:"",collFreightBig:"",serviceCode:"",receipt:"",totalMoney:"",stype:"",startDate:"",endDate:""}},toTree:function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.child});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.parentClientId];i?(i.child||(i.child=[])).push(e):t.push(e)}),console.log(t),t}},computed:{routes:function(){return this.$store.state.routes}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"font-size":"12px"}},[a("el-container",{directives:[{name:"show",rawName:"v-show",value:!e.sendView,expression:"!sendView"}],staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start"}},[a("div",[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activePanel,callback:function(t){e.activePanel=t},expression:"activePanel"}},[a("el-tab-pane",{attrs:{label:"新任务",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"生产进度",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"汇总",name:"5"}})],1)],1),e._v(" "),a("el-container",{staticClass:"divce-mode"},[a("el-header",{staticClass:"send-head"},[a("div",{staticStyle:{padding:"0",display:"flex","justify-content":"space-between","align-items":"center"}},[a("el-button",{staticClass:"send-head-right-btn",attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:e.showAdvanceSearchView},slot:"reference"},[a("i",{staticClass:"fa fa-lg",class:[e.advanceSearchViewVisible?e.faangledoubleup:e.faangledoubledown],staticStyle:{"margin-right":"5px"}}),e._v("高级搜索\n            ")]),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-tooltip",{attrs:{effect:"dark",content:"返回主表",placement:"left-start"}},[e.detailProduct?a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-back"},on:{click:e.back}}):e._e()],1)],1)],1)]),e._v(" "),a("el-main",{staticClass:"send-main"},[a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticClass:"send-main-div"},[a("el-row",[a("el-col",{attrs:{span:8}},[e._v("\n                  产品:\n                  "),a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品名称。。。"},model:{value:e.keyproductName,callback:function(t){e.keyproductName=t},expression:"keyproductName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                  客户:\n                  "),a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"客户名。。。"},model:{value:e.keyClientName,callback:function(t){e.keyClientName=t},expression:"keyClientName"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                  操作人:\n                  "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"员工名。。。"},model:{value:e.keyempName,callback:function(t){e.keyempName=t},expression:"keyempName"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"flex-end"}},[a("el-col",{attrs:{span:5,offset:4}},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelSearch}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.searchData}},[e._v("搜索")])],1)],1),e._v(" "),a("div",{staticStyle:{display:"inline"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",clearable:""},on:{clear:e.clearManageDates},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n                ")])],1)],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailProduct,expression:"!detailProduct"}],staticClass:"main-product"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.mainProduct,expression:"!mainProduct"}],staticStyle:{width:"1200px","margin-top":"20px",display:"flex","flex-direction":"column","justify-content":"flex-start"}},[a("div",{staticClass:"flex-plan"},e._l(e.materialPlanList,function(t,i){return a("div",{key:t.id,staticClass:"item-sales",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"in-sales-show"},[a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"start",width:"100%"}},[a("div",{staticClass:"pro-plan-head"},[a("div",{staticClass:"compay-ifor "},[a("div",{staticClass:"text-alight"},[a("div",{staticStyle:{"text-align":"left"}},[e._v("\n                              "+e._s(t.planNo)+"\n                              ")]),e._v(" "),t&&t.salesPlan&&t.salesPlan.client?a("div",{staticClass:"plan-num-companyName"},[e._v("\n                              "+e._s(t.salesPlan.client.name)+"\n                            ")]):e._e(),e._v(" "),t.salesPlan&&t.salesPlan.client&&t.salesPlan.client.parentName?a("div",{staticStyle:{width:"140px",padding:"0 16px",color:"#2E2E2F","text-align":"right","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[e._v("\n                              ┈┈"+e._s(t.salesPlan.client.parentName)+"\n                            ")]):e._e()]),e._v(" "),t.salesPlan&&t.salesPlan.product&&t.salesPlan.product.producteName?a("div",{staticClass:"text-alight",staticStyle:{"text-align":"center","padding-top":"10px"}},[e._v("\n                            "+e._s(t.salesPlan.product.producteName)+"\n                          ")]):e._e(),e._v(" "),t.salesPlan.editer.name?a("div",{staticStyle:{"text-align":"right","padding-right":"10px"}},[e._v("\n                            "+e._s(t.salesPlan.serialNumber.substring(3))+" "+e._s(t.salesPlan.editer.name)+"\n                          ")]):e._e()]),e._v(" "),a("div",{staticClass:"plan-num"},[a("div",{staticClass:"plan-num-left"},[a("div",{staticClass:"plan-item-right"},[a("div",{staticStyle:{width:"140px"}},[a("div",{staticStyle:{padding:"30px 0 0 4px","font-size":"12px"}},[a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("已完成:")]),e._v(" "),a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.accomplishNO))])]),e._v(" "),a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("本次下发:")]),e._v(" "),a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticStyle:{display:"flex","flex-direction":"column",width:"auto"}},[a("div",[e._v("\n                                            下发时间： "+e._s(e._f("formatDateTime")(t.createDate))+"\n                                          ")])])]),e._v(" "),a("span",{staticClass:"detail-text send detail-right"},[e._v(e._s(t.actualQuantity))])])],1),e._v(" "),a("div",{staticClass:"plan-num-detail"},[a("span",{staticClass:"detail-text"},[e._v("需求总量:")]),e._v(" "),t.salesPlan&&t.salesPlan.quantity?a("span",{staticClass:"detail-text detail-right"},[e._v(e._s(t.salesPlan.quantity))]):e._e()])]),e._v(" "),t.recordStr?a("div",[e._v(e._s(t.recordStr))]):e._e()]),e._v(" "),a("div",{staticStyle:{width:"280px",padding:"30px 0px 0px 10px"}},[a("div",{staticClass:"plan-note-area"},[a("div",{attrs:{calss:"plan-note-area-head"}},[a("span",{staticStyle:{width:"60px",display:"block"}},[e._v("备注:")])]),e._v(" "),a("div",{staticClass:"plan-note"},[e._v("\n                                    "+e._s("null"===t.note?"暂无":null===t.note?"暂无":t.note)+"\n                                  ")])])])]),e._v(" "),a("div",{staticClass:"manager-tool"},[!t.expectLevel||3!==t.expectLevel&&2!==t.expectLevel?e._e():a("div",{staticClass:"trapezoid "},[a("div",{staticClass:"part1",style:{borderBottomColor:2===t.expectLevel?"green":"red"}}),e._v(" "),a("el-tooltip",[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                                    请求时间:"+e._s(e._f("simpleFormatTime")(t.sendDate))+"\n                                  ")]),e._v(" "),a("div",{staticClass:"part2",style:{backgroundColor:2===t.expectLevel?"green":"red"}},[e._v("\n                                    "+e._s(2===t.expectLevel?"急需":"加急")+"\n                                  ")])]),e._v(" "),a("div",{staticClass:"part3",style:{borderBottomColor:2===t.expectLevel?"green":"red"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[e._v("\n                                "+e._s(e._f("simpleFormatTime")(t.createDate))+"\n                              ")]),e._v(" "),a("div",{staticClass:"man-tool"},[a("div",{staticStyle:{"text-align":"right"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下发生产任务",placement:"top-start"}},[a("span",{staticClass:"fa fa-gavel",staticStyle:{cursor:"pointer",padding:"2px",margin:"4px",color:"#2fc5da"},on:{click:function(a){return e.addAndFlushData(i,t)}}})])],1)])])])])])])])])}),0),e._v(" "),a("div",{staticStyle:{width:"100%",height:"auto"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.mainProduct,expression:"mainProduct"}],staticClass:"main-product"},[a("div",{staticClass:"flex-plan"},[e.plans.length?a("div",{staticClass:"main-progress"},e._l(e.plans,function(t,i){return a("div",{key:t.id,staticClass:"item",on:{mouseover:function(e){t.onhover=!0},mouseout:function(e){t.onhover=!1}}},[a("div",{staticClass:"item-head"},[t.planDetails.salesPlan.serialNumber?a("div",{staticStyle:{"text-align":"left","padding-left":"5px"}},[e._v("\n                        "+e._s(t.planDetails.salesPlan.serialNumber.substring(3))+"\n                      ")]):e._e(),e._v(" "),t.planDetails&&t.planDetails.salesPlan&&t.planDetails.salesPlan.client?a("div",[e._v("\n                        "+e._s(t.planDetails.salesPlan.client.name)+"\n                      ")]):e._e(),e._v(" "),a("div",{staticStyle:{"padding-top":"12px"}},[e._v("\n                        产品:"+e._s(t.planDetails.salesPlan.product.producteName)+"\n                      ")]),e._v(" "),a("div",{staticStyle:{"padding-top":"8px"}},[a("el-tooltip",{attrs:{content:"下发生产员工"}},[a("span",[e._v(e._s(t.planDetails.salesPlan.serialNumber.substring(3))+"   "+e._s(t.planDetails.salesPlan.editer.name))])])],1)]),e._v(" "),a("div",{staticClass:"in-show"},[a("div",{staticStyle:{height:"100px",width:"100%"}},[a("div",[e._v("下发数:"+e._s(t.planDetails.actualQuantity)+"\n                          |已完成:"+e._s(t.planDetails.accomplishNO)+"\n                        ")]),e._v(" "),a("div",{staticClass:"item-manager-progress",style:{backgroundColor:t.bgcolor}},[a("el-progress",{staticStyle:{"align-items":"flex-start"},attrs:{percentage:t.gres,color:t.color,"text-inside":!1,"stroke-width":10,width:200,status:t.status}})],1)]),e._v(" "),a("div",{staticClass:"manager-tool"},[!t.planDetails.expectLevel||3!==t.planDetails.expectLevel&&2!==t.planDetails.expectLevel?e._e():a("div",{staticClass:"trapezoid manag-tip"},[a("div",{staticClass:"part1",style:{borderBottomColor:2===t.planDetails.expectLevel?"green":"red"}}),e._v(" "),a("el-tooltip",[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                              请求时间:"+e._s(e._f("simpleFormatTime")(t.planDetails.sendDate))+"\n                            ")]),e._v(" "),a("div",{staticClass:"part2",style:{backgroundColor:2===t.planDetails.expectLevel?"green":"red"},on:{click:function(a){return e.verifyData(t)}}},[e._v("\n                              "+e._s(2===t.planDetails.expectLevel?"急需":"加急")+"\n                            ")])]),e._v(" "),a("div",{staticClass:"part3",style:{borderBottomColor:2===t.planDetails.expectLevel?"green":"red"}})],1),e._v(" "),a("div",[e._v(" "+e._s(e._f("simpleFormatTime")(t.createDate)))]),e._v(" "),a("div",{staticClass:"man-tool"},[a("el-tooltip",{attrs:{effect:"light",content:"生产进度详情",placement:"right"}},[t.details.length?a("span",{staticClass:"fa fa-file-text-o ",on:{click:function(a){return a.preventDefault(),e.showDetails(t)}}}):e._e()]),e._v(" "),a("el-tooltip",{attrs:{effect:"light",content:"发货记录查看",placement:"right"}},[t.details.length?a("span",{staticClass:"fa fa-th-list ",staticStyle:{"margin-left":"10px"},on:{click:function(a){return a.preventDefault(),e.showSendDetail(t)}}}):e._e()]),e._v(" "),a("el-tooltip",{attrs:{effect:"light",content:"发货",placement:"right"}},[t.planDetails.accomplishNO?a("span",{staticClass:"fa fa-truck",staticStyle:{"margin-left":"10px"},on:{click:function(a){return a.preventDefault(),e.delivery(t)}}}):e._e()]),e._v(" "),a("el-tooltip",{attrs:{effect:"light",content:"添加记录",placement:"right"}},[a("span",{staticClass:"fa fa-plus",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return a.preventDefault(),e.addRecord(i,t)}}})]),e._v(" "),a("el-tooltip",{attrs:{effect:"light",content:"确认完成",placement:"right"}},[a("span",{staticClass:"fa fa-check-circle ",staticStyle:{"margin-left":"10px"},on:{click:function(a){return a.preventDefault(),e.recordDetailConfirm(i,t)}}})])],1)])])])}),0):a("div",{staticClass:"main-progress sendflex"},[a("div",{staticStyle:{"text-align":"center",width:"100%"}},[e._v("暂无数据")])])]),e._v(" "),a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.detailProduct,expression:"detailProduct"}],staticClass:"detail-product"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planDetails,fit:"",border:""}},[a("el-table-column",{attrs:{align:"left",fixed:"",sortable:"",label:"工序"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.productProcess.name)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"生产车间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.plant)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"合格数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.qualifiedNo)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"报废数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.junkedNo)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.notes)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return a.stopPropagation(),e.editDetails(t.row)}}},[e._v("修改\n                    ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return a.stopPropagation(),e.deleteDetails(t.row)}}},[e._v("撤销\n                    ")])],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}})],1)],1)],1)],1),e._v(" "),a("el-container",{directives:[{name:"show",rawName:"v-show",value:e.sendView,expression:"sendView"}],staticClass:"send-view"},[a("div",{staticStyle:{"text-align":"right",padding:"0 100px 10px 0",color:"#2fc5da",cursor:"pointer"}},[a("el-tooltip",{attrs:{content:"返回"}},[a("span",{staticClass:"fa fa-fast-backward",on:{click:e.backMange}},[e._v("返回")])])],1),e._v(" "),a("div",[a("el-table",{attrs:{data:e.plansRecord,fit:"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"客户"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.client.name)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.planNumber)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"发货时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"货运单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.dispatchBillNo)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.shipingStatus?"运输中":2===t.row.shipingStatus?"已到达":3===t.row.shipingStatus?"已签收":"未知")+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.notes)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-tooltip",{attrs:{content:"修改"}},[a("span",{staticClass:"fa fa-pencil",staticStyle:{padding:"3px 4px 3px 4px",color:"#2fc5da"},attrs:{size:"mini"},on:{click:function(a){return e.visitChange(t.$index,t.row)}}})]),e._v(" "),a("el-tooltip",{attrs:{content:"新回访"}},[a("span",{staticClass:"fa fa-phone",staticStyle:{padding:"4px","margin-left":"5px",color:"#2fc5da"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.returnVisit(t.row)}}})])],1)]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentVePage,layout:"prev, pager, next",total:e.totalVeCount},on:{"current-change":e.currentVeChange}})],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.dialogPlanTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelPlanOpt}},[a("div",{staticStyle:{height:"100%",width:"100%","font-size":"12px",display:"flex","flex-direction":"row","justify-content":"start"}},[a("div",{staticClass:"productio-detail"},[a("div",{staticClass:"detail-head"},[e._v("生产要求：")]),e._v(" "),a("div",{staticClass:"manager-item"},[a("div",{staticClass:"item-right"},[a("div",[e._v("\n                总公司:\n              ")]),e._v(" "),a("div",[e._v("\n                "+e._s(e.selectPlans.salesPlan.client.parentName)+"\n              ")])]),e._v(" "),a("div",{staticClass:"item-right"},[a("div",[e._v("\n                作业区:\n              ")]),e._v(" "),e.selectPlans.salesPlan.client&&e.selectPlans.salesPlan.client.name?a("div",[e._v("\n                "+e._s(e.selectPlans.salesPlan.client.name)+"\n              ")]):e._e()]),e._v(" "),a("div",{staticClass:"item-right"},[a("div",[e._v("\n                站名:\n              ")]),e._v(" "),e.selectPlans.salesPlan.abbr?a("div",[e._v("\n                "+e._s(e.selectPlans.salesPlan.abbr)+"\n              ")]):a("div",[e._v("无站名")])])]),e._v(" "),a("div",{staticClass:"manager-item"},[a("div",{staticClass:"item-right"},[a("div",[e._v("\n                产品:\n              ")]),e._v(" "),e.selectPlans.salesPlan.productName?a("div",[e._v("\n                "+e._s(e.selectPlans.salesPlan.productName)+"\n                "),e.selectPlans.salesPlan.color&&e.selectPlans.salesPlan.color.name?a("span",[e._v("\n                 -"+e._s(e.selectPlans.salesPlan.color.name)+"\n               ")]):e._e(),e._v(" "),e.selectPlans.salesPlan.specification&&e.selectPlans.salesPlan.specification.name?a("span",[e._v("\n                 -"+e._s(e.selectPlans.salesPlan.specification.name)+"\n               ")]):e._e()]):e._e()]),e._v(" "),a("div",{staticClass:"item-right"},[a("div",[e._v("\n                标记:\n              ")]),e._v(" "),e.selectPlans.mark?a("div",[e._v("\n                "+e._s(e.selectPlans.mark)+"\n              ")]):a("div",[e._v(" 无标记")])]),e._v(" "),a("div",{staticClass:"item-right"},[a("div",[e._v("\n                生产数量:\n              ")]),e._v(" "),a("div",[e._v("\n                "+e._s(e.selectPlans.actualQuantity)+"\n              ")])])]),e._v(" "),a("div",{staticClass:"item-right item-note"},[a("div",[a("span",{staticStyle:{display:"inline-block",width:"55px","text-align":"right"}},[e._v("备注:")]),e._v(e._s("null"===e.selectPlans.note?"暂无":null==e.selectPlans.note?"暂无":e.selectPlans.note)+"\n            ")])]),e._v(" "),a("div",{staticStyle:{width:"100%",padding:"10px 0 0 10px","text-align":"left"}},[e._v(" 编码详情：\n            "),e._l(e.selectPlans.serialNumbers,function(t,i){return a("span",{key:t.id,staticClass:"numbers-show"},[a("span",{staticClass:"text-overflow"},[e._v(e._s(t.startNo)+"-"+e._s(t.endNo)+";")])])})],2),e._v(" "),a("div",[a("div",{staticClass:"detail-head"},[e._v("请选择生产工序：")]),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.selectSteps,"show-header":!1,"highlight-current-row":!0,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange,"row-click":e.clickRow}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",width:"80px;",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.name)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"流程"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-steps",{attrs:{"align-center":""}},e._l(t.row.process,function(e,t){return a("el-step",{key:t,staticClass:"detail",attrs:{title:e.name}})}),1)]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{width:"100%",display:"flex","flex-direction":"row","justify-content":"flex-start","align-items":"flex-start"}},[a("div",{staticStyle:{width:"100px"}},[e._v("生产经理备注：")]),e._v(" "),a("div",{staticStyle:{width:"500px"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注信息。。。"},model:{value:e.plan.note,callback:function(t){e.$set(e.plan,"note",t)},expression:"plan.note"}})],1)])])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addManager}},[e._v("确认生产")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogProgressTitle,"close-on-click-modal":!1,visible:e.dialogProgressVisible,width:"750px"},on:{"update:visible":function(t){e.dialogProgressVisible=t},close:e.cancelsetpOpt}},[e.dialogProgressVisible?a("div",{staticStyle:{width:"100%"}},[e.dialogProgressVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-start"}},[a("el-steps",{staticClass:"step-detail-progress",attrs:{active:e.stepIndex,direction:"vertical",space:160,"align-center":""}},e._l(e.progresses,function(t){return a("el-step",{key:e.progresses.id,attrs:{title:t.name,size:"mini"}},[a("div",{staticStyle:{width:"100%"},attrs:{slot:"description"},slot:"description"},[t.showData?a("div",[a("div",[e._v("\n                      车间："+e._s(t.inform.plant)+";\n                    ")]),e._v(" "),a("div",[e._v("\n                      数量："+e._s(t.inform.qualifiedNo)+"\n                    ")]),e._v(" "),a("div",[e._v("\n                      报废数："+e._s(t.inform.junkedNo)+";\n                    ")]),e._v(" "),a("div",[e._v("\n                      备注："+e._s(t.inform.notes)+";\n                    ")])]):e._e()])])}),1),e._v(" "),a("el-form",{ref:"stepDetail",staticClass:"step-detail",model:{value:e.stepRecord,callback:function(t){e.stepRecord=t},expression:"stepRecord"}},[a("div",[a("el-form-item",{attrs:{label:"车间：",prop:"plant"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择车间"},model:{value:e.stepRecord.plant,callback:function(t){e.$set(e.stepRecord,"plant",t)},expression:"stepRecord.plant"}},e._l(e.positions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"confirm-text"},[e._v("生产计划目标数量"+e._s(e.maxQuantity))]),e._v(" "),a("div",{staticClass:"detail"},[a("el-form-item",{attrs:{label:"数量：",prop:"qualifiedNo"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"生产合格数量...",size:"mini",type:"number",min:"0",step:"1000"},model:{value:e.stepRecord.qualifiedNo,callback:function(t){e.$set(e.stepRecord,"qualifiedNo",e._n(t))},expression:"stepRecord.qualifiedNo"}},[e._v("\n                    clearable\n                  ")])],1)],1),e._v(" "),a("div",{staticClass:"detail"},[a("el-form-item",{attrs:{label:" 报废：",prop:"junkedNo"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"生产报废数量...",size:"mini",type:"number",min:"0",clearable:""},model:{value:e.stepRecord.junkedNo,callback:function(t){e.$set(e.stepRecord,"junkedNo",e._n(t))},expression:"stepRecord.junkedNo"}})],1)],1),e._v(" "),a("div",{staticClass:"detail"},[a("el-form-item",{attrs:{label:" 备注：",prop:"notes"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"备注...",size:"mini",type:"textarea",clearable:""},model:{value:e.stepRecord.notes,callback:function(t){e.$set(e.stepRecord,"notes",t)},expression:"stepRecord.notes"}})],1)],1)])],1),e._v(" "),a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",padding:"0",margin:"0"}},[0!=e.stepIndex?a("el-button",{attrs:{round:"",size:"mini"},on:{click:e.preStep}},[e._v("上一步")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return e.nextStep("stepDetail")}}},[e._v("下一步\n            ")])],1)]):e._e()]):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogProgressVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addSteps("addStep")}}},[e._v("完成")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogRecordEditesTitle,"close-on-click-modal":!1,visible:e.dialogRecordEditeVisible,width:"450px"},on:{"update:visible":function(t){e.dialogRecordEditeVisible=t},close:e.canceldetails}},[e.dialogRecordEditeVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"detail",staticStyle:{width:"inherit"},model:{value:e.stepRecordEdited,callback:function(t){e.stepRecordEdited=t},expression:"stepRecordEdited"}},[a("el-form-item",{attrs:{label:"车间:"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择车间"},model:{value:e.stepRecordEdited.plant,callback:function(t){e.$set(e.stepRecordEdited,"plant",t)},expression:"stepRecordEdited.plant"}},e._l(e.positions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v("\n          计划数量"+e._s(e.maxQuantity)+"\n          "),a("el-form-item",{attrs:{label:"数量:"}},[a("el-input",{directives:[{name:"enter-number2",rawName:"v-enter-number2"}],staticStyle:{width:"200px"},attrs:{placeholder:"生产合格数量...",size:"mini",type:"text"},model:{value:e.stepRecordEdited.qualifiedNo,callback:function(t){e.$set(e.stepRecordEdited,"qualifiedNo",t)},expression:"stepRecordEdited.qualifiedNo"}},[e._v("\n              clearable\n            ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"报废:"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"生产报废数量...",size:"mini",type:"number",min:"0",clearable:""},model:{value:e.stepRecordEdited.junkedNo,callback:function(t){e.$set(e.stepRecordEdited,"junkedNo",t)},expression:"stepRecordEdited.junkedNo"}})],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"备注...",size:"mini",type:"textarea",clearable:""},model:{value:e.stepRecordEdited.notes,callback:function(t){e.$set(e.stepRecordEdited,"notes",t)},expression:"stepRecordEdited.notes"}})],1)],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogRecordEditeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editeConfirm("detail")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogVisitTitle,"close-on-click-modal":!1,visible:e.dialogVisitVisible,width:"900"},on:{"update:visible":function(t){e.dialogVisitVisible=t},close:e.cancelvisit}},[e.dialogVisitVisible?a("div",{staticStyle:{width:"100%","font-size":"12px"}},[a("el-table",{ref:"xTable",attrs:{border:"",fit:"",width:"100%",size:"mini","tooltip-effect":"light",model:e.visit,"highlight-current-row":"",data:e.detailsList}},[a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{label:"货物状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],model:{value:t.row.billstatus,callback:function(a){e.$set(t.row,"billstatus",a)},expression:"scope.row.billstatus"}},e._l(e.stateList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}]},[e._v(e._s(1===t.row.billstatus?"运输中":2===t.row.billstatus?"到达":3==t.row.billstatus?"签收":"未知"))])]}}],null,!1,166106437)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.show,expression:"scope.row.show"}],attrs:{placeholder:"请输入备注"},on:{change:function(a){return e.handleEdit(t.$index,t.row)}},model:{value:t.row.note,callback:function(a){e.$set(t.row,"note",a)},expression:"scope.row.note"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.show,expression:"!scope.row.show"}]},[e._v(e._s(t.row.note))])]}}],null,!1,547291103)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"回访时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.createDate,expression:"scope.row.createDate"}]},[e._v(e._s(e._f("formatDateTime")(t.row.createDate)))])]}}],null,!1,3867666290)}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[[a("el-tooltip",{attrs:{content:"编辑"}},[a("span",{staticClass:"fa fa-pencil btn-left",on:{click:function(a){return e.editRowEvent(t.$index,t.row)}}})]),e._v(" "),a("el-tooltip",[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    "+e._s(t.row.show?"保存":"更新")+"\n                  ")]),e._v(" "),a("span",{staticClass:"fa fa-save btn-left",on:{click:function(a){return e.saveRowEvent(t.row)}}})]),e._v(" "),a("el-tooltip",{attrs:{content:"删除"}},[a("span",{staticClass:"fa fa-trash btn-left",staticStyle:{color:"red"},on:{click:function(a){return e.deletSendRecord(t.row)}}})])]]}}],null,!1,3213831415)})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisitVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addViist("addVisitForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"900px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?a("div",{staticStyle:{width:"100%"}},[a("div",{staticStyle:{padding:"0",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0",padding:"0"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n            ")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,fit:"",border:""},on:{"row-click":e.showRow}},[a("el-table-column",{attrs:{align:"center",fixed:"",label:"当前"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"客户名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.client.name))]}}],null,!1,3882530648)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.product.producteName))]}}],null,!1,2073558564)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.actualQuantity)+"枚")]}}],null,!1,363731897)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.specification.name))]}}],null,!1,3947734364)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.product.proType))]}}],null,!1,3516178968)}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createDate)))]}}],null,!1,1190445174)}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",label:"编码规则"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e._l(t.row.serialNumbers,function(t,i){return a("div",[a("p",[e._v("编号: "+e._s(t.startNo)+"- "+e._s(t.endNo)+" ;备注: "+e._s(t.note)+" ")])])}),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v("编码")])],1)],2)]}}],null,!1,1851021655)})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogSendTitle,"close-on-click-modal":!1,visible:e.dialogSendVisible,width:"1150px"},on:{"update:visible":function(t){e.dialogSendVisible=t},close:e.cancelSend}},[e.dialogSendVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"sendForm",attrs:{model:e.confirmData,rules:e.rulesSend,size:"mini","label-width":"80px"}},[a("div",{staticStyle:{border:"1px solid #eeeeee"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"物流名:",prop:"clientId"}},[a("el-cascader",{staticClass:"send-input",staticStyle:{width:"400px"},attrs:{placeholder:"--选择物流公司--",options:e.clients,props:e.clientProps},model:{value:e.confirmData.clientId,callback:function(t){e.$set(e.confirmData,"clientId",t)},expression:"confirmData.clientId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"货名:",prop:"cargoName"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"货名"},model:{value:e.confirmData.cargoName,callback:function(t){e.$set(e.confirmData,"cargoName",t)},expression:"confirmData.cargoName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"数量:",prop:"planNumber"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",step:"1000",placeholder:"数量"},model:{value:e.confirmData.planNumber,callback:function(t){e.$set(e.confirmData,"planNumber",t)},expression:"confirmData.planNumber"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收货地:",prop:"address"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"收货地址"},model:{value:e.confirmData.address,callback:function(t){e.$set(e.confirmData,"address",t)},expression:"confirmData.address"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收货人:",prop:"consignee"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"收货人"},model:{value:e.confirmData.consignee,callback:function(t){e.$set(e.confirmData,"consignee",t)},expression:"confirmData.consignee"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"电话:",prop:"consigneePhone"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",min:"0",placeholder:"收货人电话"},model:{value:e.confirmData.consigneePhone,callback:function(t){e.$set(e.confirmData,"consigneePhone",t)},expression:"confirmData.consigneePhone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"方式:",prop:"stype"}},[a("el-select",{staticClass:"send-input",attrs:{filterable:"",placeholder:"----支付方式----"},model:{value:e.confirmData.stype,callback:function(t){e.$set(e.confirmData,"stype",t)},expression:"confirmData.stype"}},e._l(e.payCode,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"服务:",prop:"serviceCode"}},[a("el-select",{staticClass:"send-input",attrs:{filterable:"",placeholder:"----请选择服务方式----"},model:{value:e.confirmData.serviceCode,callback:function(t){e.$set(e.confirmData,"serviceCode",t)},expression:"confirmData.serviceCode"}},e._l(e.serviceCodes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"回单:",prop:"receipt"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"回单信息"},model:{value:e.confirmData.receipt,callback:function(t){e.$set(e.confirmData,"receipt",t)},expression:"confirmData.receipt"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"上门费:",prop:"shortHaulMoney"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",step:"10",placeholder:"上门费"},model:{value:e.confirmData.shortHaulMoney,callback:function(t){e.$set(e.confirmData,"shortHaulMoney",t)},expression:"confirmData.shortHaulMoney"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"详情:",prop:"freightDetails"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"运费详情"},model:{value:e.confirmData.freightDetails,callback:function(t){e.$set(e.confirmData,"freightDetails",t)},expression:"confirmData.freightDetails"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发货人:",prop:"consigner"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"发货人"},model:{value:e.confirmData.consigner,callback:function(t){e.$set(e.confirmData,"consigner",t)},expression:"confirmData.consigner"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"电话:",prop:"consignerPhone"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"发货人电话"},model:{value:e.confirmData.consignerPhone,callback:function(t){e.$set(e.confirmData,"consignerPhone",t)},expression:"confirmData.consignerPhone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收货款:",prop:"collFreight"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",placeholder:"代收货款"},model:{value:e.confirmData.collFreight,callback:function(t){e.$set(e.confirmData,"collFreight",t)},expression:"confirmData.collFreight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"大写:",prop:"collFreightBig"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",disabled:!0,placeholder:"代收货款大写"},model:{value:e.confirmData.collFreightBig,callback:function(t){e.$set(e.confirmData,"collFreightBig",t)},expression:"confirmData.collFreightBig"}})],1)],1)],1),e._v(" "),a("el-row"),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单号:",prop:"dispatchBillNo"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"text",placeholder:"单号"},model:{value:e.confirmData.dispatchBillNo,callback:function(t){e.$set(e.confirmData,"dispatchBillNo",t)},expression:"confirmData.dispatchBillNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"运费:",prop:"freights"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",placeholder:"运费"},model:{value:e.confirmData.freights,callback:function(t){e.$set(e.confirmData,"freights",t)},expression:"confirmData.freights"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"件数:",prop:"boxs"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"number",min:"0",placeholder:"件数"},model:{value:e.confirmData.boxs,callback:function(t){e.$set(e.confirmData,"boxs",t)},expression:"confirmData.boxs"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"备注:",prop:"remarks"}},[a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",type:"textarea",placeholder:"备注"},model:{value:e.confirmData.remarks,callback:function(t){e.$set(e.confirmData,"remarks",t)},expression:"confirmData.remarks"}})],1)],1)],1)],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSendVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmAdd("sendForm")}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(e){a("k3Un")},"data-v-cc7eb382",null);t.default=p.exports},gxTg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("TjZE"),n=a("Va7D"),s={data:function(){return{activeName:"material"}},methods:{detials:function(e){this.$router.replace({path:e.path})},handleClick:function(e,t){console.log(e,t)}},components:{mp:i.default,mps:n.default},computed:{stepOpt:function(){var e={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(t){"/planBase"===t.path&&(e=t)}),console.log(e.id);var t=[];return this.$store.state.routes.forEach(function(a){a.parentId===e.id&&t.push(a)}),console.log(t),t||[]}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{display:"flex","flex-direction":"column","font-size":"14px"}},[a("div",{staticStyle:{"margin-left":"20px","line-height":"30px",height:"30px","text-align":"start","padding-left":"20px","border-left":"4px solid red","font-weight":"700"}},[e._v("\n          采购管理\n        ")]),e._v(" "),a("el-main",{staticClass:"product-base"},e._l(e.stepOpt,function(t){return a("div",{key:t.id,staticClass:"product-item",on:{click:function(a){return e.detials(t)}}},[a("div",{staticClass:"item-left"},[a("div",{staticStyle:{margin:"60px 0","font-size":"16px"}},[a("span",{staticClass:"fa fa-product-hunt",staticStyle:{display:"block"}}),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v(e._s(t.name))])])]),e._v(" "),a("div",{staticClass:"item-right"})])}),0)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("VdJP")},null,null);t.default=o.exports},hFft:function(e,t){},hR2O:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},emps:[],depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{note:[{required:!0,message:"必填:备注",trigger:"blur"}],carNo:[{required:!0,message:"必选:车辆",trigger:"blur"}]},carReRepairs:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],carReRepair:{carNo:"",note:"",carRequestId:"",preStartDate:"",preEndDate:"",empName:"",operatorId:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData();var e=this;this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var a=t.data;console.log(a),e.cars=a.root.cars}})},methods:{searchEmp:function(){this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.carReRepair.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadData(),this.getRequest("/users/basicdata").then(function(t){if(t&&200==t.status){var a=t.data;e.emps=a.root.emps}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.carReRepair=t,delete this.carReRepair.vech,delete this.carReRepair.assingedId,this.carReRepair.carRequestId=t.carRequestId,this.carReRepair.preStartDate=this.formatDate(t.preStartDate),this.carReRepair.preEndDate=this.formatDate(t.preEndDate),this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.carReRepair.id&&(t.tableLoading=!0,console.log(t.carReRepair),t.postRequest("/vehicleAllot/update",t.carReRepair).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())}))})},deleteData:function(e){var t=this;this.$confirm("此操将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehicleAllot/delevcalt?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehicleAllot/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.carReRepairs=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.carReRepair={carNo:"",note:"",carRequestId:"",preStartDate:"",preEndDate:"",empName:"",operatorId:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n        ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.carReRepair,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"车辆:",prop:"carNo"}},[a("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carReRepair.carNo)+"\n            ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出行时间:",prop:"preStartDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出行时间"},model:{value:e.carReRepair.preStartDate,callback:function(t){e.$set(e.carReRepair,"preStartDate",t)},expression:"carReRepair.preStartDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"返回时间:",prop:"preEndDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"返回时间"},model:{value:e.carReRepair.preEndDate,callback:function(t){e.$set(e.carReRepair,"preEndDate",t)},expression:"carReRepair.preEndDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"执行人:",prop:"operatorId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择员工"},model:{value:e.carReRepair.operatorId,callback:function(t){e.$set(e.carReRepair,"operatorId",t)},expression:"carReRepair.operatorId"}},e._l(e.emps,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carReRepair.note,callback:function(t){e.$set(e.carReRepair,"note",t)},expression:"carReRepair.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carReRepairs,border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",fixed:"",label:"车牌号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.vech.plateNumber))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"aplyDate",width:"120",align:"left",label:"申请时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.aplyDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"preStartDate",width:"120",align:"left",label:"计划出行时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.preStartDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"preEndDate",width:"120",align:"left",label:"计划返回时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.preEndDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"empName",align:"left",label:"申请人",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",align:"left",label:"执行人",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"note",align:"left",label:"备注",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("KhUb")},null,null);t.default=s.exports},hXSV:function(e,t){},k3Un:function(e,t){},"kBn+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("c/Tr"),n=a.n(i),s=a("pFYg"),l=a.n(s),o=a("mvHQ"),r=a.n(o),c=a("bOdI"),d=a.n(c),u=a("s3ol"),p=a("IeT4"),h={components:{treeTable:u.default,shopType:p.default},data:function(){var e;return e={typeslist:[],selectRadio:!1,mainShop:!0,dialogImageUrl:"",dialogVisible:!1,dialogImageVisible:!1,disabled:!1,uploadPicList:[],ImageUrl:"",imageUrlList:[],contact:{name:"",phone:"",post:""},productRecord:[{name:"第一次",producteName:"10s"},{name:"第二次",producteName:"15s"}],texts:["偶尔","一般","正常","重要","特级"],typelist:[],tap:1,columns:[{text:"公司名称",value:"name",width:200},{text:"编号",value:"id"},{text:"电话",value:"phone"},{text:"地址",value:"address"}]},d()(e,"dialogVisible",!1),d()(e,"showOrHidePop",!1),d()(e,"depTextColor","#c0c4cc"),d()(e,"keywords",""),d()(e,"tableLoading",!1),d()(e,"advanceSearchViewVisible",!1),d()(e,"rules",{name:[{required:!0,message:"必填:名称",trigger:"blur"}]}),d()(e,"companys",[]),d()(e,"defaultProps",{label:"name",isLeaf:"leaf",children:"child"}),d()(e,"dialogTitle",""),d()(e,"currentPage",1),d()(e,"formLabelWidth","120px"),d()(e,"totalCount",-1),d()(e,"company",{name:"",phone:"",address:"",email:"",fax:"",status:"",abbreviation:"",parentName:"",parentClientId:"",infor:"",notes:"",productStr:"",types:"",grade:""}),d()(e,"shops",[]),d()(e,"posts",[]),d()(e,"dialogTableVisible",!1),d()(e,"dialogFormVisible",!1),d()(e,"pName",""),d()(e,"pId",""),d()(e,"activeName","down"),d()(e,"tempShops",[]),d()(e,"formVisible",!1),d()(e,"formTitle",""),d()(e,"keydep",""),d()(e,"diaLogForm",{goodsName:"",imgBroadcastList:[],imgsStr:""}),e},mounted:function(){this.initData()},methods:{imgBroadcastChange:function(e,t){e.size/1024/1024<2?this.diaLogForm.imgBroadcastList.push(e):(this.diaLogForm.imgBroadcastList=t.filter(function(t){return t.uid!==e.uid}),this.$message.error("图片选择失败，每张图片大小不能超过 2MB,请重新选择!"))},imgBroadcastRemove:function(e,t){this.diaLogForm.imgBroadcastList=t},successfile:function(e){console.log(e),console.log(this.uploadPicList)},used:function(e){this.keydep=e.name,this.tap=2,this.keydep=""},uploadPic:function(e){var t=this;console.log(e);var a=new FormData,i=e.file;a.append("file",i),t.uploadFileRequest("/uploadfile/file/upload",a).then(function(e){if(e&&200===e.status){var a=e.data;t.imageUrlList.push({url:a}),console.log(t.imageUrlList),t.ImageUrl=a}})},handleRemove:function(e){console.log(e);var t=this;this.imageUrlList.length&&this.imageUrlList.forEach(function(a,i){a.id===e.id&&t.imageUrlList.splice(i,1)})},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogImageVisible=!0},getBaseData:function(){var e=this,t=this;t.getRequest("/client/baseData").then(function(a){if(a&&200===a.status&&a.data.success){var i=a.data,n=[];(i.root.typelist||[]).forEach(function(e){n.push({id:e[0],num:e[1],name:e[2]})}),t.typeslist=n,e.typeslist=i.root.typeslist}})},andCode:function(){this.dialogFormVisible=!0},addChild:function(e){console.log(e),this.formTitle="添加子公司";var t=e,a=_.cloneDeep(t);console.log(e),this.isChild=!0,this.selectRadio=!0,this.tempShops=[],0===a.parentClientId||a.parentClientId===a.id?delete a.child:void 0!==a.parent&&delete a.parent,this.tempShops.push(a),this.company.parentName=a.name,this.company.parentClientId=a.id,this.company.status=a.status,this.mainShop=!1},formatSex:function(e,t){return"up"===e.status?"上游":"down"===e.status?"下游":"未知"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},onTreeDataChange:function(){},handleNodeClick:function(e){this.company.parentName=e.name,this.company.parentClientId=e.id,this.pId=e.id,this.pName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},handleClick:function(e,t){var a=this.activeName;this.loadMyData(a)},clearChoose:function(){this.company.parentName="",this.company.parentClientId=""},headCall:function(e){this.companys=e},cancelChoos:function(){console.log(this.pName),this.company.parentName=this.pName,this.company.parentClientId=this.pId},initData:function(){var e=this.activeName;this.loadMyData(e),this.getBaseData()},keywordsChange:function(e){if(""===e){var t=this.activeName;this.loadMyData(t)}},currentChange:function(e){this.currentPage=e,console.log(this.currentPage);var t=this.activeName;this.loadMyData(t)},addAndFlushData:function(){this.formTitle="添加总公司",this.isChild=!1,this.selectRadio=!1,this.mainShop=!1},searchData:function(){var e=this.activeName;this.loadMyData(e)},showEditEmpView:function(e){console.log(e),this.isChild=!1,this.tempShops=[],this.formTitle="编辑客户信息",this.company=e,this.selectRadio=!0,console.log(e),this.company.parentClientId=e.parentClientId,this.company.createDate=e.createDate,this.company.parentName=e.parentName,delete this.company.purchasePlan,delete this.company.product,this.imageUrlList=e.uploadFiles,this.company.types=parseInt(e.types),this.mainShop=!1},addData:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;var i=_.cloneDeep(t.company),n=[],s=r()(i.child,function(e,t){if("object"===(void 0===t?"undefined":l()(t))&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t});n=null,i.child=s,void 0!==i.parentClientId&&null!==i.parentClientId&&""!==i.parentClientId||(i.parentClientId=0,i.parentName=""),delete i.parent,console.log(i),i.uploadFiles=a.jsonToString(a.imageUrlList),a.company.id?(a.tableLoading=!0,t.postRequest("/client/update",i).then(function(e){if(a.tableLoading=!1,e&&200===e.status&&e.data.success){a.mainShop=!0;var t=a.activeName;a.loadMyData(t),a.emptyData()}else a.$message({type:"info",message:"更新失败"})})):(t.tableLoading=!0,t.postRequest("/client/add",i).then(function(e){if(a.tableLoading=!1,e&&200===e.status&&e.data.success){a.mainShop=!0;var t=a.activeName;a.loadMyData(t),a.emptyData()}else a.$message({type:"info",message:"添加失败"})}))})},cancelOpt:function(){this.mainShop=!0,this.emptyData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("55"),t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){var t=this;console.log("666"),this.tableLoading=!0;var a=this;a.getRequest("/client/delete?id="+e).then(function(e){if(a.tableLoading=!1,console.log("777777"),e&&200===e.status&&e.data.success){var i=t.activeName;a.loadMyData(i)}else t.$message({type:"info",message:"失败"})})},loadMyData:function(){var e=this,t=this,a=this.activeName;this.tableLoading=!0,console.log(a),this.getRequest("/client/findbypage?page="+this.currentPage+"&size=100&queryName="+this.keywords+"&shopType="+a).then(function(a){e.tableLoading=!1,a&&200===a.status&&(t.companys=t.famatDataArr(a.data.data),console.log(t.companys),t.totalCount=a.data.total,t.emptyData())}),this.getRequest("/client/baseData").then(function(e){e&&200===e.status&&(t.shops=e.data.data)})},famatDataArr:function(e){var t=this;return e&&e.length&&n()(e).forEach(function(e){t.toArrays(e)}),e},toArrays:function(e){var t=this;e.child&&e.child.length>0&&(e.children=e.child,n()(e.children).forEach(function(e){e.child&&e.child.length>0&&t.toArrays(e)}))},toTree:function(e){var t=[];if(!Array.isArray(e))return t;e.forEach(function(e){delete e.child});var a={};return e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.parentClientId];i?(i.children||(i.children=[])).push(e):t.push(e)}),console.log(t),t},emptyData:function(){console.log("+++++_+++++_"),this.imageUrlList=[],this.company={name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",status:"",departmentName:"",departmentId:""}}},computed:{routes:function(){return this.$store.state.routes}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{directives:[{name:"show",rawName:"v-show",value:e.mainShop,expression:"mainShop"}]},[a("el-header",[a("div",{staticStyle:{"text-align":"center"}},[a("strong",[e._v("客户管理")])]),e._v(" "),a("div",{staticStyle:{"text-align":"left","margin-left":"20px"}},[a("div",{staticClass:"fa fa-window-restore",class:{stamp:2===e.tap},staticStyle:{cursor:"pointer"},on:{click:function(t){e.tap=2}}},[e._v("客户流派\n          ")]),e._v(" "),a("span",{staticClass:"fa fa-list-ul",class:{stamp:1===e.tap},staticStyle:{"margin-left":"30px",cursor:"pointer"},on:{click:function(t){e.tap=1}}},[e._v(" 列表展示")]),e._v(" "),a("span",{staticStyle:{cursor:"pointer","font-weight":"400",color:"blueviolet","margin-left":"20px"},on:{click:e.andCode}},[e._v("添加客户流派")]),e._v(" "),a("tooltip",{attrs:{content:"刷新"}},[a("span",{staticClass:"fa fa-refresh",staticStyle:{color:"#85ce61",cursor:"pointer","margin-left":"20px"},on:{click:e.initData}})])],1)]),e._v(" "),a("el-container",[1===e.tap?a("el-container",{staticClass:"divce-mode"},[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0",padding:"0"},attrs:{placeholder:"通过客户名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("\n                搜索\n              ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.addAndFlushData("companyRef")}}},[e._v("添加总公司\n              ")])],1)]),e._v(" "),a("el-main",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"下游客户",name:"down"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"上游企业",name:"up"}})],1),e._v(" "),a("div",[a("TreeGrid",{staticStyle:{height:"auto"},attrs:{data:e.companys,lines:"true",idField:"id",treeField:"name"}},[a("GridColumn",{attrs:{field:"name",title:"公司名"}}),e._v(" "),a("GridColumn",{attrs:{field:"phone",title:"电话"}}),e._v(" "),a("GridColumn",{attrs:{field:"address",title:"地址"}}),e._v(" "),a("GridColumn",{attrs:{field:"progress",title:"操作"},scopedSlots:e._u([{key:"cell",fn:function(t){var i=t.row;return[a("div",[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(t){return e.showEditEmpView(i)}}},[e._v("编辑\n                      ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(t){return e.addChild(i)}}},[e._v("添加子公司\n                      ")]),e._v(" "),i.children?e._e():a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteData(i)}}},[e._v("删除\n                      ")])],1)]}}],null,!1,773740688)})],1),e._v(" "),0===e.companys.length?a("div",{staticStyle:{"text-align":"center"}},[e._v("\n                暂无数据\n              ")]):e._e()],1)],1)],1):a("div",{staticClass:"product-model-base"},e._l(e.typelist,function(t){return a("div",{key:t.id,staticClass:"product-model-item",on:{click:function(a){return e.used(t)}}},[a("span",{staticClass:"fa fa-cc",staticStyle:{"font-size":"8px"}}),e._v(" "),a("span",[e._v(e._s(t.name))]),e._v(" "),a("span",[e._v("（"+e._s(t.num)+"）")])])}),0)],1)],1),e._v(" "),a("el-container",{directives:[{name:"show",rawName:"v-show",value:!e.mainShop,expression:"!mainShop"}]},[a("div",{staticStyle:{width:"900px",display:"flex","flex-direction":"column","flex-wrap":"nowrap","justify-content":"center","align-items":"center"}},[a("div",{staticStyle:{height:"100%",width:"100%",padding:"20px 0 0 180px"}},[a("div",{staticStyle:{padding:"12px"}},[a("span",[e._v("客户信息维护")]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"取消",placement:"right-start"}},[a("span",{staticClass:"fa fa-rotate-left",staticStyle:{"margin-left":"60px",color:"red",cursor:"pointer"},on:{click:e.cancelOpt}})])],1),e._v(" "),a("el-form",{ref:"addDataForm",attrs:{model:e.company,rules:e.rules,size:"mini","label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"站名:",prop:"name"}},[a("el-input",{staticClass:"product-input-btn-class",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入客户名称"},model:{value:e.company.name,callback:function(t){e.$set(e.company,"name",t)},expression:"company.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"简称:",prop:"abbreviation"}},[a("el-input",{staticClass:"product-input-btn-class",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入客户简称..."},model:{value:e.company.abbreviation,callback:function(t){e.$set(e.company,"abbreviation",t)},expression:"company.abbreviation"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[a("el-input",{staticClass:"product-input-btn-class",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司电话..."},model:{value:e.company.phone,callback:function(t){e.$set(e.company,"phone",t)},expression:"company.phone"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"传真:",prop:"fax"}},[a("el-input",{staticClass:"product-input-btn-class",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司传真..."},model:{value:e.company.fax,callback:function(t){e.$set(e.company,"fax",t)},expression:"company.fax"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[a("el-input",{staticClass:"product-input-btn-class",attrs:{"prefix-icon":"el-icon-message",size:"mini",placeholder:"公司邮箱..."},model:{value:e.company.email,callback:function(t){e.$set(e.company,"email",t)},expression:"company.email"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"性质:",prop:"status"}},[a("el-radio-group",{staticClass:"product-input-btn-class",attrs:{disabled:e.selectRadio},model:{value:e.company.status,callback:function(t){e.$set(e.company,"status",t)},expression:"company.status"}},[a("el-radio",{attrs:{label:"down"}},[e._v("下游")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"up"}},[e._v("上游")])],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"地址:",prop:"address"}},[a("el-input",{staticClass:"product-input-btn-class",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司地址..."},model:{value:e.company.address,callback:function(t){e.$set(e.company,"address",t)},expression:"company.address"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"流派:",prop:"types"}},[a("el-select",{staticClass:"send-input",attrs:{filterable:"",placeholder:"----请选择流派----"},model:{value:e.company.types,callback:function(t){e.$set(e.company,"types",t)},expression:"company.types"}},e._l(e.typeslist,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("span",[e._v("添加联系人:")])]),e._v(" "),a("el-row"),e._v(" "),a("el-row",[a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"flex-start",padding:"16px"}},[a("label",[e._v("\n                关联等级:\n              ")]),e._v(" "),a("el-rate",{attrs:{colors:["#99A9BF","#F7BA2A","#FF9900"],texts:e.texts,"show-text":"","text-color":"#ff99 00"},model:{value:e.company.grade,callback:function(t){e.$set(e.company,"grade",t)},expression:"company.grade"}})],1)]),e._v(" "),a("el-row",[a("div",{staticStyle:{"text-align":"left","margin-left":"0"}},[a("label",{staticStyle:{"margin-left":"16px"}},[e._v("常用产品:")]),e._v(" "),a("span",[e._v(e._s(e.company.productStr)+" ")])])]),e._v(" "),a("div",{staticStyle:{"text-align":"left",padding:"16px"}},[a("span",[e._v("最近订单：")])]),e._v(" "),a("div",{staticStyle:{"text-align":"left",padding:"12px"}},[a("span",[e._v("业务办理流程：")])]),e._v(" "),a("el-row",{staticStyle:{"text-align":"left","margin-left":"15px",display:"flex","flex-direction":"row","justify-content":"flex-start"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":e.uploadPic,"show-file-list":!0,"file-list":e.imageUrlList,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{"margin-top":"20px"},attrs:{width:"50%",visible:e.dialogImageVisible},on:{"update:visible":function(t){e.dialogImageVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-input",{staticClass:"product-isnput-btn-class",staticStyle:{padding:"16px"},attrs:{"prefix-icon":"el-icon-edit",type:"textarea",size:"mini",placeholder:"注意事项..."},model:{value:e.company.notes,callback:function(t){e.$set(e.company,"notes",t)},expression:"company.notes"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between"}},[a("div",{staticStyle:{"text-align":"left"}},[a("label",{staticStyle:{"margin-left":"50px"},attrs:{for:"address"}},[e._v("地址:")]),e._v(" "),a("el-input",{staticClass:"product-input-btn-class",staticStyle:{"margin-left":"5px",width:"200px"},attrs:{id:"address","prefix-icon":"el-icon-edit",size:"mini",placeholder:"详细地址..."},model:{value:e.company.addressDetails,callback:function(t){e.$set(e.company,"addressDetails",t)},expression:"company.addressDetails"}})],1),e._v(" "),a("div",[a("div",[a("span",{staticClass:"demonstration"},[e._v("地图")])])])]),e._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{on:{click:e.cancelOpt},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"Esc",void 0,t.key,void 0)?null:e.cancelOpt(t)}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addDataForm")}}},[e._v("确 定")])],1)],1)],1)])]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[a("div",[a("shopType")],1)])],1)},staticRenderFns:[]};var m=a("VU/8")(h,f,!1,function(e){a("mNU9")},null,null);t.default=m.exports},lGFz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),s={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},keywords:"",depTextColor:"#c0c4cc",tableLoading:!1,advanceSearchViewVisible:!1,rules:{carNo:[{required:!0,message:"必填:车牌",trigger:"blur"}]},cars:[],carRecords:[],dialogTitle:"",currentPage:1,totalCount:-1,carRecord:{startCause:"",startMileage:"",startDate:"",endMileage:"",endCause:"",endDate:"",note:"",carNo:""},dialogFormVisible:!1,dialogbeginVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{searchEmp:function(){this.loadEmps()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("heheh")},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.carRecord.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadData(),this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var a=t.data;console.log(a),e.cars=a.root.cars}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.dialogFormVisible=!0,this.emptyData()},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.carRecord=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.carRecord.endDate=this.formatDate(t.endDate),this.carRecord.startDate=this.formatDate(t.startDate),delete this.carRecord.user,delete this.carRecord.verification,delete this.carRecord.enabled,delete this.carRecord.distributeDate,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.carRecord.id?(t.tableLoading=!0,console.log(t.carRecord),t.postRequest("/vehiclerecord/addvd",t.carRecord).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})):(t.tableLoading=!0,console.log(a.carRecord),t.postRequest("/vehiclerecord/addvd",t.carRecord).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除该次记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehiclerecord/deletvd?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehiclerecord/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.carRecords=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.carRecord={startCause:"",startMileage:"",startDate:"",endMileage:"",endCause:"",endDate:"",note:"",carNo:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n          ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.carRecord,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"车牌:",prop:"carNo"}},[a("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRecord.carNo)+"\n              ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出车事由:",prop:"startCause"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入出车事由"},model:{value:e.carRecord.startCause,callback:function(t){e.$set(e.carRecord,"startCause",t)},expression:"carRecord.startCause"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"初始里程:",prop:"startMileage"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"初始里程"},model:{value:e.carRecord.startMileage,callback:function(t){e.$set(e.carRecord,"startMileage",t)},expression:"carRecord.startMileage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出发日期:",prop:"startDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出发日期"},model:{value:e.carRecord.startDate,callback:function(t){e.$set(e.carRecord,"startDate",t)},expression:"carRecord.startDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际事由:",prop:"endCause"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入该次出车实际事由"},model:{value:e.carRecord.endCause,callback:function(t){e.$set(e.carRecord,"endCause",t)},expression:"carRecord.endCause"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束里程:",prop:"endMileage"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"结束里程"},model:{value:e.carRecord.endMileage,callback:function(t){e.$set(e.carRecord,"endMileage",t)},expression:"carRecord.endMileage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束日期:",prop:"endDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"结束日期"},model:{value:e.carRecord.endDate,callback:function(t){e.$set(e.carRecord,"endDate",t)},expression:"carRecord.endDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRecord.note,callback:function(t){e.$set(e.carRecord,"note",t)},expression:"carRecord.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogbeginVisible,width:"500px"},on:{"update:visible":function(t){e.dialogbeginVisible=t},close:e.cancelOpt}},[e.dialogbeginVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addForm",attrs:{model:e.carRecord,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"车牌:",prop:"carNo"}},[a("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRecord.carNo)+"\n              ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出车事由:",prop:"startCause"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入出车事由"},model:{value:e.carRecord.startCause,callback:function(t){e.$set(e.carRecord,"startCause",t)},expression:"carRecord.startCause"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"初始里程:",prop:"startMileage"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"初始里程"},model:{value:e.carRecord.startMileage,callback:function(t){e.$set(e.carRecord,"startMileage",t)},expression:"carRecord.startMileage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出发日期:",prop:"startDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出发日期"},model:{value:e.carRecord.startDate,callback:function(t){e.$set(e.carRecord,"startDate",t)},expression:"carRecord.startDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRecord.note,callback:function(t){e.$set(e.carRecord,"note",t)},expression:"carRecord.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogbeginVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.carRecord,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"车牌:",prop:"carNo"}},[a("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRecord.carNo)+"\n    ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出车事由:",prop:"startCause"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入出车事由"},model:{value:e.carRecord.startCause,callback:function(t){e.$set(e.carRecord,"startCause",t)},expression:"carRecord.startCause"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"初始里程:",prop:"startMileage"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"初始里程"},model:{value:e.carRecord.startMileage,callback:function(t){e.$set(e.carRecord,"startMileage",t)},expression:"carRecord.startMileage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出发日期:",prop:"startDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出发日期"},model:{value:e.carRecord.startDate,callback:function(t){e.$set(e.carRecord,"startDate",t)},expression:"carRecord.startDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际事由:",prop:"endCause"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入该次出车实际事由"},model:{value:e.carRecord.endCause,callback:function(t){e.$set(e.carRecord,"endCause",t)},expression:"carRecord.endCause"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束里程:",prop:"endMileage"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"结束里程"},model:{value:e.carRecord.endMileage,callback:function(t){e.$set(e.carRecord,"endMileage",t)},expression:"carRecord.endMileage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束日期:",prop:"endDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"结束日期"},model:{value:e.carRecord.endDate,callback:function(t){e.$set(e.carRecord,"endDate",t)},expression:"carRecord.endDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"note"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRecord.note,callback:function(t){e.$set(e.carRecord,"note",t)},expression:"carRecord.note"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carRecords}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"carNo",align:"left",fixed:"",label:"车牌",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startCause",align:"left",fixed:"",label:"出发事由",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startMileage",width:"120",align:"left",label:"出发行程"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"left",label:"出发时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.startDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endCause",width:"220",align:"left",label:"实际事由"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endMileage",width:"120",align:"left",label:"结束行程"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"left",label:"结束日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.endDate)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"note",width:"120",align:"left",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n          ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("cSB1")},null,null);t.default=o.exports},lO7g:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{naIndex:0,asideWidth:"200px",isCollapse:!1,hasChild:!1,childlist:[],childlist1:[],realList:[],keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:姓名",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"}],gender:[{required:!0,message:"必选:性别",trigger:"blur"}],email:[{required:!0,message:"必填:电子邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],beginDate:[{required:!0,message:"必填:入职日期",trigger:"blur"}]},totalCount:-1,employee:{name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",gender:""},isDot:!1,dialogTableVisible:!1,dialogFormVisible:!1,optos:[{icon:"el-icon-truck",path:"/car",name:"车辆管理"},{icon:"el-icon-s-cooperation",path:"/buyPlan",name:"采购计划"},{icon:"el-icon-star-off",path:"/sale",name:"销售计划"},{icon:"el-icon-goods",path:"/productsFinished",name:"成品库"},{icon:"el-icon-s-finance",path:"/productMid",name:"半成品库"},{path:"/material",name:"原材料库",icon:"el-icon-s-management"}],menuitems:[{iconCls:"el-icon-menu",index:"/home",title:"首页",name:"员工管理",leaf:!1,hidden:!1,children:[{path:"/emp",name:"员工"}]},{iconCls:"el-icon-menu",index:"/home",title:"客户",name:"客户管理",leaf:!1,hidden:!1,children:[{path:"/company",name:"客户"}]},{iconCls:"el-icon-menu",index:"/home",title:"产品",name:"产品管理",leaf:!1,hidden:!1,children:[{path:"/product",name:"产品"}]},{iconCls:"el-icon-menu",index:"/home",title:"系统管理",name:"系统管理",leaf:!1,hidden:!1,children:[{path:"/sysRole",name:"角色管理"},{path:"/users",name:"用户管理"},{path:"/sysUnit",name:"单位管理"}]}],activeName:"first",nowcurrentclick:0,nowcurrentclicks:0,nowcurrentclickt:0}},mounted:function(){this.loadNF()},components:{mainhome:a("6+aJ").default},methods:{changeCollapse:function(){this.isCollapse=!this.isCollapse,this.isCollapse?this.asideWidth="80px":this.asideWidth="200px"},homeCommand:function(e){switch(console.log(e),e){case"home":this.goHome();break;case"out":this.logout();break;case"secret":this.goPassword()}},keywordsChange:function(e){},loadNF:function(){var e=this;console.log("登入了"+this.$router),this.getRequest("/chat/sysmsgs").then(function(t){var a=!1;t.data.data.forEach(function(e){1===e.msgState&&(a=!0)}),e.$store.commit("toggleNFDot",a)})},goHome:function(){this.backToUrl("/home")},detailShowf:function(e,t){console.log(t),console.log(e),this.childlist=e.children||[],this.filtArr(this.childlist),this.nowcurrentclick=t,this.naIndex=1,this.detailShows(this.childlist[0],0)},detailShows:function(e,t){var a=e.children||[];this.nowcurrentclicks=t,console.log(t+"home"),a&&0===a.length?this.backToUrl(e.path):a[0]&&4!==a[0].isbtn?this.backToUrl(e.path):(this.childlist1=a,this.naIndex=2,this.detailShowt(this.childlist1[0],0))},filtArr:function(e){if(e.length)for(var t=e.length-1;t>=0;t--)console.log(1===e[t].isbtn),1===e[t].isbtn&&e.splice(t,1)},detailShowt:function(e,t){this.backToUrl(e.path),this.nowcurrentclickt=t},backToUrl:function(e){this.$router.push({path:e})},toupers:function(){1===this.naIndex?this.naIndex=0:2===this.naIndex?this.naIndex=1:this.naIndex=0},handleClick:function(){},goPassword:function(){},logout:function(){var e=this;this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.getRequest("/logout"),e.$store.commit("logout"),e.backToUrl("/")}).catch(function(){e.$message({type:"info",message:"取消"})})},goChat:function(){this.backToUrl("/chat")},emptyEmpData:function(){this.employee={name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",gender:""}}},beforeRouteEnter:function(e,t,a){console.log("beforeRouteEnter"),a(function(t){t.realList=e.meta.routeList,console.log(t.realList)})},beforeRouteLeave:function(e,t,a){a(function(e){e.realList=[]})},computed:{user:function(){return this.$store.state.user},routes:function(){var e=[];if(this.$store.state.routes){var t=[],a=[],i=[];this.$store.state.routes.forEach(function(e){var n=e.isbtn+"";switch(e.children.length?e.leaf=!1:e.leaf=!0,n){case"2":t.push(e);break;case"3":a.push(e);break;case"4":i.push(e)}}),e.push(t),e.push(a),e.push(i)}return e}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",height:"20000px"}},[a("el-container",{staticClass:"home-container"},[a("el-aside",{staticClass:"home-aside",style:{width:e.asideWidth}},[a("div",{staticClass:"home-head"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapse,expression:"!isCollapse"}],staticClass:"head-up"},[a("span",{staticClass:"el-dropdown-link home_userinfo",staticStyle:{display:"flex","align-items":"center"}},[a("i",[""!==e.user.userface?a("img",{staticStyle:{width:"40px",height:"40px","margin-right":"5px","margin-left":"5px","border-radius":"40px"},attrs:{src:e.user.userface}}):e._e()]),e._v("\n               "+e._s(e.user.username)+"\n            ")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isCollapse,expression:"isCollapse"}],staticClass:"head-up"},[a("el-dropdown",{staticClass:"el-dropdown-link home_userinfo",staticStyle:{display:"flex","align-items":"center"},on:{command:e.homeCommand}},[a("i",[""!==e.user.userface?a("img",{staticStyle:{width:"40px",height:"40px","margin-right":"5px","margin-left":"5px","border-radius":"40px"},attrs:{src:e.user.userface}}):e._e()]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticClass:"fa fa-home",attrs:{command:"spec"}}),e._v(" "),a("el-dropdown-item",{staticClass:"fa fa-lock",attrs:{command:"secret"}}),e._v(" "),a("el-dropdown-item",{staticClass:"fa fa-power-off",attrs:{command:"out"}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapse,expression:"!isCollapse"}],staticClass:"head-down"},[a("div",[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"返回首页",placement:"top-start"}},[a("i",{staticClass:"fa fa-home",staticStyle:{cursor:"pointer"},on:{click:e.goHome}})])],1),e._v(" "),a("div",[a("div",[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"修改密码",placement:"top-start"}},[a("i",{staticClass:"fa fa-lock",staticStyle:{cursor:"pointer"},on:{click:e.goPassword}})])],1)]),e._v(" "),a("div",[a("div",[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"注销",placement:"top-start"}},[a("i",{staticClass:"fa fa-power-off",staticStyle:{cursor:"pointer"},on:{click:e.logout}})])],1)])])]),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-start",width:"200px","text-align":"left"}},[a("el-menu",{staticClass:"el-menu-home",attrs:{"background-color":"#112943","text-color":"#ffffff",collapse:e.isCollapse,"unique-opened":"",router:""}},[e._l(e.menuitems,function(t,i){return t.hidden?e._e():[t.leaf?e._e():a("el-submenu",{attrs:{index:i+""}},[a("template",{slot:"title"},[a("i",{class:t.iconCls}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]),e._v(" "),e._l(t.children,function(t){return t.hidden?e._e():a("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v(e._s(t.name)+"\n                ")])})],2),e._v(" "),t.leaf&&t.children.length>0?a("el-menu-item",{attrs:{index:t.children[0].path}},[a("i",{class:t.iconCls}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(t.children[0].name))])]):e._e()]})],2)],1)]),e._v(" "),a("el-container",[a("div",{staticStyle:{height:"100%",width:"100%"}},[a("el-backtop"),e._v(" "),a("div",{staticClass:"home-header"},[a("div",[a("i",{staticClass:"fa fa-list",on:{click:e.changeCollapse}})]),e._v(" "),a("div",{staticStyle:{display:"flex","align-items":"center","margin-right":"7px"}},[a("div",{staticStyle:{display:"inline","margin-right":"20px"}},[a("el-input",{staticStyle:{width:"300px",margin:"0",padding:"0"},attrs:{placeholder:"搜索菜单,按下回车搜索...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"通知",placement:"top-start"}},[a("el-badge",{staticStyle:{"margin-right":"30px"},attrs:{"is-dot":this.$store.state.nfDot}},[a("i",{staticClass:"fa fa-bell-o",staticStyle:{cursor:"pointer"},on:{click:e.goChat}})])],1)],1)]),e._v(" "),a("el-main",{staticClass:"home-main"},[a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasChild,expression:"!hasChild"}],staticClass:"main-header"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.naIndex,expression:"naIndex===0"}],staticClass:"main-header"},e._l(e.routes[0],function(t,i){return t.leaf?e._e():a("el-button",{key:t.id,attrs:{size:"mini",icon:t.iconCls,type:e.nowcurrentclick===i?"success":"primary"},on:{click:function(a){return e.detailShowf(t,i)}}},[e._v("\n                    "+e._s(t.name)+"\n                  ")])}),1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.naIndex,expression:"naIndex===1"}],staticClass:"main-header"},e._l(e.childlist,function(t,i){return t.leaf?e._e():a("el-button",{key:t.id,attrs:{size:"mini",icon:t.iconCls,type:e.nowcurrentclicks===i?"success":"primary"},on:{click:function(a){return e.detailShows(t,i)}}},[e._v("\n                    "+e._s(t.name)+"\n                  ")])}),1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.naIndex,expression:"naIndex===2"}],staticClass:"main-header"},e._l(e.childlist1,function(t,i){return t.leaf?e._e():a("el-button",{key:t.id,attrs:{size:"mini",icon:t.iconCls,type:e.nowcurrentclickt===i?"success":"primary"},on:{click:function(a){return e.detailShowt(t,i)}}},[e._v("\n                    "+e._s(t.name)+"\n                  ")])}),1)]),e._v(" "),a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"success",size:"mini",icon:"el-icon-top"},on:{click:e.toupers}},[e._v("返回\n              ")])],1),e._v(" "),a("keep-alive",[this.$route.meta.keepAlive?a("router-view",{staticClass:"home-router-view"}):e._e()],1),e._v(" "),this.$route.meta.keepAlive?e._e():a("router-view",{staticClass:"home-router-view"}),e._v(" "),"/home"===this.$router.currentRoute.path?a("keep-alive",[a("mainhome")],1):e._e()],1)],1)])],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("9Mpo")},null,null);t.default=s.exports},lxdu:function(e,t){},mNU9:function(e,t){},mOMX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{}},methods:{detials:function(e){this.$router.replace({path:e.path})}},components:{},computed:{stepOpt:function(){var e={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(t){"/productBase"===t.path&&(e=t)}),console.log(e.id);var t=[];return this.$store.state.routes.forEach(function(a){a.parentId===e.id&&t.push(a)}),console.log(t),t||[]}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{display:"flex","flex-direction":"column","font-size":"14px"}},[a("div",{staticStyle:{"margin-left":"20px","line-height":"30px",height:"30px","text-align":"start","padding-left":"20px","border-left":"4px solid red","font-weight":"700"}},[e._v("\n      产品管理\n    ")]),e._v(" "),a("el-main",{staticClass:"product-base"},e._l(e.stepOpt,function(t){return a("div",{key:t.id,staticClass:"product-item",on:{click:function(a){return e.detials(t)}}},[a("div",{staticClass:"item-left"},[a("div",{staticStyle:{margin:"60px 0","font-size":"16px"}},[a("span",{staticClass:"fa fa-product-hunt",staticStyle:{display:"block"}}),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v(e._s(t.name))])])]),e._v(" "),a("div",{staticClass:"item-right"})])}),0)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("qPWk")},null,null);t.default=s.exports},ngyR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),s={data:function(){return{hrs:[],msg:"",currentUser:this.$store.state.user,currentFriend:{}}},computed:{msgList:{get:function(){return this.$store.state.msgList}},isDotMap:{get:function(){return this.$store.state.isDotMap}}},watch:{msgList:function(){document.getElementById("chatDiv").scrollTop=document.getElementById("chatDiv").scrollHeight}},methods:{sendMsg:function(){var e=window.localStorage.getItem(this.$store.state.user.username+"#"+this.currentFriend.username);if(console.log("hihi-_-!!!!"),null==e)(e=[]).push({msg:this.msg,from:this.$store.state.user.username}),window.localStorage.setItem(this.$store.state.user.username+"#"+this.currentFriend.username,n()(e));else{var t=JSON.parse(e);t.push({msg:this.msg,from:this.$store.state.user.username}),window.localStorage.setItem(this.$store.state.user.username+"#"+this.currentFriend.username,n()(t))}this.$store.state.stomp.send("/ws/chat",{},this.msg+";"+this.currentFriend.username),this.msg="",this.updateChatDiv()},updateChatDiv:function(){var e=window.localStorage.getItem(this.currentUser.username+"#"+this.currentFriend.username);null==e?this.$store.commit("updateMsgList",[]):this.$store.commit("updateMsgList",JSON.parse(e))},toggleFriend:function(e){e!=this.currentFriend&&(this.currentFriend=e,this.$store.commit("updateCurrentFriend",e),this.updateChatDiv(),this.$store.commit("removeValueDotMap","isDot#"+this.currentUser.username+"#"+e.username),document.getElementById("chatDiv").scrollTop=document.getElementById("chatDiv").scrollHeight)},loadHrs:function(){var e=this;this.getRequest("/chat/hrs").then(function(t){e.hrs=t.data})}},mounted:function(){this.loadHrs()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-aside",{attrs:{width:"160px"}},[e._l(e.hrs,function(t,i){return a("div",{key:t.id,staticClass:"friendListDiv",class:{currentChatFriend:e.currentFriend.id==t.id},on:{click:function(a){return e.toggleFriend(t)}}},[a("img",{staticClass:"userfaceImg",attrs:{src:t.userface}}),e._v(" "),a("el-badge",{attrs:{"is-dot":null!=e.isDotMap.get("isDot#"+e.currentUser.username+"#"+t.username)}},[e._v(e._s(t.username))])],1)}),e._v(" "),a("div",{staticStyle:{"background-color":"#20a0ff",height:"1px",width:"160px"}})],2),e._v(" "),a("el-main",{staticStyle:{"padding-top":"0px","padding-bottom":"0px"}},[a("div",{ref:"chatDiv",staticClass:"chatDiv",attrs:{id:"chatDiv"}},[a("p",{directives:[{name:"show",rawName:"v-show",value:e.currentFriend.username,expression:"currentFriend.username"}]},[e._v("与\n          "),a("el-tag",{staticStyle:{"margin-left":"5px","margin-right":"5px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.currentFriend.username)+"\n          ")]),e._v("\n          聊天中\n        ")],1),e._v(" "),e._l(e.msgList,function(t){return[t.from==e.currentFriend.username?a("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center","box-sizing":"border-box"}},[a("img",{staticClass:"userfaceImg",attrs:{src:e.currentFriend.userface}}),e._v(" "),a("div",{staticStyle:{display:"inline-flex","border-style":"solid","border-width":"1px","border-color":"#20a0ff","border-radius":"5px",padding:"5px 8px 5px 8px"}},[e._v("\n              "+e._s(t.msg)+"\n            ")])]):e._e(),e._v(" "),t.from!=e.currentFriend.username?a("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center","box-sizing":"border-box"}},[a("div",{staticStyle:{display:"inline-flex","border-style":"solid","border-width":"1px","border-color":"#20a0ff","border-radius":"5px",padding:"5px 8px 5px 8px","margin-right":"3px","background-color":"#9eea6a"}},[e._v("\n              "+e._s(t.msg)+"\n            ")]),e._v(" "),a("img",{staticClass:"userfaceImg",attrs:{src:e.currentUser.userface}})]):e._e()]})],2),e._v(" "),a("div",{staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入内容",size:"mini",type:"textarea",autosize:""},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),e._v(" "),a("el-button",{staticClass:"sendBtn",attrs:{disabled:!e.currentFriend.id,size:"small",type:"primary"},on:{click:e.sendMsg}},[a("i",{staticClass:"fa fa-send",staticStyle:{"margin-right":"15px"}}),e._v("发送\n        ")])],1)])],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("2MWp")},null,null);t.default=o.exports},oAV5:function(e,t,a){"use strict";a.d(t,"b",function(){return u}),a.d(t,"a",function(){return p}),a.d(t,"c",function(){return h});var i=a("//Fk"),n=a.n(i),s=a("lHA8"),l=a.n(s),o=a("Gu7T"),r=a.n(o),c=a("VsUZ"),d=a("zL8q"),u=(a.n(d),function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];for(var i=0;i<t.length;i++){var n=t[i];if(null==n||""==n||void 0==n)return d.Message.warning({message:"数据不能为空!"}),!1}return!0}),p=function(e,t){t.state.routes.length>0||Object(c.c)("/users/getMenu").then(function(a){if(a&&200===a.status){console.log(a);var i=f(a.data.root.menuData),n=function(e){return[].concat(r()(new l.a(e)))};console.log(n(i)),e.push(n(i)),t.commit("initMenu",n(i)),t.dispatch("connect")}})},h=function(e){return new n.a(function(t,a){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){t(i)},i.onerror=a})},f=function e(t){var i=[];return t.forEach(function(t){var n=t.id,s=t.path,l=t.component,o=t.name,r=t.iconCls,c=t.children,d=t.parentId,u=t.isbtn,p=t.btnText,h={keepAlive:t.keepAlive,requireAuth:t.requireAuth},f=t.url;c&&c instanceof Array&&c.length>0&&(c=e(c));var m={id:n,path:s,component:function(e){a.e(0).then(function(){var t=[a("2eoi")("./"+l+".vue")];e.apply(null,t)}.bind(this)).catch(a.oe)},name:o,iconCls:r,meta:h,children:c,url:f,parentId:d,isbtn:u,btnText:p};i.push(m)}),i}},pQHM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("oAV5"),n={mounted:function(){this.loading=!0,this.initRoles()},methods:{deleteRole:function(e,t){var a=this;this.$confirm("删除角色["+t+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.loading=!0,a.deleteRequest("/system/basic/role/"+e).then(function(e){e&&200==e.status?a.initRoles():a.loading=!1})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},addNewRole:function(){if(Object(i.b)(this.newRole,this.newRoleZh)){this.loading=!0;var e=this;this.postRequest("/sysrole/addAndUpdate",{name:this.newRole,roleName:this.newRoleZh}).then(function(t){t&&200===t.status&&t.data.success?(e.initRoles(),e.newRole="",e.newRoleZh=""):e.loading=!1})}},updateRoleMenu:function(e){console.log("update");var t=this.$refs.tree[e].getCheckedKeys(!1),a=this;this.postRequest("/sysrole/updateMenuRole",{rid:this.activeColItem,mids:t}).then(function(e){e&&200==e.status&&(a.activeColItem=-1)})},collapseChange:function(e){if(""!==e){console.log(e);var t=this;this.getRequest("/sysrole/treeRole?roleid="+e).then(function(e){if(e&&200===e.status){var a=e.data;t.treeData=a.data,t.checkedKeys=a.root.menus}})}},handleCheckChange:function(e,t,a){console.log(e,t,a)},initRoles:function(){var e=this;console.log(" role_init"),this.getRequest("/sysrole/findbypage").then(function(t){e.loading=!1,t&&200===t.status&&t.data.success&&(e.roles=t.data.data,e.activeColItem=-1)})},cancelUpdateRoleMenu:function(){this.activeColItem=-1}},data:function(){return{props:{label:"name",children:"children"},newRole:"",newRoleZh:"",roles:[],treeData:[],checkedKeys:[],loading:!1,activeColItem:-1,checkList:["选中且禁用","复选框 A"]}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"text-align":"left"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入角色英文名称...",size:"mini"},model:{value:e.newRole,callback:function(t){e.newRole=t},expression:"newRole"}},[a("template",{slot:"prepend"},[e._v("ROLE_")])],2),e._v(" "),a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入角色中文名称...",size:"mini"},model:{value:e.newRoleZh,callback:function(t){e.newRoleZh=t},expression:"newRoleZh"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:e.addNewRole}},[e._v("添加角色")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px","text-align":"left"}},[a("el-collapse",{staticStyle:{width:"600px"},attrs:{accordion:""},on:{change:e.collapseChange},model:{value:e.activeColItem,callback:function(t){e.activeColItem=t},expression:"activeColItem"}},e._l(e.roles,function(t,i){return a("el-collapse-item",{key:t.id,attrs:{title:t.roleName,name:t.id}},[a("el-card",{staticClass:"box-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("可访问的资源")]),e._v(" "),a("el-button",{staticStyle:{color:"#f6061b",margin:"0",float:"right",padding:"3px 0",width:"15px",height:"15px"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.deleteRole(t.id,t.roleName)}}})],1),e._v(" "),a("div",[a("el-tree",{key:t.id,ref:"tree",refInFor:!0,attrs:{props:e.props,data:e.treeData,"default-checked-keys":e.checkedKeys,"default-expand-all":!0,"expand-on-click-node":!1,"node-key":"id","show-checkbox":"","check-strictly":!1,"check-on-click-node":"","highlight-current":""},on:{"check-change":e.handleCheckChange}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-right":"10px"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelUpdateRoleMenu}},[e._v("取消修改")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.updateRoleMenu(i)}}},[e._v("确认修改")])],1)])],1)}),1)],1)])},staticRenderFns:[]};var l=a("VU/8")(n,s,!1,function(e){a("+8VK")},"data-v-6010fd30",null);t.default=l.exports},ptqw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:名称",trigger:"blur"}]},processs:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],process:{preProcessId:0,name:"",currentSteps:"",code:""},dialogTableVisible:!1,dialogFormVisible:!1,steps:[],selectSteps:[],addprogress:[],delprogress:[],updprogress:[],oodprogress:[],oodcode:"",nowcode:""}},mounted:function(){this.initData()},methods:{searchEmp:function(){this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.process.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadData(),this.getRequest("/product/basicdata").then(function(t){if(t&&200==t.status){var a=t.data;e.steps=a.root.steps,console.log(e.steps)}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.emptyData(),this.dialogFormVisible=!this.dialogFormVisible},searchData:function(){this.loadData()},showProcessView:function(e){console.log(e),this.dialogTitle="查看工序"},showEditEmpView:function(e){console.log(e);if(this.dialogTitle="编辑信息",this.process.name=e.name,this.process.preProcessId=e.id,e.process&&e.process.length){for(var t=e.process.length,a=0;a<t;a++){var i=e.process[a];this.selectSteps.push(i.workstep.id)}this.oodcode=this.selectSteps.join("")}this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var a=this;if(0==this.selectSteps.length)return this.$message({type:"info",message:"请添加工序！"}),!1;this.$refs[e].validate(function(e){if(!e)return!1;if(t.process.preProcessId)if(a.nowcode=a.selectSteps.join(""),a.nowcode!=a.oodcode){for(var i=a.nowcode.split(""),n=a.oodcode.split(""),s=0,l=n.length;s<l;s++)for(var o=n[s],r=0,c=i.length;r<c;r++){var d=i[r];s==r&&o!==d&&a.updprogress.push({stepNumber:r+1,step:parseInt(d),stepType:"update"})}if(i.length>n.length)for(var u=n.length-1,p=i.length-1;p>u;p--)a.addprogress.push({stepNumber:p+1,step:parseInt(i[p]),stepType:"add"});else if(i.length<n.length)for(var h=i.length-1,f=n.length-1;f>h;f--)a.delprogress.push({stepNumber:f+1,step:parseInt(n[f]),stepType:"delete"});var m=a.updprogress.concat(a.addprogress,a.delprogress);console.log(m);var g=t.jsonToString(m);t.process.currentSteps=g,t.process.code=a.nowcode,t.tableLoading=!0,console.log(t.process),t.postRequest("/productpreprocess/update",t.process).then(function(e){a.tableLoading=!1,e&&200==e.status&&(a.dialogFormVisible=!1,a.loadData(),a.emptyData())})}else a.dialogFormVisible=!1;else{a.process.currentSteps=t.selectSteps.join(","),a.process.code=t.selectSteps.join(""),a.selectSteps.forEach(function(e,t,i){a.addprogress.push({stepNumber:t,step:e,stepType:"add"})});var v=t.jsonToString(a.addprogress);a.process.currentSteps=v,a.tableLoading=!0,console.log(a.process),t.postRequest("/productpreprocess/add",t.process).then(function(e){if(a.tableLoading=!1,e&&200==e.status){e.data;a.dialogFormVisible=!1,a.loadData(),a.emptyData()}})}})},deleteData:function(e){var t=this;this.$confirm("此操作将删除该行记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productpreprocess/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productpreprocess/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.processs=i,t.totalCount=a.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.process={name:"",code:"",currentSteps:"",preProcessId:0},this.addprogress=[],this.delprogress=[],this.updprogress=[],this.oodprogress=[],this.selectSteps=[],this.oodcode="",this.nowcode=""}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过工序名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n       ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),a("el-main",[a("div",{staticStyle:{"text-align":"left"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogFormVisible,expression:"dialogFormVisible"}],staticStyle:{display:"flex","flex-direction":"row","justify-content":"flex-start"}},[a("el-form",{ref:"addEmpForm",staticStyle:{width:"600px"},attrs:{model:e.process,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"工序名称"},model:{value:e.process.name,callback:function(t){e.$set(e.process,"name",t)},expression:"process.name"}})],1),e._v(" "),a("el-transfer",{staticStyle:{"text-align":"left"},attrs:{filterable:"","target-order":"push",props:{key:"id",label:"workstepName"},titles:["工序步骤","工序"],data:e.steps},model:{value:e.selectSteps,callback:function(t){e.selectSteps=t},expression:"selectSteps"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"start"}},[a("el-button",{staticStyle:{height:"30px",width:"auto"},attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确定添加")]),e._v(" "),a("el-button",{staticStyle:{height:"30px",width:"auto"},attrs:{size:"mini",type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1)])])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.processs,fit:"",border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"left",prop:"name",label:"工序名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"流程"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-steps",{attrs:{space:"20%","align-center":""}},e._l(t.row.process,function(e,t){return a("el-step",{key:t,staticClass:"detail",attrs:{title:e.name}})}),1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("vf7B")},null,null);t.default=s.exports},pyQK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("TjZE"),n=a("Va7D"),s={data:function(){return{activeName:"material"}},methods:{detials:function(e){this.$router.replace({path:e.path})},handleClick:function(e,t){console.log(e,t)}},components:{mp:i.default,mps:n.default},computed:{stepOpt:function(){var e={};console.log(this.$store.state.routes),this.$store.state.routes.forEach(function(t){"/buyallplanBase"===t.path&&(e=t)}),console.log(e.id);var t=[];return this.$store.state.routes.forEach(function(a){a.parentId===e.id&&t.push(a)}),console.log(t),t||[]}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{display:"flex","flex-direction":"column","font-size":"14px"}},[a("div",{staticStyle:{"margin-left":"20px","line-height":"30px",height:"30px","text-align":"start","padding-left":"20px","border-left":"4px solid red","font-weight":"700"}},[e._v("\n          采购管理\n        ")]),e._v(" "),a("el-main",{staticClass:"product-base"},e._l(e.stepOpt,function(t){return a("div",{key:t.id,staticClass:"product-item",on:{click:function(a){return e.detials(t)}}},[a("div",{staticClass:"item-left"},[a("div",{staticStyle:{margin:"60px 0","font-size":"16px"}},[a("span",{staticClass:"fa fa-product-hunt",staticStyle:{display:"block"}}),e._v(" "),a("span",{staticStyle:{display:"block"}},[e._v(e._s(t.name))])])]),e._v(" "),a("div",{staticClass:"item-right"})])}),0)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("ANaZ")},null,null);t.default=o.exports},qPWk:function(e,t){},qYX3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),s={data:function(){return{depItems:[],dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,currentTreeData:"",currentTreeIds:[],rules:{name:[{required:!0,message:"必填:姓名",trigger:"blur"}]},emps:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,employee:{name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",gender:"",departmentName:"",departmentIds:"",positionName:"",positionIds:""},deps:[],posts:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",advanceSearchViewVisible:!1,faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",keyphone:"",keyaddr:"",keydep:"",tap:2}},mounted:function(){this.initData()},methods:{showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyEmpData(),this.loadEmps())},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyEmpData(),this.loadEmps()},formatSex:function(e,t){return 1===e.gender?"男":2===e.gender?"女":"未知"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){var t=this.$refs.deptTree.getCheckedNodes()||[];console.log(t),this.currentTreeIds=[],this.employee.departmentName="";for(var a=0;a<=t.length-1;a++)""===this.employee.departmentName?this.employee.departmentName=t[a].name:this.employee.departmentName=this.employee.departmentName+","+t[a].name,this.currentTreeIds.push(t[a].id);this.depTextColor="#606266"},getDeptTreeData:function(){var e=this,t=this.$refs.deptTree.getCheckedNodes()||[];console.log(t),this.currentTreeData="",this.currentTreeIds=[],t.forEach(function(t){e.currentTreeIds.push(t.id),e.currentTreeData+=t.name+","}),this.employee.departmentName=e.currentTreeData},initData:function(){this.loadEmps(),this.getBaseData()},getBaseData:function(){var e=this;e.getRequest("/emp/basicdata").then(function(t){if(t&&200===t.status&&t.data.success){var a=t.data,i=[];(a.root.deptlist||[]).forEach(function(e){i.push({id:e[0],num:e[1],name:e[2]})}),e.depItems=i,e.deps=a.root.department,e.posts=a.root.position}})},keywordsChange:function(e){""===e&&this.loadEmps()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadEmps()},addAndFlushEmp:function(){this.dialogTitle="添加员工",this.emptyEmpData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadEmps()},showEditEmpView:function(e,t){this.dialogTitle="编辑员工",console.log(t),console.log(e),this.employee=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.employee.name=t.name,this.employee.birthday=this.formatDate(new Date(t.birthday)),this.employee.entryDate=this.formatDate(new Date(t.entryDate)),this.employee.departmentIds=t.departmentIds.split(",").map(function(e){return parseInt(e)}),this.employee.departmentName=t.departmentName,this.employee.positionIds=t.positionIds.split(",").map(function(e){return parseInt(e)}),this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var a="";this.currentTreeIds&&(a=this.currentTreeIds.join());var i="";this.employee.positionIds&&(i=this.employee.positionIds.join()),this.employee.positionId=0,this.employee.departmentId=0;var n=this;this.$refs[e].validate(function(e){if(!e)return!1;t.employee.id?(t.tableLoading=!0,console.log(t.employee),t.postRequest("/emp/update",t.employee).then(function(e){n.tableLoading=!1,e&&200===e.status&&e.data.success&&(n.dialogFormVisible=!1,n.loadEmps(),n.emptyEmpData())})):(t.tableLoading=!0,console.log(n.employee),t.postRequest("/emp/empAdd?deptIds="+a+"&postIds="+i,t.employee).then(function(e){if(n.tableLoading=!1,e&&200===e.status&&e.data.success){e.data;n.dialogFormVisible=!1,n.loadEmps(),n.emptyEmpData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadEmps()},deleteEmp:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/emp/deletEmp?id="+e).then(function(e){if(t.tableLoading=!1,e&&200===e.status){e.data;t.loadEmps()}})},used:function(e){this.keydep=e.name,e.num>0&&(this.tap=2),this.keydep=""},loadEmps:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/emp/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords+"&phone="+this.keyphone+"&addr="+this.keyaddr+"&dept="+this.keydep).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.emps=i,t.totalCount=a.data.total,t.emptyEmpData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyEmpData:function(){console.log("+++++_+++++_"),this.employee={name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",gender:"",departmentName:"",departmentIds:"",positionIds:"",positionName:""}}},computed:{routes:function(){return this.$store.state.routes}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("div",{staticStyle:{"text-align":"center"}},[a("strong",[e._v("员工详情")])]),e._v(" "),a("div",{staticStyle:{"text-align":"left","margin-left":"20px"}},[a("div",{staticClass:"fa fa-list-ul",class:{stamp:2===e.tap},staticStyle:{cursor:"pointer"},on:{click:function(t){e.tap=2}}},[e._v("\n            列表展示\n          ")]),e._v(" "),a("div",{staticClass:"fa fa-window-restore",class:{stamp:1===e.tap},staticStyle:{"margin-left":"30px",cursor:"pointer"},on:{click:function(t){e.tap=1}}},[e._v("产品分类（用途）\n          ")])])]),e._v(" "),2===e.tap?a("el-container",{staticStyle:{display:"flex","flex-direction":"column"}},[a("div",{staticStyle:{height:"30px",margin:"0 20px",display:"flex","flex-direction":"row","justify-content":"space-between"}},[a("div",{staticStyle:{display:"inline"}},[a("el-input",{staticStyle:{width:"300px",margin:"0",padding:"0"},attrs:{placeholder:"通过员工名搜索员工,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),a("el-button",{staticClass:"send-head-left-btn",attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n            ")]),e._v(" "),a("el-button",{staticClass:"send-head-right-btn",attrs:{slot:"reference",type:"primary",size:"mini"},on:{click:e.showAdvanceSearchView},slot:"reference"},[a("i",{staticClass:"fa fa-lg send-head-left-btn",class:[e.advanceSearchViewVisible?e.faangledoubleup:e.faangledoubledown]}),e._v("高级搜索\n            ")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加员工")])],1)]),e._v(" "),a("el-main",{staticStyle:{margin:"0 20px"}},[a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticClass:"send-main-div"},[a("el-row",[a("el-col",{attrs:{span:6}},[e._v("\n                  姓名:\n                  "),a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"姓名。。。"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("\n                  手机号:\n                  "),a("el-input",{staticClass:"send-input",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"手机号。。。"},model:{value:e.keyphone,callback:function(t){e.keyphone=t},expression:"keyphone"}})],1),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("\n                  地址:\n                  "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"地址。。。"},model:{value:e.keyaddr,callback:function(t){e.keyaddr=t},expression:"keyaddr"}})],1),e._v(" "),a("el-col",{attrs:{span:6}},[e._v("\n                  部门:\n                  "),a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"部门名称。。。"},model:{value:e.keydep,callback:function(t){e.keydep=t},expression:"keydep"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"flex-end"}},[a("el-col",{attrs:{span:5,offset:4}},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelSearch}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.searchEmp}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%",border:"1px solid #F7F7F7"},attrs:{fit:"",data:e.emps}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"departmentName",align:"left",fixed:"",label:"所属部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"positionName",align:"left",label:"职位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",align:"left",label:"电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gender",align:"left",formatter:e.formatSex,label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteEmp(t.row)}}},[e._v("删除\n                ")])]}}],null,!1,471200575)})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)],1):a("el-container",{staticClass:"product-model-base"},e._l(e.depItems,function(t){return a("div",{key:t.id,staticClass:"product-model-item",on:{click:function(a){return e.used(t)}}},[a("span",{staticClass:"fa fa-bomb"}),e._v(" "),a("span",[e._v(e._s(t.name))]),e._v(" "),a("span",[e._v("（"+e._s(t.num)+"）")])])}),0)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.employee,rules:e.rules,size:"sam","label-width":"120px"}},[a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"姓名:",prop:"name"}},[a("el-input",{staticClass:"product-input-btn-class",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入员工姓名"},model:{value:e.employee.name,callback:function(t){e.$set(e.employee,"name",t)},expression:"employee.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[a("el-input",{staticClass:"product-input-btn-class",attrs:{"prefix-icon":"el-icon-phone",size:"mini",placeholder:"电话号码..."},model:{value:e.employee.phone,callback:function(t){e.$set(e.employee,"phone",t)},expression:"employee.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别:",prop:"gender"}},[a("el-radio-group",{staticClass:"product-input-btn-class",model:{value:e.employee.gender,callback:function(t){e.$set(e.employee,"gender",t)},expression:"employee.gender"}},[a("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:2}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"部门:",prop:"departmentName"}},[a("el-popover",{staticClass:"product-input-btn-class",attrs:{placement:"right",title:"请选择部门",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[a("el-tree",{ref:"deptTree",attrs:{data:e.deps,"default-expand-all":!0,multiple:"",props:e.defaultProps,"expand-on-click-node":!1,"show-checkbox":""},on:{check:e.handleNodeClick}}),e._v(" "),a("div",{staticClass:"dept-tree",style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[e._v(e._s(e.employee.departmentName)+"\n              ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[a("el-input",{staticClass:"product-input-btn-class",attrs:{"prefix-icon":"el-icon-message",size:"mini",placeholder:"电子邮箱地址..."},model:{value:e.employee.email,callback:function(t){e.$set(e.employee,"email",t)},expression:"employee.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"职位:",prop:"positionIds"}},[a("el-select",{staticClass:"product-input-btn-class",attrs:{multiple:"",size:"mini",placeholder:"请选择职位"},model:{value:e.employee.positionIds,callback:function(t){e.$set(e.employee,"positionIds",t)},expression:"employee.positionIds"}},e._l(e.posts,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期:",prop:"birthday"}},[a("el-date-picker",{staticClass:"product-input-btn-class",attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出生日期"},model:{value:e.employee.birthday,callback:function(t){e.$set(e.employee,"birthday",t)},expression:"employee.birthday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系地址:",prop:"address"}},[a("el-input",{staticClass:"product-input-btn-class",attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"联系地址..."},model:{value:e.employee.address,callback:function(t){e.$set(e.employee,"address",t)},expression:"employee.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"入职日期:",prop:"entryDate"}},[a("el-date-picker",{staticClass:"product-input-btn-class",attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"入职日期"},model:{value:e.employee.entryDate,callback:function(t){e.$set(e.employee,"entryDate",t)},expression:"employee.entryDate"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var o=a("VU/8")(s,l,!1,function(e){a("hXSV")},null,null);t.default=o.exports},quiV:function(e,t){},qwhi:function(e,t){},r702:function(e,t){},s3ol:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=a("bOdI"),s=a.n(n),l=a("pFYg"),o=a.n(l),r=a("mvHQ"),c=a.n(r),d=a("c/Tr"),u=a.n(d),p=a("7+uW");function h(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=[];return u()(e).forEach(function(e){void 0===e._expanded&&p.default.set(e,"_expanded",t);var s=1;if(void 0!==i&&null!==i&&(s=i+1),p.default.set(e,"_level",s),a&&p.default.set(e,"parent",a),n.push(e),e.child&&e.child.length>0){var l=h(e.child,t,e,s);n=n.concat(l)}}),console.log(n),n}var f={name:"TreeTable",data:function(){return{rules:{name:[{required:!0,message:"必填:姓名",trigger:"blur"}],status:[{required:!0,message:"必选:性质",trigger:"blur"}],parentClientId:[{required:!0,message:"必选:总公司",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"},{validator:function(e,t,a){/^1[3|4|5|6|7|8|9][0-9]\d{8}$/.test(t)?a():a("电话号码格式错误!")},message:"电话号码错误",trigger:"blur"}],email:[{required:!0,message:"必填:电子邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]},chooseson:!0,key:!0,formVisible:!1,formTitle:"",depTextColor:"#c0c4cc",defaultProps:{label:"name",isLeaf:"leaf",children:"child"},showOrHidePop:!1,selectRadio:!1,currentPage:1,totalCount:-1,company:{name:"",phone:"",address:"",email:"",fax:"",status:"up",abbreviation:"",parentName:"",parentClientId:"",infor:"",createDate:""},isChild:!1,tempShops:[],pName:"",pId:0}},props:{data:{type:[Array,Object],required:!0},shops:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1},activeName:{type:String,required:!0}},computed:{formatData:function(){var e=void 0;e=Array.isArray(this.data)?this.data:[this.data];var t=this.evalFunc||h,a=this.evalArgs?[e,this.expandAll].concat(this.evalArgs):[e,this.expandAll];return console.log(a),t.apply(null,a)}},methods:(i={showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?"display:none;":"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;"},toggleExpanded:function(e){console.log("hehan666");var t=this.formatData[e],a=t._expanded;console.log(a),console.log(t),t._expanded=!a},toggleAllExpanded:function(){console.log("****____******999"),this.formatData.forEach(function(e,t){0===e.parentClientId||e.parentClientId===e.id?e._expanded=!0:e._expanded=!1})},iconShow:function(e,t){return 0===e&&t.child&&t.child.length>0},renderHeader:function(e,t){return e("span",[e("input",{attrs:{id:"chooseall",type:"checkbox",style:"border: 1px solid #dcdfe6;border-radius: 2px;box-sizing: border-box;width: 14px;height: 14px;background-color: #fff;"}})])},setchildtobeselect:function(e,t){var a=this;e.forEach(function(e,i){e.checks=t,e._expanded=t,e.child&&a.setchildtobeselect(e.child,e.checks)})},isallchecked:function(e){var t=this;e.forEach(function(e,a){e.checks||(t.key=!1),e.child&&t.isallchecked(e.child)})},setparenttrue:function(e,t,a){var i=this;e.forEach(function(e,n){if(e._level===a-1&&e.child){var s=!0,l=!1;e.child.forEach(function(e,a){e.id===t&&(l=!0),e.checks||(s=!1)}),s&&l&&(e.checks=!0)}e.child&&i.setparentfalse(e.child,t,a)})},toselect:function(e){console.log(e),e.child&&this.setchildtobeselect(e.child,e.checks),this.key=!0,this.isallchecked(this.formatData),e.checks?this.setparenttrue(this.formatData,e.id,e._level):(this.setparentfalse(this.formatData,e.id,e._level),document.getElementById("chooseall").checked=!1),this.key&&(document.getElementById("chooseall").checked=!0)},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},onTreeDataChange:function(){},handleNodeClick:function(e){this.company.parentName=e.name,this.company.parentClientId=e.id,this.pId=e.id,this.pName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.company.parentName="",this.company.parentClientId=0},cancelChoos:function(){console.log(this.pName),this.company.parentName=this.pName,this.company.parentClientId=this.pId},initData:function(){var e=this.activeName;this.loadData(e)},keywordsChange:function(e){if(""===e){var t=this.activeName;this.loadData(t)}},currentChange:function(e){this.currentPage=e;var t=this.activeName;this.loadData(t)},addAndFlushData:function(){this.formTitle="添加客户",this.formVisible=!0},searchData:function(){var e=this.activeName;this.loadData(e)},addChild:function(e){console.log(e),this.formTitle="添加子公司";var t=e,a=_.cloneDeep(t);console.log(e),this.isChild=!0,this.selectRadio=!0,this.tempShops=[],0===a.parentClientId||a.parentClientId===a.id?delete a.child:void 0!==a.parent&&delete a.parent,this.tempShops.push(a),this.company.parentName=a.name,this.company.parentClientId=a.id,this.company.status=a.status,this.formVisible=!0},showEditEmpView:function(e){console.log(e),this.isChild=!1,this.tempShops=[],this.formTitle="编辑客户信息",this.company=e,this.selectRadio=!0,console.log(e),this.company.parentClientId=e.parentClientId,this.company.createDate=e.createDate,this.company.parentName=e.parentName,delete this.company.purchasePlan,delete this.company.product,this.formVisible=!0},addData:function(e){var t=this;this.formVisible=!0;var a=this;this.$refs[e].validate(function(e){if(!e)return!1;var i=_.cloneDeep(t.company),n=[],s=c()(i.child,function(e,t){if("object"===(void 0===t?"undefined":o()(t))&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t});n=null,i.child=s,void 0!=i.parentClientId&&null!=i.parentClientId&&""!=i.parentClientId||(i.parentClientId=0,i.parentName=""),delete i.parent,console.log(i),t.company.id?(a.tableLoading=!0,t.postRequest("/client/update",i).then(function(e){if(a.tableLoading=!1,e&&200===e.status&&e.data.success){a.formVisible=!1;var i=a.activeName;a.loadData(i),a.emptyData()}else t.$message({type:"info",message:"更新失败"})})):(t.tableLoading=!0,t.postRequest("/client/add",i).then(function(e){if(a.tableLoading=!1,e&&200===e.status&&e.data.success){e.data;a.formVisible=!1;var i=a.activeName;a.loadData(i),a.emptyData()}else t.$message({type:"info",message:"添加失败"})}))})},cancelOpt:function(){this.formVisible=!1,this.isChild=!1,this.tempShops=[],this.selectRadio=!1,this.emptyData()},deleteData:function(e){var t=this,a=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("55"),a.getRequest("/client/delete?id="+e.id).then(function(e){if(a.tableLoading=!1,console.log("777777"),e&&200===e.status&&e.data.success){e.data;var i=t.activeName;a.loadData(i)}else t.$message({type:"info",message:"失败"})})}).catch(function(){})},doDelete:function(e){var t=this;console.log("666"),this.tableLoading=!0;var a=this;a.getRequest("/client/delete?id="+row.id).then(function(e){if(a.tableLoading=!1,console.log("777777"),e&&200===e.status&&e.data.success){var i=t.activeName;a.loadData(i)}else t.$message({type:"info",message:"失败"})})},loadData:function(e){this.$emit("headCallBack")},emptyData:function(){console.log("+++++_+++++_"),this.company={name:"",phone:"",address:"",email:"",fax:"",status:"",abbreviation:"",parentName:"",parentClientId:"",infor:"",createDate:""}},setparentfalse:function(e,t,a){var i=this;e.forEach(function(e,n){e._level==a-1&&e.child&&e.child.forEach(function(a,i){if(a.id==t)return e.checks=!1,!1}),e.child&&i.setparentfalse(e.child,t,a)})}},s()(i,"setparenttrue",function(e,t,a){var i=this;e.forEach(function(e,n){if(e._level==a-1&&e.child){var s=!0,l=!1;e.child.forEach(function(e,a){e.id==t&&(l=!0),e.checks||(s=!1)}),s&&l&&(e.checks=!0)}e.child&&i.setparentfalse(e.child,t,a)})}),s()(i,"toselect",function(e){console.log(e),e.child&&this.setchildtobeselect(e.child,e.checks),this.key=!0,this.isallchecked(this.formatData),e.checks?this.setparenttrue(this.formatData,e.id,e._level):(this.setparentfalse(this.formatData,e.id,e._level),document.getElementById("chooseall").checked=!1),this.key&&(document.getElementById("chooseall").checked=!0)}),i),mounted:function(){var e=this;this.$nextTick(function(){var t=e,a=document.getElementById("chooseall");a.onchange=function(e){console.log(a.checked),1==a.checked?t.setchildtobeselect(t.formatData,!0):t.setchildtobeselect(t.formatData,!1)},e.toggleAllExpanded()})}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.formTitle,"close-on-click-modal":!1,visible:e.formVisible,width:"500px"},on:{"update:visible":function(t){e.formVisible=t},close:e.cancelOpt}},[e.formVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addDataForm",attrs:{model:e.company,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"站名:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入客户名称"},model:{value:e.company.name,callback:function(t){e.$set(e.company,"name",t)},expression:"company.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简称:",prop:"abbreviation"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-phone",size:"mini",placeholder:"局简称..."},model:{value:e.company.abbreviation,callback:function(t){e.$set(e.company,"abbreviation",t)},expression:"company.abbreviation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司电话..."},model:{value:e.company.phone,callback:function(t){e.$set(e.company,"phone",t)},expression:"company.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"传真:",prop:"fax"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司传真..."},model:{value:e.company.fax,callback:function(t){e.$set(e.company,"fax",t)},expression:"company.fax"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-message",size:"mini",placeholder:"公司邮箱..."},model:{value:e.company.email,callback:function(t){e.$set(e.company,"email",t)},expression:"company.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性质:",prop:"status"}},[a("el-radio-group",{attrs:{disabled:e.selectRadio},model:{value:e.company.status,callback:function(t){e.$set(e.company,"status",t)},expression:"company.status"}},[a("el-radio",{attrs:{label:"down"}},[e._v("下游")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"up"}},[e._v("上游")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"地址:",prop:"address"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司地址..."},model:{value:e.company.address,callback:function(t){e.$set(e.company,"address",t)},expression:"company.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址:",prop:"addressDetails"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"详细地址..."},model:{value:e.company.addressDetails,callback:function(t){e.$set(e.company,"addressDetails",t)},expression:"company.addressDetails"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.formVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addDataForm")}}},[e._v("确 定")])],1)]),e._v(" "),[a("el-table",e._b({ref:"multipleTable",attrs:{data:e.formatData,"row-style":e.showRow}},"el-table",e.$attrs,!1),[a("el-table-column",{attrs:{"render-header":e.renderHeader,width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.toselect(t.row)}},model:{value:t.row.checks,callback:function(a){e.$set(t.row,"checks",a)},expression:"scope.row.checks"}})]}}])}),e._v(" "),0===e.columns.length?a("el-table-column",{attrs:{width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,function(e){return a("span",{key:e,staticClass:"ms-tree-space"})}),e._v(" "),e.iconShow(0,t.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(a){return e.toggleExpanded(t.$index)}}},[t.row._expanded?a("i",{staticClass:"el-icon-minus"}):a("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n          "+e._s(t.$index)+"\n        ")]}}],null,!1,1575631500)}):e._l(e.columns,function(t,i){return a("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(n.row._level,function(t){return 0===i?a("span",{key:t,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.iconShow(i,n.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(t){return e.toggleExpanded(n.$index)}}},[n.row._expanded?a("i",{staticClass:"el-icon-minus"}):a("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n          "+e._s(n.row[t.value])+"\n        ")]}}],null,!0)})}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditEmpView(t.row)}}},[e._v("编辑\n          ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.addChild(t.row)}}},[e._v("添加子公司\n          ")]),e._v(" "),t.row.child?e._e():a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n          ")])]}}])}),e._v(" "),e._t("default")],2)],e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[a("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],2)},staticRenderFns:[]};var g=a("VU/8")(f,m,!1,function(e){a("8mpM"),a("agNU")},"data-v-48f9f9f1",null);t.default=g.exports},spHa:function(e,t){},tSXe:function(e,t){},thLP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"error-page"},[e._m(0),e._v(" "),a("div",{staticClass:"error-desc"},[e._v("啊哦~ 你所访问的页面不存在")]),e._v(" "),a("div",{staticClass:"error-handle"},[a("router-link",{attrs:{to:"/home"}},[a("el-button",{attrs:{type:"primary",size:"large"}},[e._v("返回首页")])],1),e._v(" "),a("el-button",{staticClass:"error-btn",attrs:{type:"primary",size:"large"},on:{click:e.goBack}},[e._v("返回上一页")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"error-code"},[this._v("4"),t("span",[this._v("0")]),this._v("4")])}]};var n=a("VU/8")({methods:{goBack:function(){this.$router.go(-1)}}},i,!1,function(e){a("PvfL")},"data-v-c77dca40",null);t.default=n.exports},tvR6:function(e,t){},tvoH:function(e,t){},v2zK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:中文名",trigger:"blur"}]},units:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,unit:{name:"",code:""},deps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""==e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},searchEmp:function(){this.loadDatas()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.unit=t,delete this.unit.sysMenu,delete this.unit.users,this.dialogFormVisible=!0},addAndFlushEmp:function(){var e=this;""!==this.unit.name.trim()&&(this.unit.id?(this.tableLoading=!0,console.log(this.unit),this.postRequest("/color/add",this.unit).then(function(t){e.tableLoading=!1,t&&200===t.status&&(e.loadDatas(),e.emptyData())})):(this.tableLoading=!0,console.log(e.unit),this.postRequest("/color/add",this.unit).then(function(t){e.tableLoading=!1,t&&200===t.status&&(e.loadDatas(),e.emptyData())})))},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/color/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadDatas()}})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/color/findAll").then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.units=i,t.totalCount=a.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.unit={name:"",code:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticClass:"product-use-header"},[a("div",{staticClass:"product-header-right"},[a("span",{staticStyle:{"margin-left":"5px"}},[e._v("产品顏色")])]),e._v(" "),a("div",{staticClass:"product-header-left"})]),e._v(" "),a("el-main",{staticStyle:{padding:"0 20px"}},[a("div",{staticStyle:{"text-align":"left"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入颜色...",size:"mini"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.units,fit:"",border:""}},[a("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"颜色"}}),e._v(" "),a("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n            ")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除\n            ")])]}}])})],1)],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?a("div",{staticStyle:{width:"100%"}},[a("el-form",{ref:"addEmpForm",attrs:{model:e.unit,rules:e.rules,size:"sam","label-width":"90px"}},[a("el-form-item",{attrs:{label:"颜色:",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"颜色"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}})],1)],1)],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("KKSI")},null,null);t.default=s.exports},vf7B:function(e,t){},"w/O8":function(e,t){},wd3D:function(e,t){},wjDs:function(e,t){},xJsL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0,loginForm:{username:"张三",password:"123"},loading:!1}},mounted:function(){this.$refs.loginFocus.focus()},methods:{submitClick:function(){var e=this;this.loading=!0,this.postRequest("/login",{username:this.loginForm.username,password:this.loginForm.password}).then(function(t){if(e.loading=!1,console.log(t),t&&200===t.status){var a=t.data;console.log(a),e.$store.commit("login",a.obj);var i=e.$route.query.redirect;console.log(e.$route),e.$router.replace({path:"/"===i||void 0===i?"/home":i})}})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"login-container",attrs:{rules:e.rules,"label-position":"left","label-width":"0px",model:e.loginForm}},[a("h3",{staticClass:"login_title"},[e._v("系统登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{ref:"loginFocus",attrs:{type:"text","auto-complete":"off",placeholder:"账号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitClick(t)}},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitClick(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),a("el-checkbox",{staticClass:"login_remember",attrs:{"label-position":"left"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",autofocus:""},on:{click:e.submitClick},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.submitClick(t):null}}},[e._v("登录")])],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("N594")},null,null);t.default=s.exports},"xNd/":function(e,t){},zfsx:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.46ca281324c6b2dae61c.js.map