webpackJsonp([6],{"+Ip0":function(e,t){},"/V9a":function(e,t){},"0Wrx":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{address:[{required:!0,message:"必填:保养地址",trigger:"blur"}],carNo:[{required:!0,message:"必选:车牌号",trigger:"blur"}]},carRepairs:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],car:{},carRepair:{carNo:"",address:"",maintainDate:"",nowMileage:"",mks:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData();var e=this;this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var i=t.data;console.log(i),e.cars=i.root.cars}})},methods:{searchEmp:function(){this.loadEmps()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.carRepair.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.dialogFormVisible=!0,this.emptyData()},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.carRepair=t,this.carRepair.maintainDate=this.formatDate(t.maintainDate),this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,delete this.carRepair.noteMaker,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.carRepair.id?(t.tableLoading=!0,console.log(t.carRepair),t.postRequest("/vehicleRepair/addvmt",t.carRepair).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData())})):(t.tableLoading=!0,console.log(i.carRepair),t.postRequest("/vehicleRepair/addvmt",t.carRepair).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData()}}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除该次记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehicleRepair/delevmt?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehicleRepair/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.carRepairs=a,t.totalCount=i.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.carRepair={carNo:"",address:"",maintainDate:"",nowMileage:"",mks:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n  \n        ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.carRepair,rules:e.rules,size:"small","label-width":"90px"}},[i("el-form-item",{attrs:{label:"车牌号:",prop:"carNo"}},[i("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[i("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),i("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRepair.carNo)+"\n            ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"保养地址:",prop:"address"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"保养地址"},model:{value:e.carRepair.address,callback:function(t){e.$set(e.carRepair,"address",t)},expression:"carRepair.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"当前里程:",prop:"nowMileage"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",step:"100",min:"0",placeholder:"当前表盘里程"},model:{value:e.carRepair.nowMileage,callback:function(t){e.$set(e.carRepair,"nowMileage",t)},expression:"carRepair.nowMileage"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"mks"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRepair.mks,callback:function(t){e.$set(e.carRepair,"mks",t)},expression:"carRepair.mks"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"维护里程:",prop:"maintenanceMile"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"下次维护里程"},model:{value:e.carRepair.maintenanceMile,callback:function(t){e.$set(e.carRepair,"maintenanceMile",t)},expression:"carRepair.maintenanceMile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"保养时间:",prop:"maintainDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"保养时间"},model:{value:e.carRepair.maintainDate,callback:function(t){e.$set(e.carRepair,"maintainDate",t)},expression:"carRepair.maintainDate"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carRepairs}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"carNo",align:"left",fixed:"",label:"车牌号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"address",align:"left",label:"保养地址",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"maintainDate",width:"120",align:"left",label:"保养时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.maintainDate)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"nowMileage",width:"220",align:"left",label:"当次保养里程"}}),e._v(" "),i("el-table-column",{attrs:{prop:"mks",width:"120",align:"left",label:"备注"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(e){i("7vo2")},null,null);t.default=r.exports},"0wq/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bOdI"),n=i.n(a),o={data:function(){var e;return e={tempPlan:[],oddMaterial:{name:"",standard:"",quantity:"",unitName:"",notes:""},newMaterial:{name:"",standard:"",quantity:"",unitName:"",notes:""},confirmFormVisible:!1,positions:[{id:1,name:"一楼仓库"},{id:2,name:"二楼仓库"},{id:3,name:"注塑車間"},{id:4,name:"激光車間"},{id:5,name:"裝配車間"},{id:6,name:"加工車間"}],dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{productId:[{required:!0,message:"必选:产品名称",trigger:"change"}],unitId:[{required:!0,message:"必选:单位",trigger:"change"}],productNo:[{required:!0,message:"必填:数量",trigger:"blur"},{validator:function(e,t,i){/^\d+$/.test(t)?i():i("数字格式错误!")},message:"数字格式错误",trigger:"blur"}]},middleProducts:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[],confirmDialogTitle:"采购确认单",nowMaterial:{quantity:"",notes:"",complete:""}},n()(e,"newMaterial",{name:"",specifications:"",quantity:"",unitName:"",notes:""}),n()(e,"outRecive",{quantity:"",note:"",materialId:""}),n()(e,"dialogInTitle","采购添加"),n()(e,"dialogFormInVisible",!1),e},mounted:function(){this.initData()},methods:{tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.buyStatus?"warning-row":"success-row"},cancelOptIn:function(){this.dialogFormInVisible=!1,this.loadData()},addInData:function(e){var t=this,i=this;if(""==this.outRecive.quantity)return Message.error({message:"请输入数量"}),!1;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(i.outRecive),t.getRequest("/midProductInRecieving/add?id="+t.outRecive.materialId+"&quaity="+t.outRecive.quantity+"&notes="+t.outRecive.note).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormInVisible=!1,i.loadData(),i.emptyInData()}})})},emptyInData:function(){this.outRecive={quaity:"",materailId:"",note:""}},selfbuy:function(e){this.outRecive.materialId=e.id,this.dialogFormInVisible=!0},popConfirm:function(e){var t=this;this.$prompt("请输入出库数量","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number",inputValidator:function(i){if(console.log(i),parseInt(i)>parseInt(e.quantity))return t.$message({type:"info",message:"数量过大"}),!1},inputErrorMessage:"非法输入！"}).then(function(i){var a=i.value;t.getRequest("/midProductOutRecieving/add?id="+e.id+"&quantity="+a).then(function(e){if(e&&200==e.status){e.data;t.loadData(),t.$message({type:"success",message:"出库成功!"})}})}).catch(function(){t.$message({type:"info",message:"取消输入"})})},handleCurrentChange:function(e){console.log(e),this.newMaterial=e},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(i,a){console.log(i.id),i.id==e&&(t.middleProduct.utilname=i.name)})},clearNewMaterial:function(){console.log("clear"),this.newMaterial={name:"",specifications:"",quantity:"",unitName:"",notes:"",id:0},this.nowMaterial={quantity:"",notes:"",complete:""},this.confirmDialogTitle="采购确认单"},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var i="",a=e.plant;return this.positions.forEach(function(e,t,n){a.forEach(function(t,a,n){e.id==t&&(i+=e.name+" , ")})}),i},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){var e=this;e.loadData(),this.getRequest("/middleProduct/basedata").then(function(t){if(t&&200==t.status){var i=t.data;e.units=i.root.units,e.clients=i.root.clients,e.products=i.root.products}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushData:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},handleNodeClick:function(e){this.middleProduct.clientName=e.name,this.middleProduct.clientId=e.id,this.pName=e.name,this.pId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.middleProduct.clientName="",this.middleProduct.clientId=""},cancelChoos:function(){console.log(this.pName),this.middleProduct.clientName=this.pName,this.middleProduct.clientId=this.pId},searchData:function(){this.loadData()},showEditView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.middleProduct=t,this.middleProduct.productId=t.productId,delete this.middleProduct.units,this.dialogFormVisible=!0},showBuyConfirm:function(e,t){var i=this;i.tableLoading=!0,this.confirmDialogTitle=t.name+this.confirmDialogTitle,this.getRequest("/midBuyPlanDetail/buyPlanDetail?materailId="+t.id).then(function(e){if(i.tableLoading=!1,e&&200==e.status){var t=[];e.data.root.midproductlist.forEach(function(e,i,a){t.push({name:e[0],specifications:e[1],quantity:e[2],confirmStatus:e[3],unitName:e[4],createDate:e[5],planSerialNumber:e[6],note:e[7],id:e[8]})}),i.matriallist=t}}),this.confirmFormVisible=!0},planConfirm:function(e){var t=this,i=this;return console.log(i.newMaterial.id),console.log(i.nowMaterial.complete),0==i.newMaterial.id?(i.$message({type:"info",message:"请选择采购计划！"}),!1):""==i.nowMaterial.complete?(i.$message({type:"info",message:"请选择是否完成！"}),!1):""==this.nowMaterial.quantity||0==this.nowMaterial.quantity?(i.$message({type:"info",message:"请填入实收数量！"}),!1):void this.$confirm("当前选择的是,"+this.newMaterial.name+"入库数量为："+this.nowMaterial.quantity+" 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$refs[e].validate(function(e){e&&i.getRequest("/midPruchaseVerify/add?purchasePlanDetailId="+i.newMaterial.id+"&confirmStatus="+i.nowMaterial.complete+"&quantity="+i.nowMaterial.quantity+"&notes="+i.nowMaterial.notes).then(function(e){if(e&&200==e.status){e.data;i.loadData(),i.confirmFormVisible=!1}})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var i=this,a=_.cloneDeep(this.middleProduct);a.plant=a.plant.join(","),this.$refs[e].validate(function(e){if(!e)return!1;t.middleProduct.id?(t.tableLoading=!0,console.log(t.middleProduct),t.postRequest("/middleProduct/update",a).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData())})):(t.tableLoading=!0,console.log(i.middleProduct),t.postRequest("/middleProduct/add",a).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/middleProduct/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/middleProduct/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;a.forEach(function(e,t,i){e.plant=e.plant.split(",")}),t.middleProducts=a,t.totalCount=i.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n          ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("添加")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addDataForm",attrs:{model:e.middleProduct,rules:e.rules,size:"sam","label-width":"90px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入半成品名称。。。"},model:{value:e.middleProduct.name,callback:function(t){e.$set(e.middleProduct,"name",t)},expression:"middleProduct.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"规格:",prop:"standard"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"半成品规格、大小"},model:{value:e.middleProduct.standard,callback:function(t){e.$set(e.middleProduct,"standard",t)},expression:"middleProduct.standard"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型:"}},[i("el-radio-group",{on:{change:e.selectType},model:{value:e.middleProduct.productStyle,callback:function(t){e.$set(e.middleProduct,"productStyle",t)},expression:"middleProduct.productStyle"}},[i("el-radio",{attrs:{label:"1"}},[e._v("常备")]),e._v(" "),i("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"2"}},[e._v("普通")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"单位:",prop:"unitId"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择单位"},on:{change:e.selectChange},model:{value:e.middleProduct.unitId,callback:function(t){e.$set(e.middleProduct,"unitId",t)},expression:"middleProduct.unitId"}},e._l(e.units,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"存放位置:",prop:"plant"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"",size:"mini",placeholder:"请选择位置"},model:{value:e.middleProduct.plant,callback:function(t){e.$set(e.middleProduct,"plant",t)},expression:"middleProduct.plant"}},e._l(e.positions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"note"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.middleProduct.note,callback:function(t){e.$set(e.middleProduct,"note",t)},expression:"middleProduct.note"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addDataForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogInTitle,"close-on-click-modal":!1,visible:e.dialogFormInVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormInVisible=t},close:e.cancelOptIn}},[e.dialogFormInVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addInData",attrs:{model:e.outRecive,rules:e.rules,size:"sam","label-width":"90px"}},[i("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"采购数量..."},model:{value:e.outRecive.quantity,callback:function(t){e.$set(e.outRecive,"quantity",t)},expression:"outRecive.quantity"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"note"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"规格..."},model:{value:e.outRecive.note,callback:function(t){e.$set(e.outRecive,"note",t)},expression:"outRecive.note"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormInVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addInData("addInData")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.confirmDialogTitle,"close-on-click-modal":!1,visible:e.confirmFormVisible,width:"650px"},on:{"update:visible":function(t){e.confirmFormVisible=t},close:e.clearNewMaterial}},[e.confirmFormVisible?i("div",{staticStyle:{width:"100%"},attrs:{height:"200"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.matriallist,border:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[i("el-table-column",{attrs:{prop:"planSerialNumber",align:"left",fixed:"",label:"采购编号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"下单时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n           "+e._s(e._f("formatDate")(t.row.createDate))+"\n         ")]}}],null,!1,450011427)}),e._v(" "),i("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n         "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n       ")]}}],null,!1,3015498410)}),e._v(" "),i("el-table-column",{attrs:{prop:"note",align:"left",label:"备注",width:"240"}})],1),e._v(" "),e.newMaterial.name?i("div",{staticStyle:{padding:"16px","text-align":"left",border:"1px solid gainsboro"}},[e._v("\n       当前选择：\n    \n     "),i("div",{staticStyle:{display:"flex","justify-content":"space-around",padding:"5px"}},[i("div",[e._v("\n       名称:"+e._s(e.newMaterial.name)+" \n         ")]),e._v(" "),i("div",[e._v("\n       规格:"+e._s(e.newMaterial.specifications)+"\n         ")]),e._v(" "),i("div",[e._v("\n       数量:"+e._s(e.newMaterial.quantity)+" "+e._s(e.newMaterial.unitName)+" \n         ")]),e._v(" "),i("div",[e._v("\n       备注:"+e._s(e.newMaterial.note)+" \n         ")])])]):e._e(),e._v(" "),i("div",{staticStyle:{border:"1px solid #eeeeee"}},[i("el-form",{ref:"newconfirmForm",attrs:{model:e.nowMaterial,rules:e.rules,size:"sam","label-width":"80px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("div",[i("el-form-item",{attrs:{label:"收货数量:",prop:"quantity"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"当次实际收货数量"},model:{value:e.nowMaterial.quantity,callback:function(t){e.$set(e.nowMaterial,"quantity",t)},expression:"nowMaterial.quantity"}})],1)],1)]),e._v(" "),i("el-col",{attrs:{span:12}},[i("div",[i("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注"},model:{value:e.nowMaterial.notes,callback:function(t){e.$set(e.nowMaterial,"notes",t)},expression:"nowMaterial.notes"}})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("div",[i("el-form-item",{attrs:{label:"完成:"}},[i("el-radio-group",{model:{value:e.nowMaterial.complete,callback:function(t){e.$set(e.nowMaterial,"complete",t)},expression:"nowMaterial.complete"}},[i("el-radio",{attrs:{label:2}},[e._v("完成")]),e._v(" "),i("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:1}},[e._v("未完成")])],1)],1)],1)])],1)],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.confirmFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.planConfirm("newconfirmForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.middleProducts,border:"","row-class-name":e.tableRowClassName}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"standard",align:"left",label:"规格",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"半成品数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.productNo)+e._s(t.row.unit.name)+"\n        ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"productStyle",align:"left",formatter:e.formatStyle,label:"类型",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"plantName",align:"left",formatter:e.formatPlant,label:"存放地点",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"note",align:"left",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"margin-top":"10px"}},[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditView(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n          ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.selfbuy(t.row)}}},[e._v("厂部自购\n          ")]),e._v(" "),t.row.buyStatus?i("el-badge",{attrs:{value:"new"}},[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showBuyConfirm(t.$index,t.row)}}},[e._v("采购确认\n            ")])],1):e._e()],1)]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(e){i("jFsl")},null,null);t.default=r.exports},"2MWp":function(e,t){},"2tLV":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("VeYG"),n=i("lGFz"),o=i("0Wrx"),l=i("hR2O"),r=i("Ave/"),s={data:function(){return{activeName:"cars"}},methods:{handleClick:function(e,t){console.log(e,t)}},components:{cars:a.default,carsrecord:n.default,repair:o.default,carred:l.default,carsres:r.default}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"车辆基本信息",name:"cars",lazy:""}},[i("cars",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"车辆驾驶记录",name:"carsRecord",lazy:""}},[i("carsrecord",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"车辆维护",name:"carsRepair",lazy:""}},[i("repair",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"车辆申请",name:"carsRequest",lazy:""}},[i("carsres",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"车辆分配",name:"carsAlot",lazy:""}},[i("carred",{ref:"child"})],1)],1)],1)},staticRenderFns:[]},d=i("VU/8")(s,c,!1,null,null,null);t.default=d.exports},"3CVU":function(e,t){},"41DX":function(e,t){},"4K/P":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o=i("bOdI"),l=i.n(o),r=i("zL8q"),s={data:function(){var e;return e={keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,colors:[],units:[],rules:{producteName:[{required:!0,message:"必填:名称",trigger:"blur"}]},selectSteps:[],steps:[],products:[],dialogTitle:"",currentPage:1,totalCount:-1,process:{name:""},currentRowData:[],product:{producteName:"",specification:"",proType:"",color:"",clientName:"",clientId:"",sysUnitId:0},processModel:{currentSteps:"",productId:0,processName:""},productId:"",currentProgress:[],addProgress:[],updateProgress:[],deleteProgress:[],olderProgress:[],midProduct:[],dialogTableVisible:!1,dialogFormVisible:!1,processVisible:!1},l()(e,"currentRowData",{}),l()(e,"currentIndex",""),l()(e,"renderFunc",function(e,t){return console.log(t),console.log(e),t.workstepName}),l()(e,"detail",{id:0,sid:0,midProductId:0,name:"",quantity:"",mtype:""}),l()(e,"details",[]),l()(e,"currentDeleteData",[]),l()(e,"maxSid",0),l()(e,"clients",[]),l()(e,"specs",[]),l()(e,"depTextColor",""),l()(e,"showOrHidePop",!1),l()(e,"showHidePop",!1),l()(e,"defaultProps",{label:"name",isLeaf:"leaf",children:"child"}),e},mounted:function(){this.initData()},methods:{handleNodeClick:function(e){this.product.clientId=e.id,this.product.clientName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.product.clientId=0,this.product.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(i,a,n){i.id==e&&(t.detail.name=i.name,t.detail.midProductId=i.id)})},addBox:function(){var e=this;if(console.log("asdfadsfasdfasd"),""==this.detail.quantity||void 0==this.detail.quantity)return Object(r.Message)("请输入数量"),!1;if(""==this.detail.name||void 0==this.detail.name)return Object(r.Message)("请选择物料"),!1;if(""===this.detail.sid||0===this.detail.sid)if(this.details.length>0){var t=!1;e.details.forEach(function(i,a,n){i.midProductId==e.detail.midProductId&&(t=!0,i.quantity=parseFloat(e.detail.quantity)+parseFloat(i.quantity))}),t||(this.maxSid+=1,this.detail.sid=this.maxSid,this.detail.mtype="new",this.details.push(this.detail))}else this.detail.sid=1,this.detail.mtype="new",this.maxSid+=1,this.details.push(this.detail);else if(this.details.length)for(var i=0,a=this.details.length;i<a;i++){var n=this.details[i];"odd"===n.type?(this.detail.mtype="update",n.sid==this.detail.sid&&(this.details.splice(i,1),this.details.push(this.detail))):n.sid==this.detail.sid&&(this.details.splice(i,1),this.details.push(this.detail))}this.emptyDetail()},editeDetail:function(e,t){this.detail=t},deleteDetail:function(e,t){console.log("delete");var i=this.details.splice(e,1);"odd"===i[0].mtype&&(i[0].type="delete",this.currentDeleteData.push(i[0])),this.maxSid-=1},emptyDetail:function(){this.detail={id:0,sid:0,midProductId:0,name:"",quantity:"",mtype:""}},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},cancelpre:function(){this.emptypressData(),this.processVisible=!1},initData:function(){var e=this;e.loadData(),this.getRequest("/product/basicdata").then(function(t){if(t&&200==t.status){var i=t.data;e.steps=i.root.steps,e.colors=i.root.colors,e.units=i.root.units,e.specs=i.root.specs;var a=[];i.root.midProducts.forEach(function(e,t,i){a.push({name:e[0],id:e[1]})}),e.midProduct=a,console.log(e.steps)}})},keywordsChange:function(e){""==e&&this.loadData()},handleChange:function(){},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.dialogFormVisible=!0,this.emptyData()},addProcess:function(e){var t=this,i=this;console.log(this.selectSteps),this.processModel.productId=this.productId,this.processModel.processName=this.process.name,console.log(this.product);var a=this.selectSteps.length,o=this.olderProgress.length;if(this.selectSteps.toString()!=this.olderProgress.toString()){if(0==o)for(var l=0;l<a;l++)this.addProgress.push({stepNumber:l+1,step:this.selectSteps[l],stepType:"add"});else if(a>=o){for(var r=0;r<a;r++)for(var s=0;s<o;s++)this.olderProgress[s]!=this.selectSteps[r]&&s==r?this.updateProgress.push({stepNumber:r+1,step:this.selectSteps[r],stepType:"update"}):this.olderProgress[s]==this.selectSteps[r]&&s==r&&this.currentProgress.push({stepNumber:r+1,step:this.selectSteps[r],stepType:"odd"});for(var c=o;c<a;c++)this.addProgress.push({stepNumber:c+1,step:this.selectSteps[c],stepType:"add"})}else if(a<o){for(var d=0;d<a;d++)for(var u=0;u<o;u++)this.olderProgress[u]!=this.selectSteps[d]&&u==d?this.updateProgress.push({stepNumber:d+1,step:this.selectSteps[d],stepType:"update"}):this.olderProgress[u]==this.selectSteps[d]&&u==d&&this.currentProgress.push({stepNumber:u+1,step:this.selectSteps[u],stepType:"odd"});for(var p=a;p<o;p++)this.deleteProgress.push({stepNumber:p+1,step:this.olderProgress[p],stepType:"delete"})}var h=this.currentProgress.concat(this.addProgress,this.updateProgress,this.deleteProgress);this.processModel.currentSteps=n()(h),this.$refs[e].validate(function(e){if(!e)return!1;t.product.preprosess?(t.tableLoading=!0,console.log(t.product),t.postRequest("/productpreprocess/update",t.processModel).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.processVisible=!1,i.loadData(),i.emptypressData())})):(t.tableLoading=!0,console.log(i.product),t.postRequest("/productpreprocess/add",t.processModel).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.processVisible=!1,i.loadData(),i.emptypressData()}}))})}else i.processVisible=!1},emptypressData:function(){this.processModel={currentSteps:"",productId:0,processName:""},this.currentProgress=[],this.addProgress=[],this.updateProgress=[],this.deleteProgress=[],this.olderProgress=[],this.selectSteps=[]},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.product=t,this.currentRowData=_.cloneDeep(t),this.currentIndex=e,delete this.product.clienteleid;var i=this.currentRowData.midMaterials;void 0!=i&&i.length>0&&(i.forEach(function(e,t,i){e.mtype="odd",e.sid=t+1}),this.details=i,this.maxSid=i.length);var a=[],n=[];this.product.specs.length&&this.product.specs.forEach(function(e){a.push(e.id)}),this.product.colors.length&&this.product.colors.forEach(function(e){n.push(e.id)}),this.product.specification=a,this.product.color=n,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var i=this;if(0==this.details.length)return this.$message({type:"info",message:"详情不能为空！"}),!1;var a=_.cloneDeep(this.product);this.details.forEach(function(e,t,a){void 0==e.createDate&&(e.createDate=i.formatDate(new Date))});var n=i.details.concat(i.currentDeleteData),o=this.jsonToString(n);a.midMaterials=o,a.clientId=0,null==a.preprosessId&&(a.preprosessId=0),console.log("productModel++"+a),a.specs&&a.specs.forEach(function(e){a.specification.push(e.id)}),a.colors&&a.colors.forEach(function(e){a.color.push(e.id)}),this.$refs[e].validate(function(e){if(!e)return!1;t.product.id?(t.tableLoading=!0,console.log(t.product),t.postRequest("/product/posAdd",a).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData())})):(t.tableLoading=!0,console.log(i.product),t.postRequest("/product/addNew",a).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData()}}))})},processCancel:function(){this.processVisible=!1},showProcessView:function(e){if(this.process.name=e.producteName+"工序",this.productId=e.id,this.product=e,console.log(e),this.selectSteps=[],this.olderProgress=[],e.preprosess){var t=e.preprosess.process;console.log(t);for(var i=0;i<t.length;i++){var a=t[i];this.selectSteps.push(a.workstep.id),this.olderProgress.push(a.workstep.id)}}this.processVisible=!0},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.producteName+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/product/deletPro?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;console.log("insts"),this.tableLoading=!0,this.getRequest("/product/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.products=a,t.totalCount=i.data.total,t.emptyData()}})},searchEmp:function(){this.loadData()},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.product={producteName:"",specification:"",proType:"",color:"",clientName:"",clientId:""}}},computed:{routes:function(){return this.$store.state.routes}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n      ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),i("el-form",{ref:"addEmpForm",attrs:{model:e.product,rules:e.rules,size:"small","label-width":"90px"}},[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"650px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("div",[i("el-form-item",{attrs:{label:"名称:",prop:"producteName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"名称"},model:{value:e.product.producteName,callback:function(t){e.$set(e.product,"producteName",t)},expression:"product.producteName"}})],1)],1)]),e._v(" "),i("el-col",{attrs:{span:12}},[i("div",[i("el-form-item",{attrs:{label:"型号:",prop:"proType"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品型号"},model:{value:e.product.proType,callback:function(t){e.$set(e.product,"proType",t)},expression:"product.proType"}})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"颜色:",prop:"color"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"",size:"mini",placeholder:"请选择产品颜色"},model:{value:e.product.color,callback:function(t){e.$set(e.product,"color",t)},expression:"product.color"}},e._l(e.colors,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"规格:",prop:"specification"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"",size:"mini",placeholder:"请选择规格"},model:{value:e.product.specification,callback:function(t){e.$set(e.product,"specification",t)},expression:"product.specification"}},e._l(e.specs,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"单位:",prop:"sysUnitId"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择产品颜色"},model:{value:e.product.sysUnitId,callback:function(t){e.$set(e.product,"sysUnitId",t)},expression:"product.sysUnitId"}},e._l(e.units,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"left",padding:"0 0 12px 0"}},[e._v("\n          消耗原料清单:\n        ")]),e._v(" "),i("div",{staticStyle:{width:"100%",border:"1px solid #eeeeee","box-shadow":"darkgrey 3px 3px 2px 2px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("div",[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"mini",placeholder:"请选择"},on:{change:e.matterSelect,clear:e.emptyDetail},model:{value:e.detail.name,callback:function(t){e.$set(e.detail,"name",t)},expression:"detail.name"}},e._l(e.midProduct,function(e){return i("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})}),1)],1)],1)]),e._v(" "),i("el-col",{attrs:{span:12}},[i("div",[i("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[i("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit",type:"number"},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}})],1)],1)])],1),e._v(" "),i("div",{staticStyle:{"text-align":"end"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addBox}},[e._v("添加")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.details,border:"",height:"150"}},[i("el-table-column",{attrs:{prop:"sid",align:"left",label:"序号",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",label:"原料名称",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"比例数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+"个")]}}],null,!1,1904140327)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.editeDetail(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteDetail(t.$index,t.row)}}},[e._v("删除\n                ")])]}}],null,!1,987709478)})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add("addEmpForm")}}},[e._v("确 定")])],1)])],1),e._v(" "),i("el-form",{ref:"processForm",attrs:{model:e.process,rules:e.rules,size:"small","label-width":"90px"}},[i("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.processVisible,width:"600px"},on:{"update:visible":function(t){e.processVisible=t},close:e.cancelpre}},[e.processVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"工序名称"},model:{value:e.process.name,callback:function(t){e.$set(e.process,"name",t)},expression:"process.name"}})],1),e._v(" "),[i("el-transfer",{staticStyle:{"text-align":"left"},attrs:{filterable:"","target-order":"push",props:{key:"id",label:"workstepName"},titles:["工序步骤","工序"],data:e.steps},model:{value:e.selectSteps,callback:function(t){e.selectSteps=t},expression:"selectSteps"}})]],2):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.processVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addProcess("processForm")}}},[e._v("确 定")])],1)])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.products,fit:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"producteName",align:"left",fixed:"",label:"产品名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"specName",width:"220",align:"left",label:"产品规格"}}),e._v(" "),i("el-table-column",{attrs:{prop:"proType",width:"120",align:"left",label:"产品型号"}}),e._v(" "),i("el-table-column",{attrs:{prop:"colorName",width:"120",align:"left",label:"产品颜色"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showProcessView(t.row)}}},[e._v("查看工序\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var d=i("VU/8")(s,c,!1,function(e){i("zh13")},null,null);t.default=d.exports},"4d3/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{productId:[{required:!0,message:"必选:产品名称",trigger:"change"}],proNumber:[{required:!0,message:"必选:数量",trigger:"blur"}]},products:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,product:{proName:"",productId:"",proNumber:"",clientName:"",note:"",clientId:""},deps:[],posts:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pId:"",pName:""}},mounted:function(){this.initData()},methods:{formatSex:function(e,t){return"1"==e.gender?"男":"2"==e.gender?"女":"未知"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.product.clientName=e.name,this.product.clientId=e.id,this.pId=e.id,this.pName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.product.clientName="",this.product.clientId=""},cancelChoos:function(){console.log(this.pName),this.product.clientName=this.pName,this.product.clientId=this.pId},initData:function(){var e=this;e.loadData(),this.getRequest("/finishedProduct/basedata").then(function(t){if(t&&200==t.status){var i=t.data;e.products=i.root.pruducts}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushData:function(){this.dialogTitle="添加",this.emptyEmpData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadData()},showEditView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.product=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.product.name=t.name,this.product.positionId=t.positionId,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.product.id?(t.tableLoading=!0,console.log(t.product),t.postRequest("/finishedProduct/add",t.product).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyEmpData())})):(t.tableLoading=!0,console.log(i.product),t.postRequest("/finishedProduct/add",t.product).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyEmpData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/finishedProduct/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/finishedProduct/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.products=a,t.totalCount=i.data.total,t.emptyEmpData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyEmpData:function(){console.log("+++++_+++++_"),this.product={proName:"",productId:"",proNumber:"",clientName:"",note:"",clientId:""}}},computed:{routes:function(){return this.$store.state.routes}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n      ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("添加")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.product,rules:e.rules,size:"sam","label-width":"90px"}},[i("el-form-item",{attrs:{label:"产品名称:",prop:"productId"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择职位"},model:{value:e.product.productId,callback:function(t){e.$set(e.product,"productId",t)},expression:"product.productId"}},e._l(e.productes,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"客户:",prop:"clientId"}},[i("el-popover",{attrs:{placement:"right",title:"请选择公司",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[i("el-tree",{attrs:{data:e.shops,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),i("div",{style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[i("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",size:"mini",clearable:""},on:{clear:e.clearChoose,blur:e.cancelChoos},model:{value:e.product.clientName,callback:function(t){e.$set(e.product,"clientName",t)},expression:"product.clientName"}})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"产品数量:",prop:"proNumber"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品数量..."},model:{value:e.product.proNumber,callback:function(t){e.$set(e.product,"proNumber",t)},expression:"product.proNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"note"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注..."},model:{value:e.product.note,callback:function(t){e.$set(e.product,"note",t)},expression:"product.note"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.products,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"proName",align:"left",fixed:"",label:"产品名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"proNumber",align:"left",fixed:"",label:"产品数量",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(e){i("xok9")},null,null);t.default=r.exports},"5xx1":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{tempPlan:[],confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midConfirms:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){this.initData()},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(i,a){console.log(i.id),i.id==e&&(t.middleProduct.utilname=i.name)})},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var i="",a=e.plant;return this.positions.forEach(function(e,t,n){a.forEach(function(t,a,n){e.id==t&&(i+=e.name+" , ")})}),i},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midProgressRecieve/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midProgressRecieve/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;a.forEach(function(e,t,i){e.plant=e.plant.split(",")}),t.midConfirms=a,t.totalCount=i.data.total}})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midConfirms,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",prop:"name",fixed:"",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",prop:"operatorName",label:"记录人",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDate")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("41DX")},null,null);t.default=o.exports},"6+aJ":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={render:function(){var e=this.$createElement;return(this._self._c||e)("section",[this._v("\n  欢迎登录\n")])},staticRenderFns:[]};var n=i("VU/8")({data:function(){return{}}},a,!1,function(e){i("QWIT")},"data-v-01b00afd",null);t.default=n.exports},"6HRJ":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bOdI"),n=i.n(a),o=i("zL8q"),l={data:function(){var e;return e={lastPlanDetail:{startNo:"J00000001",endNo:"J00000100"},lastPlanmarketPlanDetails:[{startNo:"J00000001",endNo:"J00000100"},{startNo:"K00000001",endNo:"K00000100"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-7776e6),e.$emit("pick",[i,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],plans:[],clients:[],units:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,detail:{id:0,clientId:0,clientName:"",quantity:"",note:"",productName:"",proId:"",specification:"",mark:"",productNo:""},dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择产品",selectMaterial:{},selectedM:{},filterText:""},n()(e,"lastPlanDetail",""),n()(e,"crrentSelectShop",{}),n()(e,"isCurrentShop",!0),n()(e,"isprarent",!1),n()(e,"sugestParentstartNo",""),n()(e,"sugestParentEndNo",""),n()(e,"sugestSelfEndNumbers",""),n()(e,"sugestSelfNumbers",""),n()(e,"currentParentShop",{}),n()(e,"currentShop",{}),n()(e,"lastPlanDetail",{startNo:"",endNo:""}),n()(e,"serialNuberDeleted",[]),n()(e,"serialNuberUpdate",[]),n()(e,"serialNuberList",[]),n()(e,"specslist",[]),e},mounted:function(){this.initData()},methods:{formatSex:function(e,t){var i=parseInt(e.specification),a="",n=e.product.specs;return n&&n.forEach(function(e){e.id==i&&(a=e.name)}),a},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectMaterial.id>0){var i=this.selectMaterial.producteName+""+this.selectMaterial.specName+";";this.$confirm("您当前选择了"+i+"确认选择该产品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(){var e=this.selectMaterial;console.log(e),this.detail.productName=e.producteName,this.detail.proId=e.id;var t=[],i=e.specs;i.length&&i.forEach(function(e){t.push(e.id)}),this.detail.specification="",this.specslist=e.specs||[],this.detail.productNo=e.proType,this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectMaterial={},this.selectedM={}},formatStatus:function(e,t){return 1==e.materialType?"已确认":"未确认"},selectType:function(e,t,i){console.log("changne"),this.types=e,2==e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(i,a,n){i.id==e&&(t.detail.unitId=i.unitId,t.detail.unitName=i.unitName,t.detail.name=i.name,t.detail.materialId=i.id,t.detail.specifications=i.specs)})},addBox:function(){var e=this;if(console.log("asdfadsfasdfasd"),""==this.detail.quantity||void 0==this.detail.quantity)return Object(o.Message)("请输入数量"),!1;if(""==this.detail.name||void 0==this.detail.name)return Object(o.Message)("请选择产品！"),!1;if(""==this.detail.sid)if(this.marketPlanDetails.length>0){var t=!1;this.marketPlanDetails.forEach(function(i,a,n){i.materialId==e.detail.materialId&&i.mtype==e.types&&(t=!0,i.quantity=parseFloat(e.detail.quantity)+parseFloat(i.quantity))}),t||(this.maxSid+=1,this.detail.sid=this.maxSid,this.detail.type="new",this.marketPlanDetails.push(this.detail))}else this.detail.sid=1,this.detail.type="new",this.detail.mtype=this.types,this.maxSid+=1,this.marketPlanDetails.push(this.detail);else if(this.marketPlanDetails.length)for(var i=0,a=this.marketPlanDetails.length;i<a;i++){var n=this.marketPlanDetails[i];"odd"===n.type?(this.detail.type="update",n.sid==this.detail.sid&&(this.marketPlanDetails.splice(i,1),this.marketPlanDetails.push(this.detail))):n.sid==this.detail.sid&&(this.marketPlanDetails.splice(i,1),this.marketPlanDetails.push(this.detail))}this.detail.marketPlanSerialNumber=e.marketPlanSerialNumber,this.clearSerialNumbers(),this.emptyDetail()},clearSerialNumbers:function(){this.marketPlanSerialNumber=[],this.marketPlanSerialNumber.push({sid:1,id:0,startNo:"",endNo:"",type:"new",note:""})},editeDetail:function(e,t){this.detail=t},deleteDetail:function(e,t){console.log("delete");var i=this.marketPlanDetails.splice(e,1);"odd"===i[0].type&&(i[0].type="delete",this.currentDeleteData.push(i[0])),this.maxSid-=1},emptyDetail:function(){this.detail={sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",specifications:"",type:""}},initData:function(){var e=this;e.loadData(),this.getRequest("/productionplan/basedata").then(function(t){if(t&&200==t.status){var i=t.data,a=[];i.root.clients.forEach(function(e,t,i){var n=e[0],o=e[1],l=e[2];a.push({name:n,id:o,parentClientId:l,parentName:e[3],address:e[4],phone:e[5],abbreviation:e[6]})}),e.clients=a,e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var n=[];i.root.products.forEach(function(e,t,i){n.push({id:e[0],producteName:e[1],specification:e[2],proType:e[3],mark:e[4],color:e[5]})}),e.products=n}})},keywordsChange:function(e){""==e&&this.loadData()},keywordsMaterialChange:function(e){""==e&&this.loadMaterial()},handleNodeClick:function(e){this.tableLoading=!0,this.crrentSelectShop=e,this.detail.clientId=e.id,this.detail.clientName=e.name,this.detail.abbrName=e.abbreviation,this.showOrHidePop=!1,this.depTextColor="#606266"},showCurrentNo:function(){this.isprarent?this.isprarent=!1:this.isprarent=!0},changeNO:function(){this.isCurrentShop?(this.lastPlanDetail=this.currentShop,this.isCurrentShop=!1):(this.lastPlanDetail=this.currentParentShop,this.isCurrentShop=!0)},getCurrentPlans:function(){var e=this;void 0==this.crrentSelectShop.id?this.$message({type:"info",message:"请选择公司"}):void 0==this.detail.proId||""==this.detail.proId?this.$message({type:"info",message:"请选择产品"}):this.getRequest("/sales/getPlanDetails?clientId="+this.crrentSelectShop.id+"&productId="+this.detail.proId).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var i=t.data;if(e.currentParentShop=i.root.parent,e.currentParentShop.length){var a=e.currentParentShop.length-1;e.currentParentShop=e.currentParentShop[a];var n=e.currentParentShop[a].endNo;e.sugestParentstartNo=e.sugestStartNo(n,1)}else e.sugestParentstartNo="00000001",e.currentParentShop={};if(""!=e.detail.quantity&&(e.sugestParentEndNo=e.sugestStartNo(e.currentParentShop[a].endNo,parseInt(e.detail.quantity)+1)),e.setStartSerialNo(e.sugestParentstartNo,e.sugestParentEndNo.endNo,"parent"),e.lastPlanDetail=e.currentParentShop,e.currentShop=i.root.self,e.currentShop.length){var o=e.currentShop.length-1;e.currentShop=e.currentShop[o];var l=e.currentShop[o].endNo;e.sugestSelfNumbers=e.sugestStartNo(l,1)}else e.sugestSelfNumbers="00000001",e.currentShop={}}})},setEndNumber:function(e){console.log(e);if(this.isCurrentShop)if(this.lastPlanDetail=this.currentShop,this.currentShop.length){var t=this.currentShop.length-1;this.sugestSelfEndNumbers=this.sugestStartNo(this.currentShop[t].endNo,parseInt(e)+1),this.marketPlanSerialNumber[0].startNo=this.sugestSelfNumbers,this.marketPlanSerialNumber[0].endNo=this.sugestSelfEndNumbers,this.marketPlanSerialNumber[0].note="",this.marketPlanSerialNumber[0].clientId=this.crrentSelectShop.id,this.marketPlanSerialNumber[0].productId=this.detail.proId}else{var i=this.sugestSelfNumbers;this.setCurrentEndData(i,e)}else if(this.lastPlanDetail=this.currentParentShop,this.currentParentShop.length){var a=this.currentParentShop.length-1;this.sugestParentEndNo=this.sugestStartNo(this.currentParentShop[a].endNo,parseInt(e)+1),this.marketPlanSerialNumber[0].startNo=this.sugestParentstartNo,this.marketPlanSerialNumber[0].endNo=this.sugestParentEndNo,this.marketPlanSerialNumber[0].note="",this.marketPlanSerialNumber[0].clientId=this.crrentSelectShop.id,this.marketPlanSerialNumber[0].productId=this.detail.proId}else{i=this.currentParentShop;this.setCurrentEndData(i,e)}},setCurrentEndData:function(e,t){var i=e.length,a=parseInt(e)+parseInt(t),n=i-a.toString().length;if(n)for(var o=0;o<n;o++)a="0"+a;this.marketPlanSerialNumber[0].endNo=a},sugestStartNo:function(e,t){var i=function(e,t){if(t=t||!1,"string"==typeof e){var i=e.match(t?/[0-9]\d{1,}/g:/\d{1,}/g);return console.log(i),i.map(function(e){return e})}return[]},a=e.indexOf(i(e)[0]),n=e.substr(0,a),o=e.substr(a+i(e)[0].length,e.length-1),l=(i(e)[0].length,parseInt(i(e)[0])+t),r=l-l.toString().length;if(r)for(var s=0;s<r;s++)l+="0";return n+l+o},setStartSerialNo:function(e,t,i){this.marketPlanSerialNumber.length&&(this.marketPlanSerialNumber[0].startNo=e,this.marketPlanSerialNumber[0].endNo=t,this.marketPlanSerialNumber[0].note="")},clearChoose:function(){this.detail.clientId=0,this.detail.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(i,a){i.id==e&&(console.log(i.id),t.detail.unitName=i.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){this.dialogTitle="郑铁公司销售单";this.marketPlanSerialNumber=[],this.marketPlanSerialNumber.push(this.serialNumber),this.dialogFormVisible=!0},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(e,t){console.log(t);if(this.dialogTitle="编辑信息",this.detail=t,this.plan.createDate=t.createDate,this.specslist=t.product.specs,void 0!=t.specification&&t.specification.length){this.detail.specification=t.specification.split(",");var i=[];this.detail.specification.forEach(function(e,t){i.push(parseInt(e))}),this.detail.specification=i}delete this.detail.client,delete this.detail.editer,delete this.detail.product,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var i=this,a=_.cloneDeep(this.detail);this.$refs[e].validate(function(e){if(!e)return!1;t.detail.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/sales/update",a).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData(),i.emptyDetail(),i.clearSerialNumbers())})):(t.tableLoading=!0,0!=t.plan.clientId&&""!=t.plan.clientId||(t.plan.clientId=0),console.log(a),t.postRequest("/sales/add",a).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData(),i.emptyDetail(),i.clearSerialNumbers()}}))})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/product/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.materialList=a,t.totalMaterialCount=i.data.total,t.dialogMaterialVisible=!0}})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/sales/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/sales/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.plans=a,t.totalCount=i.data.total,t.emptyData()}})},emptyData:function(){this.marketPlanDetails=[],this.plan={materialType:"",notes:"",serialNumber:"",clientId:0,clientName:""}}},computed:{routes:function(){return this.$store.state.routes}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("\n        添加\n      ")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.detail,rules:e.rules,size:"mini","label-width":"90px"}},[i("div",{staticStyle:{border:"1px solid #eeeeee"}},[i("div",{staticStyle:{"background-color":"bisque"}},[i("div",{staticStyle:{"text-align":"left"}},[e._v("\n              客户信息\n            ")]),e._v(" "),i("el-row",[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"客户:",prop:"clientId"}},[i("el-popover",{attrs:{placement:"right",title:"客户信息",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[i("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),i("el-tree",{attrs:{data:e.clients,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),i("div",{ref:"tree2",staticStyle:{width:"200px",height:"28px",display:"inline-flex","justify-content":"space-between","background-color":"#fff","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference","filter-node-method":e.filterNode},on:{click:e.showDepTree},slot:"reference"},[i("div",[e._v(e._s(e.detail.clientName))]),e._v(" "),i("div",{staticClass:"el-icon-arrow-down",staticStyle:{color:"#606266"},attrs:{alt:"hehehehe"},on:{click:e.clearChoose}})])],1)],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{"background-color":"rgb(175, 218, 136)"}},[i("div",{staticStyle:{"text-align":"left"}},[e._v("\n              产品信息\n            ")]),e._v(" "),i("el-row",[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"名称:",prop:"productName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品名称。。。"},on:{focus:e.showMaterial},model:{value:e.detail.productName,callback:function(t){e.$set(e.detail,"productName",t)},expression:"detail.productName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"规格:",prop:"specification"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择规格"},model:{value:e.detail.specification,callback:function(t){e.$set(e.detail,"specification",t)},expression:"detail.specification"}},e._l(e.specslist,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"型号:",prop:"productNo"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"型号"},model:{value:e.detail.productNo,callback:function(t){e.$set(e.detail,"productNo",t)},expression:"detail.productNo"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"标记:",prop:"mark"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"标记"},model:{value:e.detail.mark,callback:function(t){e.$set(e.detail,"mark",t)},expression:"detail.mark"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[i("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.detail.notes,callback:function(t){e.$set(e.detail,"notes",t)},expression:"detail.notes"}})],1)],1)],1),e._v(" "),i("div")],1)])])],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?i("div",{staticStyle:{width:"100%"}},[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[i("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),i("el-table-column",{attrs:{prop:"producteName",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"specification",align:"left",fixed:"",label:"规格",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"proType",align:"left",fixed:"",label:"型号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"color",align:"left",fixed:"",label:"颜色",width:"120"}})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.plans,border:""}},[i("el-table-column",{attrs:{align:"left",label:"客户名",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.client.name)+"\n ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"产品名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                 "+e._s(t.row.product.producteName)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+"枚")]}}])}),e._v(" "),i("el-table-column",{attrs:{formatter:e.formatSex,align:"left",label:"规格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.product.producteName)+"\n         ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"productNo",align:"left",label:"型号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var s=i("VU/8")(l,r,!1,function(e){i("iy9v")},null,null);t.default=s.exports},"7vo2":function(e,t){},"Ave/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o={data:function(){return{showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},defaultData:{label:"plateNumber",isLeaf:"leaf",children:"children"},depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{business:[{required:!0,message:"必填:事由",trigger:"blur"}],carNo:[{required:!0,message:"必选:车辆",trigger:"blur"}]},carRequests:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],carRequest:{carNo:"",business:"",preStartDate:"",duration:"",preEndDate:"",notes:""},assigned:{carNo:"",note:"",requestId:""},dialogFormVisible:!1,dialogAlotVisible:!1,currentRowData:{},currentIndex:"",pickerOptions1:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},mounted:function(){this.initData();var e=this;this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var i=t.data;console.log(i),e.cars=i.root.cars}})},methods:{cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},searchEmp:function(){this.loadData()},formatStatus:function(e,t){return"UN_MANAGED"==e.requestStatus?"未分配":"MANAGED"==e.requestStatus?"已分配":"REFUSE"==e.requestStatus?"已拒绝":"已完成"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},showAllotTree:function(){this.showHidePop=!this.showHidePop},handleAskClick:function(e){this.assigned.carNo=e.plateNumber,this.showHidePop=!1,this.depTextColor="#606266"},handleNodeClick:function(e){this.carRequest.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.carRequest=t,this.carRequest.preStartDate=this.formatDate(t.preStartDate),this.carRequest.preEndDate=this.formatDate(t.preEndDate),this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,delete this.carRequest.emp,delete this.carRequest.vcif,this.dialogFormVisible=!0},showAllotionView:function(e){console.log(e),this.dialogTitle="分配车辆",this.carRequest=e,this.dialogAlotVisible=!0},allocate:function(e){var t=this;this.dialogAlotVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(i.assigned),t.assigned.requestId=t.carRequest.id,t.postRequest("/vehicleAllot/add",t.assigned).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogAlotVisible=!1,i.loadData(),i.emptyAltData()}})})},denied:function(e){var t=this;this.dialogAlotVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(i.assigned),t.assigned.requestId=t.carRequest.id,t.postRequest("/vehicleAllot/refuse",t.assigned).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogAlotVisible=!1,i.loadData(),i.emptyAltData()}})})},add:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.carRequest.id?(t.tableLoading=!0,console.log(t.carRequest),t.postRequest("/askedvehicle/addask",t.carRequest).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData())})):(t.tableLoading=!0,console.log(i.carRequest),t.postRequest("/askedvehicle/addask",t.carRequest).then(function(e){(i.tableLoading=!1,e&&200==e.status)&&(e.data.success&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData()))}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.plateNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/askedvehicle/deletask?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/askedvehicle/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.carRequests=a,t.totalCount=i.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.carRequest={carNo:"",business:"",preStartDate:"",preEndDate:"",duration:"",notes:""}},emptyAltData:function(){this.assigned={carNo:"",note:"",requestId:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n  \n        ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.carRequest,rules:e.rules,size:"small","label-width":"90px"}},[i("el-form-item",{attrs:{label:"可选车辆:",prop:"carNo"}},[i("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"manual"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[i("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),i("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRequest.carNo)+"\n            ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"用车时长:",prop:"duration"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"预计用车多少天..."},model:{value:e.carRequest.duration,callback:function(t){e.$set(e.carRequest,"duration",t)},expression:"carRequest.duration"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"申请事由:",prop:"business"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"出差事项..."},model:{value:e.carRequest.business,callback:function(t){e.$set(e.carRequest,"business",t)},expression:"carRequest.business"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"出行时间:",prop:"preStartDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date","picker-options":e.pickerOptions1,placeholder:"出行时间"},model:{value:e.carRequest.preStartDate,callback:function(t){e.$set(e.carRequest,"preStartDate",t)},expression:"carRequest.preStartDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"返回时间:",prop:"preEndDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date","picker-options":e.pickerOptions1,placeholder:"返回时间"},model:{value:e.carRequest.preEndDate,callback:function(t){e.$set(e.carRequest,"preEndDate",t)},expression:"carRequest.preEndDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRequest.notes,callback:function(t){e.$set(e.carRequest,"notes",t)},expression:"carRequest.notes"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogAlotVisible,width:"500px"},on:{"update:visible":function(t){e.dialogAlotVisible=t},close:e.emptyAltData}},[i("div",{staticStyle:{width:"100%"}},[e.dialogAlotVisible?i("el-form",{ref:"addNewRecord",attrs:{model:e.assigned,rules:e.rules,size:"small","label-width":"90px"}},[i("el-form-item",{attrs:{label:"备注:",prop:"note"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",rows:"5",cols:"33",placeholder:"备注..."},model:{value:e.assigned.note,callback:function(t){e.$set(e.assigned,"note",t)},expression:"assigned.note"}})],1)],1):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogAlotVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.denied("addNewRecord")}}},[e._v("拒绝申请")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.allocate("addNewRecord")}}},[e._v("同意申请")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carRequests,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",fixed:"",label:"车牌号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.vcif.plateNumber))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"preStartDate",width:"120",align:"left",label:"预计出行时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.preStartDate)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"preEndDate",width:"120",align:"left",label:"预计返回时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.preEndDate)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"duration",align:"left",label:"持续时间",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"business",align:"left",label:"事由",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",width:"220",align:"left",label:"备注"}}),e._v(" "),i("el-table-column",{attrs:{prop:"operatorName",width:"220",align:"left",label:"执行人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"empName",width:"220",align:"left",label:"申请人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"requestStatus",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return["UN_MANAGED"==t.row.requestStatus?i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showAllotionView(t.row)}}},[e._v("分配车辆\n        ")]):e._e(),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(e){i("ev96")},null,null);t.default=r.exports},BiC4:function(e,t,i){"use strict";(function(e,t){var a,n=i("OvRC"),o=i.n(n),l=i("mvHQ"),r=i.n(l),s=i("C4MV"),c=i.n(s),d=i("pFYg"),u=i.n(d);!function(a){if("object"===("undefined"==typeof exports?"undefined":u()(exports))&&void 0!==t)t.exports=a();else if("function"==typeof define&&i("nErl"))define([],a);else{("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).SockJS=a()}}(function(){return function e(t,i,n){function o(r,s){if(!i[r]){if(!t[r]){if(!s&&("function"==typeof a&&a))return a(r,!0);if(l)return l(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){var i=t[r][1][e];return o(i||e)},d,d.exports,e,t,i,n)}return i[r].exports}for(var l="function"==typeof a&&a,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,i,a){(function(e){var a=t("./transport-list");i.exports=t("./main")(a),"_sockjs_onload"in e&&setTimeout(e._sockjs_onload,1)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":14,"./transport-list":16}],2:[function(e,t,i){var a=e("inherits"),n=e("./event");function o(){n.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}a(o,n),t.exports=o},{"./event":4,inherits:56}],3:[function(e,t,i){var a=e("inherits"),n=e("./eventtarget");function o(){n.call(this)}a(o,n),o.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},o.prototype.once=function(e,t){var i=this,a=!1;this.on(e,function n(){i.removeListener(e,n),a||(a=!0,t.apply(this,arguments))})},o.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var i=arguments.length,a=new Array(i-1),n=1;n<i;n++)a[n-1]=arguments[n];for(var o=0;o<t.length;o++)t[o].apply(this,a)}},o.prototype.on=o.prototype.addListener=n.prototype.addEventListener,o.prototype.removeListener=n.prototype.removeEventListener,t.exports.EventEmitter=o},{"./eventtarget":5,inherits:56}],4:[function(e,t,i){function a(e){this.type=e}a.prototype.initEvent=function(e,t,i){return this.type=e,this.bubbles=t,this.cancelable=i,this.timeStamp=+new Date,this},a.prototype.stopPropagation=function(){},a.prototype.preventDefault=function(){},a.CAPTURING_PHASE=1,a.AT_TARGET=2,a.BUBBLING_PHASE=3,t.exports=a},{}],5:[function(e,t,i){function a(){this._listeners={}}a.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var i=this._listeners[e];-1===i.indexOf(t)&&(i=i.concat([t])),this._listeners[e]=i},a.prototype.removeEventListener=function(e,t){var i=this._listeners[e];if(i){var a=i.indexOf(t);-1===a||(i.length>1?this._listeners[e]=i.slice(0,a).concat(i.slice(a+1)):delete this._listeners[e])}},a.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,i=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,i),t in this._listeners)for(var a=this._listeners[t],n=0;n<a.length;n++)a[n].apply(this,i)},t.exports=a},{}],6:[function(e,t,i){var a=e("inherits"),n=e("./event");function o(e){n.call(this),this.initEvent("message",!1,!1),this.data=e}a(o,n),t.exports=o},{"./event":4,inherits:56}],7:[function(e,t,i){var a=e("json3"),n=e("./utils/iframe");function o(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}o.prototype._transportClose=function(e,t){n.postMessage("c",a.stringify([e,t]))},o.prototype._transportMessage=function(e){n.postMessage("t",e)},o.prototype._send=function(e){this._transport.send(e)},o.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},t.exports=o},{"./utils/iframe":47,json3:57}],8:[function(e,t,i){(function(i){var a=e("./utils/url"),n=e("./utils/event"),o=e("json3"),l=e("./facade"),r=e("./info-iframe-receiver"),s=e("./utils/iframe"),c=e("./location"),d=function(){};"production"!==i.env.NODE_ENV&&(d=e("debug")("sockjs-client:iframe-bootstrap")),t.exports=function(e,t){var i,u={};t.forEach(function(e){e.facadeTransport&&(u[e.facadeTransport.transportName]=e.facadeTransport)}),u[r.transportName]=r,e.bootstrap_iframe=function(){var t;s.currentWindowId=c.hash.slice(1);n.attachEvent("message",function(n){if(n.source===parent&&(void 0===i&&(i=n.origin),n.origin===i)){var r;try{r=o.parse(n.data)}catch(e){return void d("bad json",n.data)}if(r.windowId===s.currentWindowId)switch(r.type){case"s":var p;try{p=o.parse(r.data)}catch(e){d("bad json",r.data);break}var h=p[0],f=p[1],m=p[2],g=p[3];if(d(h,f,m,g),h!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+h+'", the iframe: "'+e.version+'".');if(!a.isOriginEqual(m,c.href)||!a.isOriginEqual(g,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+m+", "+g+")");t=new l(new u[f](m,g));break;case"m":t._send(r.data);break;case"c":t&&t._close(),t=null}}}),s.postMessage("s")}}}).call(this,{env:{}})},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:54,json3:57}],9:[function(e,t,i){(function(i){var a=e("events").EventEmitter,n=e("inherits"),o=e("json3"),l=e("./utils/object"),r=function(){};function s(e,t){a.call(this);var i=this,n=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var a,s;if(200===e){if(s=+new Date-n,t)try{a=o.parse(t)}catch(e){r("bad json",t)}l.isObject(a)||(a={})}i.emit("finish",a,s),i.removeAllListeners()})}"production"!==i.env.NODE_ENV&&(r=e("debug")("sockjs-client:info-ajax")),n(s,a),s.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=s}).call(this,{env:{}})},{"./utils/object":49,debug:54,events:3,inherits:56,json3:57}],10:[function(e,t,i){var a=e("inherits"),n=e("events").EventEmitter,o=e("json3"),l=e("./transport/sender/xhr-local"),r=e("./info-ajax");function s(e){var t=this;n.call(this),this.ir=new r(e,l),this.ir.once("finish",function(e,i){t.ir=null,t.emit("message",o.stringify([e,i]))})}a(s,n),s.transportName="iframe-info-receiver",s.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},t.exports=s},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:56,json3:57}],11:[function(t,i,a){(function(e,a){var n=t("events").EventEmitter,o=t("inherits"),l=t("json3"),r=t("./utils/event"),s=t("./transport/iframe"),c=t("./info-iframe-receiver"),d=function(){};function u(e,t){var i=this;n.call(this);var o=function(){var a=i.ifr=new s(c.transportName,t,e);a.once("message",function(e){if(e){var t;try{t=l.parse(e)}catch(t){return d("bad json",e),i.emit("finish"),void i.close()}var a=t[0],n=t[1];i.emit("finish",a,n)}i.close()}),a.once("close",function(){i.emit("finish"),i.close()})};a.document.body?o():r.attachEvent("load",o)}"production"!==e.env.NODE_ENV&&(d=t("debug")("sockjs-client:info-iframe")),o(u,n),u.enabled=function(){return s.enabled()},u.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},i.exports=u}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:54,events:3,inherits:56,json3:57}],12:[function(e,t,i){(function(i){var a=e("events").EventEmitter,n=e("inherits"),o=e("./utils/url"),l=e("./transport/sender/xdr"),r=e("./transport/sender/xhr-cors"),s=e("./transport/sender/xhr-local"),c=e("./transport/sender/xhr-fake"),d=e("./info-iframe"),u=e("./info-ajax"),p=function(){};function h(e,t){p(e);var i=this;a.call(this),setTimeout(function(){i.doXhr(e,t)},0)}"production"!==i.env.NODE_ENV&&(p=e("debug")("sockjs-client:info-receiver")),n(h,a),h._getReceiver=function(e,t,i){return i.sameOrigin?new u(t,s):r.enabled?new u(t,r):l.enabled&&i.sameScheme?new u(t,l):d.enabled()?new d(e,t):new u(t,c)},h.prototype.doXhr=function(e,t){var i=this,a=o.addPath(e,"/info");p("doXhr",a),this.xo=h._getReceiver(e,a,t),this.timeoutRef=setTimeout(function(){p("timeout"),i._cleanup(!1),i.emit("finish")},h.timeout),this.xo.once("finish",function(e,t){p("finish",e,t),i._cleanup(!0),i.emit("finish",e,t)})},h.prototype._cleanup=function(e){p("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},h.prototype.close=function(){p("close"),this.removeAllListeners(),this._cleanup(!1)},h.timeout=8e3,t.exports=h}).call(this,{env:{}})},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:54,events:3,inherits:56}],13:[function(t,i,a){(function(e){i.exports=e.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(t,i,a){(function(e,a){t("./shims");var n,o=t("url-parse"),l=t("inherits"),r=t("json3"),s=t("./utils/random"),c=t("./utils/escape"),d=t("./utils/url"),u=t("./utils/event"),p=t("./utils/transport"),h=t("./utils/object"),f=t("./utils/browser"),m=t("./utils/log"),g=t("./event/event"),v=t("./event/eventtarget"),b=t("./location"),y=t("./event/close"),x=t("./event/trans-message"),w=t("./info-receiver"),_=function(){};function k(e,t,i){if(!(this instanceof k))return new k(e,t,i);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");v.call(this),this.readyState=k.CONNECTING,this.extensions="",this.protocol="",(i=i||{}).protocols_whitelist&&m.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=i.transports,this._transportOptions=i.transportOptions||{};var a=i.sessionId||8;if("function"==typeof a)this._generateSessionId=a;else{if("number"!=typeof a)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return s.string(a)}}this._server=i.server||s.numberString(1e3);var n=new o(e);if(!n.host||!n.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(n.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==n.protocol&&"https:"!==n.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+n.protocol+"' is not allowed.");var l="https:"===n.protocol;if("https"===b.protocol&&!l)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var r=t.sort();r.forEach(function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<r.length-1&&e===r[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")});var c=d.getOrigin(b.href);this._origin=c?c.toLowerCase():null,n.set("pathname",n.pathname.replace(/\/+$/,"")),this.url=n.href,_("using url",this.url),this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:d.isOriginEqual(this.url,b.href),sameScheme:d.isSchemeEqual(this.url,b.href)},this._ir=new w(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function S(e){return 1e3===e||e>=3e3&&e<=4999}"production"!==e.env.NODE_ENV&&(_=t("debug")("sockjs-client:main")),l(k,v),k.prototype.close=function(e,t){if(e&&!S(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==k.CLOSING&&this.readyState!==k.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},k.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===k.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===k.OPEN&&this._transport.send(c.quote(e))},k.version=t("./version"),k.CONNECTING=0,k.OPEN=1,k.CLOSING=2,k.CLOSED=3,k.prototype._receiveInfo=function(e,t){if(_("_receiveInfo",t),this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=h.extend(e,this._urlInfo),_("info",e);var i=n.filterToEnabled(this._transportsWhitelist,e);this._transports=i.main,_(this._transports.length+" enabled transports"),this._connect()}else this._close(1002,"Cannot connect to server")},k.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(_("attempt",e.transportName),e.needBody&&(!a.document.body||void 0!==a.document.readyState&&"complete"!==a.document.readyState&&"interactive"!==a.document.readyState))return _("waiting for body"),this._transports.unshift(e),void u.attachEvent("load",this._connect.bind(this));var t=this._rto*e.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t),_("using timeout",t);var i=d.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),n=this._transportOptions[e.transportName];_("transport url",i);var o=new e(i,this._transUrl,n);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},k.prototype._transportTimeout=function(){_("_transportTimeout"),this.readyState===k.CONNECTING&&this._transportClose(2007,"Transport timed out")},k.prototype._transportMessage=function(e){_("_transportMessage",e);var t,i=this,a=e.slice(0,1),n=e.slice(1);switch(a){case"o":return void this._open();case"h":return this.dispatchEvent(new g("heartbeat")),void _("heartbeat",this.transport)}if(n)try{t=r.parse(n)}catch(e){_("bad json",n)}if(void 0!==t)switch(a){case"a":Array.isArray(t)&&t.forEach(function(e){_("message",i.transport,e),i.dispatchEvent(new x(e))});break;case"m":_("message",this.transport,t),this.dispatchEvent(new x(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}else _("empty payload",n)},k.prototype._transportClose=function(e,t){_("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),S(e)||2e3===e||this.readyState!==k.CONNECTING?this._close(e,t):this._connect()},k.prototype._open=function(){_("_open",this._transport.transportName,this.readyState),this.readyState===k.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=k.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new g("open")),_("connected",this.transport)):this._close(1006,"Server lost session")},k.prototype._close=function(e,t,i){_("_close",this.transport,e,t,i,this.readyState);var a=!1;if(this._ir&&(a=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===k.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=k.CLOSING,setTimeout(function(){this.readyState=k.CLOSED,a&&this.dispatchEvent(new g("error"));var n=new y("close");n.wasClean=i||!1,n.code=e||1e3,n.reason=t,this.dispatchEvent(n),this.onmessage=this.onclose=this.onerror=null,_("disconnected")}.bind(this),0)},k.prototype.countRTO=function(e){return e>100?4*e:300+e},i.exports=function(e){return n=p(e),t("./iframe-bootstrap")(k,e),k}}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:54,inherits:56,json3:57,"url-parse":61}],15:[function(e,t,i){var a,n=Array.prototype,o=Object.prototype,l=Function.prototype,r=String.prototype,s=n.slice,d=o.toString,p=function(e){return"[object Function]"===o.toString.call(e)},h=function(e){return"[object String]"===d.call(e)},f=c.a&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();a=f?function(e,t,i,a){!a&&t in e||c()(e,t,{configurable:!0,enumerable:!1,writable:!0,value:i})}:function(e,t,i,a){!a&&t in e||(e[t]=i)};var m=function(e,t,i){for(var n in t)o.hasOwnProperty.call(t,n)&&a(e,n,t[n],i)},g=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function v(){}m(l,{bind:function(e){var t=this;if(!p(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var i=s.call(arguments,1),a=Math.max(0,t.length-i.length),n=[],o=0;o<a;o++)n.push("$"+o);var l=Function("binder","return function ("+n.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof l){var a=t.apply(this,i.concat(s.call(arguments)));return Object(a)===a?a:this}return t.apply(e,i.concat(s.call(arguments)))});return t.prototype&&(v.prototype=t.prototype,l.prototype=new v,v.prototype=null),l}}),m(Array,{isArray:function(e){return"[object Array]"===d.call(e)}});var b,y,x,w=Object("a"),_="a"!==w[0]||!(0 in w);m(n,{forEach:function(e){var t=g(this),i=_&&h(this)?this.split(""):t,a=arguments[1],n=-1,o=i.length>>>0;if(!p(e))throw new TypeError;for(;++n<o;)n in i&&e.call(a,i[n],n,t)}},(b=n.forEach,y=!0,x=!0,b&&(b.call("foo",function(e,t,i){"object"!==(void 0===i?"undefined":u()(i))&&(y=!1)}),b.call([1],function(){x="string"==typeof this},"x")),!(b&&y&&x)));var k=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);m(n,{indexOf:function(e){var t=_&&h(this)?this.split(""):g(this),i=t.length>>>0;if(!i)return-1;var a,n,o=0;for(arguments.length>1&&(a=arguments[1],(n=+a)!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))),o=n),o=o>=0?o:Math.max(0,i+o);o<i;o++)if(o in t&&t[o]===e)return o;return-1}},k);var S,D=r.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(S=void 0===/()??/.exec("")[1],r.split=function(e,t){var i=this;if(void 0===e&&0===t)return[];if("[object RegExp]"!==d.call(e))return D.call(this,e,t);var a,o,l,r,s=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),u=0;for(e=new RegExp(e.source,c+"g"),i+="",S||(a=new RegExp("^"+e.source+"$(?!\\s)",c)),t=void 0===t?-1>>>0:t>>>0;(o=e.exec(i))&&!((l=o.index+o[0].length)>u&&(s.push(i.slice(u,o.index)),!S&&o.length>1&&o[0].replace(a,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)}),o.length>1&&o.index<i.length&&n.push.apply(s,o.slice(1)),r=o[0].length,u=l,s.length>=t));)e.lastIndex===o.index&&e.lastIndex++;return u===i.length?!r&&e.test("")||s.push(""):s.push(i.slice(u)),s.length>t?s.slice(0,t):s}):"0".split(void 0,0).length&&(r.split=function(e,t){return void 0===e&&0===t?[]:D.call(this,e,t)});var N=r.substr,P="".substr&&"b"!=="0b".substr(-1);m(r,{substr:function(e,t){return N.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},P)},{}],16:[function(e,t,i){t.exports=[e("./transport/websocket"),e("./transport/xhr-streaming"),e("./transport/xdr-streaming"),e("./transport/eventsource"),e("./transport/lib/iframe-wrap")(e("./transport/eventsource")),e("./transport/htmlfile"),e("./transport/lib/iframe-wrap")(e("./transport/htmlfile")),e("./transport/xhr-polling"),e("./transport/xdr-polling"),e("./transport/lib/iframe-wrap")(e("./transport/xhr-polling")),e("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(t,i,a){(function(e,a){var n=t("events").EventEmitter,o=t("inherits"),l=t("../../utils/event"),r=t("../../utils/url"),s=a.XMLHttpRequest,c=function(){};function d(e,t,i,a){c(e,t);var o=this;n.call(this),setTimeout(function(){o._start(e,t,i,a)},0)}"production"!==e.env.NODE_ENV&&(c=t("debug")("sockjs-client:browser:xhr")),o(d,n),d.prototype._start=function(e,t,i,a){var n=this;try{this.xhr=new s}catch(e){}if(!this.xhr)return c("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();t=r.addQuery(t,"t="+ +new Date),this.unloadRef=l.unloadAdd(function(){c("unload cleanup"),n._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){c("xhr timeout"),n.emit("finish",0,""),n._cleanup(!1)})}catch(e){return c("exception",e),this.emit("finish",0,""),void this._cleanup(!1)}if(a&&a.noCredentials||!d.supportsCORS||(c("withCredentials"),this.xhr.withCredentials="true"),a&&a.headers)for(var o in a.headers)this.xhr.setRequestHeader(o,a.headers[o]);this.xhr.onreadystatechange=function(){if(n.xhr){var e,t,i=n.xhr;switch(c("readyState",i.readyState),i.readyState){case 3:try{t=i.status,e=i.responseText}catch(e){}c("status",t),1223===t&&(t=204),200===t&&e&&e.length>0&&(c("chunk"),n.emit("chunk",t,e));break;case 4:t=i.status,c("status",t),1223===t&&(t=204),12005!==t&&12029!==t||(t=0),c("finish",t,i.responseText),n.emit("finish",t,i.responseText),n._cleanup(!1)}}};try{n.xhr.send(i)}catch(e){n.emit("finish",0,""),n._cleanup(!1)}},d.prototype._cleanup=function(e){if(c("cleanup"),this.xhr){if(this.removeAllListeners(),l.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},d.prototype.close=function(){c("close"),this._cleanup(!0)},d.enabled=!!s;var u=["Active"].concat("Object").join("X");!d.enabled&&u in a&&(c("overriding xmlhttprequest"),s=function(){try{return new a[u]("Microsoft.XMLHTTP")}catch(e){return null}},d.enabled=!!new s);var p=!1;try{p="withCredentials"in new s}catch(e){}d.supportsCORS=p,i.exports=d}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:54,events:3,inherits:56}],18:[function(t,i,a){(function(e){i.exports=e.EventSource}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(t,i,a){(function(e){var t=e.WebSocket||e.MozWebSocket;i.exports=t?function(e){return new t(e)}:void 0}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,i){var a=e("inherits"),n=e("./lib/ajax-based"),o=e("./receiver/eventsource"),l=e("./sender/xhr-cors"),r=e("eventsource");function s(e){if(!s.enabled())throw new Error("Transport created when disabled");n.call(this,e,"/eventsource",o,l)}a(s,n),s.enabled=function(){return!!r},s.transportName="eventsource",s.roundTrips=2,t.exports=s},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:56}],21:[function(e,t,i){var a=e("inherits"),n=e("./receiver/htmlfile"),o=e("./sender/xhr-local"),l=e("./lib/ajax-based");function r(e){if(!n.enabled)throw new Error("Transport created when disabled");l.call(this,e,"/htmlfile",n,o)}a(r,l),r.enabled=function(e){return n.enabled&&e.sameOrigin},r.transportName="htmlfile",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:56}],22:[function(e,t,i){(function(i){var a=e("inherits"),n=e("json3"),o=e("events").EventEmitter,l=e("../version"),r=e("../utils/url"),s=e("../utils/iframe"),c=e("../utils/event"),d=e("../utils/random"),u=function(){};function p(e,t,i){if(!p.enabled())throw new Error("Transport created when disabled");o.call(this);var a=this;this.origin=r.getOrigin(i),this.baseUrl=i,this.transUrl=t,this.transport=e,this.windowId=d.string(8);var n=r.addPath(i,"/iframe.html")+"#"+this.windowId;u(e,t,n),this.iframeObj=s.createIframe(n,function(e){u("err callback"),a.emit("close",1006,"Unable to load an iframe ("+e+")"),a.close()}),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}"production"!==i.env.NODE_ENV&&(u=e("debug")("sockjs-client:transport:iframe")),a(p,o),p.prototype.close=function(){if(u("close"),this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},p.prototype._message=function(e){if(u("message",e.data),r.isOriginEqual(e.origin,this.origin)){var t;try{t=n.parse(e.data)}catch(t){return void u("bad json",e.data)}if(t.windowId===this.windowId)switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",n.stringify([l,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var i;try{i=n.parse(t.data)}catch(e){return void u("bad json",t.data)}this.emit("close",i[0],i[1]),this.close()}else u("mismatched window id",t.windowId,this.windowId)}else u("not same origin",e.origin,this.origin)},p.prototype.postMessage=function(e,t){u("postMessage",e,t),this.iframeObj.post(n.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},p.prototype.send=function(e){u("send",e),this.postMessage("m",e)},p.enabled=function(){return s.iframeEnabled},p.transportName="iframe",p.roundTrips=2,t.exports=p}).call(this,{env:{}})},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:54,events:3,inherits:56,json3:57}],23:[function(t,i,a){(function(e){var a=t("inherits"),n=t("./lib/sender-receiver"),o=t("./receiver/jsonp"),l=t("./sender/jsonp");function r(e){if(!r.enabled())throw new Error("Transport created when disabled");n.call(this,e,"/jsonp",l,o)}a(r,n),r.enabled=function(){return!!e.document},r.transportName="jsonp-polling",r.roundTrips=1,r.needBody=!0,i.exports=r}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:56}],24:[function(e,t,i){(function(i){var a=e("inherits"),n=e("../../utils/url"),o=e("./sender-receiver"),l=function(){};function r(e,t,i,a){o.call(this,e,t,function(e){return function(t,i,a){l("create ajax sender",t,i);var o={};"string"==typeof i&&(o.headers={"Content-type":"text/plain"});var r=n.addPath(t,"/xhr_send"),s=new e("POST",r,i,o);return s.once("finish",function(e){if(l("finish",e),s=null,200!==e&&204!==e)return a(new Error("http status "+e));a()}),function(){l("abort"),s.close(),s=null;var e=new Error("Aborted");e.code=1e3,a(e)}}}(a),i,a)}"production"!==i.env.NODE_ENV&&(l=e("debug")("sockjs-client:ajax-based")),a(r,o),t.exports=r}).call(this,{env:{}})},{"../../utils/url":52,"./sender-receiver":28,debug:54,inherits:56}],25:[function(e,t,i){(function(i){var a=e("inherits"),n=e("events").EventEmitter,o=function(){};function l(e,t){o(e),n.call(this),this.sendBuffer=[],this.sender=t,this.url=e}"production"!==i.env.NODE_ENV&&(o=e("debug")("sockjs-client:buffered-sender")),a(l,n),l.prototype.send=function(e){o("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},l.prototype.sendScheduleWait=function(){o("sendScheduleWait");var e,t=this;this.sendStop=function(){o("sendStop"),t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){o("timeout"),t.sendStop=null,t.sendSchedule()},25)},l.prototype.sendSchedule=function(){o("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(o("error",t),e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}},l.prototype._cleanup=function(){o("_cleanup"),this.removeAllListeners()},l.prototype.close=function(){o("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},t.exports=l}).call(this,{env:{}})},{debug:54,events:3,inherits:56}],26:[function(t,i,a){(function(e){var a=t("inherits"),n=t("../iframe"),o=t("../../utils/object");i.exports=function(t){function i(e,i){n.call(this,t.transportName,e,i)}return a(i,n),i.enabled=function(i,a){if(!e.document)return!1;var l=o.extend({},a);return l.sameOrigin=!0,t.enabled(l)&&n.enabled()},i.transportName="iframe-"+t.transportName,i.needBody=!0,i.roundTrips=n.roundTrips+t.roundTrips-1,i.facadeTransport=t,i}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/object":49,"../iframe":22,inherits:56}],27:[function(e,t,i){(function(i){var a=e("inherits"),n=e("events").EventEmitter,o=function(){};function l(e,t,i){o(t),n.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=i,this._scheduleReceiver()}"production"!==i.env.NODE_ENV&&(o=e("debug")("sockjs-client:polling")),a(l,n),l.prototype._scheduleReceiver=function(){o("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(t){o("message",t),e.emit("message",t)}),t.once("close",function(i,a){o("close",i,a,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||("network"===a?e._scheduleReceiver():(e.emit("close",i||1006,a),e.removeAllListeners()))})},l.prototype.abort=function(){o("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},t.exports=l}).call(this,{env:{}})},{debug:54,events:3,inherits:56}],28:[function(e,t,i){(function(i){var a=e("inherits"),n=e("../../utils/url"),o=e("./buffered-sender"),l=e("./polling"),r=function(){};function s(e,t,i,a,s){var c=n.addPath(e,t);r(c);var d=this;o.call(this,e,i),this.poll=new l(a,c,s),this.poll.on("message",function(e){r("poll message",e),d.emit("message",e)}),this.poll.once("close",function(e,t){r("poll close",e,t),d.poll=null,d.emit("close",e,t),d.close()})}"production"!==i.env.NODE_ENV&&(r=e("debug")("sockjs-client:sender-receiver")),a(s,o),s.prototype.close=function(){o.prototype.close.call(this),r("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},t.exports=s}).call(this,{env:{}})},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:54,inherits:56}],29:[function(e,t,i){(function(i){var a=e("inherits"),n=e("events").EventEmitter,o=e("eventsource"),l=function(){};function r(e){l(e),n.call(this);var t=this,i=this.es=new o(e);i.onmessage=function(e){l("message",e.data),t.emit("message",decodeURI(e.data))},i.onerror=function(e){l("error",i.readyState,e);var a=2!==i.readyState?"network":"permanent";t._cleanup(),t._close(a)}}"production"!==i.env.NODE_ENV&&(l=e("debug")("sockjs-client:receiver:eventsource")),a(r,n),r.prototype.abort=function(){l("abort"),this._cleanup(),this._close("user")},r.prototype._cleanup=function(){l("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},r.prototype._close=function(e){l("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},t.exports=r}).call(this,{env:{}})},{debug:54,events:3,eventsource:18,inherits:56}],30:[function(t,i,a){(function(e,a){var n=t("inherits"),o=t("../../utils/iframe"),l=t("../../utils/url"),r=t("events").EventEmitter,s=t("../../utils/random"),c=function(){};function d(e){c(e),r.call(this);var t=this;o.polluteGlobalNamespace(),this.id="a"+s.string(6),e=l.addQuery(e,"c="+decodeURIComponent(o.WPrefix+"."+this.id)),c("using htmlfile",d.htmlfileEnabled);var i=d.htmlfileEnabled?o.createHtmlfile:o.createIframe;a[o.WPrefix][this.id]={start:function(){c("start"),t.iframeObj.loaded()},message:function(e){c("message",e),t.emit("message",e)},stop:function(){c("stop"),t._cleanup(),t._close("network")}},this.iframeObj=i(e,function(){c("callback"),t._cleanup(),t._close("permanent")})}"production"!==e.env.NODE_ENV&&(c=t("debug")("sockjs-client:receiver:htmlfile")),n(d,r),d.prototype.abort=function(){c("abort"),this._cleanup(),this._close("user")},d.prototype._cleanup=function(){c("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete a[o.WPrefix][this.id]},d.prototype._close=function(e){c("_close",e),this.emit("close",null,e),this.removeAllListeners()},d.htmlfileEnabled=!1;var u=["Active"].concat("Object").join("X");if(u in a)try{d.htmlfileEnabled=!!new a[u]("htmlfile")}catch(e){}d.enabled=d.htmlfileEnabled||o.iframeEnabled,i.exports=d}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:54,events:3,inherits:56}],31:[function(t,i,a){(function(e,a){var n=t("../../utils/iframe"),o=t("../../utils/random"),l=t("../../utils/browser"),r=t("../../utils/url"),s=t("inherits"),c=t("events").EventEmitter,d=function(){};function u(e){d(e);var t=this;c.call(this),n.polluteGlobalNamespace(),this.id="a"+o.string(6);var i=r.addQuery(e,"c="+encodeURIComponent(n.WPrefix+"."+this.id));a[n.WPrefix][this.id]=this._callback.bind(this),this._createScript(i),this.timeoutId=setTimeout(function(){d("timeout"),t._abort(new Error("JSONP script loaded abnormally (timeout)"))},u.timeout)}"production"!==e.env.NODE_ENV&&(d=t("debug")("sockjs-client:receiver:jsonp")),s(u,c),u.prototype.abort=function(){if(d("abort"),a[n.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},u.timeout=35e3,u.scriptErrorTimeout=1e3,u.prototype._callback=function(e){d("_callback",e),this._cleanup(),this.aborting||(e&&(d("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},u.prototype._abort=function(e){d("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},u.prototype._cleanup=function(){if(d("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete a[n.WPrefix][this.id]},u.prototype._scriptError=function(){d("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},u.scriptErrorTimeout))},u.prototype._createScript=function(e){d("_createScript",e);var t,i=this,n=this.script=a.document.createElement("script");if(n.id="a"+o.string(8),n.src=e,n.type="text/javascript",n.charset="UTF-8",n.onerror=this._scriptError.bind(this),n.onload=function(){d("onload"),i._abort(new Error("JSONP script loaded abnormally (onload)"))},n.onreadystatechange=function(){if(d("onreadystatechange",n.readyState),/loaded|closed/.test(n.readyState)){if(n&&n.htmlFor&&n.onclick){i.loadedOkay=!0;try{n.onclick()}catch(e){}}n&&i._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===n.async&&a.document.attachEvent)if(l.isOpera())(t=this.script2=a.document.createElement("script")).text="try{var a = document.getElementById('"+n.id+"'); if(a)a.onerror();}catch(x){};",n.async=t.async=!1;else{try{n.htmlFor=n.id,n.event="onclick"}catch(e){}n.async=!0}void 0!==n.async&&(n.async=!0);var r=a.document.getElementsByTagName("head")[0];r.insertBefore(n,r.firstChild),t&&r.insertBefore(t,r.firstChild)},i.exports=u}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:54,events:3,inherits:56}],32:[function(e,t,i){(function(i){var a=e("inherits"),n=e("events").EventEmitter,o=function(){};function l(e,t){o(e),n.call(this);var i=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,t){o("finish",e,t),i._chunkHandler(e,t),i.xo=null;var a=200===e?"network":"permanent";o("close",a),i.emit("close",null,a),i._cleanup()})}"production"!==i.env.NODE_ENV&&(o=e("debug")("sockjs-client:receiver:xhr")),a(l,n),l.prototype._chunkHandler=function(e,t){if(o("_chunkHandler",e),200===e&&t)for(var i=-1;;this.bufferPosition+=i+1){var a=t.slice(this.bufferPosition);if(-1===(i=a.indexOf("\n")))break;var n=a.slice(0,i);n&&(o("message",n),this.emit("message",n))}},l.prototype._cleanup=function(){o("_cleanup"),this.removeAllListeners()},l.prototype.abort=function(){o("abort"),this.xo&&(this.xo.close(),o("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},t.exports=l}).call(this,{env:{}})},{debug:54,events:3,inherits:56}],33:[function(t,i,a){(function(e,a){var n,o,l=t("../../utils/random"),r=t("../../utils/url"),s=function(){};"production"!==e.env.NODE_ENV&&(s=t("debug")("sockjs-client:sender:jsonp")),i.exports=function(e,t,i){s(e,t),n||(s("createForm"),(n=a.document.createElement("form")).style.display="none",n.style.position="absolute",n.method="POST",n.enctype="application/x-www-form-urlencoded",n.acceptCharset="UTF-8",(o=a.document.createElement("textarea")).name="d",n.appendChild(o),a.document.body.appendChild(n));var c="a"+l.string(8);n.target=c,n.action=r.addQuery(r.addPath(e,"/jsonp_send"),"i="+c);var d=function(e){s("createIframe",e);try{return a.document.createElement('<iframe name="'+e+'">')}catch(i){var t=a.document.createElement("iframe");return t.name=e,t}}(c);d.id=c,d.style.display="none",n.appendChild(d);try{o.value=t}catch(e){}n.submit();var u=function(e){s("completed",c,e),d.onerror&&(d.onreadystatechange=d.onerror=d.onload=null,setTimeout(function(){s("cleaning up",c),d.parentNode.removeChild(d),d=null},500),o.value="",i(e))};return d.onerror=function(){s("onerror",c),u()},d.onload=function(){s("onload",c),u()},d.onreadystatechange=function(e){s("onreadystatechange",c,d.readyState,e),"complete"===d.readyState&&u()},function(){s("aborted",c),u(new Error("Aborted"))}}}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:54}],34:[function(t,i,a){(function(e,a){var n=t("events").EventEmitter,o=t("inherits"),l=t("../../utils/event"),r=t("../../utils/browser"),s=t("../../utils/url"),c=function(){};function d(e,t,i){c(e,t);var a=this;n.call(this),setTimeout(function(){a._start(e,t,i)},0)}"production"!==e.env.NODE_ENV&&(c=t("debug")("sockjs-client:sender:xdr")),o(d,n),d.prototype._start=function(e,t,i){c("_start");var n=this,o=new a.XDomainRequest;t=s.addQuery(t,"t="+ +new Date),o.onerror=function(){c("onerror"),n._error()},o.ontimeout=function(){c("ontimeout"),n._error()},o.onprogress=function(){c("progress",o.responseText),n.emit("chunk",200,o.responseText)},o.onload=function(){c("load"),n.emit("finish",200,o.responseText),n._cleanup(!1)},this.xdr=o,this.unloadRef=l.unloadAdd(function(){n._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(i)}catch(e){this._error()}},d.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},d.prototype._cleanup=function(e){if(c("cleanup",e),this.xdr){if(this.removeAllListeners(),l.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},d.prototype.close=function(){c("close"),this._cleanup(!0)},d.enabled=!(!a.XDomainRequest||!r.hasDomain()),i.exports=d}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:54,events:3,inherits:56}],35:[function(e,t,i){var a=e("inherits"),n=e("../driver/xhr");function o(e,t,i,a){n.call(this,e,t,i,a)}a(o,n),o.enabled=n.enabled&&n.supportsCORS,t.exports=o},{"../driver/xhr":17,inherits:56}],36:[function(e,t,i){var a=e("events").EventEmitter;function n(){var e=this;a.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},n.timeout)}e("inherits")(n,a),n.prototype.close=function(){clearTimeout(this.to)},n.timeout=2e3,t.exports=n},{events:3,inherits:56}],37:[function(e,t,i){var a=e("inherits"),n=e("../driver/xhr");function o(e,t,i){n.call(this,e,t,i,{noCredentials:!0})}a(o,n),o.enabled=n.enabled,t.exports=o},{"../driver/xhr":17,inherits:56}],38:[function(e,t,i){(function(i){var a=e("../utils/event"),n=e("../utils/url"),o=e("inherits"),l=e("events").EventEmitter,r=e("./driver/websocket"),s=function(){};function c(e,t,i){if(!c.enabled())throw new Error("Transport created when disabled");l.call(this),s("constructor",e);var o=this,d=n.addPath(e,"/websocket");d="https"===d.slice(0,5)?"wss"+d.slice(5):"ws"+d.slice(4),this.url=d,this.ws=new r(this.url,[],i),this.ws.onmessage=function(e){s("message event",e.data),o.emit("message",e.data)},this.unloadRef=a.unloadAdd(function(){s("unload"),o.ws.close()}),this.ws.onclose=function(e){s("close event",e.code,e.reason),o.emit("close",e.code,e.reason),o._cleanup()},this.ws.onerror=function(e){s("error event",e),o.emit("close",1006,"WebSocket connection broken"),o._cleanup()}}"production"!==i.env.NODE_ENV&&(s=e("debug")("sockjs-client:websocket")),o(c,l),c.prototype.send=function(e){var t="["+e+"]";s("send",t),this.ws.send(t)},c.prototype.close=function(){s("close");var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){s("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),a.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return s("enabled"),!!r},c.transportName="websocket",c.roundTrips=2,t.exports=c}).call(this,{env:{}})},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:54,events:3,inherits:56}],39:[function(e,t,i){var a=e("inherits"),n=e("./lib/ajax-based"),o=e("./xdr-streaming"),l=e("./receiver/xhr"),r=e("./sender/xdr");function s(e){if(!r.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr",l,r)}a(s,n),s.enabled=o.enabled,s.transportName="xdr-polling",s.roundTrips=2,t.exports=s},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:56}],40:[function(e,t,i){var a=e("inherits"),n=e("./lib/ajax-based"),o=e("./receiver/xhr"),l=e("./sender/xdr");function r(e){if(!l.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr_streaming",o,l)}a(r,n),r.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(l.enabled&&e.sameScheme)},r.transportName="xdr-streaming",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:56}],41:[function(e,t,i){var a=e("inherits"),n=e("./lib/ajax-based"),o=e("./receiver/xhr"),l=e("./sender/xhr-cors"),r=e("./sender/xhr-local");function s(e){if(!r.enabled&&!l.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr",o,l)}a(s,n),s.enabled=function(e){return!e.nullOrigin&&(!(!r.enabled||!e.sameOrigin)||l.enabled)},s.transportName="xhr-polling",s.roundTrips=2,t.exports=s},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:56}],42:[function(t,i,a){(function(e){var a=t("inherits"),n=t("./lib/ajax-based"),o=t("./receiver/xhr"),l=t("./sender/xhr-cors"),r=t("./sender/xhr-local"),s=t("../utils/browser");function c(e){if(!r.enabled&&!l.enabled)throw new Error("Transport created when disabled");n.call(this,e,"/xhr_streaming",o,l)}a(c,n),c.enabled=function(e){return!e.nullOrigin&&(!s.isOpera()&&l.enabled)},c.transportName="xhr-streaming",c.roundTrips=2,c.needBody=!!e.document,i.exports=c}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:56}],43:[function(t,i,a){(function(e){e.crypto&&e.crypto.getRandomValues?i.exports.randomBytes=function(t){var i=new Uint8Array(t);return e.crypto.getRandomValues(i),i}:i.exports.randomBytes=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=Math.floor(256*Math.random());return t}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(t,i,a){(function(e){i.exports={isOpera:function(){return e.navigator&&/opera/i.test(e.navigator.userAgent)},isKonqueror:function(){return e.navigator&&/konqueror/i.test(e.navigator.userAgent)},hasDomain:function(){if(!e.document)return!0;try{return!!e.document.domain}catch(e){return!1}}}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,i){var a,n=e("json3"),o=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;t.exports={quote:function(e){var t=n.stringify(e);return o.lastIndex=0,o.test(t)?(a||(a=function(e){var t,i={},a=[];for(t=0;t<65536;t++)a.push(String.fromCharCode(t));return e.lastIndex=0,a.join("").replace(e,function(e){return i[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,i}(o)),t.replace(o,function(e){return a[e]})):t}}},{json3:57}],46:[function(t,i,a){(function(e){var a=t("./random"),n={},o=!1,l=e.chrome&&e.chrome.app&&e.chrome.app.runtime;i.exports={attachEvent:function(t,i){void 0!==e.addEventListener?e.addEventListener(t,i,!1):e.document&&e.attachEvent&&(e.document.attachEvent("on"+t,i),e.attachEvent("on"+t,i))},detachEvent:function(t,i){void 0!==e.addEventListener?e.removeEventListener(t,i,!1):e.document&&e.detachEvent&&(e.document.detachEvent("on"+t,i),e.detachEvent("on"+t,i))},unloadAdd:function(e){if(l)return null;var t=a.string(8);return n[t]=e,o&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in n&&delete n[e]},triggerUnloadCallbacks:function(){for(var e in n)n[e](),delete n[e]}};l||i.exports.attachEvent("unload",function(){o||(o=!0,i.exports.triggerUnloadCallbacks())})}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./random":50}],47:[function(t,i,a){(function(e,a){var n=t("./event"),o=t("json3"),l=t("./browser"),r=function(){};"production"!==e.env.NODE_ENV&&(r=t("debug")("sockjs-client:utils:iframe")),i.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){i.exports.WPrefix in a||(a[i.exports.WPrefix]={})},postMessage:function(e,t){a.parent!==a?a.parent.postMessage(o.stringify({windowId:i.exports.currentWindowId,type:e,data:t||""}),"*"):r("Cannot postMessage, no parent window.",e,t)},createIframe:function(e,t){var i,o,l=a.document.createElement("iframe"),s=function(){r("unattach"),clearTimeout(i);try{l.onload=null}catch(e){}l.onerror=null},c=function(){r("cleanup"),l&&(s(),setTimeout(function(){l&&l.parentNode.removeChild(l),l=null},0),n.unloadDel(o))},d=function(e){r("onerror",e),l&&(c(),t(e))};return l.src=e,l.style.display="none",l.style.position="absolute",l.onerror=function(){d("onerror")},l.onload=function(){r("onload"),clearTimeout(i),i=setTimeout(function(){d("onload timeout")},2e3)},a.document.body.appendChild(l),i=setTimeout(function(){d("timeout")},15e3),o=n.unloadAdd(c),{post:function(e,t){r("post",e,t);try{setTimeout(function(){l&&l.contentWindow&&l.contentWindow.postMessage(e,t)},0)}catch(e){}},cleanup:c,loaded:s}},createHtmlfile:function(e,t){var o,l,s,c=["Active"].concat("Object").join("X"),d=new a[c]("htmlfile"),u=function(){clearTimeout(o),s.onerror=null},p=function(){d&&(u(),n.unloadDel(l),s.parentNode.removeChild(s),s=d=null,CollectGarbage())},h=function(e){r("onerror",e),d&&(p(),t(e))};d.open(),d.write('<html><script>document.domain="'+a.document.domain+'";<\/script></html>'),d.close(),d.parentWindow[i.exports.WPrefix]=a[i.exports.WPrefix];var f=d.createElement("div");return d.body.appendChild(f),s=d.createElement("iframe"),f.appendChild(s),s.src=e,s.onerror=function(){h("onerror")},o=setTimeout(function(){h("timeout")},15e3),l=n.unloadAdd(p),{post:function(e,t){try{setTimeout(function(){s&&s.contentWindow&&s.contentWindow.postMessage(e,t)},0)}catch(e){}},cleanup:p,loaded:u}}},i.exports.iframeEnabled=!1,a.document&&(i.exports.iframeEnabled=("function"==typeof a.postMessage||"object"===u()(a.postMessage))&&!l.isKonqueror())}).call(this,{env:{}},void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browser":44,"./event":46,debug:54,json3:57}],48:[function(t,i,a){(function(e){var t={};["log","debug","warn"].forEach(function(i){var a;try{a=e.console&&e.console[i]&&e.console[i].apply}catch(e){}t[i]=a?function(){return e.console[i].apply(e.console,arguments)}:"log"===i?function(){}:t.log}),i.exports=t}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,i){t.exports={isObject:function(e){var t=void 0===e?"undefined":u()(e);return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,i,a=1,n=arguments.length;a<n;a++)for(i in t=arguments[a])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}}},{}],50:[function(e,t,i){var a=e("crypto");t.exports={string:function(e){for(var t="abcdefghijklmnopqrstuvwxyz012345".length,i=a.randomBytes(e),n=[],o=0;o<e;o++)n.push("abcdefghijklmnopqrstuvwxyz012345".substr(i[o]%t,1));return n.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},{crypto:43}],51:[function(e,t,i){(function(i){var a=function(){};"production"!==i.env.NODE_ENV&&(a=e("debug")("sockjs-client:utils:transport")),t.exports=function(e){return{filterToEnabled:function(t,i){var n={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach(function(e){e&&("websocket"!==e.transportName||!1!==i.websocket?t.length&&-1===t.indexOf(e.transportName)?a("not in whitelist",e.transportName):e.enabled(i)?(a("enabled",e.transportName),n.main.push(e),e.facadeTransport&&n.facade.push(e.facadeTransport)):a("disabled",e.transportName):a("disabled from server","websocket"))}),n}}}}).call(this,{env:{}})},{debug:54}],52:[function(e,t,i){(function(i){var a=e("url-parse"),n=function(){};"production"!==i.env.NODE_ENV&&(n=e("debug")("sockjs-client:utils:url")),t.exports={getOrigin:function(e){if(!e)return null;var t=new a(e);if("file:"===t.protocol)return null;var i=t.port;return i||(i="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+i},isOriginEqual:function(e,t){var i=this.getOrigin(e)===this.getOrigin(t);return n("same",e,t,i),i},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var i=e.split("?");return i[0]+t+(i[1]?"?"+i[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}}).call(this,{env:{}})},{debug:54,"url-parse":61}],53:[function(e,t,i){t.exports="1.1.2"},{}],54:[function(e,t,i){(function(a){function n(){try{return i.storage.debug}catch(e){}if(void 0!==a&&"env"in a)return a.env.DEBUG}(i=t.exports=e("./debug")).log=function(){return"object"===("undefined"==typeof console?"undefined":u()(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+i.humanize(this.diff),!t)return;var a="color: "+this.color;e.splice(1,0,a,"color: inherit");var n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(o=++n)}),e.splice(o,0,a)},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=n,i.useColors=function(){if("undefined"!=typeof window&&window&&void 0!==window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(e){try{return r()(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},i.enable(n())}).call(this,{env:{}})},{"./debug":55}],55:[function(e,t,i){var a;function n(e){function t(){if(t.enabled){var e=t,n=+new Date,o=n-(a||n);e.diff=o,e.prev=a,e.curr=n,a=n;for(var l=new Array(arguments.length),r=0;r<l.length;r++)l[r]=arguments[r];l[0]=i.coerce(l[0]),"string"!=typeof l[0]&&l.unshift("%O");var s=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,function(t,a){if("%%"===t)return t;s++;var n=i.formatters[a];if("function"==typeof n){var o=l[s];t=n.call(e,o),l.splice(s,1),s--}return t}),i.formatArgs.call(e,l),(t.log||i.log||console.log.bind(console)).apply(e,l)}}return t.namespace=e,t.enabled=i.enabled(e),t.useColors=i.useColors(),t.color=function(e){var t,a=0;for(t in e)a=(a<<5)-a+e.charCodeAt(t),a|=0;return i.colors[Math.abs(a)%i.colors.length]}(e),"function"==typeof i.init&&i.init(t),t}(i=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},i.disable=function(){i.enable("")},i.enable=function(e){i.save(e);for(var t=(e||"").split(/[\s,]+/),a=t.length,n=0;n<a;n++)t[n]&&("-"===(e=t[n].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")))},i.enabled=function(e){var t,a;for(t=0,a=i.skips.length;t<a;t++)if(i.skips[t].test(e))return!1;for(t=0,a=i.names.length;t<a;t++)if(i.names[t].test(e))return!0;return!1},i.humanize=e("ms"),i.names=[],i.skips=[],i.formatters={}},{ms:58}],56:[function(e,t,i){"function"==typeof o.a?t.exports=function(e,t){e.super_=t,e.prototype=o()(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},{}],57:[function(t,i,a){(function(e){(function(){var t={function:!0,object:!0},n=t[void 0===a?"undefined":u()(a)]&&a&&!a.nodeType&&a,o=t["undefined"==typeof window?"undefined":u()(window)]&&window||this,l=n&&t[void 0===i?"undefined":u()(i)]&&i&&!i.nodeType&&"object"==(void 0===e?"undefined":u()(e))&&e;function r(e,i){e||(e=o.Object()),i||(i=o.Object());var a=e.Number||o.Number,n=e.String||o.String,l=e.Object||o.Object,s=e.Date||o.Date,c=e.SyntaxError||o.SyntaxError,d=e.TypeError||o.TypeError,p=e.Math||o.Math,h=e.JSON||o.JSON;"object"==(void 0===h?"undefined":u()(h))&&h&&(i.stringify=h.stringify,i.parse=h.parse);var f,m,g,v=l.prototype,b=v.toString,y=new s(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(e){}function x(e){if(x[e]!==g)return x[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=x("json-stringify")&&x("json-parse");else{var o,l='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var r=i.stringify,c="function"==typeof r&&y;if(c){(o=function(){return 1}).toJSON=o;try{c="0"===r(0)&&"0"===r(new a)&&'""'==r(new n)&&r(b)===g&&r(g)===g&&r()===g&&"1"===r(o)&&"[1]"==r([o])&&"[null]"==r([g])&&"null"==r(null)&&"[null,null,null]"==r([g,b,null])&&r({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==l&&"1"===r(null,o)&&"[\n 1,\n 2\n]"==r([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==r(new s(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==r(new s(864e13))&&'"-000001-01-01T00:00:00.000Z"'==r(new s(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==r(new s(-1))}catch(e){c=!1}}t=c}if("json-parse"==e){var d=i.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){var u=5==(o=d(l)).a.length&&1===o.a[0];if(u){try{u=!d('"\t"')}catch(e){}if(u)try{u=1!==d("01")}catch(e){}if(u)try{u=1!==d("1.")}catch(e){}}}}catch(e){u=!1}t=u}}return x[e]=!!t}if(!x("json")){var w=x("bug-string-char-index");if(!y)var _=p.floor,k=[0,31,59,90,120,151,181,212,243,273,304,334],S=function(e,t){return k[t]+365*(e-1970)+_((e-1969+(t=+(t>1)))/4)-_((e-1901+t)/100)+_((e-1601+t)/400)};if((f=v.hasOwnProperty)||(f=function(e){var t,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=b?f=function(e){var t=this.__proto__,i=e in(this.__proto__=null,this);return this.__proto__=t,i}:(t=i.constructor,f=function(e){var i=(this.constructor||t).prototype;return e in this&&!(e in i&&this[e]===i[e])}),i=null,f.call(this,e)}),m=function(e,i){var a,n,o,l=0;for(o in(a=function(){this.valueOf=0}).prototype.valueOf=0,n=new a)f.call(n,o)&&l++;return a=n=null,l?m=2==l?function(e,t){var i,a={},n="[object Function]"==b.call(e);for(i in e)n&&"prototype"==i||f.call(a,i)||!(a[i]=1)||!f.call(e,i)||t(i)}:function(e,t){var i,a,n="[object Function]"==b.call(e);for(i in e)n&&"prototype"==i||!f.call(e,i)||(a="constructor"===i)||t(i);(a||f.call(e,i="constructor"))&&t(i)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,i){var a,o,l="[object Function]"==b.call(e),r=!l&&"function"!=typeof e.constructor&&t[u()(e.hasOwnProperty)]&&e.hasOwnProperty||f;for(a in e)l&&"prototype"==a||!r.call(e,a)||i(a);for(o=n.length;a=n[--o];r.call(e,a)&&i(a));}),m(e,i)},!x("json-stringify")){var D={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},N=function(e,t){return("000000"+(t||0)).slice(-e)},P=function(e){for(var t='"',i=0,a=e.length,n=!w||a>10,o=n&&(w?e.split(""):e);i<a;i++){var l=e.charCodeAt(i);switch(l){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=D[l];break;default:if(l<32){t+="\\u00"+N(2,l.toString(16));break}t+=n?o[i]:e.charAt(i)}}return t+'"'};i.stringify=function(e,i,a){var n,o,l,r;if(t[void 0===i?"undefined":u()(i)]&&i)if("[object Function]"==(r=b.call(i)))o=i;else if("[object Array]"==r){l={};for(var s,c=0,p=i.length;c<p;s=i[c++],("[object String]"==(r=b.call(s))||"[object Number]"==r)&&(l[s]=1));}if(a)if("[object Number]"==(r=b.call(a))){if((a-=a%1)>0)for(n="",a>10&&(a=10);n.length<a;n+=" ");}else"[object String]"==r&&(n=a.length<=10?a:a.slice(0,10));return function e(t,i,a,n,o,l,r){var s,c,p,h,v,y,x,w,k,D,C,E,V,R,T,F;try{s=i[t]}catch(e){}if("object"==(void 0===s?"undefined":u()(s))&&s)if("[object Date]"!=(c=b.call(s))||f.call(s,"toJSON"))"function"==typeof s.toJSON&&("[object Number]"!=c&&"[object String]"!=c&&"[object Array]"!=c||f.call(s,"toJSON"))&&(s=s.toJSON(t));else if(s>-1/0&&s<1/0){if(S){for(v=_(s/864e5),p=_(v/365.2425)+1970-1;S(p+1,0)<=v;p++);for(h=_((v-S(p,0))/30.42);S(p,h+1)<=v;h++);v=1+v-S(p,h),x=_((y=(s%864e5+864e5)%864e5)/36e5)%24,w=_(y/6e4)%60,k=_(y/1e3)%60,D=y%1e3}else p=s.getUTCFullYear(),h=s.getUTCMonth(),v=s.getUTCDate(),x=s.getUTCHours(),w=s.getUTCMinutes(),k=s.getUTCSeconds(),D=s.getUTCMilliseconds();s=(p<=0||p>=1e4?(p<0?"-":"+")+N(6,p<0?-p:p):N(4,p))+"-"+N(2,h+1)+"-"+N(2,v)+"T"+N(2,x)+":"+N(2,w)+":"+N(2,k)+"."+N(3,D)+"Z"}else s=null;if(a&&(s=a.call(i,t,s)),null===s)return"null";if("[object Boolean]"==(c=b.call(s)))return""+s;if("[object Number]"==c)return s>-1/0&&s<1/0?""+s:"null";if("[object String]"==c)return P(""+s);if("object"==(void 0===s?"undefined":u()(s))){for(R=r.length;R--;)if(r[R]===s)throw d();if(r.push(s),C=[],T=l,l+=o,"[object Array]"==c){for(V=0,R=s.length;V<R;V++)E=e(V,s,a,n,o,l,r),C.push(E===g?"null":E);F=C.length?o?"[\n"+l+C.join(",\n"+l)+"\n"+T+"]":"["+C.join(",")+"]":"[]"}else m(n||s,function(t){var i=e(t,s,a,n,o,l,r);i!==g&&C.push(P(t)+":"+(o?" ":"")+i)}),F=C.length?o?"{\n"+l+C.join(",\n"+l)+"\n"+T+"}":"{"+C.join(",")+"}":"{}";return r.pop(),F}}("",((s={})[""]=e,s),o,l,n,"",[])}}if(!x("json-parse")){var C,E,V=n.fromCharCode,R={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},T=function(){throw C=E=null,c()},F=function(){for(var e,t,i,a,n,o=E,l=o.length;C<l;)switch(n=o.charCodeAt(C)){case 9:case 10:case 13:case 32:C++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=w?o.charAt(C):o[C],C++,e;case 34:for(e="@",C++;C<l;)if((n=o.charCodeAt(C))<32)T();else if(92==n)switch(n=o.charCodeAt(++C)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=R[n],C++;break;case 117:for(t=++C,i=C+4;C<i;C++)(n=o.charCodeAt(C))>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70||T();e+=V("0x"+o.slice(t,C));break;default:T()}else{if(34==n)break;for(n=o.charCodeAt(C),t=C;n>=32&&92!=n&&34!=n;)n=o.charCodeAt(++C);e+=o.slice(t,C)}if(34==o.charCodeAt(C))return C++,e;T();default:if(t=C,45==n&&(a=!0,n=o.charCodeAt(++C)),n>=48&&n<=57){for(48==n&&((n=o.charCodeAt(C+1))>=48&&n<=57)&&T(),a=!1;C<l&&((n=o.charCodeAt(C))>=48&&n<=57);C++);if(46==o.charCodeAt(C)){for(i=++C;i<l&&((n=o.charCodeAt(i))>=48&&n<=57);i++);i==C&&T(),C=i}if(101==(n=o.charCodeAt(C))||69==n){for(43!=(n=o.charCodeAt(++C))&&45!=n||C++,i=C;i<l&&((n=o.charCodeAt(i))>=48&&n<=57);i++);i==C&&T(),C=i}return+o.slice(t,C)}if(a&&T(),"true"==o.slice(C,C+4))return C+=4,!0;if("false"==o.slice(C,C+5))return C+=5,!1;if("null"==o.slice(C,C+4))return C+=4,null;T()}return"$"},I=function(e,t,i){var a=M(e,t,i);a===g?delete e[t]:e[t]=a},M=function(e,t,i){var a,n=e[t];if("object"==(void 0===n?"undefined":u()(n))&&n)if("[object Array]"==b.call(n))for(a=n.length;a--;)I(n,a,i);else m(n,function(e){I(n,e,i)});return i.call(e,t,n)};i.parse=function(e,t){var i,a;return C=0,E=""+e,i=function e(t){var i,a;if("$"==t&&T(),"string"==typeof t){if("@"==(w?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(i=[];"]"!=(t=F());a||(a=!0))a&&(","==t?"]"==(t=F())&&T():T()),","==t&&T(),i.push(e(t));return i}if("{"==t){for(i={};"}"!=(t=F());a||(a=!0))a&&(","==t?"}"==(t=F())&&T():T()),","!=t&&"string"==typeof t&&"@"==(w?t.charAt(0):t[0])&&":"==F()||T(),i[t.slice(1)]=e(F());return i}T()}return t}(F()),"$"!=F()&&T(),C=E=null,t&&"[object Function]"==b.call(t)?M(((a={})[""]=i,a),"",t):i}}}return i.runInContext=r,i}if(!l||l.global!==l&&l.window!==l&&l.self!==l||(o=l),n)r(o,n);else{var s=o.JSON,c=o.JSON3,d=!1,p=r(o,o.JSON3={noConflict:function(){return d||(d=!0,o.JSON=s,o.JSON3=c,s=c=null),p}});o.JSON={parse:p.parse,stringify:p.stringify}}}).call(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(e,t,i){var a=1e3,n=60*a,o=60*n,l=24*o,s=365.25*l;function c(e,t,i){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}t.exports=function(e,t){t=t||{};var i,d=void 0===e?"undefined":u()(e);if("string"===d&&e.length>0)return function(e){if((e=String(e)).length>1e4)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*s;case"days":case"day":case"d":return i*l;case"hours":case"hour":case"hrs":case"hr":case"h":return i*o;case"minutes":case"minute":case"mins":case"min":case"m":return i*n;case"seconds":case"second":case"secs":case"sec":case"s":return i*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}(e);if("number"===d&&!1===isNaN(e))return t.long?c(i=e,l,"day")||c(i,o,"hour")||c(i,n,"minute")||c(i,a,"second")||i+" ms":function(e){if(e>=l)return Math.round(e/l)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=a)return Math.round(e/a)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+r()(e))}},{}],59:[function(e,t,i){var a=Object.prototype.hasOwnProperty;i.stringify=function(e,t){t=t||"";var i=[];for(var n in"string"!=typeof t&&(t="?"),e)a.call(e,n)&&i.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return i.length?t+i.join("&"):""},i.parse=function(e){for(var t,i=/([^=?&]+)=?([^&]*)/g,a={};t=i.exec(e);a[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return a}},{}],60:[function(e,t,i){t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],61:[function(e,t,i){var a=e("requires-port"),n=e("./lolcation"),o=e("querystringify"),l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,r=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]];function s(e){var t=l.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function c(e,t,i){if(!(this instanceof c))return new c(e,t,i);var l,d,p,h,f,m,g=r.slice(),v=void 0===t?"undefined":u()(t),b=this,y=0;for("object"!==v&&"string"!==v&&(i=t,t=null),i&&"function"!=typeof i&&(i=o.parse),t=n(t),l=!(d=s(e||"")).protocol&&!d.slashes,b.slashes=d.slashes||l&&t.slashes,b.protocol=d.protocol||t.protocol||"",e=d.rest,d.slashes||(g[2]=[/(.*)/,"pathname"]);y<g.length;y++)p=(h=g[y])[0],m=h[1],p!=p?b[m]=e:"string"==typeof p?~(f=e.indexOf(p))&&("number"==typeof h[2]?(b[m]=e.slice(0,f),e=e.slice(f+h[2])):(b[m]=e.slice(f),e=e.slice(0,f))):(f=p.exec(e))&&(b[m]=f[1],e=e.slice(0,f.index)),b[m]=b[m]||l&&h[3]&&t[m]||"",h[4]&&(b[m]=b[m].toLowerCase());i&&(b.query=i(b.query)),l&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){for(var i=(t||"/").split("/").slice(0,-1).concat(e.split("/")),a=i.length,n=i[a-1],o=!1,l=0;a--;)"."===i[a]?i.splice(a,1):".."===i[a]?(i.splice(a,1),l++):l&&(0===a&&(o=!0),i.splice(a,1),l--);return o&&i.unshift(""),"."!==n&&".."!==n||i.push(""),i.join("/")}(b.pathname,t.pathname)),a(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(h=b.auth.split(":"),b.username=h[0]||"",b.password=h[1]||""),b.origin=b.protocol&&b.host&&"file:"!==b.protocol?b.protocol+"//"+b.host:"null",b.href=b.toString()}c.prototype.set=function(e,t,i){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(i||o.parse)(t)),n[e]=t;break;case"port":n[e]=t,a(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!i;break;case"pathname":n.pathname=t.length&&"/"!==t.charAt(0)?"/"+t:t;break;default:n[e]=t}for(var l=0;l<r.length;l++){var s=r[l];s[4]&&(n[s[1]]=n[s[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},c.prototype.toString=function(e){e&&"function"==typeof e||(e=o.stringify);var t,i=this,a=i.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var n=a+(i.slashes?"//":"");return i.username&&(n+=i.username,i.password&&(n+=":"+i.password),n+="@"),n+=i.host+i.pathname,(t="object"===u()(i.query)?e(i.query):i.query)&&(n+="?"!==t.charAt(0)?"?"+t:t),i.hash&&(n+=i.hash),n},c.extractProtocol=s,c.location=n,c.qs=o,t.exports=c},{"./lolcation":62,querystringify:59,"requires-port":60}],62:[function(t,i,a){(function(e){var a,n=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o={hash:1,query:1};i.exports=function(i){i=i||e.location||{},a=a||t("./");var l,r={},s=void 0===i?"undefined":u()(i);if("blob:"===i.protocol)r=new a(unescape(i.pathname),{});else if("string"===s)for(l in r=new a(i,{}),o)delete r[l];else if("object"===s){for(l in i)l in o||(r[l]=i[l]);void 0===r.slashes&&(r.slashes=n.test(i.href))}return r}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":61}]},{},[1])(1)})}).call(t,i("DuR2"),i("f1Eh")(e))},E51A:function(e,t){},ECOc:function(e,t){},EfN1:function(e,t){},GVqr:function(e,t){(function(){var e,i,a,n,o={}.hasOwnProperty,l=[].slice;e={LF:"\n",NULL:"\0"},a=function(){var t;function i(e,t,i){this.command=e,this.headers=null!=t?t:{},this.body=null!=i?i:""}return i.prototype.toString=function(){var t,a,n,l,r;for(a in t=[this.command],(n=!1===this.headers["content-length"])&&delete this.headers["content-length"],r=this.headers)o.call(r,a)&&(l=r[a],t.push(a+":"+l));return this.body&&!n&&t.push("content-length:"+i.sizeOfUTF8(this.body)),t.push(e.LF+this.body),t.join(e.LF)},i.sizeOfUTF8=function(e){return e?encodeURI(e).match(/%..|./g).length:0},t=function(t){var a,n,o,l,r,s,c,d,u,p,h,f,m,g,v,b,y;for(l=t.search(RegExp(""+e.LF+e.LF)),o=(r=t.substring(0,l).split(e.LF)).shift(),s={},f=function(e){return e.replace(/^\s+|\s+$/g,"")},m=0,v=(b=r.reverse()).length;m<v;m++)d=(p=b[m]).indexOf(":"),s[f(p.substring(0,d))]=f(p.substring(d+1));if(a="",h=l+2,s["content-length"])u=parseInt(s["content-length"]),a=(""+t).substring(h,h+u);else for(n=null,c=g=h,y=t.length;(h<=y?g<y:g>y)&&(n=t.charAt(c))!==e.NULL;c=h<=y?++g:--g)a+=n;return new i(o,s,a)},i.unmarshall=function(i){var a,n,o,l;return n=i.split(RegExp(""+e.NULL+e.LF+"*")),(l={frames:[],partial:""}).frames=function(){var e,i,o,l;for(l=[],e=0,i=(o=n.slice(0,-1)).length;e<i;e++)a=o[e],l.push(t(a));return l}(),(o=n.slice(-1)[0])===e.LF||-1!==o.search(RegExp(""+e.NULL+e.LF+"*$"))?l.frames.push(t(o)):l.partial=o,l},i.marshall=function(t,a,n){return new i(t,a,n).toString()+e.NULL},i}(),i=function(){var t;function i(e){this.ws=e,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={},this.partialData=""}return i.prototype.debug=function(e){var t;return"undefined"!=typeof window&&null!==window&&null!=(t=window.console)?t.log(e):void 0},t=function(){return Date.now?Date.now():(new Date).valueOf},i.prototype._transmit=function(e,t,i){var n;for(n=a.marshall(e,t,i),"function"==typeof this.debug&&this.debug(">>> "+n);;){if(!(n.length>this.maxWebSocketFrameSize))return this.ws.send(n);this.ws.send(n.substring(0,this.maxWebSocketFrameSize)),n=n.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+n.length)}},i.prototype._setupHeartbeat=function(i){var a,o,l,r,s,c,d;if((s=i.version)===n.VERSIONS.V1_1||s===n.VERSIONS.V1_2)return o=(c=function(){var e,t,a,n;for(n=[],e=0,t=(a=i["heart-beat"].split(",")).length;e<t;e++)r=a[e],n.push(parseInt(r));return n}())[0],a=c[1],0!==this.heartbeat.outgoing&&0!==a&&(l=Math.max(this.heartbeat.outgoing,a),"function"==typeof this.debug&&this.debug("send PING every "+l+"ms"),this.pinger=n.setInterval(l,(d=this,function(){return d.ws.send(e.LF),"function"==typeof d.debug?d.debug(">>> PING"):void 0}))),0!==this.heartbeat.incoming&&0!==o?(l=Math.max(this.heartbeat.incoming,o),"function"==typeof this.debug&&this.debug("check PONG every "+l+"ms"),this.ponger=n.setInterval(l,function(e){return function(){var i;if((i=t()-e.serverActivity)>2*l)return"function"==typeof e.debug&&e.debug("did not receive server activity for the last "+i+"ms"),e.ws.close()}}(this))):void 0},i.prototype._parseConnect=function(){var e,t,i,a;switch(a={},(e=1<=arguments.length?l.call(arguments,0):[]).length){case 2:a=e[0],t=e[1];break;case 3:e[1]instanceof Function?(a=e[0],t=e[1],i=e[2]):(a.login=e[0],a.passcode=e[1],t=e[2]);break;case 4:a.login=e[0],a.passcode=e[1],t=e[2],i=e[3];break;default:a.login=e[0],a.passcode=e[1],t=e[2],i=e[3],a.host=e[4]}return[a,t,i]},i.prototype.connect=function(){var i,o,r,s,c;return i=1<=arguments.length?l.call(arguments,0):[],s=this._parseConnect.apply(this,i),r=s[0],this.connectCallback=s[1],o=s[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=(c=this,function(i){var n,l,r,s,d,u,p,h,f,m,g,v,b;if(s="undefined"!=typeof ArrayBuffer&&i.data instanceof ArrayBuffer?(n=new Uint8Array(i.data),"function"==typeof c.debug&&c.debug("--- got data length: "+n.length),function(){var e,t,i;for(i=[],e=0,t=n.length;e<t;e++)l=n[e],i.push(String.fromCharCode(l));return i}().join("")):i.data,c.serverActivity=t(),s!==e.LF){for("function"==typeof c.debug&&c.debug("<<< "+s),f=a.unmarshall(c.partialData+s),c.partialData=f.partial,b=[],m=0,g=(v=f.frames).length;m<g;m++)switch((d=v[m]).command){case"CONNECTED":"function"==typeof c.debug&&c.debug("connected to server "+d.headers.server),c.connected=!0,c._setupHeartbeat(d.headers),b.push("function"==typeof c.connectCallback?c.connectCallback(d):void 0);break;case"MESSAGE":h=d.headers.subscription,(p=c.subscriptions[h]||c.onreceive)?(r=c,u=d.headers["message-id"],d.ack=function(e){return null==e&&(e={}),r.ack(u,h,e)},d.nack=function(e){return null==e&&(e={}),r.nack(u,h,e)},b.push(p(d))):b.push("function"==typeof c.debug?c.debug("Unhandled received MESSAGE: "+d):void 0);break;case"RECEIPT":b.push("function"==typeof c.onreceipt?c.onreceipt(d):void 0);break;case"ERROR":b.push("function"==typeof o?o(d):void 0);break;default:b.push("function"==typeof c.debug?c.debug("Unhandled frame: "+d):void 0)}return b}"function"==typeof c.debug&&c.debug("<<< PONG")}),this.ws.onclose=function(e){return function(){var t;return t="Whoops! Lost connection to "+e.ws.url,"function"==typeof e.debug&&e.debug(t),e._cleanUp(),"function"==typeof o?o(t):void 0}}(this),this.ws.onopen=function(e){return function(){return"function"==typeof e.debug&&e.debug("Web Socket Opened..."),r["accept-version"]=n.VERSIONS.supportedVersions(),r["heart-beat"]=[e.heartbeat.outgoing,e.heartbeat.incoming].join(","),e._transmit("CONNECT",r)}}(this)},i.prototype.disconnect=function(e,t){return null==t&&(t={}),this._transmit("DISCONNECT",t),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof e?e():void 0},i.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&n.clearInterval(this.pinger),this.ponger)return n.clearInterval(this.ponger)},i.prototype.send=function(e,t,i){return null==t&&(t={}),null==i&&(i=""),t.destination=e,this._transmit("SEND",t,i)},i.prototype.subscribe=function(e,t,i){var a;return null==i&&(i={}),i.id||(i.id="sub-"+this.counter++),i.destination=e,this.subscriptions[i.id]=t,this._transmit("SUBSCRIBE",i),a=this,{id:i.id,unsubscribe:function(){return a.unsubscribe(i.id)}}},i.prototype.unsubscribe=function(e){return delete this.subscriptions[e],this._transmit("UNSUBSCRIBE",{id:e})},i.prototype.begin=function(e){var t,i;return i=e||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:i}),t=this,{id:i,commit:function(){return t.commit(i)},abort:function(){return t.abort(i)}}},i.prototype.commit=function(e){return this._transmit("COMMIT",{transaction:e})},i.prototype.abort=function(e){return this._transmit("ABORT",{transaction:e})},i.prototype.ack=function(e,t,i){return null==i&&(i={}),i["message-id"]=e,i.subscription=t,this._transmit("ACK",i)},i.prototype.nack=function(e,t,i){return null==i&&(i={}),i["message-id"]=e,i.subscription=t,this._transmit("NACK",i)},i}(),n={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(e,t){var a;return null==t&&(t=["v10.stomp","v11.stomp"]),a=new(n.WebSocketClass||WebSocket)(e,t),new i(a)},over:function(e){return new i(e)},Frame:a},void 0!==t&&null!==t&&(t.Stomp=n),"undefined"!=typeof window&&null!==window?(n.setInterval=function(e,t){return window.setInterval(t,e)},n.clearInterval=function(e){return window.clearInterval(e)},window.Stomp=n):t||(self.Stomp=n)}).call(this)},"Gpj+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-container",[i("el-header",{staticStyle:{"text-align":"left","padding-left":"0px"}},[i("el-button",{attrs:{type:"success",size:"mini",plain:"",icon:"el-icon-success"},on:{click:e.allRead}},[e._v("全部标为已读")]),e._v(" "),e.isAdmin?i("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){e.dialogVisible=!0}}},[i("i",{staticClass:"fa fa-send",staticStyle:{"margin-right":"15px"}}),e._v("发送系统通知\n      ")]):e._e(),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.loadSalaryCfg}})],1),e._v(" "),i("el-main",{staticStyle:{padding:"0px"}},[i("el-collapse",{staticStyle:{width:"90%"},attrs:{accordion:""},on:{change:e.handleChange},model:{value:e.mid,callback:function(t){e.mid=t},expression:"mid"}},e._l(e.sysmsgs,function(t,a){return i("el-collapse-item",{key:a,attrs:{name:t.msgContent.id}},[i("template",{slot:"title"},[i("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center"}},[i("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",width:"25px",height:"25px"}},[1==t.msgState?i("div",{staticStyle:{width:"8px",height:"8px","background-color":"#ea0206","border-radius":"8px"}}):e._e()]),e._v(" "),i("span",{staticStyle:{width:"600px","text-align":"left"}},[e._v(e._s(t.msgContent.title))]),e._v(" "),3==t.msgState?i("span",{staticStyle:{"text-align":"left"}},[e._v("已撤销")]):e._e(),e._v(" "),i("el-tag",[e._v(e._s(e._f("formatDate")(t.msgContent.createDate)))])],1)]),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center","border-style":"solid","border-width":"1px","border-color":"#409eff","border-radius":"5px",padding:"4px 0px 4px 8px","box-sizing":"border-box",height:"100%"}},[e._v("\n            "+e._s(t.msgContent.message)+"\n          ")])],2)}),1),e._v(" "),0==e.sysmsgs.length?i("div",{staticStyle:{color:"#ea0206","font-size":"18px","text-align":"center"}},[e._v("暂无通知")]):e._e()],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"left"}},[i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],attrs:{title:"发送系统通知",visible:e.dialogVisible,"close-on-click-modal":!1,width:"45%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-row",[i("el-col",{attrs:{span:3}},[e._v("\n          通知标题:\n        ")]),e._v(" "),i("el-col",{attrs:{span:21}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-top":"10px"}},[i("el-col",{attrs:{span:3}},[e._v("\n          通知内容:\n        ")]),e._v(" "),i("el-col",{attrs:{span:21}},[i("el-input",{attrs:{type:"textarea",size:"mini",autosize:{minRows:5,maxRows:10},placeholder:"请输入通知内容..."},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-top":"10px","padding-right":"10px"}},[i("el-col",{attrs:{offset:5}},[i("el-button",{attrs:{type:"default",size:"mini"},on:{click:e.cancelSend}},[e._v("取消\n          ")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sendNFMsg}},[i("i",{staticClass:"fa fa-send",staticStyle:{"margin-right":"15px"}}),e._v("发送\n          ")])],1)],1)],1)],1)],1)},staticRenderFns:[]},n=i("VU/8")({data:function(){return{dialogVisible:!1,dialogLoading:!1,title:"",message:"",mid:-1,sysmsgs:[]}},mounted:function(){this.initSysMsgs()},computed:{isAdmin:function(){var e=!1;return this.$store.state.user.roles.forEach(function(t){"ROLE_admin"==t.name&&(e=!0)}),e}},methods:{handleChange:function(e){if(""!=e){var t=this;this.postRequest("/chat/markread",{flag:this.mid}).then(function(e){e&&200==e.status&&t.initSysMsgs()})}},initSysMsgs:function(){var e=this;this.getRequest("/chat/sysmsgs").then(function(t){e.sysmsgs=t.data.data;var i=!1;e.sysmsgs.forEach(function(e){1==e.msgState&&(i=!0)}),e.$store.commit("toggleNFDot",i)})},loadSalaryCfg:function(){this.initSysMsgs()},allRead:function(){var e=this;this.postRequest("/chat/markread",{flag:-1}).then(function(t){t&&200==t.status&&(e.$store.commit("toggleNFDot",!1),e.initSysMsgs())})},sendNFMsg:function(){this.dialogLoading=!0;var e=this;this.postRequest("/chat/nf",{message:this.message,title:this.title}).then(function(t){e.dialogLoading=!1,t&&200==t.status&&200==t.data.status&&(e.initSysMsgs(),e.cancelSend(),e.$store.state.stomp.send("/ws/nf",{},""))})},cancelSend:function(){this.dialogVisible=!1,this.title="",this.message=""}}},a,!1,null,null,null);t.default=n.exports},GqWn:function(e,t){},"H+Q0":function(e,t){},HGcV:function(e,t){},"Ior+":function(e,t){},JrsW:function(e,t){},KNe0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bOdI"),n=i.n(a),o=i("zL8q"),l={data:function(){var e;return e={outRecive:{quantity:"",note:"",materialId:""},dialogInTitle:"采购数量",dialogFormInVisible:!1,activeName:"material",confirmDialogTitle:"采购确认单",tempPlan:[],materialsReceives:[],confirms:{},nowMaterial:{quantity:"",notes:"",complete:""},newMaterial:{name:"",specifications:"",quantity:"",unitName:"",notes:""},tableLoading:!1,confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",RecordKeywords:"",confirmKewords:""},n()(e,"tableLoading",!1),n()(e,"advanceSearchViewVisible",!1),n()(e,"rules",{materialName:[{required:!0,message:"必填:原料名称",trigger:"blur"}],quantity:[{required:!0,message:"必填:数量",trigger:"blur"},{validator:function(e,t,i){/^\d+$/.test(t)?i():i("数字格式错误!")},message:"数字格式错误",trigger:"blur"}],clientId:[{required:!0,message:"必选:公司",trigger:"change"}],unitId:[{required:!0,message:"必选:单位",trigger:"change"}]}),n()(e,"materials",[]),n()(e,"defaultProps",{label:"name",isLeaf:"leaf",children:"child"}),n()(e,"dialogTitle",""),n()(e,"currentPage",1),n()(e,"confirmCurrentPage",1),n()(e,"currentReceivePage",1),n()(e,"formLabelWidth","120px"),n()(e,"totalCount",-1),n()(e,"receiveTotalCount",-1),n()(e,"confirmTotalCount",-1),n()(e,"material",{materialName:"",unitId:"",specs:""}),n()(e,"clients",[]),n()(e,"units",[]),n()(e,"dialogTableVisible",!1),n()(e,"dialogFormVisible",!1),n()(e,"currentIndex",""),n()(e,"matriallist",[]),e},mounted:function(){this.initData()},methods:{selfbuy:function(e){this.outRecive.materialId=e.id,this.dialogFormInVisible=!0},handleCurrentChange:function(e){console.log(e),this.newMaterial=e},tableRowClassName:function(e){var t=e.row;e.rowIndex;return t.buyStatus?"warning-row":"success-row"},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},clearNewMaterial:function(){this.newMaterial={name:"",specifications:"",quantity:"",unitName:"",notes:"",id:0},this.nowMaterial={quantity:"",notes:"",complete:""},this.confirmDialogTitle="采购确认单"},showBuyConfirm:function(e,t){var i=this;this.clearNewMaterial(),i.tableLoading=!0,this.confirmDialogTitle=t.materialName+this.confirmDialogTitle,this.getRequest("/rowMaterialBuyPlanDetail/buyPlanDetail?materailId="+t.id).then(function(e){if(i.tableLoading=!1,e&&200==e.status){var t=e.data.root.matriallist,a=[];t.length&&t.forEach(function(e,t,i){a.push({name:e[0],specifications:e[1],quantity:e[2],confirmStatus:e[3],unitName:e[4],createDate:e[5],planSerialNumber:e[6],note:e[7],id:e[8]})}),i.matriallist=a,i.confirmFormVisible=!0}})},searchRecordData:function(){this.loadReceivedData()},searchConfirmData:function(){this.loadConfirmData()},cancelConfirm:function(e){var t=this;this.getRequest("/rowPruchaseVerify/withdraw?id="+e.id).then(function(e){if(e&&200==e.status){e.data;t.loadConfirmData()}})},cancelRecordData:function(e){var t=this;this.getRequest("/materialInReceiveRecord/withdraw?id="+e.id).then(function(e){if(e&&200==e.status){e.data;t.loadReceivedData()}})},planConfirm:function(e){var t=this,i=this;return console.log(i.newMaterial.id),console.log(i.nowMaterial.complete),0==i.newMaterial.id?(i.$message({type:"info",message:"请选择采购计划！"}),!1):""==i.nowMaterial.complete?(i.$message({type:"info",message:"请选择是否完成！"}),!1):""==this.nowMaterial.quantity||0==this.nowMaterial.quantity?(i.$message({type:"info",message:"请填入实收数量！"}),!1):void this.$confirm("当前选择的是,"+this.newMaterial.name+"入库数量为："+this.nowMaterial.quantity+" 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$refs[e].validate(function(e){e&&i.getRequest("/rowPruchaseVerify/add?purchasePlanDetailId="+i.newMaterial.id+"&buyType=2&confirmStatus="+i.nowMaterial.complete+"&quantity="+i.nowMaterial.quantity+"&notes="+i.nowMaterial.notes).then(function(e){if(e&&200==e.status){e.data;i.confirmFormVisible=!1}})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},selectChange:function(e){var t=this;console.log(e),this.units&&this.units.forEach(function(i,a){console.log(i.id),i.id==e&&(t.material.specifiCations=i.name)})},cancelChoos:function(){console.log(this.pName),this.material.supplier=this.pName,this.material.clientId=this.pId},initData:function(){var e=this;e.loadData(),this.getRequest("/material/basedata").then(function(t){if(t&&200==t.status){var i=t.data;e.units=i.root.units,e.clients=i.root.clients}})},keywordsChange:function(e){""==e&&this.loadData()},recordKeywordsChange:function(e){""==e&&this.searchRecordData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushData:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},popConfirm:function(e){var t=this;this.$prompt("请输入出库数量","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number",inputValidator:function(i){if(console.log(i),parseInt(i)>parseInt(e.quantity))return t.$message({type:"info",message:"数量过大"}),!1},inputErrorMessage:"非法输入！"}).then(function(i){var a=i.value;t.getRequest("/material/receive?id="+e.id+"&quantity="+a).then(function(e){if(e&&200==e.status){e.data;t.loadData(),t.$message({type:"success",message:"出库成功!"})}})}).catch(function(){t.$message({type:"info",message:"取消输入"})})},searchData:function(){this.loadData()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.material=t,this.material.createDate=t.createDate,delete this.material.unit,this.dialogFormVisible=!0},addData:function(e){var t=this;this.dialogFormVisible=!0;var i=this;if(0==this.material.unitId||""==this.material.unitId)return o.Message.error({message:"请选择单位！"}),!1;this.$refs[e].validate(function(e){if(!e)return!1;t.material.id?(t.tableLoading=!0,console.log(t.material),t.postRequest("/material/update",t.material).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData())})):(t.tableLoading=!0,console.log(i.material),t.material.quantity=0,t.postRequest("/material/add",t.material).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData()}}))})},addInData:function(e){var t=this,i=this;if(""==this.outRecive.quantity)return o.Message.error({message:"请输入数量"}),!1;this.$refs[e].validate(function(e){if(!e)return!1;t.tableLoading=!0,console.log(i.outRecive),t.getRequest("/materialInReceiveRecord/add?id="+t.outRecive.materialId+"&quaity="+t.outRecive.quantity+"&notes="+t.outRecive.note).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormInVisible=!1,i.loadData(),i.emptyInData()}})})},emptyInData:function(){this.outRecive={quaity:"",materailId:"",note:""}},cancelOptIn:function(){this.dialogFormInVisible=!1,this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteData:function(e){var t=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/material/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this;this.tableLoading=!0,this.getRequest("/material/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var i=t.data.data;e.materials=i,e.totalCount=t.data.total,e.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.material={materialName:"",standard:"",specs:"",materialNo:"",unitId:"",specifiCations:"",notes:"",quantity:""}}},computed:{routes:function(){}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("\n              搜索\n            ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("添加原料")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addDataForm",attrs:{model:e.material,rules:e.rules,size:"sam","label-width":"90px"}},[i("el-form-item",{attrs:{label:"原料名称:",prop:"materialName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"原料名称..."},model:{value:e.material.materialName,callback:function(t){e.$set(e.material,"materialName",t)},expression:"material.materialName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"原料规格:",prop:"specs"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"规格..."},model:{value:e.material.specs,callback:function(t){e.$set(e.material,"specs",t)},expression:"material.specs"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"单位:",prop:"unitId"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择单位"},on:{change:e.selectChange},model:{value:e.material.unitId,callback:function(t){e.$set(e.material,"unitId",t)},expression:"material.unitId"}},e._l(e.units,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addDataForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogInTitle,"close-on-click-modal":!1,visible:e.dialogFormInVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormInVisible=t},close:e.cancelOptIn}},[e.dialogFormInVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addInData",attrs:{model:e.outRecive,rules:e.rules,size:"sam","label-width":"90px"}},[i("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"采购数量..."},model:{value:e.outRecive.quantity,callback:function(t){e.$set(e.outRecive,"quantity",t)},expression:"outRecive.quantity"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"note"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注..."},model:{value:e.outRecive.note,callback:function(t){e.$set(e.outRecive,"note",t)},expression:"outRecive.note"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormInVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addInData("addInData")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.confirmDialogTitle,"close-on-click-modal":!1,visible:e.confirmFormVisible,width:"650px"},on:{"update:visible":function(t){e.confirmFormVisible=t},close:e.cancelOpt}},[e.confirmFormVisible?i("div",{staticStyle:{width:"100%"},attrs:{height:"200"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.matriallist,border:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[i("el-table-column",{attrs:{prop:"planSerialNumber",align:"left",fixed:"",label:"采购编号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"下单时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e._f("formatDate")(t.row.createDate))+"\n                ")]}}],null,!1,2821067331)}),e._v(" "),i("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n                ")]}}],null,!1,3134996586)}),e._v(" "),i("el-table-column",{attrs:{prop:"note",align:"left",label:"备注",width:"240"}})],1),e._v(" "),e.newMaterial.name?i("div",{staticStyle:{padding:"16px","text-align":"left",border:"1px solid gainsboro"}},[e._v("\n              当前选择：\n\n              "),i("div",{staticStyle:{display:"flex","justify-content":"space-around",padding:"5px"}},[i("div",[e._v("\n                  名称:"+e._s(e.newMaterial.name)+"\n                ")]),e._v(" "),i("div",[e._v("\n                  规格:"+e._s(e.newMaterial.specifications)+"\n                ")]),e._v(" "),i("div",[e._v("\n                  数量:"+e._s(e.newMaterial.quantity)+" "+e._s(e.newMaterial.unitName)+"\n                ")]),e._v(" "),i("div",[e._v("\n                  备注:"+e._s(e.newMaterial.note)+"\n                ")])])]):e._e(),e._v(" "),i("div",{staticStyle:{border:"1px solid #eeeeee"}},[i("el-form",{ref:"newconfirmForm",attrs:{model:e.nowMaterial,rules:e.rules,size:"sam","label-width":"80px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("div",[i("el-form-item",{attrs:{label:"收货数量:",prop:"quantity"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"当次实际收货数量"},model:{value:e.nowMaterial.quantity,callback:function(t){e.$set(e.nowMaterial,"quantity",t)},expression:"nowMaterial.quantity"}})],1)],1)]),e._v(" "),i("el-col",{attrs:{span:12}},[i("div",[i("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注"},model:{value:e.nowMaterial.notes,callback:function(t){e.$set(e.nowMaterial,"notes",t)},expression:"nowMaterial.notes"}})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("div",[i("el-form-item",{attrs:{label:"完成:"}},[i("el-radio-group",{model:{value:e.nowMaterial.complete,callback:function(t){e.$set(e.nowMaterial,"complete",t)},expression:"nowMaterial.complete"}},[i("el-radio",{attrs:{label:2}},[e._v("完成")]),e._v(" "),i("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:1}},[e._v("未完成")])],1)],1)],1)])],1)],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.confirmFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.planConfirm("newconfirmForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materials,border:"","row-class-name":e.tableRowClassName}},[i("el-table-column",{attrs:{prop:"materialName",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"specs",align:"left",fixed:"",label:"原料规格",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",fixed:"",label:"原料数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.quantity)+e._s(t.row.unit.name)+"\n            ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",fixed:"",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"margin-top":"10px"}},[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px","margin-left":"2px"},attrs:{size:"mini"},on:{click:function(i){return e.popConfirm(t.row)}}},[e._v("出库\n                ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n                ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.selfbuy(t.row)}}},[e._v("厂部自购\n                ")]),e._v(" "),t.row.buyStatus?i("el-badge",{attrs:{value:"new"}},[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showBuyConfirm(t.$index,t.row)}}},[e._v("采购确认\n                  ")])],1):e._e()],1)]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])},staticRenderFns:[]};var s=i("VU/8")(l,r,!1,function(e){i("d6kF")},null,null);t.default=s.exports},KhUb:function(e,t){},Kzbj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{workstepName:[{required:!0,message:"必填:工序名称",trigger:"blur"}]},steps:[],dialogTitle:"",currentPage:1,totalCount:-1,step:{workstepName:"",intro:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},searchEmp:function(){this.loadData()},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.dialogFormVisible=!0,this.emptyData()},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.step=t,delete this.step.noteMaker,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.step.id?(t.tableLoading=!0,console.log(t.step),t.postRequest("/workStep/stepAdd",t.step).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData())})):(t.tableLoading=!0,console.log(i.step),t.postRequest("/workStep/stepAdd",t.step).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData()}}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/workStep/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/workStep/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.steps=a,t.totalCount=i.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.step={workstepName:"",intro:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n        ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.step,rules:e.rules,size:"small","label-width":"90px"}},[i("el-form-item",{attrs:{label:"工序名称:",prop:"workstepName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入工序名称。。"},model:{value:e.step.workstepName,callback:function(t){e.$set(e.step,"workstepName",t)},expression:"step.workstepName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"工序描述:",prop:"intro"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"工序描述"},model:{value:e.step.intro,callback:function(t){e.$set(e.step,"intro",t)},expression:"step.intro"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.steps}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"workstepName",align:"left",fixed:"",label:"工序名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"intro",width:"220",align:"left",label:"介绍"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(e){i("jW5Z")},null,null);t.default=r.exports},LNkA:function(e,t){},LrNQ:function(e,t){},LwTo:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:中文名",trigger:"blur"}]},units:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,unit:{name:"",code:""},deps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""==e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},addAndFlushEmp:function(){this.dialogTitle="添加单位",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadDatas()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.unit=t,delete this.unit.sysMenu,delete this.unit.users,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.unit.id?(t.tableLoading=!0,console.log(t.unit),t.postRequest("/sysunit/addAndUpdate",t.unit).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadDatas(),i.emptyData())})):(t.tableLoading=!0,console.log(i.unit),t.postRequest("/sysunit/addAndUpdate",t.unit).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadDatas(),i.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/sysunit/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadDatas()}})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/sysunit/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.units=a,t.totalCount=i.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.unit={name:"",code:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n     ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.unit,rules:e.rules,size:"sam","label-width":"90px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"单位名称"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"缩写:",prop:"code"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"单位英文名..."},model:{value:e.unit.code,callback:function(t){e.$set(e.unit,"code",t)},expression:"unit.code"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.units,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"单位名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"code",align:"left",fixed:"",label:"英文缩写",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n         ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n         ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("+Ip0")},null,null);t.default=o.exports},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=i("VU/8")({name:"App"},n,!1,function(e){i("ZEO7")},null,null).exports,l=i("/ocq"),r=i("xJsL"),s=i("lO7g"),c=i("6+aJ"),d=i("fER9"),u=i("qYX3"),p=i("2tLV"),h=i("gxTg"),f=i("eTb0"),m=i("lGFz"),g=i("0Wrx"),v=i("mOMX"),b=i("Ave/"),y=i("hR2O"),x=i("Kzbj"),w=i("kBn+"),_=i("T5Y6"),k=i("pQHM"),S=i("VDSS"),D=i("4d3/"),N=i("d0NV"),P=i("Uct3"),C=i("LwTo"),E=i("WaId");a.default.use(l.a);var V=new l.a({routes:[{path:"/",name:"Login",component:r.default,hidden:!0},{path:"/home",name:"主页",component:s.default,hidden:!0,meta:{requireAuth:!0},children:[{path:"/main",name:"首页界面",component:c.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/department",name:"部门",component:d.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/carRecord",name:"行车记录",component:m.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/carRepair",name:"车辆维护",component:g.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/emp",name:"员工",component:u.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/position",name:"职位",component:f.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/product",name:"产品管理",component:v.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/askRequest",name:"用车申请",component:b.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/askBack",name:"分配车辆",component:y.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/workStep",name:"工序步骤",component:x.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/company",name:"客户",component:w.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/buyPlan",name:"采购计划",component:h.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/chat",name:"消息",component:_.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/sysRole",name:"角色",component:k.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/sale",name:"销售",component:E.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/users",name:"用户",component:S.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productsFinished",name:"成品库存",component:D.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/material",name:"原材料库",component:P.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/productMid",name:"半成品库",component:N.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/sysUnit",name:"单位管理",component:C.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}},{path:"/car",name:"车辆管理",component:p.default,hidden:!0,meta:{keepAlive:!1,requireAuth:!0}}]}]}),R=i("zL8q"),T=i.n(R),F=(i("tvR6"),i("mvHQ")),I=i.n(F),M=i("ifoU"),L=i.n(M),O=i("NYxO");i("BiC4"),i("GVqr");a.default.use(O.a);var q=new O.a.Store({state:{user:{name:null==window.localStorage.getItem("user")?"未登录":JSON.parse(window.localStorage.getItem("user")).name,userface:null==window.localStorage.getItem("user")?"":JSON.parse(window.localStorage.getItem("user")).userface,username:null==window.localStorage.getItem("user")?"":JSON.parse(window.localStorage.getItem("user")).username,roles:null==window.localStorage.getItem("user")?"":JSON.parse(window.localStorage.getItem("user")).roles},routes:[],msgList:[],isDotMap:new L.a,currentFriend:{},stomp:null,nfDot:!1},mutations:{initMenu:function(e,t){e.routes=t},login:function(e,t){e.user=t,window.localStorage.setItem("user",I()(t))},logout:function(e){window.localStorage.removeItem("user"),e.routes=[]},toggleNFDot:function(e,t){e.nfDot=t},updateMsgList:function(e,t){e.msgList=t},updateCurrentFriend:function(e,t){e.currentFriend=t},addValue2DotMap:function(e,t){e.isDotMap.set(t,"您有未读消息")},removeValueDotMap:function(e,t){e.isDotMap.delete(t)}},actions:{connect:function(e){console.log(e+"9999"),e.state.stomp=Stomp.over(new SockJS("/ws/endpointChat")),console.log(e.state.stomp),e.state.stomp.connect({},function(t){e.state.stomp.subscribe("/user/queue/chat",function(t){var i=JSON.parse(t.body);console.log(i);var a=window.localStorage.getItem(e.state.user.username+"#"+i.from);if(null==a)(a=[]).push(i),window.localStorage.setItem(e.state.user.username+"#"+i.from,I()(a));else{var n=JSON.parse(a);n.push(i),window.localStorage.setItem(e.state.user.username+"#"+i.from,I()(n))}i.from!=e.state.currentFriend.username&&e.commit("addValue2DotMap","isDot#"+e.state.user.username+"#"+i.from);var o=window.localStorage.getItem(e.state.user.username+"#"+e.state.currentFriend.username);null==o?e.commit("updateMsgList",[]):e.commit("updateMsgList",JSON.parse(o))}),e.state.stomp.subscribe("/topic/nf",function(t){e.commit("toggleNFDot",!0)})},function(e){})}}}),z=(i("e0XP"),i("pFYg")),$=i.n(z),j=i("mtWM"),A=i.n(j);A.a.interceptors.request.use(function(e){return e},function(e){R.Message.error({message:"请求超时!"})}),A.a.interceptors.response.use(function(e){if(!e.status||200!=e.status||500!=e.data.status)return e.data.msg&&R.Message.success({message:e.data.msg}),e;R.Message.error({message:e.data.msg})},function(e){504==e.response.status||404==e.response.status?R.Message.error({message:"服务器未连接⊙﹏⊙∥"}):403==e.response.status?R.Message.error({message:"权限不足,请联系管理员!"}):401==e.response.status?R.Message.error({message:e.response.data.msg}):e.response.data.msg?R.Message.error({message:e.response.data.msg}):R.Message.error({message:"未知错误!"})});var H=function(e){return A()({method:"get",url:""+e})},B=function e(t){var a=[];return t.forEach(function(t){var n=t.path,o=t.component,l=t.name,r=t.meta,s=t.iconCls,c=t.children;c&&c instanceof Array&&(c=e(c));var d={path:n,component:function(e){o.startsWith("Home")?i.e(3).then(function(){var t=[i("2eoi")("./"+o+".vue")];e.apply(null,t)}.bind(this)).catch(i.oe):o.startsWith("Emp")?i.e(0).then(function(){var t=[i("8cST")("./"+o+".vue")];e.apply(null,t)}.bind(this)).catch(i.oe):o.startsWith("Car")?i.e(1).then(function(){var t=[i("O6hm")("./"+o+".vue")];e.apply(null,t)}.bind(this)).catch(i.oe):o.startsWith("Pro")?i.e(1).then(function(){var t=[i("O6hm")("./"+o+".vue")];e.apply(null,t)}.bind(this)).catch(i.oe):o.startsWith("Com")?i.e(0).then(function(){var t=[i("8cST")("./"+o+".vue")];e.apply(null,t)}.bind(this)).catch(i.oe):o.startsWith("Sys")?i.e(2).then(function(){var t=[i("kC/Z")("./"+o+".vue")];e.apply(null,t)}.bind(this)).catch(i.oe):o.startsWith("User")?i.e(2).then(function(){var t=[i("kC/Z")("./"+o+".vue")];e.apply(null,t)}.bind(this)).catch(i.oe):o.startsWith("Depa")?i.e(0).then(function(){var t=[i("8cST")("./"+o+".vue")];e.apply(null,t)}.bind(this)).catch(i.oe):o.startsWith("Posi")?i.e(0).then(function(){var t=[i("8cST")("./"+o+".vue")];e.apply(null,t)}.bind(this)).catch(i.oe):o.startsWith("Sal")?i.e(4).then(function(){var t=[i("UlK9")("./"+o+".vue")];e.apply(null,t)}.bind(this)).catch(i.oe):o.startsWith("Buy")&&i.e(1).then(function(){var t=[i("O6hm")("./"+o+".vue")];e.apply(null,t)}.bind(this)).catch(i.oe)},name:l,iconCls:s,meta:r,children:c};a.push(d)}),a};function U(e){var t=new Date(e),i=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();t.getHours(),t.getMinutes(),t.getSeconds();return a<10&&(a="0"+a),n<10&&(n="0"+n),i+"-"+a+"-"+n}a.default.filter("formatDate",U),a.default.prototype.formatDate=U,a.default.filter("formatDateTime",function(e){var t=new Date(e),i=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),o=t.getHours(),l=t.getMinutes();return a<10&&(a="0"+a),n<10&&(n="0"+n),i+"-"+a+"-"+n+" "+o+":"+l}),a.default.directive("dialogDrag",{bind:function(e,t,i,a){var n=e.querySelector(".el-dialog__header"),o=e.querySelector(".el-dialog");n.style.cssText+=";cursor:move;",o.style.cssText+=";top:0px;";var l=window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]};n.onmousedown=function(e){var t=e.clientX-n.offsetLeft,i=e.clientY-n.offsetTop,a=document.body.clientWidth,r=document.documentElement.clientHeight,s=o.offsetWidth,c=o.offsetHeight,d=o.offsetLeft,u=a-o.offsetLeft-s,p=o.offsetTop,h=r-o.offsetTop-c,f=l(o,"left"),m=l(o,"top");f.includes("%")?(f=+document.body.clientWidth*(+f.replace(/\%/g,"")/100),m=+document.body.clientHeight*(+m.replace(/\%/g,"")/100)):(f=+f.replace(/\px/g,""),m=+m.replace(/\px/g,"")),document.onmousemove=function(e){var a=e.clientX-t,n=e.clientY-i;-a>d?a=-d:a>u&&(a=u),-n>p?n=-p:n>h&&(n=h),o.style.cssText+=";left:"+(a+f)+"px;top:"+(n+m)+"px;"},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}});var W=i("NwKb"),J=i.n(W);i("M4fF");a.default.prototype.getRequest=H,a.default.prototype.postRequest=function(e,t){return A()({method:"post",url:""+e,data:t,transformRequest:[function(e){var t="";for(var i in e)t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded;;charset=UTF-8"}})},a.default.prototype.deleteRequest=function(e){return A()({method:"delete",url:""+e})},a.default.prototype.putRequest=function(e,t){return A()({method:"put",url:""+e,data:t,transformRequest:[function(e){var t="";for(var i in e)t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])+"&";return t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},a.default.prototype.jsonToString=function(e){var t=[],i=I()(e,function(e,i){if("object"===(void 0===i?"undefined":$()(i))&&null!==i){if(-1!==t.indexOf(i))return;t.push(i)}return i});return t=null,i},a.default.prototype.isNotNullORBlank=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var a=0;a<t.length;a++){var n=t[a];if(null==n||""==n||void 0==n)return R.Message.warning({message:"数据不能为空!"}),!1}return!0},a.default.config.productionTip=!1,a.default.use(T.a),a.default.use(J.a),V.beforeEach(function(e,t,i){var a,n;"Login"!=e.name?"未登录"==q.state.user.name?e.meta.requireAuth||null==e.name?i({path:"/",query:{redirect:e.path}}):i():(a=V,(n=q).state.routes.length>0||H("/users/getMenu").then(function(e){if(e&&200==e.status){console.log(e);var t=B(e.data.root.menuData);a.addRoutes(t),n.commit("initMenu",t),n.dispatch("connect")}}),"/chat"==e.path&&q.commit("updateMsgList",[]),i()):i()}),new a.default({el:"#app",router:V,store:q,components:{App:o},template:"<App/>"})},Nzev:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{tempPlan:[],confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midConfirms:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){console.log("嘿嘿哈！"),this.initData()},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(i,a){console.log(i.id),i.id==e&&(t.middleProduct.utilname=i.name)})},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var i="",a=e.plant;return this.positions.forEach(function(e,t,n){a.forEach(function(t,a,n){e.id==t&&(i+=e.name+" , ")})}),i},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){var e=this;e.loadData(),this.getRequest("/middleProduct/basedata").then(function(t){if(t&&200==t.status){var i=t.data;e.units=i.root.units,e.clients=i.root.clients,e.products=i.root.products}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midPruchaseVerify/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midPruchaseVerify/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.midConfirms=a,t.totalCount=i.data.total}})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midConfirms,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",prop:"name",fixed:"",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",prop:"serialNumber",fixed:"",label:"计划单编号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"计划采购数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"实收数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.practicalQuantity)+" "+e._s(t.row.unitName)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"记录人",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.employee.name)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"下发时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDateTime")(t.row.planDate))+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.cancelRecordData(t.row)}}},[e._v("撤销\n          ")]):e._e()],1)]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("wd3D")},null,null);t.default=o.exports},O9uO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("pFYg"),n=i.n(a),o=i("mvHQ"),l=i.n(o),r=i("bOdI"),s=i.n(r),c=i("zL8q"),d={data:function(){var e;return e={lastPlanDetail:{startNo:"J00000001",endNo:"J00000100"},lastPlanproductionPlanDetails:[{startNo:"J00000001",endNo:"J00000100"},{startNo:"K00000001",endNo:"K00000100"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-7776e6),e.$emit("pick",[i,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],plans:[],clients:[],units:[],selectsales:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{id:0,notes:"",productionPlanNo:"",productionPlanDetails:""},detail:{id:0,actualQuantity:"",salesPlanId:"",notes:"",salesPlan:{},serialNumbers:[],type:"new",status:3,productNo:"",specifications:"",productionPlanId:0},serialNumbers:[],serialNumber:{sid:1,id:0,startNo:"",endNo:"",note:"",clientId:0,productId:0,type:"new"},productionPlanDetails:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择销售计划",selectSalePlan:{},selectedM:{},filterText:""},s()(e,"lastPlanDetail",""),s()(e,"crrentSelectShop",{}),s()(e,"isCurrentShop",!0),s()(e,"isprarent",!1),s()(e,"sugestParentstartNo",""),s()(e,"sugestParentEndNo",""),s()(e,"sugestSelfEndNumbers",""),s()(e,"sugestSelfNumbers",""),s()(e,"currentParentShop",{}),s()(e,"currentShop",{}),s()(e,"lastPlanDetail",{startNo:"",endNo:""}),s()(e,"serialNuberDeleted",[]),s()(e,"serialNuberUpdate",[]),s()(e,"serialNuberList",[]),s()(e,"planDetails",[]),s()(e,"dialogPlanVisible",!1),s()(e,"dialogPlanTitle","生产计划"),s()(e,"currntPlanRow",{}),s()(e,"codeLen",1),e},mounted:function(){this.initData()},methods:{codeLenSet:function(e){console.log(e),this.codeLen=e},cancelPlanOpt:function(){this.dialogFormVisible=!1,this.plan={notes:"",productionPlanNo:"",productionPlanDetails:""},this.loadData()},editePlan:function(e,t){this.dialogTitle="修改计划单";this.plan=t;var i=[],a=_.cloneDeep(t).details;a.forEach(function(e){delete e.salesPlan});var o=l()(a,function(e,t){if("object"===(void 0===t?"undefined":n()(t))&&null!==t){if(-1!==i.indexOf(t))return;i.push(t)}return t});i=null,this.plan.productionPlanDetails=o,this.dialogPlanVisible=!0},addPlan:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.plan.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/productionplan/update",t.plan).then(function(e){t.tableLoading=!1,e&&200==e.status&&(t.dialogPlanVisible=!1,t.loadData(),t.emptyData(),t.emptyDetail(),t.clearSerialNumbers())})):(t.tableLoading=!0,console.log(t.plan),t.postRequest("/productionplan/add",t.plan).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.dialogPlanVisible=!1,t.loadData(),t.emptyData(),t.emptyDetail(),t.clearSerialNumbers()}}))})},serialNumberAdd:function(){var e=0;if(this.serialNumbers.length){var t=0;this.serialNumbers.forEach(function(e,i,a){t=e.sid>t?e.sid:t}),e=t+1}else e=1;this.serialNumbers.push({sid:e,id:0,startNo:"",endNo:"",clientId:0,productId:0,type:"new"})},deletSerialNo:function(e){var t=this.serialNumbers.splice(e,1);""==t[0].endNo||""==t[0].startNo||"new"==t[0].type||(t[0].type="delete",this.serialNuberDeleted.push(t[0])),console.log(t)},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectSalePlan=e,console.log(this.selectSalePlan)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectSalePlan.id>0){var i=this.selectSalePlan.client.name+"，     产品："+this.selectSalePlan.product.producteName+";";this.$confirm("您当前选择 ：客户"+i+" 确认选择该销售计划吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(){var e=this.selectSalePlan;console.log(e+"=*-*="),this.selectsales.splice(0,1,this.selectSalePlan),this.detail.salesPlanId=e.id,this.detail.salesPlan=e,this.detail.specification=e.specification,this.detail.productNo=e.productNo,this.getCurrentPlans(),this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectSalePlan={},this.selectedM={}},formatStatus:function(e,t){return 1==e.materialType?"已确认":"未确认"},selectType:function(e,t,i){console.log("changne"),this.types=e,2==e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(i,a,n){i.id==e&&(t.detail.unitId=i.unitId,t.detail.unitName=i.unitName,t.detail.name=i.name,t.detail.materialId=i.id,t.detail.specifications=i.specs)})},clearSerialNumbers:function(){this.serialNumbers=[],this.selectsales=[],this.serialNumbers.push({sid:1,id:0,startNo:"",endNo:"",type:"new",note:""})},editeDetail:function(e,t){console.log("詳情："+t),this.detail=t,t.salesPlan&&(this.detail.salesPlanId=t.salesPlan.id),this.serialNumbers=t.serialNumbers,this.selectsales.push(t.salesPlan),this.dialogFormVisible=!0},deleteDetail:function(e,t){var i=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.detailDelete(t.id)}).catch(function(){})},detailDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productionplandetails/deletmark?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},emptyDetail:function(){this.detail={id:0,actualQuantity:"",salesPlanId:"",notes:"",salesPlan:{},serialNumbers:[],type:"new",status:3,productNo:"",specifications:"",productionPlanId:0}},initData:function(){var e=this;e.loadData(),this.getRequest("/productionplan/basedata").then(function(t){if(t&&200==t.status){var i=t.data,a=[];i.root.clients.forEach(function(e,t,i){var n=e[0],o=e[1],l=e[2];a.push({name:n,id:o,parentClientId:l,parentName:e[3],address:e[4],phone:e[5],abbreviation:e[6]})}),e.clients=a,e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var n=[];i.root.products.forEach(function(e,t,i){n.push({id:e[0],producteName:e[1],specification:e[2],proType:e[3],mark:e[4],color:e[5]})}),e.products=n}})},keywordsChange:function(e){""==e&&this.loadData()},keywordsMaterialChange:function(e){""==e&&this.loadMaterial()},handleNodeClick:function(e){this.tableLoading=!0,this.crrentSelectShop=e,this.detail.clientId=e.id,this.detail.clientName=e.name,this.detail.abbrName=e.abbreviation,this.showOrHidePop=!1,this.depTextColor="#606266",this.getCurrentPlans()},showCurrentNo:function(){this.isprarent?this.isprarent=!1:this.isprarent=!0},showDetails:function(e){this.currntPlanRow=e,this.planDetails=e.details,this.plan.id=e.id},changeNO:function(){this.isCurrentShop?(this.lastPlanDetail=this.currentShop,this.isCurrentShop=!1):(this.lastPlanDetail=this.currentParentShop,this.isCurrentShop=!0)},getCurrentPlans:function(){var e=this;this.getRequest("/productionplan/getPlanDetails?clientId="+e.selectSalePlan.client.id+"&productId="+e.selectSalePlan.product.id).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var i=t.data;if(e.currentParentShop=i.root.parent||[],e.currentParentShop.length){var a=e.currentParentShop.length-1;e.currentParentShop=e.currentParentShop[a];var n=e.currentParentShop[a].endNo;e.sugestParentstartNo=e.sugestStartNo(n,1)}else e.sugestParentstartNo="00000001",e.currentParentShop={},e.setStartSerialNo(e.sugestParentstartNo,e.sugestParentEndNo.endNo,"parent");if(e.currentShop=i.root.self||[],e.currentShop.length){var o=e.currentShop.length-1;e.currentShop=e.currentShop[o];var l=e.currentShop[o].endNo;e.sugestSelfNumbers=e.sugestStartNo(l,1)}else e.sugestSelfNumbers="00000001",e.currentShop={}}})},setEndNumber:function(e){console.log(e);if(this.isCurrentShop)if(this.lastPlanDetail=this.currentShop,this.currentShop.length){var t=this.currentShop.length-1;this.sugestSelfEndNumbers=this.sugestStartNo(this.currentShop[t].endNo,parseInt(e)+1),this.sugestSelfEndNumbers&&(this.serialNumbers[0].startNo=this.sugestSelfNumbers,this.serialNumbers[0].endNo=this.sugestSelfEndNumbers,this.serialNumbers[0].note="",this.serialNumbers[0].clientId=this.crrentSelectShop.id,this.serialNumbers[0].productId=this.detail.proId)}else{var i=this.sugestSelfNumbers;this.setCurrentEndData(i,e)}else if(this.lastPlanDetail=this.currentParentShop,this.currentParentShop.length){var a=this.currentParentShop.length-1;this.sugestParentEndNo=this.sugestStartNo(this.currentParentShop[a].endNo,parseInt(e)+1),this.sugestParentEndNo&&(this.serialNumbers[0].startNo=this.sugestParentstartNo,this.serialNumbers[0].endNo=this.sugestParentEndNo,this.serialNumbers[0].note="",this.serialNumbers[0].clientId=this.crrentSelectShop.id,this.serialNumbers[0].productId=this.detail.proId)}else{i=this.currentParentShop;this.setCurrentEndData(i,e)}},setbyStartNo:function(e){console.log(e),e.length>this.codeLen&&Object(c.Message)("编码错误!"),this.detail.actualQuantity&&this.setCurrentEndData(e,this.detail.actualQuantity)},setCurrentEndData:function(e,t){e.toString().length;var i=parseInt(e)+parseInt(t),a=i.toString().length,n=this.codeLen-a;if(n)for(var o=0;o<n;o++)i="0"+i;this.serialNumbers[0].endNo=i},sugestStartNo:function(e,t){var i=function(e,t){if(t=t||!1,"string"==typeof e){var i=e.match(t?/[0-9]\d{1,}/g:/\d{1,}/g);return console.log(i),i.map(function(e){return e})}return[]},a=e.indexOf(i(e)[0]),n=e.substr(0,a),o=e.substr(a+i(e)[0].length,e.length-1),l=(i(e)[0].length,parseInt(i(e)[0])+t),r=l-l.toString().length;if(r)for(var s=0;s<r;s++)l+="0";return n+l+o},setStartSerialNo:function(e,t,i){this.serialNumbers.length&&(this.serialNumbers[0].startNo=e,this.serialNumbers[0].endNo=t||"",this.serialNumbers[0].note="")},clearChoose:function(){this.detail.clientId=0,this.detail.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(i,a){i.id==e&&(console.log(i.id),t.detail.unitName=i.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){this.dialogTitle="郑铁公司生产计划单",this.dialogPlanVisible=!0,this.plan.id=0},addNewDetail:function(e){this.dialogTitle="郑铁公司生产计划单";this.serialNumbers=[],this.detail.productionPlanId=e.id,this.plan.id=0,this.serialNumbers.push(this.serialNumber),this.dialogFormVisible=!0},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(e,t){console.log(t);this.dialogTitle="编辑信息",this.showDetail=!1,this.plan=t,this.plan.createDate=t.createDate;var i=_.cloneDeep(t);void 0!=i.details&&(i.details.forEach(function(e,t,i){e.type="odd",e.sid=t+1}),this.productionPlanDetails=i.details,this.maxSid=i.details.length),this.dialogFormVisible=!0},add:function(e){var t=this,i=this;if(console.log("addbox！！！！"),""==this.detail.actualQuantity||void 0==this.detail.actualQuantity)return Object(c.Message)("请输入数量！"),!1;if(""==this.detail.salesPlanId)return Object(c.Message)("请选择销售计划"),!1;this.detail.serialNumbers=this.serialNumbers,this.productionPlanDetails.push(this.detail);var a=_.cloneDeep(this.plan),o=[],r=_.cloneDeep(this.productionPlanDetails);r.forEach(function(e){delete e.salesPlan});var s=l()(r,function(e,t){if("object"===(void 0===t?"undefined":n()(t))&&null!==t){if(-1!==o.indexOf(t))return;o.push(t)}return t});o=null,a.productionPlanDetails=s,this.$refs[e].validate(function(e){if(!e)return!1;t.plan.id?(t.tableLoading=!0,t.postRequest("/productionplandetails/update",a).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData(),i.emptyDetail(),i.clearSerialNumbers(),i.showDetails(i.currntPlanRow))})):(t.tableLoading=!0,console.log(a),t.postRequest("/productionplan/add",a).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData(),i.emptyDetail(),i.clearSerialNumbers(),i.showDetails(i.currntPlanRow)}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.clearChoose(),this.clearSerialNumbers(),this.emptyDetail(),this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productionplan/deletmark?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productionplan/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.plans=a,!t.currntPlanRow.id&&t.plans.length&&(t.currntPlanRow=t.plans[0],t.showDetails(t.plans[0])),t.totalCount=i.data.total,t.emptyData()}})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/sales/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.materialList=a,t.totalMaterialCount=i.data.total,t.dialogMaterialVisible=!0}})},emptyData:function(){this.productionPlanDetails=[],this.plan={id:0,notes:"",productionPlanNo:"",productionPlanDetails:""},this.currntPlanRow&&(this.plan.id=this.currntPlanRow.id)}},computed:{routes:function(){return this.$store.state.routes}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("\n        添加生产计划\n      ")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogPlanTitle,"close-on-click-modal":!1,visible:e.dialogPlanVisible,width:"750px"},on:{"update:visible":function(t){e.dialogPlanVisible=t},close:e.cancelPlanOpt}},[e.dialogPlanVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addPlanForm",attrs:{model:e.plan,rules:e.rules,size:"mini","label-width":"90px"}},[i("div",{staticStyle:{width:"100%",height:"auto"}},[i("el-row",[i("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[i("el-input",{staticStyle:{width:"600px",background:"#fff"},attrs:{placeholder:"生产计划备注...","prefix-icon":"el-icon-edit",type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:e.plan.notes,callback:function(t){e.$set(e.plan,"notes",t)},expression:"plan.notes"}})],1)],1)],1)])],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogPlanVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addPlan("addPlanForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.plan,rules:e.rules,size:"mini","label-width":"90px"}},[i("div",{staticStyle:{border:"1px solid #eeeeee"}},[i("div",[i("div",{staticStyle:{"background-color":"bisque"}},[i("form",{attrs:{model:e.detail,size:"mini","label-width":"50px"}},[i("el-row",{staticStyle:{display:"flex","justify-content":"flex-end"}},[i("el-button",{staticStyle:{padding:"8px",margin:"0"},attrs:{type:"primary"},on:{click:e.showMaterial}},[e._v("\n                    选择销售计划\n                  ")])],1),e._v(" "),i("el-row",[i("el-table",{ref:"singleTable",staticStyle:{width:"100%",background:"bisque"},attrs:{height:"100",data:e.selectsales,"highlight-current-row":""}},[i("el-table-column",{attrs:{align:"left",label:"客户名",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.client.name)+"\n                      ")]}}],null,!1,3305348717)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"产品名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.product.producteName)+"\n                      ")]}}],null,!1,472425393)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+"枚")]}}],null,!1,3875320087)}),e._v("\n                    >\n                    "),i("el-table-column",{attrs:{prop:"productNo",align:"left",label:"型号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}})],1)],1),e._v(" "),i("el-row",{staticStyle:{padding:"15px 0"}},[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"实际数量:",prop:"actualQuantity"}},[i("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"生产下发实际数量",size:"mini","prefix-icon":"el-icon-edit"},on:{change:e.setEndNumber},model:{value:e.detail.actualQuantity,callback:function(t){e.$set(e.detail,"actualQuantity",t)},expression:"detail.actualQuantity"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:11}},[i("div",[i("el-form-item",{attrs:{label:"是否完成:"}},[i("el-radio-group",{model:{value:e.detail.status,callback:function(t){e.$set(e.detail,"status",t)},expression:"detail.status"}},[i("el-radio",{attrs:{label:3}},[e._v("完成")]),e._v(" "),i("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:2}},[e._v("未完成")])],1)],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[i("el-input",{staticStyle:{width:"600px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注信息。。。"},model:{value:e.detail.notes,callback:function(t){e.$set(e.detail,"notes",t)},expression:"detail.notes"}})],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"justify"}},[e._v("\n                ***查看最近一次下发的销售单信息***\n                "),i("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"success",icon:"el-icon-arrow-down",circle:""},on:{click:e.showCurrentNo}}),e._v(" "),e.isprarent?i("div",[i("el-form",{attrs:{"label-position":"left",inline:"",model:e.lastPlanDetail}},[e.lastPlanDetail.startNo?i("el-form-item",{attrs:{label:"产品编码:"}},[i("span",[e._v(e._s(e.lastPlanDetail.startNo)+"-")]),i("span",[e._v(e._s(e.lastPlanDetail.endNo)+" ;")]),e._v(" "),i("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"success",icon:"el-icon-refresh",circle:""},on:{click:e.changeNO}})],1):i("span",[e._v("暂无数据")]),e._v(" "),i("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"success",icon:"el-icon-refresh",circle:""},on:{click:e.changeNO}})],1)],1):e._e()],1),e._v(" "),i("div",[i("div",{staticStyle:{"text-align":"left",display:"flex","justify-content":"space-between"}},[e._v("\n                  编号 "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.serialNumberAdd()}}},[e._v("新增编码\n                  ")])],1),e._v(" "),i("el-form-item",{staticStyle:{width:"200px"},attrs:{label:"编码长度:"}},[i("el-input-number",{attrs:{min:5,max:20,label:"设置编码长度"},on:{change:e.codeLenSet},model:{value:e.codeLen,callback:function(t){e.codeLen=t},expression:"codeLen"}})],1),e._v(" "),e._l(e.serialNumbers,function(t,a){return i("div",[i("el-row",{staticClass:"e-rows",attrs:{gutter:2}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"编码:"}},[i("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"起始编号..."},on:{change:e.setbyStartNo},model:{value:t.startNo,callback:function(i){e.$set(t,"startNo",i)},expression:"serialNumber.startNo"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:1}},[i("span",[e._v("--")])]),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"结束编号"},model:{value:t.endNo,callback:function(i){e.$set(t,"endNo",i)},expression:"serialNumber.endNo"}})],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"text",placeholder:"编码备注 。。。"},model:{value:t.note,callback:function(i){e.$set(t,"note",i)},expression:"serialNumber.note"}})],1),e._v(" "),i("el-col",{attrs:{span:3}},[i("el-tooltip",{attrs:{effect:"light",content:"删除",placement:"right"}},[i("el-button",{staticStyle:{padding:"5px",margin:"0"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.deletSerialNo(a)}}})],1)],1)],1)],1)})],2)])])])])],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"800px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?i("div",{staticStyle:{width:"100%"}},[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[i("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"客户名",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.client.name)+"\n          ")]}}],null,!1,1367953005)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"产品名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.product.producteName)+"\n          ")]}}],null,!1,3679960497)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+"枚")]}}],null,!1,3875320087)}),e._v(" "),i("el-table-column",{attrs:{prop:"productNo",align:"left",label:"型号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-table",{attrs:{data:e.plans,border:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"生产计划"}},[i("el-table-column",{attrs:{align:"left",label:"编号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.planNo)+"\n              "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.addNewDetail(t.row)}}},[e._v("添加详情 ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.editePlan(t.$index,t.row)}}},[e._v("编辑\n              ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n              ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"success",size:"mini"},on:{click:function(i){return e.showDetails(t.row)}}},[e._v("详情\n              ")])]}}])})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:16}},[i("el-table",{attrs:{data:e.planDetails,border:""}},[i("el-table-column",{attrs:{label:"生产计划详情"}},[i("el-table-column",{attrs:{align:"left",label:"序号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+1))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"客户名",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.client.name))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"产品名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.product.producteName))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.actualQuantity)+"枚")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"规格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.specification))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.productNo))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",label:"编码规则",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e._l(t.row.serialNumbers,function(t,a){return i("div",[i("p",[e._v("编号: "+e._s(t.startNo)+"- "+e._s(t.endNo)+" ;备注: "+e._s(t.note)+" ")])])}),e._v(" "),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[i("el-tag",{attrs:{size:"medium"}},[e._v("编码")])],1)],2)]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.editeDetail(t.$index,t.row)}}},[e._v("编辑\n              ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteDetail(t.$index,t.row)}}},[e._v("删除\n              ")])]}}])})],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var p=i("VU/8")(d,u,!1,function(e){i("gXED")},null,null);t.default=p.exports},Pycp:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i("zL8q");var a={data:function(){return{outRecive:{quantity:"",note:"",materialId:""},dialogInTitle:"采购数量",dialogFormInVisible:!1,activeName:"material",confirmDialogTitle:"采购确认单",tempPlan:[],materialsReceives:[],confirms:{},nowMaterial:{quantity:"",notes:"",complete:""},confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",RecordKeywords:"",confirmKewords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{materialName:[{required:!0,message:"必填:原料名称",trigger:"blur"}],quantity:[{required:!0,message:"必填:数量",trigger:"blur"},{validator:function(e,t,i){/^\d+$/.test(t)?i():i("数字格式错误!")},message:"数字格式错误",trigger:"blur"}],clientId:[{required:!0,message:"必选:公司",trigger:"change"}],unitId:[{required:!0,message:"必选:单位",trigger:"change"}]},materials:[],defaultProps:{label:"name",isLeaf:"leaf",children:"child"},dialogTitle:"",currentPage:1,confirmCurrentPage:1,currentReceivePage:1,formLabelWidth:"120px",totalCount:-1,receiveTotalCount:-1,material:{materialName:"",unitId:"",specs:""},clients:[],units:[],dialogTableVisible:!1,dialogFormVisible:!1,currentIndex:"",matriallist:[]}},mounted:function(){this.initData()},methods:{formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},searchRecordData:function(){this.loadReceivedData()},doDelete:function(e){var t=this;this.getRequest("/materialInReceiveRecord/withdraw?id="+e.id).then(function(e){if(e&&200==e.status){e.data;t.loadReceivedData()}})},initData:function(){this.loadReceivedData()},keywordsChange:function(e){""==e&&this.loadReceivedData()},recordKeywordsChange:function(e){""==e&&this.searchRecordData()},currentReceiveChange:function(e){this.currentReceivePage=e,console.log(this.currentReceivePage),this.loadReceivedData()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.material=t,this.material.createDate=t.createDate,delete this.material.unit,this.dialogFormVisible=!0},cancelOptIn:function(){this.dialogFormInVisible=!1,this.loadReceivedData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadReceivedData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e)}).catch(function(){})},loadReceivedData:function(){var e=this;this.tableLoading=!0,this.getRequest("/materialInReceiveRecord/findbypage?page="+this.currentReceivePage+"&size=10&queryName="+this.RecordKeywords).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var i=t.data.data;e.materialsReceives=i,e.receiveTotalCount=t.data.total}})}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.recordKeywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchRecordData(t)}},model:{value:e.RecordKeywords,callback:function(t){e.RecordKeywords=t},expression:"RecordKeywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchRecordData}},[e._v("搜索\n    ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialsReceives,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",fixed:"",label:"名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.materail.materialName)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.quantity)+" "+e._s(t.row.unitName)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",prop:"operatorName",label:"记录人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.operator.name)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDate")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.cancelRecordData(t.row)}}},[e._v("撤销\n          ")]):e._e()],1)]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentReceivePage,layout:"prev, pager, next",total:e.receiveTotalCount},on:{"current-change":e.currentReceiveChange}})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("Ior+")},null,null);t.default=o.exports},QWIT:function(e,t){},QZs9:function(e,t){},T5Y6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("ngyR"),n=i("Gpj+"),o={data:function(){return{activeName:"notification"}},methods:{handleClick:function(e,t){console.log(e,t)}},components:{fc:a.default,nf:n.default}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"系统通知",name:"notification"}},[i("nf")],1),e._v(" "),i("el-tab-pane",{attrs:{label:"好友聊天",name:"chat"}},[i("fc")],1)],1)],1)},staticRenderFns:[]},r=i("VU/8")(o,l,!1,null,null,null);t.default=r.exports},TjZE:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("pFYg"),n=i.n(a),o=i("mvHQ"),l=i.n(o),r=i("zL8q"),s={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],plans:[],clients:[],units:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{materialType:"",notes:"",serialNumber:"",clientId:"",clientName:""},detail:{sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",type:"",specifications:""},details:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择原材料",selectMaterial:{},selectedM:{},filterText:""}},mounted:function(){this.initData()},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectMaterial.id>0){var i=this.selectMaterial.materialName+""+this.selectMaterial.specs+";";this.$confirm("您当前选择了"+i+"确认选择该原料吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(e){var t=e.selectMaterial;e.detail.unitId=t.unitId,e.detail.unitName=t.unit.name,e.detail.name=t.materialName,e.detail.materialId=t.id,e.detail.specifications=t.specs,this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectMaterial={},this.selectedM={}},formatStatus:function(e,t){return 1==e.materialType?"已确认":"未确认"},selectType:function(e,t,i){console.log("changne"),this.types=e,2==e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(i,a,n){i.id==e&&(t.detail.unitId=i.unitId,t.detail.unitName=i.unitName,t.detail.name=i.name,t.detail.materialId=i.id,t.detail.specifications=i.specs)})},addBox:function(){var e=this;if(console.log("asdfadsfasdfasd"),""==this.detail.quantity||void 0==this.detail.quantity)return Object(r.Message)("请输入数量"),!1;if(""==this.detail.name||void 0==this.detail.name)return Object(r.Message)("请选择物料"),!1;if(""==this.detail.sid)if(this.details.length>0){var t=!1;this.details.forEach(function(i,a,n){i.materialId==e.detail.materialId&&i.mtype==e.types&&(t=!0,i.quantity=parseFloat(e.detail.quantity)+parseFloat(i.quantity))}),t||(this.maxSid+=1,this.detail.sid=this.maxSid,this.detail.type="new",this.detail.mtype=this.types,this.details.push(this.detail))}else this.detail.sid=1,this.detail.type="new",this.detail.mtype=this.types,this.maxSid+=1,this.details.push(this.detail);else if(this.details.length)for(var i=0,a=this.details.length;i<a;i++){var n=this.details[i];"odd"===n.type?(this.detail.type="update",n.sid==this.detail.sid&&(this.details.splice(i,1),this.details.push(this.detail))):n.sid==this.detail.sid&&(this.details.splice(i,1),this.details.push(this.detail))}this.emptyDetail()},editeDetail:function(e,t){this.detail=t},deleteDetail:function(e,t){console.log("delete");var i=this.details.splice(e,1);"odd"===i[0].type&&(i[0].type="delete",this.currentDeleteData.push(i[0])),this.maxSid-=1},emptyDetail:function(){this.detail={sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",specifications:"",type:""}},initData:function(){var e=this;e.loadData(),this.getRequest("/rowBuyPlan/basedata").then(function(t){if(t&&200==t.status){var i=t.data;e.units=i.root.units,e.clients=i.root.clients;var a=[];i.root.materials.forEach(function(e,t,i){var n=e[0],o=e[1],l=e[2];a.push({name:n,unitId:o,id:l,unitName:e[3],specs:e[4],mtype:1})}),e.materials=a,e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var n=[];i.root.products.forEach(function(e,t,i){n.push({name:e[0],unitId:e[1],id:e[2],unitName:e[3],specs:e[4],mtype:2})}),e.products=n}})},keywordsChange:function(e){""==e&&this.loadData()},keywordsMaterialChange:function(e){""==e&&this.loadMaterial()},handleNodeClick:function(e){this.plan.clientId=e.id,this.plan.clientName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.plan.clientId=0,this.plan.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(i,a){i.id==e&&(console.log(i.id),t.detail.unitName=i.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){this.dialogTitle="郑铁公司采购单";var e=this;this.getRequest("/rowBuyPlan/getSerialNumber").then(function(t){if(e.tableLoading=!1,t&&200==t.status){var i=t.data;e.plan.serialNumber=i.root.serialNumber,e.dialogFormVisible=!0}})},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(e,t){console.log(t);this.dialogTitle="编辑信息",this.plan=t,this.plan.createDate=t.createDate;var i=_.cloneDeep(t);void 0!=i.detail&&(i.detail.forEach(function(e,t,i){e.type="odd",e.sid=t+1}),this.details=i.detail,this.maxSid=i.detail.length),this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var i=this,a=_.cloneDeep(this.plan);if(0==this.details.length)return this.$message({type:"info",message:"详情不能为空！"}),!1;var o=[],r=this.details.concat(this.currentDeleteData),s=l()(r,function(e,t){if("object"===(void 0===t?"undefined":n()(t))&&null!==t){if(-1!==o.indexOf(t))return;o.push(t)}return t});o=null,a.detail=s,this.$refs[e].validate(function(e){if(!e)return!1;t.validateplanNo();t.plan.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/rowBuyPlan/update",a).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData(),i.emptyDetail())})):(t.tableLoading=!0,0==t.plan.clientId||""==t.plan.clientId?(t.plan.clientId=0,a.materialType=1):a.materialType=2,console.log(a),t.postRequest("/rowBuyPlan/addnew",a).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData(),i.emptyDetail()}}))})},validateplanNo:function(){return!0},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.serialNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/rowBuyPlan/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/rowBuyPlan/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.plans=a,t.totalCount=i.data.total,t.emptyData()}})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/material/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.materialList=a,t.totalMaterialCount=i.data.total,t.dialogMaterialVisible=!0}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.details=[],this.plan={materialType:"",notes:"",serialNumber:"",clientId:0,clientName:""}}},computed:{routes:function(){return this.$store.state.routes}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("\n        添加\n      ")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.plan,rules:e.rules,size:"small","label-width":"90px"}},[i("div",{staticStyle:{border:"1px solid #eeeeee"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"编号:",prop:"serialNumber"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"计划编号"},model:{value:e.plan.serialNumber,callback:function(t){e.$set(e.plan,"serialNumber",t)},expression:"plan.serialNumber"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"供货商:",prop:"clientId"}},[i("el-popover",{attrs:{placement:"right",title:"供货商",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[i("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),i("el-tree",{attrs:{data:e.clients,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),i("div",{ref:"tree2",staticStyle:{width:"200px",height:"28px",display:"inline-flex","justify-content":"space-between","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference","filter-node-method":e.filterNode},on:{click:e.showDepTree},slot:"reference"},[i("div",[e._v(e._s(e.plan.clientName))]),e._v(" "),i("div",{staticClass:"el-icon-circle-close",staticStyle:{color:"#606266"},on:{click:e.clearChoose}})])],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.plan.notes,callback:function(t){e.$set(e.plan,"notes",t)},expression:"plan.notes"}})],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"left",border:"1px solid #eeeeee"}},[e._v("\n          购买详情:\n        ")]),e._v(" "),i("div",{staticStyle:{border:"1px solid #eeeeee"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"名称"},on:{focus:e.showMaterial},model:{value:e.detail.name,callback:function(t){e.$set(e.detail,"name",t)},expression:"detail.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"规格:",prop:"specifications"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",disabled:!0,size:"mini",placeholder:"规格。。"},model:{value:e.detail.specifications,callback:function(t){e.$set(e.detail,"specifications",t)},expression:"detail.specifications"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[i("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}},[i("el-select",{staticStyle:{width:"90px"},attrs:{slot:"append",disabled:!0,placeholder:"单位"},on:{change:e.selectChange},slot:"append",model:{value:e.detail.unitId,callback:function(t){e.$set(e.detail,"unitId",t)},expression:"detail.unitId"}},e._l(e.units,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.detail.notes,callback:function(t){e.$set(e.detail,"notes",t)},expression:"detail.notes"}})],1)],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addBox}},[e._v("添加")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.details,border:"",height:"200"}},[i("el-table-column",{attrs:{prop:"sid",align:"left",label:"序号",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+e._s(t.row.unitName))]}}],null,!1,3476428609)}),e._v(" "),i("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.editeDetail(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteDetail(t.$index,t.row)}}},[e._v("删除\n                ")])]}}],null,!1,987709478)})],1)],1)])],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?i("div",{staticStyle:{width:"100%"}},[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[i("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),i("el-table-column",{attrs:{prop:"materialName",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"specs",align:"left",fixed:"",label:"原料规格",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",fixed:"",label:"单位",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.unit.name)+"\n          ")]}}],null,!1,2595393714)})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.plans,border:""}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.detail,function(t,a){return i("el-form",{key:t.id,staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",[i("span",[e._v(e._s(a+1))])]),e._v(" "),i("el-form-item",{attrs:{label:"名称:"}},[i("span",[e._v(e._s(t.name)+";")])]),e._v(" "),i("el-form-item",{attrs:{label:"规格:"}},[i("span",[e._v(e._s(t.specifications)+" ;")])]),e._v(" "),i("el-form-item",{attrs:{label:"数量:"}},[i("span",[e._v(e._s(t.quantity)+" "+e._s(t.units.name)+";")])]),e._v(" "),i("el-form-item",{attrs:{label:"状态:"}},[i("span",[e._v(e._s(1==t.confirmStatus?"未确认":"已收货"))])]),e._v(" "),i("el-form-item",{attrs:{label:"备注:"}},[i("span",[e._v(e._s(t.notes))])])],1)})}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"serialNumber",align:"left",label:"编号",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"clientName",width:"120",align:"left",label:"公司名称"}}),e._v(" "),i("el-table-column",{attrs:{width:"140",align:"left",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createDate)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"confirmStatus",width:"80",align:"left",formatter:e.formatStatus,label:"状态"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var d=i("VU/8")(s,c,!1,function(e){i("X3mk")},null,null);t.default=d.exports},UZTo:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{tempPlan:[],confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midRecords:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){this.initData()},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(i,a){console.log(i.id),i.id==e&&(t.middleProduct.utilname=i.name)})},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var i="",a=e.plant;return this.positions.forEach(function(e,t,n){a.forEach(function(t,a,n){e.id==t&&(i+=e.name+" , ")})}),i},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){var e=this;e.loadData(),this.getRequest("/middleProduct/basedata").then(function(t){if(t&&200==t.status){var i=t.data;e.units=i.root.units,e.clients=i.root.clients,e.products=i.root.products}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midProductInRecieving/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midProductInRecieving/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.midRecords=a,t.totalCount=i.data.total}})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midRecords,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",fixed:"",label:"入库时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"规格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.midproduct.standard)+"\n          ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"quantity",align:"left",label:"原料数量",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.operator.name)+"\n          ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.cancelRecordData(t.row)}}},[e._v("撤销\n          ")]):e._e()],1)]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("JrsW")},null,null);t.default=o.exports},Uct3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("axNP"),n=i("ePtJ"),o=i("KNe0"),l=i("Pycp"),r={data:function(){return{activeName:"midProduct"}},methods:{handleClick:function(e,t){console.log(e,t),this.$refs.child.initData()}},components:{mpout:a.default,mpconfirm:n.default,rowmateril:o.default,materilinrecord:l.default}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"原料库",name:"midProduct",lazy:""}},[i("rowmateril",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"出库记录",name:"midOutRecord",lazy:""}},[i("mpout",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"入库记录",name:"midInRecord",lazy:""}},[i("materilinrecord",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"采购确认",name:"midConfirm",lazy:""}},[i("mpconfirm",{ref:"child"})],1)],1)],1)},staticRenderFns:[]},c=i("VU/8")(r,s,!1,null,null,null);t.default=c.exports},VDSS:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{username:[{required:!0,message:"必填:姓名",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"},{validator:function(e,t,i){/^1[3|4|5|7|8][0-9]\d{8}$/.test(t)?i():i("电话号码格式错误!")},message:"电话号码错误",trigger:"blur"}],password:[{required:!0,message:"必填:密码",trigger:"blur"}],roles:[{required:!0,message:"必选:角色",trigger:"change"}],empId:[{required:!0,message:"必选:员工",trigger:"change"}]},roles:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,user:{username:"",phone:""},users:[],deps:[],emps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{formatSex:function(e,t){return"1"==e.gender?"男":"2"==e.gender?"女":"未知"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.user.departmentName=e.name,this.user.departmentId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadData(),this.getRequest("/users/basicdata").then(function(t){if(t&&200==t.status){var i=t.data;e.emps=i.root.emps,e.roles=i.root.roles}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加用户",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadData()},showEditEmpView:function(e,t){this.dialogTitle="编辑用户",console.log(t),console.log(e),this.user=t,this.currentIndex=e,this.user.username=t.username,this.user.empId=t.empId,this.user.empName=t.empName;var i=[];t.roles.forEach(function(e){i.push(e.id)}),this.user.roles=i,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.user.id?(t.tableLoading=!0,console.log(t.user),t.postRequest("/users/update",t.user).then(function(e){i.tableLoading=!1,e&&200==e.status&&(console.log(e),i.dialogFormVisible=!1,i.loadData(),i.emptyData())})):(t.tableLoading=!0,console.log(i.user),console.log("添加"),t.postRequest("/users/addAndUpdate",t.user).then(function(e){if(i.tableLoading=!1,console.log(e),e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},deleteEmp:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/users/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/users/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.users=a,t.totalCount=i.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.user={username:"",phone:"",password:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过姓名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n    ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.user,rules:e.rules,size:"sam","label-width":"90px"}},[i("el-form-item",{attrs:{label:"昵称:",prop:"username"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入昵称"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-phone",size:"mini",placeholder:"电话号码..."},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"密码:",prop:"password"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"密码..."},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"员工:",prop:"empId"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择员工"},model:{value:e.user.empId,callback:function(t){e.$set(e.user,"empId",t)},expression:"user.empId"}},e._l(e.emps,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"角色:",prop:"roles"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",multiple:"",size:"mini",placeholder:"请选择角色"},model:{value:e.user.roles,callback:function(t){e.$set(e.user,"roles",t)},expression:"user.roles"}},e._l(e.roles,function(e){return i("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}),1)],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"username",align:"left",fixed:"",label:"昵称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"phone",align:"left",fixed:"",label:"电话",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteEmp(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("/V9a")},null,null);t.default=o.exports},Va7D:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("pFYg"),n=i.n(a),o=i("mvHQ"),l=i.n(o),r=i("zL8q"),s={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],plans:[],clients:[],units:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{materialType:"",notes:"",serialNumber:"",clientId:"",clientName:""},detail:{sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",type:"",specifications:""},details:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择原材料",selectMaterial:{},selectedM:{}}},mounted:function(){this.initData()},methods:{showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectMaterial=e,console.log(this.selectMaterial)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectMaterial.id>0){var i=this.selectMaterial.name+""+this.selectMaterial.standard+";";this.$confirm("您当前选择了"+i+"确认选择该原料吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(e){var t=e.selectMaterial;e.detail.unitId=t.unitId,e.detail.unitName=t.unit.name,e.detail.name=t.name,e.detail.materialId=t.id,e.detail.specifications=t.standard,this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectMaterial={},this.selectedM={}},formatStatus:function(e,t){return 1==e.materialType?"已确认":"未确认"},selectType:function(e,t,i){console.log("changne"),this.types=e,2==e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(i,a,n){i.id==e&&(t.detail.unitId=i.unitId,t.detail.unitName=i.unitName,t.detail.name=i.name,t.detail.materialId=i.id,t.detail.specifications=i.specs)})},addBox:function(){var e=this;if(console.log("asdfadsfasdfasd"),""==this.detail.quantity||void 0==this.detail.quantity)return Object(r.Message)("请输入数量"),!1;if(""==this.detail.name||void 0==this.detail.name)return Object(r.Message)("请选择物料"),!1;if(""==this.detail.sid)if(this.details.length>0){var t=!1;this.details.forEach(function(i,a,n){i.materialId==e.detail.materialId&&i.mtype==e.types&&(t=!0,i.quantity=parseFloat(e.detail.quantity)+parseFloat(i.quantity))}),t||(this.maxSid+=1,this.detail.sid=this.maxSid,this.detail.type="new",this.detail.mtype=this.types,this.details.push(this.detail))}else this.detail.sid=1,this.detail.type="new",this.detail.mtype=this.types,this.maxSid+=1,this.details.push(this.detail);else if(this.details.length)for(var i=0,a=this.details.length;i<a;i++){var n=this.details[i];"odd"===n.type?(this.detail.type="update",n.sid==this.detail.sid&&(this.details.splice(i,1),this.details.push(this.detail))):n.sid==this.detail.sid&&(this.details.splice(i,1),this.details.push(this.detail))}this.emptyDetail()},editeDetail:function(e,t){this.detail=t},deleteDetail:function(e,t){console.log("delete");var i=this.details.splice(e,1);"odd"===i[0].type&&(i[0].type="delete",this.currentDeleteData.push(i[0])),this.maxSid-=1},emptyDetail:function(){this.detail={sid:0,id:0,name:"",quantity:"",unitId:"",notes:"",unitName:"",specifications:"",type:""}},initData:function(){var e=this;e.loadData(),this.getRequest("/midBuyPlan/basedata").then(function(t){if(t&&200==t.status){var i=t.data;e.units=i.root.units,e.clients=i.root.clients;var a=[];i.root.materials.forEach(function(e,t,i){var n=e[0],o=e[1],l=e[2];a.push({name:n,unitId:o,id:l,unitName:e[3],specs:e[4],mtype:1})}),e.materials=a,e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var n=[];i.root.products.forEach(function(e,t,i){n.push({name:e[0],unitId:e[1],id:e[2],unitName:e[3],specs:e[4],mtype:2})}),e.products=n}})},keywordsChange:function(e){""==e&&this.loadData()},keywordsMaterialChange:function(e){""==e&&this.loadMaterial()},handleNodeClick:function(e){this.plan.clientId=e.id,this.plan.clientName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.plan.clientId=0,this.plan.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(i,a){i.id==e&&(console.log(i.id),t.detail.unitName=i.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){this.dialogTitle="郑铁公司采购单";var e=this;this.getRequest("/midBuyPlan/getSerialNumber").then(function(t){if(e.tableLoading=!1,t&&200==t.status){var i=t.data;e.plan.serialNumber=i.root.serialNumber,e.dialogFormVisible=!0}})},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(e,t){console.log(t);this.dialogTitle="编辑信息",this.plan=t,this.plan.createDate=t.createDate;var i=_.cloneDeep(t);void 0!=i.detail&&(i.detail.forEach(function(e,t,i){e.type="odd",e.sid=t+1}),this.details=i.detail,this.maxSid=i.detail.length),this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var i=this,a=_.cloneDeep(this.plan);if(0==this.details.length)return this.$message({type:"info",message:"详情不能为空！"}),!1;var o=[],r=this.details.concat(this.currentDeleteData),s=l()(r,function(e,t){if("object"===(void 0===t?"undefined":n()(t))&&null!==t){if(-1!==o.indexOf(t))return;o.push(t)}return t});o=null,a.detail=s,this.$refs[e].validate(function(e){if(!e)return!1;t.validateplanNo();t.plan.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/midBuyPlan/update",a).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData(),i.emptyDetail())})):(t.tableLoading=!0,0==t.plan.clientId||""==t.plan.clientId?(t.plan.clientId=0,a.materialType=1):a.materialType=2,console.log(a),t.postRequest("/midBuyPlan/addnew",a).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData(),i.emptyDetail()}}))})},validateplanNo:function(){return!0},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.serialNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midBuyPlan/delet?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midBuyPlan/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.plans=a,t.totalCount=i.data.total,t.emptyData()}})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/middleProduct/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.materialList=a,t.totalMaterialCount=i.data.total,t.dialogMaterialVisible=!0}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.details=[],this.plan={materialType:"",notes:"",serialNumber:"",clientId:0,clientName:""}}},computed:{}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("\n        添加\n      ")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.plan,rules:e.rules,size:"small","label-width":"90px"}},[i("div",{staticStyle:{border:"1px solid #eeeeee"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"编号:",prop:"serialNumber"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"计划编号"},model:{value:e.plan.serialNumber,callback:function(t){e.$set(e.plan,"serialNumber",t)},expression:"plan.serialNumber"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"供货商:",prop:"clientId"}},[i("el-popover",{attrs:{placement:"right",title:"供货商",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[i("el-tree",{attrs:{data:e.clients,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),i("div",{staticStyle:{width:"200px",height:"28px",display:"inline-flex","justify-content":"space-between","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[i("div",[e._v(e._s(e.plan.clientName))]),e._v(" "),i("div",{staticClass:"el-icon-circle-close",staticStyle:{color:"#606266"},on:{click:e.clearChoose}})])],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.plan.notes,callback:function(t){e.$set(e.plan,"notes",t)},expression:"plan.notes"}})],1)],1)],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"left",border:"1px solid #eeeeee"}},[e._v("\n          购买详情:\n        ")]),e._v(" "),i("div",{staticStyle:{border:"1px solid #eeeeee"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"名称"},on:{focus:e.showMaterial},model:{value:e.detail.name,callback:function(t){e.$set(e.detail,"name",t)},expression:"detail.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"规格:",prop:"specifications"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",disabled:!0,size:"mini",placeholder:"规格。。"},model:{value:e.detail.specifications,callback:function(t){e.$set(e.detail,"specifications",t)},expression:"detail.specifications"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"数量:",prop:"quantity"}},[i("el-input",{staticStyle:{width:"200px",background:"#fff"},attrs:{type:"number",placeholder:"原料数量",size:"mini","prefix-icon":"el-icon-edit"},model:{value:e.detail.quantity,callback:function(t){e.$set(e.detail,"quantity",t)},expression:"detail.quantity"}},[i("el-select",{staticStyle:{width:"90px"},attrs:{slot:"append",disabled:!0,placeholder:"单位"},on:{change:e.selectChange},slot:"append",model:{value:e.detail.unitId,callback:function(t){e.$set(e.detail,"unitId",t)},expression:"detail.unitId"}},e._l(e.units,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"备注:",prop:"notes"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注。。。"},model:{value:e.detail.notes,callback:function(t){e.$set(e.detail,"notes",t)},expression:"detail.notes"}})],1)],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addBox}},[e._v("添加")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.details,border:"",height:"200"}},[i("el-table-column",{attrs:{prop:"sid",align:"left",label:"序号",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.quantity)+e._s(t.row.unitName))]}}],null,!1,3476428609)}),e._v(" "),i("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.editeDetail(t.$index,t.row)}}},[e._v("编辑\n                ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteDetail(t.$index,t.row)}}},[e._v("删除\n                ")])]}}],null,!1,987709478)})],1)],1)])],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"480px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?i("div",{staticStyle:{width:"100%"}},[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n          ")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[i("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"standard",align:"left",fixed:"",label:"原料规格",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",fixed:"",label:"单位",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.unit.name)+"\n          ")]}}],null,!1,2595393714)})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.plans,border:""}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.detail,function(t,a){return i("el-form",{key:t.id,staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",[i("span",[e._v(e._s(a+1))])]),e._v(" "),i("el-form-item",{attrs:{label:"名称:"}},[i("span",[e._v(e._s(t.name)+";")])]),e._v(" "),i("el-form-item",{attrs:{label:"规格:"}},[i("span",[e._v(e._s(t.specifications)+" ;")])]),e._v(" "),i("el-form-item",{attrs:{label:"数量:"}},[i("span",[e._v(e._s(t.quantity)+" "+e._s(t.units.name)+";")])]),e._v(" "),i("el-form-item",{attrs:{label:"状态:"}},[i("span",[e._v(e._s(1==t.confirmStatus?"未确认":"已收货"))])]),e._v(" "),i("el-form-item",{attrs:{label:"备注:"}},[i("span",[e._v(e._s(t.notes))])])],1)})}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"serialNumber",align:"left",label:"编号",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"clientName",width:"120",align:"left",label:"公司名称"}}),e._v(" "),i("el-table-column",{attrs:{width:"140",align:"left",label:"下单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createDate)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"confirmStatus",width:"80",align:"left",formatter:e.formatStatus,label:"状态"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var d=i("VU/8")(s,c,!1,function(e){i("kxoV")},null,null);t.default=d.exports},VeYG:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{plateNumber:[{required:!0,message:"必填:车牌",trigger:"blur"}],buyedDate:[{required:!0,message:"必填:购车时间",trigger:"blur"}],manufacturer:[{required:!0,message:"必选:生产厂家",trigger:"blur"}],vehicleType:[{required:!0,message:"必填:车辆型号",trigger:"blur"}]},cars:[],dialogTitle:"",currentPage:1,totalCount:-1,car:{plateNumber:"",buyedDate:"",carryingNumber:"",manufacturer:"",maintenanceMile:"",vehicleType:"",carStatus:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{formatStatus:function(e,t){return"USED"==e.carStatus?"使用中":"REPAIR"==e.carStatus?"修理中":"FREE"==e.carStatus?"空闲":"报废"},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadEmps()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.car=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.car.buyedDate=this.formatDate(t.buyedDate),delete this.car.noteMaker,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.validateCarNo();t.car.id?(t.tableLoading=!0,console.log(t.car),t.postRequest("/vehicle/addupvf",t.car).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData())})):(t.tableLoading=!0,console.log(i.car),t.postRequest("/vehicle/addupvf",t.car).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData()}}))})},validateCarNo:function(){return!0},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.plateNumber+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehicle/deletvf?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehicle/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.cars=a,t.totalCount=i.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.car={plateNumber:"",carStatus:"",buyedDate:"",manufacturer:"",maintenanceMile:"",carryingNumber:"",vehicleType:""}}},computed:{}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n    \n          ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.car,rules:e.rules,size:"small","label-width":"90px"}},[i("el-form-item",{attrs:{label:"车牌:",prop:"plateNumber"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入车牌号。。"},model:{value:e.car.plateNumber,callback:function(t){e.$set(e.car,"plateNumber",t)},expression:"car.plateNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"生产厂家:",prop:"manufacturer"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"生产厂家"},model:{value:e.car.manufacturer,callback:function(t){e.$set(e.car,"manufacturer",t)},expression:"car.manufacturer"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"车辆型号:",prop:"vehicleType"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"车辆型号"},model:{value:e.car.vehicleType,callback:function(t){e.$set(e.car,"vehicleType",t)},expression:"car.vehicleType"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"购买日期:",prop:"buyedDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"购买日期"},model:{value:e.car.buyedDate,callback:function(t){e.$set(e.car,"buyedDate",t)},expression:"car.buyedDate"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cars,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"plateNumber",align:"left",fixed:"",label:"车牌",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"carStatus",width:"120",align:"left",formatter:e.formatStatus,label:"状态"}}),e._v(" "),i("el-table-column",{attrs:{width:"100",align:"left",label:"购车时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.buyedDate)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"manufacturer",width:"220",align:"left",label:"生产厂家"}}),e._v(" "),i("el-table-column",{attrs:{prop:"vehicleType",width:"160",align:"left",label:"车型号"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n          ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(e){i("LrNQ")},null,null);t.default=r.exports},VsxF:function(e,t){},WaId:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("6HRJ"),n=i("O9uO"),o=i("giJI"),l={data:function(){return{activeName:"plan"}},methods:{handleClick:function(e,t){console.log(e,t)}},components:{mp:a.default,mps:n.default,mpm:o.default}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"销售计划",name:"plan"}},[i("mp")],1),e._v(" "),i("el-tab-pane",{attrs:{label:"生产计划",name:"planed"}},[i("mps")],1),e._v(" "),i("el-tab-pane",{attrs:{label:"生产进度",name:"planedManager"}},[i("mpm")],1)],1)],1)},staticRenderFns:[]},s=i("VU/8")(l,r,!1,null,null,null);t.default=s.exports},X3mk:function(e,t){},ZEO7:function(e,t){},ZSR4:function(e,t){},axNP:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{tempPlan:[],depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midRecords:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){this.initData(),console.log("fiand")},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(i,a){console.log(i.id),i.id==e&&(t.middleProduct.utilname=i.name)})},selectType:function(e){this.middleProduct.selectType=e},initData:function(){console.log("pop"),this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/materialOutReceiveRecord/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,console.log("find"),this.getRequest("/materialOutReceiveRecord/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.midRecords=a,t.totalCount=i.data.total}})}},computed:{routes:function(){}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midRecords,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"出库时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDate")(t.row.createDate))+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.materail.materialName)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"规格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.materail.specs)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"quantity",align:"left",label:"原料数量",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.operator.name)+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.cancelRecordData(t.row)}}},[e._v("撤销 \n          ")]):e._e()],1)]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("e4Wq")},null,null);t.default=o.exports},cSB1:function(e,t){},d0NV:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("0wq/"),n=i("UZTo"),o=i("ev2I"),l=i("5xx1"),r=i("Nzev"),s={data:function(){return{activeName:"midProduct"}},methods:{handleClick:function(e,t){console.log(e,t),console.log("被点了"),this.$refs.child.initData()}},components:{product:a.default,productinrecord:n.default,mpout:o.default,mptrans:l.default,mpconfirm:r.default}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"半成品库",name:"midProduct"}},[i("product",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"出库记录",name:"midOutRecord",lazy:""}},[i("mpoutrecord",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"入库记录",name:"midInRecord",lazy:""}},[i("productinrecord",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"采购确认",name:"midConfirm",lazy:""}},[i("mpconfirm",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"物料周转",name:"midTransform",lazy:""}},[i("mptrans",{ref:"child"})],1)],1)],1)},staticRenderFns:[]},d=i("VU/8")(s,c,!1,null,null,null);t.default=d.exports},d6kF:function(e,t){},dnay:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:中文名",trigger:"blur"}]},units:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,unit:{name:"",code:""},deps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""==e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},addAndFlushEmp:function(){this.dialogTitle="添加单位",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadDatas()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.unit=t,delete this.unit.sysMenu,delete this.unit.users,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.unit.id?(t.tableLoading=!0,console.log(t.unit),t.postRequest("/specification/create",t.unit).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadDatas(),i.emptyData())})):(t.tableLoading=!0,console.log(i.unit),t.postRequest("/specification/create",t.unit).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadDatas(),i.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/specification/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadDatas()}})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/specification/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.units=a,t.totalCount=i.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.unit={name:"",code:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n    ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.unit,rules:e.rules,size:"sam","label-width":"90px"}},[i("el-form-item",{attrs:{label:"规格名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"产品规格"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.units,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("H+Q0")},null,null);t.default=o.exports},e0XP:function(e,t){},e4Wq:function(e,t){},ePtJ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bOdI"),n=i.n(a),o=(i("zL8q"),{data:function(){var e;return e={outRecive:{quantity:"",note:"",materialId:""},dialogInTitle:"采购数量",dialogFormInVisible:!1,activeName:"material",confirmDialogTitle:"采购确认单",tempPlan:[],materialsReceives:[],confirms:[],nowMaterial:{quantity:"",notes:"",complete:""},newMaterial:{name:"",specifications:"",quantity:"",unitName:"",notes:""},tableLoading:!1,confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",RecordKeywords:"",confirmKewords:""},n()(e,"tableLoading",!1),n()(e,"advanceSearchViewVisible",!1),n()(e,"rules",{materialName:[{required:!0,message:"必填:原料名称",trigger:"blur"}],quantity:[{required:!0,message:"必填:数量",trigger:"blur"},{validator:function(e,t,i){/^\d+$/.test(t)?i():i("数字格式错误!")},message:"数字格式错误",trigger:"blur"}],clientId:[{required:!0,message:"必选:公司",trigger:"change"}],unitId:[{required:!0,message:"必选:单位",trigger:"change"}]}),n()(e,"materials",[]),n()(e,"defaultProps",{label:"name",isLeaf:"leaf",children:"child"}),n()(e,"dialogTitle",""),n()(e,"currentPage",1),n()(e,"confirmCurrentPage",1),n()(e,"formLabelWidth","120px"),n()(e,"totalCount",-1),n()(e,"receiveTotalCount",-1),n()(e,"confirmTotalCount",-1),n()(e,"material",{materialName:"",unitId:"",specs:""}),n()(e,"clients",[]),n()(e,"units",[]),n()(e,"dialogTableVisible",!1),n()(e,"dialogFormVisible",!1),n()(e,"currentIndex",""),n()(e,"matriallist",[]),e},mounted:function(){this.initData()},methods:{formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},searchConfirmData:function(){this.loadConfirmData()},doDelete:function(e){var t=this;this.getRequest("/rowPruchaseVerify/withdraw?id="+e.id).then(function(e){if(e&&200==e.status){e.data;t.loadConfirmData()}})},handleNodeClick:function(e){this.material.supplier=e.name,this.material.clientId=e.id,this.pName=e.name,this.pId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.material.supplier="",this.material.clientId=""},cancelChoos:function(){console.log(this.pName),this.material.supplier=this.pName,this.material.clientId=this.pId},initData:function(){this.loadConfirmData()},confirmKeywordsChange:function(e){""==e&&this.searchConfirmData()},currentConfirmChange:function(e){this.confirmCurrentPage=e,console.log(this.confirmCurrentPage),this.loadConfirmData()},cancelOptIn:function(){this.dialogFormInVisible=!1,this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},cancelConfirm:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e)}).catch(function(){})},loadConfirmData:function(){var e=this;this.tableLoading=!0,this.getRequest("/rowPruchaseVerify/findbypage?page="+this.confirmCurrentPage+"&size=10&queryName="+this.confirmKewords).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var i=t.data.data;e.confirms=i,e.confirmTotalCount=t.data.total}})},emptyData:function(){console.log("+++++_+++++_"),this.material={materialName:"",standard:"",specs:"",materialNo:"",unitId:"",specifiCations:"",notes:"",quantity:""}}},computed:{routes:function(){}}}),l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"min-width":"600px"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.confirmKeywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchConfirmData(t)}},model:{value:e.confirmKewords,callback:function(t){e.confirmKewords=t},expression:"confirmKewords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchConfirmData}},[e._v("搜索\n          ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.confirms,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"serialNumber",align:"left",fixed:"",label:"采购单编号",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",fixed:"",label:"下发时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("formatDateTime")(t.row.planDate))+"\n            ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",fixed:"",label:"确认时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("formatDateTime")(t.row.createDate))+"\n            ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"specifications",align:"left",label:"规格",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"quantity",align:"left",label:"原料数量",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"practicalQuantity",align:"left",label:"确认数量",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.cancelConfirm(t.row)}}},[e._v("撤销\n                ")]):e._e()],1)]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.confirmCurrentPage,layout:"prev, pager, next",total:e.confirmTotalCount},on:{"current-change":e.currentConfirmChange}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(e){i("ECOc")},null,null);t.default=r.exports},eTb0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:名称",trigger:"blur"}]},positions:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,position:{name:"",specification:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加职位",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.position=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,delete this.position.deNumber,this.dialogFormVisible=!0},addData:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.position.id?(t.tableLoading=!0,console.log(t.position),t.postRequest("/position/posAdd",t.position).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData())})):(t.tableLoading=!0,console.log(i.position),t.postRequest("/position/posAdd",t.position).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData()}}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/position/deletPro?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/position/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.positions=a,t.totalCount=i.data.total,t.emptyData()}})},emptyData:function(){this.position={name:"",describes:""}}},computed:{}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过职位名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n      ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加职位")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addForm",attrs:{model:e.position,rules:e.rules,size:"sam","label-width":"80px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入职位名称"},model:{value:e.position.name,callback:function(t){e.$set(e.position,"name",t)},expression:"position.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述:",prop:"specification"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"职位描述..."},model:{value:e.position.specification,callback:function(t){e.$set(e.position,"specification",t)},expression:"position.specification"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.positions}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"specification",align:"left",fixed:"",label:"描述",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(e){i("GqWn")},null,null);t.default=r.exports},ev2I:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{tempPlan:[],confirmFormVisible:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,midRecords:[],dialogTitle:"",currentPage:1,formLabelWidth:"120px",units:[],clients:[],totalCount:-1,middleProduct:{name:"",productId:"",standard:"",unitId:"",plant:[],clientId:"",note:"",selectType:1},products:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:"",pName:"",pId:"",matriallist:[]}},mounted:function(){this.initData()},methods:{handleCurrentChange:function(e){console.log(e),this.newMaterial=e},formatStatus:function(e,t){return 1==e.verifyStatus?"新建":"已撤销"},selectChange:function(e){console.log(e);var t=this;this.units&&this.units.forEach(function(i,a){console.log(i.id),i.id==e&&(t.middleProduct.utilname=i.name)})},selectType:function(e){this.middleProduct.selectType=e},formatStyle:function(e,t){return"1"==e.productStyle?"常备":"2"==e.productStyle?"普通":"未知"},formatPlant:function(e,t){var i="",a=e.plant;return this.positions.forEach(function(e,t,n){a.forEach(function(t,a,n){e.id==t&&(i+=e.name+" , ")})}),i},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},initData:function(){var e=this;e.loadData(),this.getRequest("/middleProduct/basedata").then(function(t){if(t&&200==t.status){var i=t.data;e.units=i.root.units,e.clients=i.root.clients,e.products=i.root.products}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},searchData:function(){this.loadData()},cancelRecordData:function(e){var t=this;this.$confirm("此操作将撤销该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/midProductOutRecieving/withdraw?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/midProductOutRecieving/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;a.forEach(function(e,t,i){e.plant=e.plant.split(",")}),t.midRecords=a,t.totalCount=i.data.total}})},emptyData:function(){console.log("+++++_+++++_"),this.middleProduct={name:"",productId:"",standard:"",unitId:"",plant:"",clientId:"",note:"",selectType:1}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过产品名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n      ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-refresh"},on:{click:e.initData}})],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.midRecords,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"planDate",align:"left",fixed:"",label:"下发时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDate")(t.row.planDate))+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"规格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.midproduct.standard)+"\n          ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"quantity",align:"left",label:"原料数量",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.operator.name)+"\n          ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"notes",align:"left",label:"备注",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"verifyStatus;",align:"left",label:"状态",formatter:e.formatStatus,width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"margin-top":"10px"}},[1==t.row.verifyStatus?i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.cancelRecordData(t.row)}}},[e._v("撤销\n          ")]):e._e()],1)]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("E51A")},null,null);t.default=o.exports},ev96:function(e,t){},fER9:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:名称",trigger:"blur"}]},departs:[{name:"",describes:""}],dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,depart:{name:"",phone:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},initData:function(){this.loadData()},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlush:function(){this.dialogTitle="添加部门",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadData()},showEditView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.depart=t,this.depart.name=t.name,this.depart.describes=t.describes,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,delete this.depart.deNumber,this.dialogFormVisible=!0},addData:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.depart.id?(t.tableLoading=!0,console.log(t.depart),t.postRequest("/depart/depAdd",t.depart).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData())})):(t.tableLoading=!0,console.log(i.depart),t.postRequest("/depart/depAdd",t.depart).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData()}}))})},deleteEmp:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/depart/deletDep?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/depart/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.departs=a,t.totalCount=i.data.total,t.emptyData()}})},emptyData:function(){this.depart={name:"",describes:""}}},computed:{}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过部门名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n  \n      ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlush}},[e._v("添加部门")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addForm",attrs:{model:e.depart,rules:e.rules,size:"sam","label-width":"80px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入部门名称"},model:{value:e.depart.name,callback:function(t){e.$set(e.depart,"name",t)},expression:"depart.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述:",prop:"describes"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"部门描述..."},model:{value:e.depart.describes,callback:function(t){e.$set(e.depart,"describes",t)},expression:"depart.describes"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.departs}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditView(t.$index,t.row)}}},[e._v("编辑\n      ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteEmp(t.row)}}},[e._v("删除\n      ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(e){i("HGcV")},null,null);t.default=r.exports},gXED:function(e,t){},giJI:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("pFYg"),n=i.n(a),o=i("mvHQ"),l=i.n(o),r=i("bOdI"),s=i.n(r),c=i("zL8q"),d={data:function(){var e;return e={lastPlanDetail:{startNo:"J00000001",endNo:"J00000100"},lastPlanproductionPlanDetails:[{startNo:"J00000001",endNo:"J00000100"},{startNo:"K00000001",endNo:"K00000100"}],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-7776e6),e.$emit("pick",[i,t])}}]},value4:[new Date(2e3,10,10,10,10),new Date(2e3,10,11,10,10)],value5:"",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{},types:2,midProduct:[],plans:[],clients:[],units:[],selectPlans:[],dialogTitle:"",currentPage:1,totalCount:-1,totalMaterialCount:-1,keyMaterialwords:"",currentMaterialPage:1,plan:{note:"",planDetailsId:""},detail:{id:0,actualQuantity:"",salesPlanId:"",notes:"",salesPlan:{},serialNumbers:[],type:"new",status:3,productNo:"",specifications:"",productionPlanId:0},serialNumbers:[],serialNumber:{sid:1,id:0,startNo:"",endNo:"",note:"",clientId:0,productId:0,type:"new"},productionPlanDetails:[],dialogFormVisible:!1,currentRowData:{},currentIndex:"",depTextColor:"",showOrHidePop:!1,showHidePop:!1,defaultProps:{label:"name",isLeaf:"leaf",children:"child"},maxSid:0,currentDeleteData:[],materials:[],materialList:[],products:[],dialogMaterialVisible:!1,dialogMaterialTitle:"请选择销售计划",selectSalePlan:{},selectedM:{},filterText:""},s()(e,"lastPlanDetail",""),s()(e,"crrentSelectShop",{}),s()(e,"isCurrentShop",!0),s()(e,"isprarent",!1),s()(e,"sugestParentstartNo",""),s()(e,"sugestParentEndNo",""),s()(e,"sugestSelfEndNumbers",""),s()(e,"sugestSelfNumbers",""),s()(e,"currentParentShop",{}),s()(e,"currentShop",{}),s()(e,"lastPlanDetail",{startNo:"",endNo:""}),s()(e,"serialNuberDeleted",[]),s()(e,"serialNuberUpdate",[]),s()(e,"serialNuberList",[]),s()(e,"planDetails",[]),s()(e,"dialogPlanVisible",!1),s()(e,"dialogPlanTitle","生产计划"),s()(e,"currntPlanRow",{}),s()(e,"codeLen",1),e},mounted:function(){this.initData()},methods:{confirm:function(e,t){},addRecord:function(e,t){this.dialogTitle="生产记录",this.dialogFormVisible=!0},codeLenSet:function(e){console.log(e),this.codeLen=e},cancelPlanOpt:function(){this.dialogFormVisible=!1,this.plan={notes:"",planDetailsId:0},this.loadData()},addManager:function(e){var t=this;if(0==this.plan.productionPlanId)return this.$message({type:"infor",message:"请选择生产计划!!"}),!1;this.$refs[e].validate(function(e){if(!e)return!1;t.plan.id?(t.tableLoading=!0,console.log(t.plan),t.postRequest("/productmanage/update",t.plan).then(function(e){t.tableLoading=!1,e&&200==e.status&&(t.dialogFormVisible=!1,t.loadData(),t.emptyData(),t.emptyDetail(),t.clearSerialNumbers())})):(t.tableLoading=!0,console.log(t.plan),t.postRequest("/productmanage/add",t.plan).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.dialogFormVisible=!1,t.loadData(),t.emptyData(),t.emptyDetail(),t.clearSerialNumbers()}}))})},serialNumberAdd:function(){var e=0;if(this.serialNumbers.length){var t=0;this.serialNumbers.forEach(function(e,i,a){t=e.sid>t?e.sid:t}),e=t+1}else e=1;this.serialNumbers.push({sid:e,id:0,startNo:"",endNo:"",clientId:0,productId:0,type:"new"})},deletSerialNo:function(e){var t=this.serialNumbers.splice(e,1);""==t[0].endNo||""==t[0].startNo||"new"==t[0].type||(t[0].type="delete",this.serialNuberDeleted.push(t[0])),console.log(t)},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},showRow:function(e){this.selectedM=this.materialList.indexOf(e),this.selectSalePlan=e,console.log(this.selectSalePlan)},showMaterial:function(){this.loadMaterial()},chooseMaterial:function(){var e=this;console.log("选择原料了！");var t=this;if(this.selectSalePlan.id>0){var i=this.selectSalePlan.salesPlan.client.name+"，     产品："+this.selectSalePlan.salesPlan.product.producteName+";";this.$confirm("您当前选择 ：客户"+i+" 确认选择该销售计划吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.setDetailData(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})}else this.$message({type:"info",message:"请选择原材料！"})},setDetailData:function(){var e=this.selectSalePlan;console.log(e+"=*-*="),this.selectPlans.splice(0,1,this.selectSalePlan),this.plan.planDetailsId=this.selectSalePlan.id,this.dialogMaterialVisible=!1},cancelchoose:function(){console.log("选择框关闭"),this.selectSalePlan={},this.selectedM={}},formatStatus:function(e,t){return 1==e.materialType?"已确认":"未确认"},selectType:function(e,t,i){console.log("changne"),this.types=e,2==e?(this.midProduct=[],this.midProduct=this.materials.concat(this.midProduct),this.emptyDetail()):(this.midProduct=[],this.midProduct=this.products.concat(this.midProduct),this.emptyDetail())},matterSelect:function(e){console.log(e);var t=this;this.midProduct.forEach(function(i,a,n){i.id==e&&(t.detail.unitId=i.unitId,t.detail.unitName=i.unitName,t.detail.name=i.name,t.detail.materialId=i.id,t.detail.specifications=i.specs)})},clearSerialNumbers:function(){this.serialNumbers=[],this.selectPlans=[],this.serialNumbers.push({sid:1,id:0,startNo:"",endNo:"",type:"new",note:""})},editeDetail:function(e,t){console.log("詳情："+t),this.detail=t,this.selectPlans.push(t.salesPlan),this.dialogFormVisible=!0},deleteDetail:function(e,t){var i=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.detailDelete(t.id)}).catch(function(){})},detailDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productionplandetails/deletmark?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},emptyDetail:function(){this.detail={id:0,actualQuantity:"",salesPlanId:"",notes:"",salesPlan:{},serialNumbers:[],type:"new",status:3,productNo:"",specifications:"",productionPlanId:0}},initData:function(){var e=this;e.loadData(),this.getRequest("/productionplan/basedata").then(function(t){if(t&&200==t.status){var i=t.data,a=[];i.root.clients.forEach(function(e,t,i){var n=e[0],o=e[1],l=e[2];a.push({name:n,id:o,parentClientId:l,parentName:e[3],address:e[4],phone:e[5],abbreviation:e[6]})}),e.clients=a,e.midProduct=[],e.midProduct=e.materials.concat(e.midProduct);var n=[];i.root.products.forEach(function(e,t,i){n.push({id:e[0],producteName:e[1],specification:e[2],proType:e[3],mark:e[4],color:e[5]})}),e.products=n}})},keywordsChange:function(e){""==e&&this.loadData()},keywordsMaterialChange:function(e){""==e&&this.loadMaterial()},handleNodeClick:function(e){this.tableLoading=!0,this.crrentSelectShop=e,this.detail.clientId=e.id,this.detail.clientName=e.name,this.detail.abbrName=e.abbreviation,this.showOrHidePop=!1,this.depTextColor="#606266",this.getCurrentPlans()},showCurrentNo:function(){this.isprarent?this.isprarent=!1:this.isprarent=!0},showDetails:function(e){this.currntPlanRow=e,this.planDetails=e.details,this.plan.id=e.id},changeNO:function(){this.isCurrentShop?(this.lastPlanDetail=this.currentShop,this.isCurrentShop=!1):(this.lastPlanDetail=this.currentParentShop,this.isCurrentShop=!0)},getCurrentPlans:function(){var e=this;this.getRequest("/productionplan/getPlanDetails?clientId="+e.selectSalePlan.client.id+"&productId="+e.selectSalePlan.product.id).then(function(t){if(e.tableLoading=!1,t&&200==t.status){var i=t.data;if(e.currentParentShop=i.root.parent||[],e.currentParentShop.length){var a=e.currentParentShop.length-1;e.currentParentShop=e.currentParentShop[a];var n=e.currentParentShop[a].endNo;e.sugestParentstartNo=e.sugestStartNo(n,1)}else e.sugestParentstartNo="00000001",e.currentParentShop={},e.setStartSerialNo(e.sugestParentstartNo,e.sugestParentEndNo.endNo,"parent");if(e.currentShop=i.root.self||[],e.currentShop.length){var o=e.currentShop.length-1;e.currentShop=e.currentShop[o];var l=e.currentShop[o].endNo;e.sugestSelfNumbers=e.sugestStartNo(l,1)}else e.sugestSelfNumbers="00000001",e.currentShop={}}})},setEndNumber:function(e){console.log(e);if(this.isCurrentShop)if(this.lastPlanDetail=this.currentShop,this.currentShop.length){var t=this.currentShop.length-1;this.sugestSelfEndNumbers=this.sugestStartNo(this.currentShop[t].endNo,parseInt(e)+1),this.sugestSelfEndNumbers&&(this.serialNumbers[0].startNo=this.sugestSelfNumbers,this.serialNumbers[0].endNo=this.sugestSelfEndNumbers,this.serialNumbers[0].note="",this.serialNumbers[0].clientId=this.crrentSelectShop.id,this.serialNumbers[0].productId=this.detail.proId)}else{var i=this.sugestSelfNumbers;this.setCurrentEndData(i,e)}else if(this.lastPlanDetail=this.currentParentShop,this.currentParentShop.length){var a=this.currentParentShop.length-1;this.sugestParentEndNo=this.sugestStartNo(this.currentParentShop[a].endNo,parseInt(e)+1),this.sugestParentEndNo&&(this.serialNumbers[0].startNo=this.sugestParentstartNo,this.serialNumbers[0].endNo=this.sugestParentEndNo,this.serialNumbers[0].note="",this.serialNumbers[0].clientId=this.crrentSelectShop.id,this.serialNumbers[0].productId=this.detail.proId)}else{i=this.currentParentShop;this.setCurrentEndData(i,e)}},setbyStartNo:function(e){console.log(e),e.length>this.codeLen&&Object(c.Message)("编码错误!"),this.detail.actualQuantity&&this.setCurrentEndData(e,this.detail.actualQuantity)},setCurrentEndData:function(e,t){e.toString().length;var i=parseInt(e)+parseInt(t),a=i.toString().length,n=this.codeLen-a;if(n)for(var o=0;o<n;o++)i="0"+i;this.serialNumbers[0].endNo=i},sugestStartNo:function(e,t){var i=function(e,t){if(t=t||!1,"string"==typeof e){var i=e.match(t?/[0-9]\d{1,}/g:/\d{1,}/g);return console.log(i),i.map(function(e){return e})}return[]},a=e.indexOf(i(e)[0]),n=e.substr(0,a),o=e.substr(a+i(e)[0].length,e.length-1),l=parseInt(i(e)[0])+t,r=l-l.toString().length;if(r)for(var s=0;s<r;s++)l+="0";return n+l+o},setStartSerialNo:function(e,t,i){this.serialNumbers.length&&(this.serialNumbers[0].startNo=e,this.serialNumbers[0].endNo=t||"",this.serialNumbers[0].note="")},clearChoose:function(){this.detail.clientId=0,this.detail.clientName=""},showDepTree:function(){this.showHidePop=!this.showHidePop},selectChange:function(e){var t=this;console.log(e),t.units&&t.units.forEach(function(i,a){i.id==e&&(console.log(i.id),t.detail.unitName=i.name)})},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},currentMaterialChange:function(e){this.currentMaterialPage=e,this.loadMaterial()},addAndFlushData:function(){this.dialogTitle="郑铁公司生产计划单",this.dialogFormVisible=!0,this.plan.id=0},addNewDetail:function(e){this.dialogTitle="郑铁公司生产计划单";this.serialNumbers=[],this.detail.productionPlanId=e.id,this.plan.id=0,this.serialNumbers.push(this.serialNumber),this.dialogFormVisible=!0},searchData:function(){this.loadData()},searchMaterialData:function(){this.loadMaterial()},showEditEmpView:function(e,t){console.log(t);this.dialogTitle="编辑信息",this.showDetail=!1,this.plan=t,this.plan.createDate=t.createDate;var i=_.cloneDeep(t);void 0!=i.details&&(i.details.forEach(function(e,t,i){e.type="odd",e.sid=t+1}),this.productionPlanDetails=i.details,this.maxSid=i.details.length),this.dialogFormVisible=!0},add:function(e){var t=this,i=this;if(console.log("addbox！！！！"),""==this.detail.actualQuantity||void 0==this.detail.actualQuantity)return Object(c.Message)("请输入数量！"),!1;if(""==this.detail.salesPlanId)return Object(c.Message)("请选择销售计划"),!1;this.detail.serialNumbers=this.serialNumbers,this.productionPlanDetails.push(this.detail);var a=_.cloneDeep(this.plan),o=[],r=_.cloneDeep(this.productionPlanDetails);r.forEach(function(e){delete e.salesPlan});var s=l()(r,function(e,t){if("object"===(void 0===t?"undefined":n()(t))&&null!==t){if(-1!==o.indexOf(t))return;o.push(t)}return t});o=null,a.productionPlanDetails=s,this.$refs[e].validate(function(e){if(!e)return!1;t.plan.id?(t.tableLoading=!0,t.postRequest("/productionplan/update",a).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData(),i.emptyDetail(),i.clearSerialNumbers(),i.showDetails(i.currntPlanRow))})):(t.tableLoading=!0,console.log(a),t.postRequest("/productionplan/add",a).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData(),i.emptyDetail(),i.clearSerialNumbers(),i.showDetails(i.currntPlanRow))}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.clearChoose(),this.clearSerialNumbers(),this.emptyDetail(),this.loadData(),console.log("o(*￣︶￣*)o")},deleteData:function(e){var t=this;this.$confirm("此操作将删除该纪录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productionplan/deletmark?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productmanage/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.plans=a,t.totalCount=i.data.total,t.emptyData()}})},loadMaterial:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productionplandetails/findbypage?page="+this.currentMaterialPage+"&size=10&queryName="+this.keyMaterialwords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.materialList=a,t.totalMaterialCount=i.data.total,t.dialogMaterialVisible=!0}})},emptyData:function(){this.productionPlanDetails=[],this.plan={id:0,notes:"",productionPlanNo:"",productionPlanDetails:""},this.currntPlanRow&&(this.plan.id=this.currntPlanRow.id)}},computed:{routes:function(){return this.$store.state.routes}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n        ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("\n          添加生产进度\n        ")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogPlanTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"750px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelPlanOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addPlanForm",attrs:{model:e.plan,rules:e.rules,size:"mini","label-width":"90px"}},[i("div",{staticStyle:{border:"1px solid #eeeeee"}},[i("div",[i("div",{staticStyle:{"background-color":"bisque"}},[i("form",{attrs:{model:e.detail,size:"mini","label-width":"50px"}},[i("el-row",{staticStyle:{display:"flex","justify-content":"flex-end"}},[i("el-button",{staticStyle:{padding:"8px",margin:"0"},attrs:{type:"primary"},on:{click:e.showMaterial}},[e._v("\n                        选择生产计划\n                      ")])],1),e._v(" "),i("el-row",[i("el-table",{ref:"singleTable",staticStyle:{width:"100%",background:"bisque"},attrs:{height:"150",data:e.selectPlans,"highlight-current-row":""}},[i("el-table-column",{attrs:{align:"left",label:"产品名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.product.producteName))]}}],null,!1,2073558564)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.actualQuantity)+"枚")]}}],null,!1,363731897)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"规格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.specification))]}}],null,!1,4108670133)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.productNo))]}}],null,!1,608103106)}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",label:"编码规则",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e._l(t.row.serialNumbers,function(t,a){return i("div",[i("p",[e._v("编号: "+e._s(t.startNo)+"- "+e._s(t.endNo)+" ;备注: "+e._s(t.note)+" ")])])}),e._v(" "),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[i("el-tag",{attrs:{size:"medium"}},[e._v("编码")])],1)],2)]}}],null,!1,1851021655)})],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:11}},[i("el-input",{staticStyle:{width:"600px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"textarea",placeholder:"备注信息。。。"},model:{value:e.detail.notes,callback:function(t){e.$set(e.detail,"notes",t)},expression:"detail.notes"}})],1)],1)],1)])])])])],1):e._e()]):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addManager("addPlanForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogMaterialTitle,"close-on-click-modal":!1,visible:e.dialogMaterialVisible,width:"800px"},on:{"update:visible":function(t){e.dialogMaterialVisible=t},close:e.cancelchoose}},[e.dialogMaterialVisible?i("div",{staticStyle:{width:"100%"}},[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过名称搜索,记得回车哦...",clearable:"",size:"mini","prefix-icon":"el-icon-search"},on:{change:e.keywordsMaterialChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMaterialData(t)}},model:{value:e.keyMaterialwords,callback:function(t){e.keyMaterialwords=t},expression:"keyMaterialwords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchMaterialData}},[e._v("搜索\n            ")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materialList,border:""},on:{"row-click":e.showRow}},[i("el-table-column",{attrs:{align:"center",fixed:"",label:"当前",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-radio",{attrs:{label:t.$index},model:{value:e.selectedM,callback:function(t){e.selectedM=t},expression:"selectedM"}},[e._v(" ")])]}}],null,!1,3683309166)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"客户名",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.client.name))]}}],null,!1,3882530648)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"产品名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.salesPlan.product.producteName))]}}],null,!1,2073558564)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.actualQuantity)+"枚")]}}],null,!1,363731897)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"规格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.specification))]}}],null,!1,953807904)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.productNo))]}}],null,!1,447589271)}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",label:"编码规则",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e._l(t.row.serialNumbers,function(t,a){return i("div",[i("p",[e._v("编号: "+e._s(t.startNo)+"- "+e._s(t.endNo)+" ;备注: "+e._s(t.note)+" ")])])}),e._v(" "),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[i("el-tag",{attrs:{size:"medium"}},[e._v("编码")])],1)],2)]}}],null,!1,1851021655)}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.editeDetail(t.$index,t.row)}}},[e._v("编辑\n              ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteDetail(t.$index,t.row)}}},[e._v("删除\n              ")])]}}],null,!1,3423552678)})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentMaterialPage,layout:"prev, pager, next",total:e.totalMaterialCount},on:{"current-change":e.currentMaterialChange}})],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogMaterialVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.chooseMaterial()}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{attrs:{data:e.plans,border:"","highlight-current-row":""}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-steps",{attrs:{"align-center":""}},[i("el-step",{attrs:{title:"步骤2",description:"检验"}}),e._v(" "),i("el-step",{attrs:{title:"步骤3",description:"打字"}}),e._v(" "),i("el-step",{attrs:{title:"步骤4",description:"检验"}})],1)],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"序号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+1))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"客户名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.planDetails.salesPlan.client.name))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"产品名称",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.planDetails.salesPlan.product.producteName))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"规格",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.planDetails.specification))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"生产数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.planDetails.actualQuantity)+"枚")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.mangeStatus))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",label:"编码规则",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e._l(t.row.planDetails.serialNumbers,function(t,a){return i("div",[i("p",[e._v("编号: "+e._s(t.startNo)+"- "+e._s(t.endNo)+" ;备注: "+e._s(t.note)+" ")])])}),e._v(" "),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[i("el-tag",{attrs:{size:"medium"}},[e._v("编码")])],1)],2)]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.editeDetail(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteDetail(t.$index,t.row)}}},[e._v("删除\n          ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"success",size:"mini"},on:{click:function(i){return e.confirm(t.$index,t.row)}}},[e._v("确认生产\n          ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"success",size:"mini"},on:{click:function(i){return e.addRecord(t.$index,t.row)}}},[e._v("添加生产记录\n          ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var p=i("VU/8")(d,u,!1,function(e){i("ucWm")},null,null);t.default=p.exports},gxTg:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("TjZE"),n=i("Va7D"),o={data:function(){return{activeName:"material"}},methods:{handleClick:function(e,t){console.log(e,t)}},components:{mp:a.default,mps:n.default}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"原材料采购计划",name:"material"}},[i("mp")],1),e._v(" "),i("el-tab-pane",{attrs:{label:"半成品采购计划",name:"midproduct"}},[i("mps")],1)],1)],1)},staticRenderFns:[]},r=i("VU/8")(o,l,!1,null,null,null);t.default=r.exports},hR2O:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},emps:[],depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{note:[{required:!0,message:"必填:备注",trigger:"blur"}],carNo:[{required:!0,message:"必选:车辆",trigger:"blur"}]},carReRepairs:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],carReRepair:{carNo:"",note:"",carRequestId:"",preStartDate:"",preEndDate:"",empName:"",operatorId:""},dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData();var e=this;this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var i=t.data;console.log(i),e.cars=i.root.cars}})},methods:{searchEmp:function(){this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.carReRepair.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadData(),this.getRequest("/users/basicdata").then(function(t){if(t&&200==t.status){var i=t.data;e.emps=i.root.emps}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.carReRepair=t,delete this.carReRepair.vech,delete this.carReRepair.assingedId,this.carReRepair.carRequestId=t.carRequestId,this.carReRepair.preStartDate=this.formatDate(t.preStartDate),this.carReRepair.preEndDate=this.formatDate(t.preEndDate),this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.carReRepair.id&&(t.tableLoading=!0,console.log(t.carReRepair),t.postRequest("/vehicleAllot/update",t.carReRepair).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData())}))})},deleteData:function(e){var t=this;this.$confirm("此操将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehicleAllot/delevcalt?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehicleAllot/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.carReRepairs=a,t.totalCount=i.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.carReRepair={carNo:"",note:"",carRequestId:"",preStartDate:"",preEndDate:"",empName:"",operatorId:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n        ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.carReRepair,rules:e.rules,size:"small","label-width":"90px"}},[i("el-form-item",{attrs:{label:"车辆:",prop:"carNo"}},[i("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[i("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),i("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carReRepair.carNo)+"\n            ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"出行时间:",prop:"preStartDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出行时间"},model:{value:e.carReRepair.preStartDate,callback:function(t){e.$set(e.carReRepair,"preStartDate",t)},expression:"carReRepair.preStartDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"返回时间:",prop:"preEndDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"返回时间"},model:{value:e.carReRepair.preEndDate,callback:function(t){e.$set(e.carReRepair,"preEndDate",t)},expression:"carReRepair.preEndDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"执行人:",prop:"operatorId"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择员工"},model:{value:e.carReRepair.operatorId,callback:function(t){e.$set(e.carReRepair,"operatorId",t)},expression:"carReRepair.operatorId"}},e._l(e.emps,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"note"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carReRepair.note,callback:function(t){e.$set(e.carReRepair,"note",t)},expression:"carReRepair.note"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carReRepairs,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",fixed:"",label:"车牌号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.vech.plateNumber))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"aplyDate",width:"120",align:"left",label:"申请时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.aplyDate)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"preStartDate",width:"120",align:"left",label:"计划出行时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.preStartDate)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"preEndDate",width:"120",align:"left",label:"计划返回时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.preEndDate)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"empName",align:"left",label:"申请人",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"operatorName",align:"left",label:"执行人",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"note",align:"left",label:"备注",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("KhUb")},null,null);t.default=o.exports},iy9v:function(e,t){},j89A:function(e,t){},jFsl:function(e,t){},jW5Z:function(e,t){},"kBn+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={components:{treeTable:i("s3ol").default},data:function(){return{columns:[{text:"公司名称",value:"name",width:200},{text:"编号",value:"id"},{text:"电话",value:"phone"},{text:"地址",value:"address"}],dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:姓名",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"},{validator:function(e,t,i){/^1[3|4|5|7|8][0-9]\d{8}$/.test(t)?i():i("电话号码格式错误!")},message:"电话号码错误",trigger:"blur"}],email:[{required:!0,message:"必填:电子邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]},companys:[],defaultProps:{label:"name",isLeaf:"leaf",children:"child"},dialogTitle:"",currentPage:1,tableData:Array(10).fill({}),formLabelWidth:"120px",totalCount:-1,company:{name:"",phone:"",address:"",email:"",fax:"",status:"",abbreviation:"",parentName:"",parentClientId:"",infor:""},shops:[],posts:[],dialogTableVisible:!1,dialogFormVisible:!1,pName:"",pId:"",activeName:"down",tempShops:[]}},mounted:function(){this.initData()},methods:{formatSex:function(e,t){return"up"==e.status?"上游":"down"==e.status?"下游":"未知"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},onTreeDataChange:function(){},handleNodeClick:function(e){this.company.parentName=e.name,this.company.parentClientId=e.id,this.pId=e.id,this.pName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},handleClick:function(e,t){var i=this.activeName;this.loadData(i)},clearChoose:function(){this.company.parentName="",this.company.parentClientId=""},headCall:function(e){this.companys=e},cancelChoos:function(){console.log(this.pName),this.company.parentName=this.pName,this.company.parentClientId=this.pId},initData:function(){var e=this.activeName;this.$refs.companyRef.loadData(e)},keywordsChange:function(e){if(""==e){var t=this.activeName;this.loadData(t)}},currentChange:function(e){this.currentPage=e,console.log(this.currentPage);var t=this.activeName;this.loadData(t)},addAndFlushData:function(){this.$refs.companyRef.addAndFlushData()},searchData:function(){var e=this.activeName;this.loadData(e)},showEditEmpView:function(e){console.log(e),this.formTitle="编辑客户信息",this.company=e,console.log(e),this.company.parentClientId=e.parentClientId,this.company.parentName=e.parentName,delete this.company.parent,delete this.company.purchasePlan,delete this.company.product,this.formVisible=!0},addData:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.company.id?(t.tableLoading=!0,console.log(t.company),t.postRequest("/client/add",t.company).then(function(e){if(i.tableLoading=!1,e&&200==e.status){i.dialogFormVisible=!1;var a=t.activeName;i.loadData(a),i.emptyData()}})):(t.tableLoading=!0,console.log(i.company),t.postRequest("/client/add",t.company).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1;var a=t.activeName;i.loadData(a),i.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.emptyData()},deleteData:function(){var e=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.doDelete(row.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/client/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData(activeName)}})},loadData:function(){var e=this,t=this,i=this.activeName;this.tableLoading=!0,console.log(i),this.getRequest("/client/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords+"&shopType="+i).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.companys=a,t.totalCount=i.data.total,t.emptyData()}}),this.getRequest("/client/baseData").then(function(e){if(e&&200==e.status){var i=e.data.data;t.shops=i}})},emptyData:function(){console.log("+++++_+++++_"),this.company={name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",status:"",departmentName:"",departmentId:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过客户名称搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchData}},[e._v("搜索\n        ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushData}},[e._v("添加总公司")])],1)]),e._v(" "),i("div",[i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"下游客户",name:"down"}}),e._v(" "),i("el-tab-pane",{attrs:{label:"上游企业",name:"up"}})],1),e._v(" "),i("div",[i("tree-table",{ref:"companyRef",attrs:{data:e.companys,columns:e.columns,"active-name":e.activeName,shops:e.shops,border:""},on:{headCallBack:e.loadData}})],1)],1)])},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("j89A")},null,null);t.default=o.exports},kxoV:function(e,t){},lGFz:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},keywords:"",depTextColor:"#c0c4cc",tableLoading:!1,advanceSearchViewVisible:!1,rules:{carNo:[{required:!0,message:"必填:车牌",trigger:"blur"}]},cars:[],carRecords:[],dialogTitle:"",currentPage:1,totalCount:-1,carRecord:{startCause:"",startMileage:"",startDate:"",endMileage:"",endCause:"",endDate:"",note:"",carNo:""},dialogFormVisible:!1,dialogbeginVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{searchEmp:function(){this.loadEmps()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData(),console.log("heheh")},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.carRecord.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadData(),this.getRequest("/vehiclerecord/baseData").then(function(t){if(t&&200==t.status){var i=t.data;console.log(i),e.cars=i.root.cars}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.dialogFormVisible=!0,this.emptyData()},searchData:function(){this.loadData()},showEditEmpView:function(e,t){console.log(t),this.dialogTitle="编辑信息",this.carRecord=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.carRecord.endDate=this.formatDate(t.endDate),this.carRecord.startDate=this.formatDate(t.startDate),delete this.carRecord.user,delete this.carRecord.verification,delete this.carRecord.enabled,delete this.carRecord.distributeDate,this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.carRecord.id?(t.tableLoading=!0,console.log(t.carRecord),t.postRequest("/vehiclerecord/addvd",t.carRecord).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData())})):(t.tableLoading=!0,console.log(i.carRecord),t.postRequest("/vehiclerecord/addvd",t.carRecord).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData()}}))})},deleteData:function(e){var t=this;this.$confirm("此操作将删除该次记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/vehiclerecord/deletvd?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/vehiclerecord/findbypages?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.carRecords=a,t.totalCount=i.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.carRecord={startCause:"",startMileage:"",startDate:"",endMileage:"",endCause:"",endDate:"",note:"",carNo:""}}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过车牌搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n          ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.carRecord,rules:e.rules,size:"small","label-width":"90px"}},[i("el-form-item",{attrs:{label:"车牌:",prop:"carNo"}},[i("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[i("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),i("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRecord.carNo)+"\n              ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"出车事由:",prop:"startCause"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入出车事由"},model:{value:e.carRecord.startCause,callback:function(t){e.$set(e.carRecord,"startCause",t)},expression:"carRecord.startCause"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"初始里程:",prop:"startMileage"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"初始里程"},model:{value:e.carRecord.startMileage,callback:function(t){e.$set(e.carRecord,"startMileage",t)},expression:"carRecord.startMileage"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"出发日期:",prop:"startDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出发日期"},model:{value:e.carRecord.startDate,callback:function(t){e.$set(e.carRecord,"startDate",t)},expression:"carRecord.startDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"实际事由:",prop:"endCause"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入该次出车实际事由"},model:{value:e.carRecord.endCause,callback:function(t){e.$set(e.carRecord,"endCause",t)},expression:"carRecord.endCause"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束里程:",prop:"endMileage"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"结束里程"},model:{value:e.carRecord.endMileage,callback:function(t){e.$set(e.carRecord,"endMileage",t)},expression:"carRecord.endMileage"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束日期:",prop:"endDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"结束日期"},model:{value:e.carRecord.endDate,callback:function(t){e.$set(e.carRecord,"endDate",t)},expression:"carRecord.endDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"note"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRecord.note,callback:function(t){e.$set(e.carRecord,"note",t)},expression:"carRecord.note"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogbeginVisible,width:"500px"},on:{"update:visible":function(t){e.dialogbeginVisible=t},close:e.cancelOpt}},[e.dialogbeginVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addForm",attrs:{model:e.carRecord,rules:e.rules,size:"small","label-width":"90px"}},[i("el-form-item",{attrs:{label:"车牌:",prop:"carNo"}},[i("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[i("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),i("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRecord.carNo)+"\n              ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"出车事由:",prop:"startCause"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入出车事由"},model:{value:e.carRecord.startCause,callback:function(t){e.$set(e.carRecord,"startCause",t)},expression:"carRecord.startCause"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"初始里程:",prop:"startMileage"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"初始里程"},model:{value:e.carRecord.startMileage,callback:function(t){e.$set(e.carRecord,"startMileage",t)},expression:"carRecord.startMileage"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"出发日期:",prop:"startDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出发日期"},model:{value:e.carRecord.startDate,callback:function(t){e.$set(e.carRecord,"startDate",t)},expression:"carRecord.startDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"note"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRecord.note,callback:function(t){e.$set(e.carRecord,"note",t)},expression:"carRecord.note"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogbeginVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.carRecord,rules:e.rules,size:"small","label-width":"90px"}},[i("el-form-item",{attrs:{label:"车牌:",prop:"carNo"}},[i("el-popover",{attrs:{placement:"right",title:"请选择车辆",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[i("el-tree",{attrs:{data:e.cars,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),i("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.showDepTree(t)}},slot:"reference"},[e._v(e._s(e.carRecord.carNo)+"\n    ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"出车事由:",prop:"startCause"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入出车事由"},model:{value:e.carRecord.startCause,callback:function(t){e.$set(e.carRecord,"startCause",t)},expression:"carRecord.startCause"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"初始里程:",prop:"startMileage"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"初始里程"},model:{value:e.carRecord.startMileage,callback:function(t){e.$set(e.carRecord,"startMileage",t)},expression:"carRecord.startMileage"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"出发日期:",prop:"startDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出发日期"},model:{value:e.carRecord.startDate,callback:function(t){e.$set(e.carRecord,"startDate",t)},expression:"carRecord.startDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"实际事由:",prop:"endCause"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入该次出车实际事由"},model:{value:e.carRecord.endCause,callback:function(t){e.$set(e.carRecord,"endCause",t)},expression:"carRecord.endCause"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束里程:",prop:"endMileage"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",type:"number",placeholder:"结束里程"},model:{value:e.carRecord.endMileage,callback:function(t){e.$set(e.carRecord,"endMileage",t)},expression:"carRecord.endMileage"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"结束日期:",prop:"endDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"结束日期"},model:{value:e.carRecord.endDate,callback:function(t){e.$set(e.carRecord,"endDate",t)},expression:"carRecord.endDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注:",prop:"note"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"备注"},model:{value:e.carRecord.note,callback:function(t){e.$set(e.carRecord,"note",t)},expression:"carRecord.note"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.carRecords}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"carNo",align:"left",fixed:"",label:"车牌",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"startCause",align:"left",fixed:"",label:"出发事由",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"startMileage",width:"120",align:"left",label:"出发行程"}}),e._v(" "),i("el-table-column",{attrs:{width:"100",align:"left",label:"出发时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.startDate)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"endCause",width:"220",align:"left",label:"实际事由"}}),e._v(" "),i("el-table-column",{attrs:{prop:"endMileage",width:"120",align:"left",label:"结束行程"}}),e._v(" "),i("el-table-column",{attrs:{width:"100",align:"left",label:"结束日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.endDate)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"note",width:"120",align:"left",label:"备注"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n          ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(e){i("cSB1")},null,null);t.default=r.exports},lO7g:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:姓名",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"}],gender:[{required:!0,message:"必选:性别",trigger:"blur"}],email:[{required:!0,message:"必填:电子邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],beginDate:[{required:!0,message:"必填:入职日期",trigger:"blur"}]},emps:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}],dialogTitle:"",currentPage:1,tableData:Array(10).fill({date:"2016-05-02",name:"张三",address:"上海市普陀区金沙江路 1518 弄"}),formLabelWidth:"120px",totalCount:-1,employee:{name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",gender:""},isDot:!1,dialogTableVisible:!1,dialogFormVisible:!1,menuitems:[{iconCls:"el-icon-menu",index:"/home",title:"首页",name:"部门管理",leaf:!1,hidden:!1,children:[{path:"/emp",name:"员工"},{path:"/department",name:"部门"},{path:"/position",name:"职位"},{path:"/company",name:"客户"}]},{iconCls:"el-icon-menu",index:"/home",title:"综合管理",name:"综合部",leaf:!1,hidden:!1,children:[{path:"/car",name:"车辆管理"},{path:"/product",name:"产品管理"},{path:"/buyPlan",name:"采购计划"}]},{iconCls:"el-icon-menu",index:"/home",title:"销售管理",name:"销售管理",leaf:!1,hidden:!1,children:[{path:"/sale",name:"销售管理"}]},{iconCls:"el-icon-menu",index:"/home",title:"生产管理",name:"生产管理",leaf:!1,hidden:!1,children:[{path:"/productsFinished",name:"成品管理"},{path:"/productMid",name:"半成品库"},{path:"/material",name:"原材料库"}]},{iconCls:"el-icon-menu",index:"/home",title:"系统管理",name:"系统管理",leaf:!1,hidden:!1,children:[{path:"/sysRole",name:"角色管理"},{path:"/users",name:"用户管理"},{path:"/sysUnit",name:"单位管理"}]}]}},mounted:function(){this.loadNF()},methods:{loadNF:function(){var e=this;this.getRequest("/chat/sysmsgs").then(function(t){var i=!1;t.data.data.forEach(function(e){1==e.msgState&&(i=!0)}),e.$store.commit("toggleNFDot",i)})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.getRequest("/logout"),t.$store.commit("logout"),t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},goChat:function(){this.$router.push({path:"/chat"})},emptyEmpData:function(){this.employee={name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",gender:""}}},computed:{user:function(){return this.$store.state.user},routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-container",[i("el-header",{staticClass:"home-header"},[i("span",{staticClass:"home_title"},[e._v("郑铁管理系统")]),e._v(" "),i("div",{staticStyle:{display:"flex","align-items":"center","margin-right":"7px"}},[i("el-badge",{staticStyle:{"margin-right":"30px"},attrs:{"is-dot":this.$store.state.nfDot}},[i("i",{staticClass:"fa fa-bell-o",staticStyle:{cursor:"pointer"},on:{click:e.goChat}})]),e._v(" "),i("el-dropdown",{on:{command:e.handleCommand}},[i("span",{staticClass:"el-dropdown-link home_userinfo",staticStyle:{display:"flex","align-items":"center"}},[e._v("\n            "+e._s(e.user.username)+"\n            "),i("i",[""!=e.user.userface?i("img",{staticStyle:{width:"40px",height:"40px","margin-right":"5px","margin-left":"5px","border-radius":"40px"},attrs:{src:e.user.userface}}):e._e()])]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[e._v("个人中心")]),e._v(" "),i("el-dropdown-item",[e._v("设置")]),e._v(" "),i("el-dropdown-item",{attrs:{command:"logout",divided:""}},[e._v("注销")])],1)],1)],1)]),e._v(" "),i("el-container",[i("el-aside",{staticClass:"home-aside",attrs:{width:"200px"}},[i("div",{staticStyle:{display:"flex","justify-content":"flex-start",width:"180px","text-align":"left"}},[i("el-menu",{staticStyle:{background:"#ececec",width:"180px"},attrs:{"unique-opened":"",router:""}},[e._l(e.menuitems,function(t,a){return t.hidden?e._e():[t.leaf?e._e():i("el-submenu",{attrs:{index:a+""}},[i("template",{slot:"title"},[i("i",{class:t.iconCls}),e._v(e._s(t.name))]),e._v(" "),e._l(t.children,function(t){return t.hidden?e._e():i("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v(e._s(t.name)+"\n                ")])})],2),e._v(" "),t.leaf&&t.children.length>0?i("el-menu-item",{attrs:{index:t.children[0].path}},[i("i",{class:t.iconCls}),e._v(e._s(t.children[0].name)+"\n              ")]):e._e()]})],2)],1)]),e._v(" "),i("el-container",[i("el-main",{staticClass:"home-main"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/main"}}},[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",{domProps:{textContent:e._s(this.$router.currentRoute.name)}})],1),e._v(" "),i("keep-alive",[this.$route.meta.keepAlive?i("router-view"):e._e()],1),e._v(" "),this.$route.meta.keepAlive?e._e():i("router-view")],1)],1)],1)],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("LNkA")},null,null);t.default=o.exports},mOMX:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("4K/P"),n=i("dnay"),o=i("v2zK"),l=i("Kzbj"),r=i("ptqw"),s={data:function(){return{activeName:"product"}},methods:{handleClick:function(e,t){console.log(e,t),console.log("被点了"),this.$refs.child.initData()}},components:{Products:a.default,specs:n.default,color:o.default,step:l.default,gress:r.default}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"产品管理",name:"product",lazy:""}},[i("Products",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"工序设置",name:"gress",lazy:""}},[i("gress",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"工序词典",name:"step",lazy:""}},[i("step",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"规格设置",name:"specs",lazy:""}},[i("specs",{ref:"child"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"颜色设置",name:"color",lazy:""}},[i("color",{ref:"child"})],1)],1)],1)},staticRenderFns:[]},d=i("VU/8")(s,c,!1,null,null,null);t.default=d.exports},nSKQ:function(e,t){},ngyR:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o={data:function(){return{hrs:[],msg:"",currentUser:this.$store.state.user,currentFriend:{}}},computed:{msgList:{get:function(){return this.$store.state.msgList}},isDotMap:{get:function(){return this.$store.state.isDotMap}}},watch:{msgList:function(){document.getElementById("chatDiv").scrollTop=document.getElementById("chatDiv").scrollHeight}},methods:{sendMsg:function(){var e=window.localStorage.getItem(this.$store.state.user.username+"#"+this.currentFriend.username);if(console.log("hihi-_-!!!!"),null==e)(e=[]).push({msg:this.msg,from:this.$store.state.user.username}),window.localStorage.setItem(this.$store.state.user.username+"#"+this.currentFriend.username,n()(e));else{var t=JSON.parse(e);t.push({msg:this.msg,from:this.$store.state.user.username}),window.localStorage.setItem(this.$store.state.user.username+"#"+this.currentFriend.username,n()(t))}this.$store.state.stomp.send("/ws/chat",{},this.msg+";"+this.currentFriend.username),this.msg="",this.updateChatDiv()},updateChatDiv:function(){var e=window.localStorage.getItem(this.currentUser.username+"#"+this.currentFriend.username);null==e?this.$store.commit("updateMsgList",[]):this.$store.commit("updateMsgList",JSON.parse(e))},toggleFriend:function(e){e!=this.currentFriend&&(this.currentFriend=e,this.$store.commit("updateCurrentFriend",e),this.updateChatDiv(),this.$store.commit("removeValueDotMap","isDot#"+this.currentUser.username+"#"+e.username),document.getElementById("chatDiv").scrollTop=document.getElementById("chatDiv").scrollHeight)},loadHrs:function(){var e=this;this.getRequest("/chat/hrs").then(function(t){e.hrs=t.data})}},mounted:function(){this.loadHrs()}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-container",[i("el-aside",{attrs:{width:"160px"}},[e._l(e.hrs,function(t,a){return i("div",{key:t.id,staticClass:"friendListDiv",class:{currentChatFriend:e.currentFriend.id==t.id},on:{click:function(i){return e.toggleFriend(t)}}},[i("img",{staticClass:"userfaceImg",attrs:{src:t.userface}}),e._v(" "),i("el-badge",{attrs:{"is-dot":null!=e.isDotMap.get("isDot#"+e.currentUser.username+"#"+t.username)}},[e._v(e._s(t.username))])],1)}),e._v(" "),i("div",{staticStyle:{"background-color":"#20a0ff",height:"1px",width:"160px"}})],2),e._v(" "),i("el-main",{staticStyle:{"padding-top":"0px","padding-bottom":"0px"}},[i("div",{ref:"chatDiv",staticClass:"chatDiv",attrs:{id:"chatDiv"}},[i("p",{directives:[{name:"show",rawName:"v-show",value:e.currentFriend.username,expression:"currentFriend.username"}]},[e._v("与\n          "),i("el-tag",{staticStyle:{"margin-left":"5px","margin-right":"5px"},attrs:{type:"primary",size:"small"}},[e._v(e._s(e.currentFriend.username)+"\n          ")]),e._v("\n          聊天中\n        ")],1),e._v(" "),e._l(e.msgList,function(t){return[t.from==e.currentFriend.username?i("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center","box-sizing":"border-box"}},[i("img",{staticClass:"userfaceImg",attrs:{src:e.currentFriend.userface}}),e._v(" "),i("div",{staticStyle:{display:"inline-flex","border-style":"solid","border-width":"1px","border-color":"#20a0ff","border-radius":"5px",padding:"5px 8px 5px 8px"}},[e._v("\n              "+e._s(t.msg)+"\n            ")])]):e._e(),e._v(" "),t.from!=e.currentFriend.username?i("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center","box-sizing":"border-box"}},[i("div",{staticStyle:{display:"inline-flex","border-style":"solid","border-width":"1px","border-color":"#20a0ff","border-radius":"5px",padding:"5px 8px 5px 8px","margin-right":"3px","background-color":"#9eea6a"}},[e._v("\n              "+e._s(t.msg)+"\n            ")]),e._v(" "),i("img",{staticClass:"userfaceImg",attrs:{src:e.currentUser.userface}})]):e._e()]})],2),e._v(" "),i("div",{staticStyle:{"text-align":"left","margin-top":"10px"}},[i("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入内容",size:"mini",type:"textarea",autosize:""},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),e._v(" "),i("el-button",{staticClass:"sendBtn",attrs:{disabled:!e.currentFriend.id,size:"small",type:"primary"},on:{click:e.sendMsg}},[i("i",{staticClass:"fa fa-send",staticStyle:{"margin-right":"15px"}}),e._v("发送\n        ")])],1)])],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(e){i("2MWp")},null,null);t.default=r.exports},pQHM:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{roleName:[{required:!0,message:"必填:中文名",trigger:"blur"}],name:[{required:!0,message:"必填:英文名称",trigger:"blur"},{validator:function(e,t,i){/^ROLE_[a-zA-Z]+$/.test(t)?i():i("角色格式错误!")},message:"名称错误",trigger:"blur"}]},roles:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,role:{name:"",roleName:""},deps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""==e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},addAndFlushEmp:function(){this.dialogTitle="添加员工",this.emptyEmpData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadDatas()},showEditEmpView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.role=t,delete this.role.sysMenu,delete this.role.users,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.role.id?(t.tableLoading=!0,console.log(t.role),t.postRequest("/sysrole/addAndUpdate",t.role).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadDatas(),i.emptyEmpData())})):(t.tableLoading=!0,console.log(i.role),t.postRequest("/sysrole/addAndUpdate",t.role).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadDatas(),i.emptyEmpData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteEmp:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/sysrole/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadDatas()}})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/sysrole/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.roles=a,t.totalCount=i.data.total,t.emptyEmpData()}})},emptyEmpData:function(){console.log("+++++_+++++_"),this.role={name:"",roleName:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过角色名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n    ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.role,rules:e.rules,size:"sam","label-width":"90px"}},[i("el-form-item",{attrs:{label:"英文名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"角色名称英文简写"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色名称:",prop:"roleName"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"角色名称中文名..."},model:{value:e.role.roleName,callback:function(t){e.$set(e.role,"roleName",t)},expression:"role.roleName"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roles,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"roleName",align:"left",fixed:"",label:"中文名称",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteEmp(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("VsxF")},null,null);t.default=o.exports},ptqw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{showOrHidePop:!1,defaultProps:{label:"plateNumber",isLeaf:"leaf",children:"children"},depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:名称",trigger:"blur"}]},processs:[],dialogTitle:"",currentPage:1,totalCount:-1,cars:[],process:{preProcessId:0,name:"",currentSteps:"",code:""},dialogTableVisible:!1,dialogFormVisible:!1,steps:[],selectSteps:[],addprogress:[],delprogress:[],updprogress:[],oodprogress:[],oodcode:"",nowcode:""}},mounted:function(){this.initData()},methods:{searchEmp:function(){this.loadData()},cancelOpt:function(){this.dialogFormVisible=!1,this.loadData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.process.carNo=e.plateNumber,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadData(),this.getRequest("/product/basicdata").then(function(t){if(t&&200==t.status){var i=t.data;e.steps=i.root.steps,console.log(e.steps)}})},keywordsChange:function(e){""==e&&this.loadData()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadData()},addAndFlushEmp:function(){this.dialogTitle="添加",this.emptyData(),this.dialogFormVisible=!0},searchData:function(){this.loadData()},showProcessView:function(e){console.log(e),this.dialogTitle="查看工序"},showEditEmpView:function(e){console.log(e);if(this.dialogTitle="编辑信息",this.process.name=e.name,this.process.preProcessId=e.id,e.process&&e.process.length)for(var t=e.process.length,i=0;i<t;i++){var a=e.process[i];this.selectSteps.push(a.workstep.id),this.oodcode=this.oodcode+a.workstep.id}this.dialogFormVisible=!0},add:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;if(t.process.preProcessId){if(i.nowcode=i.selectSteps.join(""),i.nowcode!=i.oodcode){for(var a=i.nowcode.split(""),n=i.oodcode.split(""),o=0,l=n.length;o<l;o++)for(var r=n[o],s=0,c=a.length;s<c;s++){var d=a[s];o==s&&r!=d&&i.updprogress.push({stepNumber:s+1,step:parseInt(d),stepType:"update"})}if(a.length>n.length)for(var u=n.length-1,p=a.length-1;u<p;u++)i.addprogress.push({stepNumber:u+1,step:parseInt(a[u]),stepType:"add"});else if(a.length<n.length)for(var h=a.length-1,f=n.length-1;h<f;h++)i.delprogress.push({stepNumber:h+1,step:parseInt(a[h]),stepType:"delete"});var m=i.updprogress.concat(i.addprogress,i.delprogress);console.log(m);var g=t.jsonToString(m);t.process.currentSteps=g,t.process.code=i.nowcode,t.tableLoading=!0,console.log(t.process),t.postRequest("/productpreprocess/update",t.process).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadData(),i.emptyData())})}}else{i.process.currentSteps=t.selectSteps.join(","),i.process.code=t.selectSteps.join(""),i.selectSteps.forEach(function(e,t,a){i.addprogress.push({stepNumber:t,step:e,stepType:"add"})});var v=t.jsonToString(i.addprogress);i.process.currentSteps=v,i.tableLoading=!0,console.log(i.process),t.postRequest("/productpreprocess/add",t.process).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadData(),i.emptyData()}})}})},deleteData:function(e){var t=this;this.$confirm("此操作将删除该行记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/productpreprocess/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadData()}})},loadData:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/productpreprocess/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.processs=a,t.totalCount=i.data.total,t.emptyData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyData:function(){this.process={name:"",code:"",currentSteps:"",preProcessId:0},this.addprogress=[],this.delprogress=[],this.updprogress=[],this.oodprogress=[],this.selectSteps=[],this.oodcode="",this.nowcode=""}},computed:{routes:function(){return this.$store.state.routes}},watch:{}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过工序名搜索,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n\n      ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"600px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.process,rules:e.rules,size:"small","label-width":"90px"}},[i("el-form-item",{attrs:{label:"名称:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"工序名称"},model:{value:e.process.name,callback:function(t){e.$set(e.process,"name",t)},expression:"process.name"}})],1),e._v(" "),i("el-transfer",{staticStyle:{"text-align":"left"},attrs:{filterable:"","target-order":"push",props:{key:"id",label:"workstepName"},titles:["工序步骤","工序"],data:e.steps},model:{value:e.selectSteps,callback:function(t){e.selectSteps=t},expression:"selectSteps"}})],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.processs,fit:"",border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n        ")])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"left",prop:"name",label:"记录人",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"流程"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-steps",{attrs:{space:"20%","align-center":""}},e._l(t.row.process,function(e,t){return i("el-step",{key:t,staticClass:"detail",attrs:{title:e.name}})}),1)]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("nSKQ")},null,null);t.default=o.exports},qYX3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:姓名",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"},{validator:function(e,t,i){/^1[3|4|5|7|8][0-9]\d{8}$/.test(t)?i():i("电话号码格式错误!")},message:"电话号码错误",trigger:"blur"}],gender:[{required:!0,message:"必选:性别",trigger:"blur"}],departmentName:[{required:!0,message:"必选:部门",trigger:"blur"}],email:[{required:!0,message:"必填:电子邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],entryDate:[{required:!0,message:"必填:入职日期",trigger:"blur"}],positionId:[{required:!0,message:"必选:职位",trigger:"change"}],birthday:[{required:!0,message:"必填:出生日期",trigger:"blur"}]},emps:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,employee:{name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",gender:"",departmentName:"",departmentId:"",positionName:"",positionId:""},deps:[],posts:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{formatSex:function(e,t){return"1"==e.gender?"男":"2"==e.gender?"女":"未知"},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},handleNodeClick:function(e){this.employee.departmentName=e.name,this.employee.departmentId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;e.loadEmps(),this.getRequest("/emp/basicdata").then(function(t){if(t&&200==t.status){var i=t.data;e.deps=i.root.department,e.posts=i.root.position}})},keywordsChange:function(e){""==e&&this.loadEmps()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadEmps()},addAndFlushEmp:function(){this.dialogTitle="添加员工",this.emptyEmpData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadEmps()},showEditEmpView:function(e,t){this.dialogTitle="编辑员工",console.log(t),console.log(e),this.employee=t,this.currentRowData=JSON.parse(n()(t)),this.currentIndex=e,this.employee.name=t.name,this.employee.birthday=this.formatDate(new Date(t.birthday)),this.employee.entryDate=this.formatDate(new Date(t.entryDate)),this.employee.departmentId=t.departmentId,this.employee.departmentName=t.departmentName,this.employee.positionId=t.positionId,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.employee.id?(t.tableLoading=!0,console.log(t.employee),t.postRequest("/emp/empAdd",t.employee).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadEmps(),i.emptyEmpData())})):(t.tableLoading=!0,console.log(i.employee),t.postRequest("/emp/empAdd",t.employee).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadEmps(),i.emptyEmpData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadEmps()},deleteEmp:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/emp/deletEmp?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadEmps()}})},loadEmps:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/emp/findbypage?page="+this.currentPage+"&size=10&queryName="+this.keywords).then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.emps=a,t.totalCount=i.data.total,t.emptyEmpData()}})},handleCommand:function(e){var t=this;"logout"==e&&this.$confirm("注销登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.replace({path:"/"})}).catch(function(){t.$message({type:"info",message:"取消"})})},emptyEmpData:function(){console.log("+++++_+++++_"),this.employee={name:"",phone:"",address:"",email:"",birthday:"",entryDate:"",gender:"",departmentName:"",departmentId:"",positionName:"",positionId:""}}},computed:{routes:function(){return this.$store.state.routes}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{display:"inline"}},[i("el-input",{staticStyle:{width:"300px",margin:"0px",padding:"0px"},attrs:{placeholder:"通过员工名搜索员工,记得回车哦...",clearable:"",size:"mini",disabled:e.advanceSearchViewVisible,"prefix-icon":"el-icon-search"},on:{change:e.keywordsChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEmp(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchEmp}},[e._v("搜索\n  \n        ")])],1),e._v(" "),i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加员工")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.employee,rules:e.rules,size:"sam","label-width":"90px"}},[i("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入员工姓名"},model:{value:e.employee.name,callback:function(t){e.$set(e.employee,"name",t)},expression:"employee.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-phone",size:"mini",placeholder:"电话号码..."},model:{value:e.employee.phone,callback:function(t){e.$set(e.employee,"phone",t)},expression:"employee.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"性别:",prop:"gender"}},[i("el-radio-group",{model:{value:e.employee.gender,callback:function(t){e.$set(e.employee,"gender",t)},expression:"employee.gender"}},[i("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),i("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:2}},[e._v("女")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"部门:",prop:"departmentName"}},[i("el-popover",{attrs:{placement:"right",title:"请选择部门",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[i("el-tree",{attrs:{data:e.deps,"default-expand-all":!0,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),i("div",{staticStyle:{width:"200px",height:"26px",display:"inline-flex","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[e._v(e._s(e.employee.departmentName)+"\n            ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-message",size:"mini",placeholder:"电子邮箱地址..."},model:{value:e.employee.email,callback:function(t){e.$set(e.employee,"email",t)},expression:"employee.email"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"职位:",prop:"positionId"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择职位"},model:{value:e.employee.positionId,callback:function(t){e.$set(e.employee,"positionId",t)},expression:"employee.positionId"}},e._l(e.posts,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"出生日期:",prop:"birthday"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"出生日期"},model:{value:e.employee.birthday,callback:function(t){e.$set(e.employee,"birthday",t)},expression:"employee.birthday"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系地址:",prop:"address"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"联系地址..."},model:{value:e.employee.address,callback:function(t){e.$set(e.employee,"address",t)},expression:"employee.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"入职日期:",prop:"entryDate"}},[i("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"入职日期"},model:{value:e.employee.entryDate,callback:function(t){e.$set(e.employee,"entryDate",t)},expression:"employee.entryDate"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.emps,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"姓名",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"departmentName",align:"left",fixed:"",label:"所属部门",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"positionName",align:"left",label:"职位",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"phone",width:"120",align:"left",label:"电话"}}),e._v(" "),i("el-table-column",{attrs:{prop:"gender",width:"80",align:"left",formatter:e.formatSex,label:"性别"}}),e._v(" "),i("el-table-column",{attrs:{prop:"email",width:"180",align:"left",label:"邮箱"}}),e._v(" "),i("el-table-column",{attrs:{width:"100",align:"left",label:"入职日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.entryDate)))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"address",width:"220",align:"left",label:"联系地址"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",fixed:"right",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.$index,t.row)}}},[e._v("编辑\n        ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteEmp(t.row)}}},[e._v("删除\n        ")])]}}])})],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,l,!1,function(e){i("ZSR4")},null,null);t.default=r.exports},s3ol:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("pFYg"),n=i.n(a),o=i("mvHQ"),l=i.n(o),r=i("c/Tr"),s=i.n(r),c=i("7+uW");function d(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=[];return s()(e).forEach(function(e){void 0===e._expanded&&c.default.set(e,"_expanded",t);var o=1;if(void 0!==a&&null!==a&&(o=a+1),c.default.set(e,"_level",o),i&&c.default.set(e,"parent",i),n.push(e),e.child&&e.child.length>0){var l=d(e.child,t,e,o);n=n.concat(l)}}),console.log(n),n}var u={name:"TreeTable",data:function(){return{rules:{name:[{required:!0,message:"必填:姓名",trigger:"blur"}],status:[{required:!0,message:"必选:性质",trigger:"blur"}],parentClientId:[{required:!0,message:"必选:总公司",trigger:"blur"}],phone:[{required:!0,message:"必填:电话号码",trigger:"blur"},{validator:function(e,t,i){/^1[3|4|5|7|8][0-9]\d{8}$/.test(t)?i():i("电话号码格式错误!")},message:"电话号码错误",trigger:"blur"}],email:[{required:!0,message:"必填:电子邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]},chooseson:!0,key:!0,formVisible:!1,formTitle:"",depTextColor:"#c0c4cc",defaultProps:{label:"name",isLeaf:"leaf",children:"child"},showOrHidePop:!1,selectRadio:!1,currentPage:1,totalCount:-1,company:{name:"",phone:"",address:"",email:"",fax:"",status:"up",abbreviation:"",parentName:"",parentClientId:"",infor:"",createDate:""},isChild:!1,tempShops:[],pName:"",pId:0}},props:{data:{type:[Array,Object],required:!0},shops:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1},activeName:{type:String,required:!0}},computed:{formatData:function(){var e=void 0;e=Array.isArray(this.data)?this.data:[this.data];var t=this.evalFunc||d,i=this.evalArgs?[e,this.expandAll].concat(this.evalArgs):[e,this.expandAll];return console.log(i),t.apply(null,i)}},methods:{showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?"display:none;":"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;"},toggleExpanded:function(e){var t=this.formatData[e];t._expanded=!t._expanded},toggleAllExpanded:function(){console.log("****____******999"),this.formatData.forEach(function(e,t){0==e.parentClientId||e.parentClientId==e.id?e._expanded=!0:e._expanded=!1})},iconShow:function(e,t){return 0===e&&t.child&&t.child.length>0},renderHeader:function(e,t){return e("span",[e("input",{attrs:{id:"chooseall",type:"checkbox",style:"border: 1px solid #dcdfe6;border-radius: 2px;box-sizing: border-box;width: 14px;height: 14px;background-color: #fff;"}})])},setchildtobeselect:function(e,t){var i=this;e.forEach(function(e,a){e.checks=t,e.child&&i.setchildtobeselect(e.child,e.checks)})},isallchecked:function(e){var t=this;e.forEach(function(e,i){e.checks||(t.key=!1),e.child&&t.isallchecked(e.child)})},setparentfalse:function(e,t,i){var a=this;e.forEach(function(e,n){e._level==i-1&&e.child&&e.child.forEach(function(i,a){if(i.id==t)return e.checks=!1,!1}),e.child&&a.setparentfalse(e.child,t,i)})},setparenttrue:function(e,t,i){var a=this;e.forEach(function(e,n){if(e._level==i-1&&e.child){var o=!0,l=!1;e.child.forEach(function(e,i){e.id==t&&(l=!0),e.checks||(o=!1)}),o&&l&&(e.checks=!0)}e.child&&a.setparentfalse(e.child,t,i)})},toselect:function(e){console.log(e),e.child&&this.setchildtobeselect(e.child,e.checks),this.key=!0,this.isallchecked(this.formatData),e.checks?this.setparenttrue(this.formatData,e.id,e._level):(this.setparentfalse(this.formatData,e.id,e._level),document.getElementById("chooseall").checked=!1),this.key&&(document.getElementById("chooseall").checked=!0)},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},onTreeDataChange:function(){},handleNodeClick:function(e){this.company.parentName=e.name,this.company.parentClientId=e.id,this.pId=e.id,this.pName=e.name,this.showOrHidePop=!1,this.depTextColor="#606266"},clearChoose:function(){this.company.parentName="",this.company.parentClientId=0},cancelChoos:function(){console.log(this.pName),this.company.parentName=this.pName,this.company.parentClientId=this.pId},initData:function(){var e=this.activeName;this.loadData(e)},keywordsChange:function(e){if(""==e){var t=this.activeName;this.loadData(t)}},currentChange:function(e){this.currentPage=e;var t=this.activeName;this.loadData(t)},addAndFlushData:function(){this.formTitle="添加客户",this.formVisible=!0},searchData:function(){var e=this.activeName;this.loadData(e)},addChild:function(e){console.log(e),this.formTitle="添加子公司";var t=e,i=_.cloneDeep(t);console.log(e),this.isChild=!0,this.selectRadio=!0,0==i.parentClientId||i.parentClientId==i.id?(delete i.child,this.tempShops=[],this.tempShops.push(i),this.company.parentName=i.name,this.company.parentClientId=i.id,this.company.status=i.status):(this.tempShops=[],void 0!=i.parent&&delete i.parent,this.tempShops.push(i),this.company.parentName=i.name,this.company.parentClientId=i.parentClientId,this.company.status=i.status),this.formVisible=!0},showEditEmpView:function(e){console.log(e),this.isChild=!1,this.tempShops=[],this.formTitle="编辑客户信息",this.company=e,this.selectRadio=!0,console.log(e),this.company.parentClientId=e.parentClientId,this.company.createDate=e.createDate,this.company.parentName=e.parentName,delete this.company.purchasePlan,delete this.company.product,this.formVisible=!0},addData:function(e){var t=this;this.formVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=_.cloneDeep(t.company),o=[],r=l()(a.child,function(e,t){if("object"===(void 0===t?"undefined":n()(t))&&null!==t){if(-1!==o.indexOf(t))return;o.push(t)}return t});o=null,a.child=r,void 0!=a.parentClientId&&null!=a.parentClientId&&""!=a.parentClientId||(a.parentClientId=0,a.parentName=""),delete a.parent,console.log(a),t.company.id?(i.tableLoading=!0,t.postRequest("/client/update",a).then(function(e){if(i.tableLoading=!1,e&&200==e.status){i.formVisible=!1;var t=i.activeName;i.loadData(t),i.emptyData()}})):(t.tableLoading=!0,t.postRequest("/client/add",a).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.formVisible=!1;var t=i.activeName;i.loadData(t),i.emptyData()}}))})},cancelOpt:function(){this.formVisible=!1,this.isChild=!1,this.tempShops=[],this.selectRadio=!1,this.emptyData()},deleteData:function(e){var t=this,i=this;this.$confirm("此操作将删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("55"),i.getRequest("/client/delete?id="+e.id).then(function(e){if(i.tableLoading=!1,console.log("777777"),e&&200==e.status){e.data;var a=t.activeName;i.loadData(a)}})}).catch(function(){})},doDelete:function(e){var t=this;console.log("666"),this.tableLoading=!0;var i=this;this.getRequest("/client/delete?id="+e).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;var a=t.activeName;i.loadData(a)}})},loadData:function(e){this.$emit("headCallBack")},emptyData:function(){console.log("+++++_+++++_"),this.company={name:"",phone:"",address:"",email:"",fax:"",status:"",abbreviation:"",parentName:"",parentClientId:"",infor:"",createDate:""}}},mounted:function(){var e=this;this.$nextTick(function(){var t=e,i=document.getElementById("chooseall");i.onchange=function(e){console.log(i.checked),1==i.checked?t.setchildtobeselect(t.formatData,!0):t.setchildtobeselect(t.formatData,!1)},e.toggleAllExpanded()})}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.formTitle,"close-on-click-modal":!1,visible:e.formVisible,width:"500px"},on:{"update:visible":function(t){e.formVisible=t},close:e.cancelOpt}},[e.formVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addDataForm",attrs:{model:e.company,rules:e.rules,size:"sam","label-width":"90px"}},[i("el-form-item",{attrs:{label:"站名:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请输入客户名称"},model:{value:e.company.name,callback:function(t){e.$set(e.company,"name",t)},expression:"company.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"简称:",prop:"abbreviation"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-phone",size:"mini",placeholder:"局简称..."},model:{value:e.company.abbreviation,callback:function(t){e.$set(e.company,"abbreviation",t)},expression:"company.abbreviation"}})],1),e._v(" "),e.isChild?i("el-form-item",{attrs:{label:"总公司:",prop:"parentClientId"}},[i("el-popover",{attrs:{placement:"right",title:"请选择公司",trigger:"hover"},model:{value:e.showOrHidePop,callback:function(t){e.showOrHidePop=t},expression:"showOrHidePop"}},[i("el-tree",{attrs:{data:e.tempShops,"default-expand-all":!1,props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}}),e._v(" "),i("div",{staticStyle:{width:"200px",height:"28px",display:"inline-flex","justify-content":"space-between","font-size":"13px",border:"1px","border-radius":"5px","border-style":"solid","padding-left":"13px","box-sizing":"border-box","border-color":"#dcdfe6",cursor:"pointer","align-items":"center"},style:{color:e.depTextColor},attrs:{slot:"reference"},on:{click:e.showDepTree},slot:"reference"},[i("div",[e._v(e._s(e.company.parentName))]),e._v(" "),i("div",{staticClass:"el-icon-circle-close",staticStyle:{color:"#606266"},on:{click:e.clearChoose}})])],1)],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"电话:",prop:"phone"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司电话..."},model:{value:e.company.phone,callback:function(t){e.$set(e.company,"phone",t)},expression:"company.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"传真:",prop:"fax"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司传真..."},model:{value:e.company.fax,callback:function(t){e.$set(e.company,"fax",t)},expression:"company.fax"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-message",size:"mini",placeholder:"公司邮箱..."},model:{value:e.company.email,callback:function(t){e.$set(e.company,"email",t)},expression:"company.email"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"性质:",prop:"status"}},[i("el-radio-group",{attrs:{disabled:e.selectRadio},model:{value:e.company.status,callback:function(t){e.$set(e.company,"status",t)},expression:"company.status"}},[i("el-radio",{attrs:{label:"down"}},[e._v("下游")]),e._v(" "),i("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:e.up}},[e._v("上游")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"地址:",prop:"address"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"公司地址..."},model:{value:e.company.address,callback:function(t){e.$set(e.company,"address",t)},expression:"company.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"详细地址:",prop:"addressDetails"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"详细地址..."},model:{value:e.company.addressDetails,callback:function(t){e.$set(e.company,"addressDetails",t)},expression:"company.addressDetails"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.formVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData("addDataForm")}}},[e._v("确 定")])],1)]),e._v(" "),[i("el-table",e._b({ref:"multipleTable",attrs:{data:e.formatData,"row-style":e.showRow}},"el-table",e.$attrs,!1),[i("el-table-column",{attrs:{"render-header":e.renderHeader,width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-checkbox",{on:{change:function(i){return e.toselect(t.row)}},model:{value:t.row.checks,callback:function(i){e.$set(t.row,"checks",i)},expression:"scope.row.checks"}})]}}])}),e._v(" "),0===e.columns.length?i("el-table-column",{attrs:{width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,function(e){return i("span",{key:e,staticClass:"ms-tree-space"})}),e._v(" "),e.iconShow(0,t.row)?i("span",{staticClass:"tree-ctrl",on:{click:function(i){return e.toggleExpanded(t.$index)}}},[t.row._expanded?i("i",{staticClass:"el-icon-remove"}):i("i",{staticClass:"el-icon-circle-plus"})]):e._e(),e._v("\n            "+e._s(t.$index)+"\n             ")]}}],null,!1,4157867417)}):e._l(e.columns,function(t,a){return i("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(n.row._level,function(t){return 0===a?i("span",{key:t,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.iconShow(a,n.row)?i("span",{staticClass:"tree-ctrl",on:{click:function(t){return e.toggleExpanded(n.$index)}}},[n.row._expanded?i("i",{staticClass:"el-icon-remove"}):i("i",{staticClass:"el-icon-circle-plus"})]):e._e(),e._v("\n               "+e._s(n.row[t.value])+"\n             ")]}}],null,!0)})}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditEmpView(t.row)}}},[e._v("编辑\n             ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.addChild(t.row)}}},[e._v("添加子公司")]),e._v(" "),t.row.child.length?e._e():i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n             ")])]}}])})],2)],e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"2px"}},[i("el-pagination",{attrs:{background:"","page-size":10,"pager-count":11,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],2)},staticRenderFns:[]};var h=i("VU/8")(u,p,!1,function(e){i("EfN1"),i("QZs9")},"data-v-107f70ff",null);t.default=h.exports},tPxm:function(e,t){},tvR6:function(e,t){},ucWm:function(e,t){},v2zK:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",keywords:"",tableLoading:!1,advanceSearchViewVisible:!1,rules:{name:[{required:!0,message:"必填:中文名",trigger:"blur"}]},units:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogTitle:"",currentPage:1,formLabelWidth:"120px",totalCount:-1,unit:{name:"",code:""},deps:[],dialogTableVisible:!1,dialogFormVisible:!1,currentRowData:{},currentIndex:""}},mounted:function(){this.initData()},methods:{initData:function(){this.loadDatas()},keywordsChange:function(e){""==e&&this.loadDatas()},currentChange:function(e){this.currentPage=e,console.log(this.currentPage),this.loadDatas()},addAndFlushEmp:function(){this.dialogTitle="添加单位",this.emptyData(),this.dialogFormVisible=!0},searchEmp:function(){this.loadDatas()},showEditDataView:function(e,t){this.dialogTitle="编辑",console.log(t),console.log(e),this.unit=t,delete this.unit.sysMenu,delete this.unit.users,this.dialogFormVisible=!0},addEmp:function(e){var t=this;this.dialogFormVisible=!0;var i=this;this.$refs[e].validate(function(e){if(!e)return!1;t.unit.id?(t.tableLoading=!0,console.log(t.unit),t.postRequest("/color/add",t.unit).then(function(e){i.tableLoading=!1,e&&200==e.status&&(i.dialogFormVisible=!1,i.loadDatas(),i.emptyData())})):(t.tableLoading=!0,console.log(i.unit),t.postRequest("/color/add",t.unit).then(function(e){if(i.tableLoading=!1,e&&200==e.status){e.data;i.dialogFormVisible=!1,i.loadDatas(),i.emptyData()}}))})},cancelOpt:function(){this.dialogFormVisible=!1,this.loadDatas()},deleteData:function(e){var t=this;this.$confirm("此操作将删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.getRequest("/color/delete?id="+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){e.data;t.loadDatas()}})},loadDatas:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/color/findAll").then(function(i){if(e.tableLoading=!1,i&&200==i.status){var a=i.data.data;t.units=a,t.totalCount=i.data.total,t.emptyData()}})},emptyData:function(){console.log("+++++_+++++_"),this.unit={name:"",code:""}}},computed:{routes:function(){return this.$store.state.routes}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addAndFlushEmp}},[e._v("添加")])],1),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.cancelOpt}},[e.dialogFormVisible?i("div",{staticStyle:{width:"100%"}},[i("el-form",{ref:"addEmpForm",attrs:{model:e.unit,rules:e.rules,size:"sam","label-width":"90px"}},[i("el-form-item",{attrs:{label:"颜色:",prop:"name"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"颜色"},model:{value:e.unit.name,callback:function(t){e.$set(e.unit,"name",t)},expression:"unit.name"}})],1)],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEmp("addEmpForm")}}},[e._v("确 定")])],1)]),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.units,border:""}},[i("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"颜色",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini"},on:{click:function(i){return e.showEditDataView(t.$index,t.row)}}},[e._v("编辑\n         ")]),e._v(" "),i("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("删除\n         ")])]}}])})],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("3CVU")},null,null);t.default=o.exports},wd3D:function(e,t){},xJsL:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0,loginForm:{username:"张三",password:"123"},loading:!1}},mounted:function(){this.$refs.loginFocus.focus()},methods:{submitClick:function(){var e=this;this.loading=!0,this.postRequest("/login",{username:this.loginForm.username,password:this.loginForm.password}).then(function(t){if(e.loading=!1,console.log(t),t&&200==t.status){var i=t.data;console.log(i),e.$store.commit("login",i.obj);var a=e.$route.query.redirect;console.log(e.$route),e.$router.replace({path:"/"==a||void 0==a?"/home":a})}})}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"login-container",attrs:{rules:e.rules,"label-position":"left","label-width":"0px",model:e.loginForm}},[i("h3",{staticClass:"login_title"},[e._v("系统登录")]),e._v(" "),i("el-form-item",{attrs:{prop:"username"}},[i("el-input",{ref:"loginFocus",attrs:{type:"text","auto-complete":"off",placeholder:"账号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitClick(t)}},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitClick(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),i("el-checkbox",{staticClass:"login_remember",attrs:{"label-position":"left"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),e._v(" "),i("el-form-item",{staticStyle:{width:"100%"}},[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",autofocus:""},on:{click:e.submitClick},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.submitClick(t):null}}},[e._v("登录")])],1)],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(e){i("tPxm")},null,null);t.default=o.exports},xok9:function(e,t){},zh13:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.d9c51464c09361c52a93.js.map